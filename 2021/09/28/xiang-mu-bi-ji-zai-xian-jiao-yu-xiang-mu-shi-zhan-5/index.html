<!DOCTYPE html>
<html lang="zh-CN">
<head hexo-theme='https://github.com/volantis-x/hexo-theme-volantis/tree/4.3.1'>
  <meta charset="utf-8">
  <!-- SEO相关 -->
  
    
  
  <!-- 渲染优化 -->
  <meta http-equiv='x-dns-prefetch-control' content='on' />
  <link rel='dns-prefetch' href='https://cdn.jsdelivr.net'>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <link rel="preload" href="/css/first.css" as="style">
  

  <!-- 页面元数据 -->
  
  <title>【项目笔记】在线教育项目实战5 - Reria&#39;s BLOG</title>
  
    <meta name="keywords" content="SpringBoot,Vue,项目,SpringCloud">
  

  

  <!-- feed -->
  

  <!-- import meta -->
  

  <!-- link -->
  
    <link rel="shortcut icon" type='image/x-icon' href="https://cdn.jsdelivr.net/gh/mayanming696/CDN/image/sun.svg">
  

  <!-- import link -->
  
  
  <link rel="stylesheet" href="/css/iconfont.css">
  <link rel="stylesheet" href="/css/myIconColor.css">
  <link rel="stylesheet" href="/css/myStyle.css">
  

  
    
<link rel="stylesheet" href="/css/first.css">

  

  
  <link rel="stylesheet" href="/css/style.css" media="print" onload="this.media='all';this.onload=null">
  <noscript><link rel="stylesheet" href="/css/style.css"></noscript>
  

  <script id="loadcss"></script>

  
<script>
if (/*@cc_on!@*/false || (!!window.MSInputMethodContext && !!document.documentMode))
    document.write(
	'<style>'+
		'html{'+
			'overflow-x: hidden !important;'+
			'overflow-y: hidden !important;'+
		'}'+
		'.kill-ie{'+
			'text-align:center;'+
			'height: 100%;'+
			'margin-top: 15%;'+
			'margin-bottom: 5500%;'+
		'}'+
	'</style>'+
    '<div class="kill-ie">'+
        '<h1><b>抱歉，您的浏览器无法访问本站</b></h1>'+
        '<h3>微软已经于2016年终止了对 Internet Explorer (IE) 10 及更早版本的支持，<br/>'+
        '继续使用存在极大的安全隐患，请使用当代主流的浏览器进行访问。</h3><br/>'+
        '<a target="_blank" rel="noopener" href="https://www.microsoft.com/zh-cn/WindowsForBusiness/End-of-IE-support"><strong>了解详情 ></strong></a>'+
    '</div>');
</script>


<noscript>
	<style>
		html{
			overflow-x: hidden !important;
			overflow-y: hidden !important;
		}
		.kill-noscript{
			text-align:center;
			height: 100%;
			margin-top: 15%;
			margin-bottom: 5500%;
		}
	</style>
    <div class="kill-noscript">
        <h1><b>抱歉，您的浏览器无法访问本站</b></h1>
        <h3>本页面需要浏览器支持（启用）JavaScript</h3><br/>
        <a target="_blank" rel="noopener" href="https://www.baidu.com/s?wd=启用JavaScript"><strong>了解详情 ></strong></a>
    </div>
</noscript>

</head>


  <body>
    

  <header id="l_header"
    class="l_header auto shadow floatable "
    style='opacity: 0' >
    <div class='container'>
      <div id='wrapper'>
        <div class='nav-sub'>
          <p class="title"></p>
          <ul class='switcher nav-list-h m-phone' id="pjax-header-nav-list">
            <li><a id="s-comment" class="fas fa-comments fa-fw" target="_self" href='javascript:void(0)'></a></li>
            
              <li><a id="s-toc" class="s-toc fas fa-list fa-fw" target="_self" href='javascript:void(0)'></a></li>
              
          </ul>
        </div>
        <div class="nav-main">
          
            
              <a class="title flat-box" target="_self" href='/'>
                
                  <img no-lazy class='logo' src='https://gitee.com/ReRia/images/raw/master/img/58.png' />
                  
                    
                        
              </a>
              

                <div class='menu navigation'>
                  <ul class='nav-list-h m-pc'>
                    
                      
                                  
                                    
                        
                              <li>
                                <a class="menuitem flat-box faa-parent animated-hover" href=/
                                  
                                        
                                              
                                                id="home"
                                                  >
                                                    <i class='fas fa-fan fa-spin fa-fw'></i>
                                                      
                                                        主页
                                </a>
                                
                              </li>
                              
                                
                                      
                                    
                        
                              <li>
                                <a class="menuitem flat-box faa-parent animated-hover" 
                                  
                                        
                                              >
                                                    <i class='fas fa-paper-plane fa-fw'></i>
                                                      
                                                        博文
                                </a>
                                
                                  <ul class="list-v">
                                    
                                      
                        
                              <li>
                                <a class="menuitem flat-box faa-parent animated-hover" href=/categories/
                                  
                                        
                                              
                                                id="categories"
                                                  >
                                                    <i class='fas fa-folder-open fa-fw'></i>
                                                      
                                                        分类
                                </a>
                                
                              </li>
                              
                                
                                        
                                      
                        
                              <li>
                                <a class="menuitem flat-box faa-parent animated-hover" href=/tags/
                                  
                                        
                                              
                                                id="tags"
                                                  >
                                                    <i class='fas fa-tags fa-fw'></i>
                                                      
                                                        标签
                                </a>
                                
                              </li>
                              
                                
                                        
                                      
                        
                              <li>
                                <a class="menuitem flat-box faa-parent animated-hover" href=/archives/
                                  
                                        
                                              
                                                id="archives"
                                                  >
                                                    <i class='fas fa-archive fa-fw'></i>
                                                      
                                                        归档
                                </a>
                                
                              </li>
                              
                                
                                        
                                  </ul>
                                  
                              </li>
                              
                                
                                      
                                    
                        
                              <li>
                                <a class="menuitem flat-box faa-parent animated-hover" 
                                  
                                        
                                              >
                                                    <i class='fas fa-map-signs fa-fw'></i>
                                                      
                                                        导航
                                </a>
                                
                                  <ul class="list-v">
                                    
                                      
                        
                              <li>
                                <a class="menuitem flat-box faa-parent animated-hover" href=/artitalk/
                                  
                                        
                                              
                                                id="artitalk"
                                                  >
                                                    <i class='fas fa-comment-dots fa-fw'></i>
                                                      
                                                        说说
                                </a>
                                
                              </li>
                              
                                
                                        
                                      
                        
                              <li>
                                <a class="menuitem flat-box faa-parent animated-hover" href=/bb/
                                  
                                        
                                              
                                                id="bb"
                                                  >
                                                    <i class='iconfont icon-27shijianxian fa-fw'></i>
                                                      
                                                        时间线
                                </a>
                                
                              </li>
                              
                                
                                        
                                      
                        
                              <li>
                                <a class="menuitem flat-box faa-parent animated-hover" href=/bangumis/
                                  
                                        
                                              
                                                id="bangumis"
                                                  >
                                                    <i class='iconfont icon-bilibili fa-fw'></i>
                                                      
                                                        追番
                                </a>
                                
                              </li>
                              
                                
                                        
                                  </ul>
                                  
                              </li>
                              
                                
                                      
                                    
                        
                              <li>
                                <a class="menuitem flat-box faa-parent animated-hover" 
                                  
                                        
                                              >
                                                    <i class='fas fa-train fa-fw'></i>
                                                      
                                                        开往
                                </a>
                                
                                  <ul class="list-v">
                                    
                                      
                        
                              <li>
                                <a class="menuitem flat-box faa-parent animated-hover" href=/friends/
                                  
                                        
                                              
                                                id="friends"
                                                  >
                                                    <i class='fas fa-link fa-fw'></i>
                                                      
                                                        友链
                                </a>
                                
                              </li>
                              
                                
                                        
                                      
                        
                              <li>
                                <a class="menuitem flat-box faa-parent animated-hover" href=/about/
                                  
                                        
                                              
                                                id="about"
                                                  >
                                                    <i class='fas fa-info-circle fa-fw'></i>
                                                      
                                                        关于
                                </a>
                                
                              </li>
                              
                                
                                        
                                  </ul>
                                  
                              </li>
                              
                                
                                      
                                    
                        
                                
                            <li>
                              <a class="menuitem flat-box">
                                <i class='fas fa-compact-disc fa-spin fa-fw music'></i>
                                音乐
                              </a>
                              <ul class="list-v">
                                <li>
                                  <div class="aplayer-container">
                                    

  
    <meting-js
      theme='#1BCDFC'
      autoplay='false'
      volume='0.5'
      loop='all'
      order='list'
      fixed='false'
      list-max-height='320px'
      server='tencent'
      type='playlist'
      id='8119036336'
      list-folded='true'>
    </meting-js>
  


                                  </div>
                                </li>
                              </ul>
                            <li>
                              
                                
                                
                                      
                                    
                        
                            <li>
                              <a class="menuitem flat-box header toggle-mode-btn">
                                <i class='fas fa-moon fa-fw'></i>
                                开/关灯
                              </a>
                            <li>
                              
                                
                                      
                  </ul>
                </div>

                <div id="weather"></div>
                <script src="/js/weather.js"></script>


                <div class="m_search">
                  <form name="searchform" class="form u-search-form">
                    <i class="icon fas fa-search fa-fw"></i>
                    <input type="text" class="input u-search-input"
                      placeholder="要搜什么呢？" />
                  </form>
                </div>

                <ul class='switcher nav-list-h m-phone'>
                  
                    <li><a class="s-search fas fa-search fa-fw" target="_self" href='javascript:void(0)'></a></li>
                    
                      <li>
                        <a class="s-menu fas fa-bars fa-fw" target="_self" href='javascript:void(0)'></a>
                        <ul class="menu-phone list-v navigation white-box">
                          
                            
                        
                              <li>
                                <a class="menuitem flat-box faa-parent animated-hover" href=/
                                  
                                        
                                              
                                                id="home"
                                                  >
                                                    <i class='fas fa-fan fa-spin fa-fw'></i>
                                                      
                                                        主页
                                </a>
                                
                              </li>
                              
                                
                              
                            
                        
                              <li>
                                <a class="menuitem flat-box faa-parent animated-hover" 
                                  
                                        
                                              >
                                                    <i class='fas fa-paper-plane fa-fw'></i>
                                                      
                                                        博文
                                </a>
                                
                                  <ul class="list-v">
                                    
                                      
                        
                              <li>
                                <a class="menuitem flat-box faa-parent animated-hover" href=/categories/
                                  
                                        
                                              
                                                id="categories"
                                                  >
                                                    <i class='fas fa-folder-open fa-fw'></i>
                                                      
                                                        分类
                                </a>
                                
                              </li>
                              
                                
                                        
                                      
                        
                              <li>
                                <a class="menuitem flat-box faa-parent animated-hover" href=/tags/
                                  
                                        
                                              
                                                id="tags"
                                                  >
                                                    <i class='fas fa-tags fa-fw'></i>
                                                      
                                                        标签
                                </a>
                                
                              </li>
                              
                                
                                        
                                      
                        
                              <li>
                                <a class="menuitem flat-box faa-parent animated-hover" href=/archives/
                                  
                                        
                                              
                                                id="archives"
                                                  >
                                                    <i class='fas fa-archive fa-fw'></i>
                                                      
                                                        归档
                                </a>
                                
                              </li>
                              
                                
                                        
                                  </ul>
                                  
                              </li>
                              
                                
                              
                            
                        
                              <li>
                                <a class="menuitem flat-box faa-parent animated-hover" 
                                  
                                        
                                              >
                                                    <i class='fas fa-map-signs fa-fw'></i>
                                                      
                                                        导航
                                </a>
                                
                                  <ul class="list-v">
                                    
                                      
                        
                              <li>
                                <a class="menuitem flat-box faa-parent animated-hover" href=/artitalk/
                                  
                                        
                                              
                                                id="artitalk"
                                                  >
                                                    <i class='fas fa-comment-dots fa-fw'></i>
                                                      
                                                        说说
                                </a>
                                
                              </li>
                              
                                
                                        
                                      
                        
                              <li>
                                <a class="menuitem flat-box faa-parent animated-hover" href=/bb/
                                  
                                        
                                              
                                                id="bb"
                                                  >
                                                    <i class='iconfont icon-27shijianxian fa-fw'></i>
                                                      
                                                        时间线
                                </a>
                                
                              </li>
                              
                                
                                        
                                      
                        
                              <li>
                                <a class="menuitem flat-box faa-parent animated-hover" href=/bangumis/
                                  
                                        
                                              
                                                id="bangumis"
                                                  >
                                                    <i class='iconfont icon-bilibili fa-fw'></i>
                                                      
                                                        追番
                                </a>
                                
                              </li>
                              
                                
                                        
                                  </ul>
                                  
                              </li>
                              
                                
                              
                            
                        
                              <li>
                                <a class="menuitem flat-box faa-parent animated-hover" 
                                  
                                        
                                              >
                                                    <i class='fas fa-train fa-fw'></i>
                                                      
                                                        开往
                                </a>
                                
                                  <ul class="list-v">
                                    
                                      
                        
                              <li>
                                <a class="menuitem flat-box faa-parent animated-hover" href=/friends/
                                  
                                        
                                              
                                                id="friends"
                                                  >
                                                    <i class='fas fa-link fa-fw'></i>
                                                      
                                                        友链
                                </a>
                                
                              </li>
                              
                                
                                        
                                      
                        
                              <li>
                                <a class="menuitem flat-box faa-parent animated-hover" href=/about/
                                  
                                        
                                              
                                                id="about"
                                                  >
                                                    <i class='fas fa-info-circle fa-fw'></i>
                                                      
                                                        关于
                                </a>
                                
                              </li>
                              
                                
                                        
                                  </ul>
                                  
                              </li>
                              
                                
                              
                            
                        
                                
                                
                                
                              
                            
                        
                            <li>
                              <a class="menuitem flat-box header toggle-mode-btn">
                                <i class='fas fa-moon fa-fw'></i>
                                开/关灯
                              </a>
                            <li>
                              
                                
                              
                        </ul>
                      </li>
                </ul>
        </div>
      </div>
    </div>
  </header>
      <div id="l_body">
        <div id="l_cover">
  
    
        <div id="half" class='cover-wrapper post search' style="display: ;">
          
            <div id='cover-backstretch'></div>
          
          <div class='cover-body'>
  <div class='top'>
    
    
      <p class="title">Hello world!</p>
    
    
    <!-- 自定义封面滚动字体 -->
    <div id="binft"></div>
    <script>
      var binft = function (r) {
        function t() {
          return b[Math.floor(Math.random() * b.length)]
        }
        function e() {
          return String.fromCharCode(94 * Math.random() + 33)
        }
        function n(r) {
          for (var n = document.createDocumentFragment(), i = 0; r > i; i++) {
            var l = document.createElement("span");
            l.textContent = e(), l.style.color = t(), n.appendChild(l)
          }
          return n
        }
        function i() {
          var t = o[c.skillI];
          c.step ? c.step-- : (c.step = g, c.prefixP < l.length ? (c.prefixP >= 0 && (c.text += l[c.prefixP]), c.prefixP++) : "forward" === c.direction ? c.skillP < t.length ? (c.text += t[c.skillP], c.skillP++) : c.delay ? c.delay-- : (c.direction = "backward", c.delay = a) : c.skillP > 0 ? (c.text = c.text.slice(0, -1), c.skillP--) : (c.skillI = (c.skillI + 1) % o.length, c.direction = "forward")), r.textContent = c.text, r.appendChild(n(c.prefixP < l.length ? Math.min(s, s + c.prefixP) : Math.min(s, t.length - c.skillP))), setTimeout(i, d)
        }
        var l = "",
          o = ["山有木兮木有枝，心悦君兮君不知。", "人生若只如初见，何事秋风悲画扇。", "十年生死两茫茫，不思量，自难忘。", "曾经沧海难为水，除却巫山不是云。", "洛中何郁郁，冠带自相索。", "只愿君心似我心，定不负相思意。", "愿得一心人，白头不相离。", "入我相思门，知我相思苦。"].map(function (r) {
            return r + ""
          }),
          a = 2,
          g = 1,
          s = 5,
          d = 75,
          b = ["rgb(110,64,170)", "rgb(150,61,179)", "rgb(191,60,175)", "rgb(228,65,157)", "rgb(254,75,131)", "rgb(255,94,99)", "rgb(255,120,71)", "rgb(251,150,51)", "rgb(226,183,47)", "rgb(198,214,60)", "rgb(175,240,91)", "rgb(127,246,88)", "rgb(82,246,103)", "rgb(48,239,130)", "rgb(29,223,163)", "rgb(26,199,194)", "rgb(35,171,216)", "rgb(54,140,225)", "rgb(76,110,219)", "rgb(96,84,200)"],
          c = {
            text: "",
            prefixP: -s,
            skillI: 0,
            skillP: 0,
            direction: "forward",
            delay: a,
            step: g
          };
        i()
      };
      binft(document.getElementById('binft'));
    </script>
  </div>
  <div class='bottom'>
    
      <div class="m_search">
        <form name="searchform" class="form u-search-form">
          <input type="text" class="input u-search-input" placeholder="☜(ﾟヮﾟ☜)在这里输入你要查找的内容哦" />
          <i class="icon fas fa-search fa-fw"></i>
        </form>
      </div>
    
    <div class='menu navigation'>
      <div class='list-h'>
        
          
            <a href="/"
              
              
              id="home">
              <p>主页</p>
            </a>
          
            <a href="/categories/"
              
              
              id="categories">
              <p>分类</p>
            </a>
          
            <a href="/tags/"
              
              
              id="tags">
              <p>标签</p>
            </a>
          
            <a href="/archives/"
              
              
              id="archives">
              <p>归档</p>
            </a>
          
        
      </div>
    </div>
  </div>
</div>

          <div id="scroll-down" style="display: none;"><i class="fa fa-chevron-down scroll-down-effects"></i></div>
        </div>
    
  
  </div>

          <div id="safearea">
            <div class="body-wrapper" id="pjax-container">
              

<div class='l_main'>
  <article class="article post white-box reveal md shadow floatable article-type-post" id="post" itemscope itemprop="blogPost">
  


  
  <div class="article-meta" id="top">
    
    
    
      <h1 class="title">
        【项目笔记】在线教育项目实战5
      </h1>
      <div class='new-meta-box'>
        
          
            <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
    <p>发布于：2021年9月28日</p>
  </a>
</div>

          
        
          
            
  <div class='new-meta-item category'>
    <a class='notlink'>
      <i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>
      <a class="category-link" href="/categories/%E9%A1%B9%E7%9B%AE/">项目</a>
    </a>
  </div>


          
        
          
            
  <div class="new-meta-item wordcount">
    <a class='notlink'>
      <i class="fas fa-keyboard fa-fw" aria-hidden="true"></i>
      <p>字数：11.4k字</p>
    </a>
  </div>
  <div class="new-meta-item readtime">
    <a class='notlink'>
      <i class="fas fa-hourglass-half fa-fw" aria-hidden="true"></i>
      <p>时长：59分钟</p>
    </a>
  </div>


          
        
          
            
  <div class="new-meta-item browse leancloud">
    <a class='notlink'>
      
      <div id="lc-pv" data-title="【项目笔记】在线教育项目实战5" data-path="/2021/09/28/xiang-mu-bi-ji-zai-xian-jiao-yu-xiang-mu-shi-zhan-5/">
        <i class="fas fa-eye fa-fw" aria-hidden="true"></i>
        <span id='number'><i class="fas fa-circle-notch fa-spin fa-fw" aria-hidden="true"></i></span>
        次浏览
      </div>
    </a>
  </div>


          
        
      </div>
    
  </div>


  
  
  <blockquote>
<p>这里开始是前台部分</p>
</blockquote>
<h2 id="搭建项目前台环境"><a href="#搭建项目前台环境" class="headerlink" title="搭建项目前台环境"></a>搭建项目前台环境</h2><blockquote>
<p>使用服务端渲染技术NuxtJS框架</p>
</blockquote>
<p>![02 搭建项目前台环境（nuxt）](<a target="_blank" rel="noopener" href="https://gitee.com/ReRia/images/raw/master/img/02">https://gitee.com/ReRia/images/raw/master/img/02</a> 搭建项目前台环境（nuxt）.png)</p>
<h3 id="搭建NuxtJS"><a href="#搭建NuxtJS" class="headerlink" title="搭建NuxtJS"></a>搭建NuxtJS</h3><blockquote>
<ol>
<li>先赋值template至工作区</li>
<li>修改.eslintrc.js（复制后台的即可）</li>
<li>修改package.json，必须修改其中的name,version,decription,author等</li>
<li>修改nuxt.config.js</li>
<li>安装依赖npm install</li>
<li>测试运行npm run dev</li>
</ol>
</blockquote>
<h3 id="NUXT目录结构"><a href="#NUXT目录结构" class="headerlink" title="NUXT目录结构"></a>NUXT目录结构</h3><blockquote>
<ol>
<li>资源目录 assets<br>用于组织未编译的静态资源如 LESS、SASS 或 JavaScript。</li>
<li>组件目录 components<br>用于组织应用的 Vue.js 组件。Nuxt.js 不会扩展增强该目录下 Vue.js 组件，即这些组件不会像页面组件那样有 asyncData 方法的特性。</li>
<li>布局目录 layouts<br>用于组织应用的布局组件。<ol>
<li>default.vue：设置头尾信息</li>
</ol>
</li>
<li>页面目录 pages<br>用于组织应用的路由及视图。Nuxt.js 框架读取该目录下所有的 .vue 文件并自动生成对应的路由配置。</li>
<li>插件目录 plugins<br>用于组织那些需要在 根vue.js应用 实例化之前需要运行的 Javascript 插件。</li>
<li>nuxt.config.js 文件<br>nuxt.config.js 文件用于组织Nuxt.js 应用的个性化配置，以便覆盖默认配置。</li>
</ol>
</blockquote>
<h3 id="引入基础资源和默认头尾视图"><a href="#引入基础资源和默认头尾视图" class="headerlink" title="引入基础资源和默认头尾视图"></a>引入基础资源和默认头尾视图</h3><blockquote>
<p>Nuxt本身基于vue，但是没有引入element-ui，所以需要引入</p>
<p>这里还引入了其他需要的资源，直接cv即可</p>
<ol>
<li>assets</li>
<li>layout -&gt; default.vue</li>
<li>pages -&gt; index.vue</li>
</ol>
</blockquote>
<h4 id="default-vue"><a href="#default-vue" class="headerlink" title="default.vue"></a>default.vue</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;in-wrap&quot;&gt;</span><br><span class="line">    &lt;!-- 公共头引入 --&gt;</span><br><span class="line">    &lt;header id=&quot;header&quot;&gt;</span><br><span class="line">      &lt;section class=&quot;container&quot;&gt;</span><br><span class="line">        &lt;h1 id=&quot;logo&quot;&gt;</span><br><span class="line">          &lt;a href=&quot;#&quot; title=&quot;谷粒学院&quot;&gt;</span><br><span class="line">            &lt;img src=&quot;~/assets/img/logo.png&quot; width=&quot;100%&quot; alt=&quot;谷粒学院&quot; /&gt;</span><br><span class="line">          &lt;/a&gt;</span><br><span class="line">        &lt;/h1&gt;</span><br><span class="line">        &lt;div class=&quot;h-r-nsl&quot;&gt;</span><br><span class="line">          &lt;ul class=&quot;nav&quot;&gt;</span><br><span class="line">            &lt;!-- 固定路由 --&gt;</span><br><span class="line">            &lt;router-link to=&quot;/&quot; tag=&quot;li&quot; active-class=&quot;current&quot; exact&gt;</span><br><span class="line">              &lt;a&gt;首页&lt;/a&gt;</span><br><span class="line">            &lt;/router-link&gt;</span><br><span class="line">            &lt;router-link to=&quot;/course&quot; tag=&quot;li&quot; active-class=&quot;current&quot;&gt;</span><br><span class="line">              &lt;a&gt;课程&lt;/a&gt;</span><br><span class="line">            &lt;/router-link&gt;</span><br><span class="line">            &lt;router-link to=&quot;/teacher&quot; tag=&quot;li&quot; active-class=&quot;current&quot;&gt;</span><br><span class="line">              &lt;a&gt;名师&lt;/a&gt;</span><br><span class="line">            &lt;/router-link&gt;</span><br><span class="line">            &lt;router-link to=&quot;/article&quot; tag=&quot;li&quot; active-class=&quot;current&quot;&gt;</span><br><span class="line">              &lt;a&gt;文章&lt;/a&gt;</span><br><span class="line">            &lt;/router-link&gt;</span><br><span class="line">            &lt;router-link to=&quot;/qa&quot; tag=&quot;li&quot; active-class=&quot;current&quot;&gt;</span><br><span class="line">              &lt;a&gt;问答&lt;/a&gt;</span><br><span class="line">            &lt;/router-link&gt;</span><br><span class="line">          &lt;/ul&gt;</span><br><span class="line">          &lt;!-- / nav --&gt;</span><br><span class="line">          &lt;ul class=&quot;h-r-login&quot;&gt;</span><br><span class="line">            &lt;li v-if=&quot;!loginInfo.id&quot; id=&quot;no-login&quot;&gt;</span><br><span class="line">              &lt;a href=&quot;/login&quot; title=&quot;登录&quot;&gt;</span><br><span class="line">                &lt;em class=&quot;icon18 login-icon&quot;&gt;&amp;nbsp;&lt;/em&gt;</span><br><span class="line">                &lt;span class=&quot;vam ml5&quot;&gt;登录&lt;/span&gt;</span><br><span class="line">              &lt;/a&gt;</span><br><span class="line">              |</span><br><span class="line">              &lt;a href=&quot;/register&quot; title=&quot;注册&quot;&gt;</span><br><span class="line">                &lt;span class=&quot;vam ml5&quot;&gt;注册&lt;/span&gt;</span><br><span class="line">              &lt;/a&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">            &lt;li v-if=&quot;loginInfo.id&quot; id=&quot;is-login-one&quot; class=&quot;mr10&quot;&gt;</span><br><span class="line">              &lt;a id=&quot;headerMsgCountId&quot; href=&quot;#&quot; title=&quot;消息&quot;&gt;</span><br><span class="line">                &lt;em class=&quot;icon18 news-icon&quot;&gt;&amp;nbsp;&lt;/em&gt;</span><br><span class="line">              &lt;/a&gt;</span><br><span class="line">              &lt;q class=&quot;red-point&quot; style=&quot;display: none&quot;&gt;&amp;nbsp;&lt;/q&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">            &lt;li v-if=&quot;loginInfo.id&quot; id=&quot;is-login-two&quot; class=&quot;h-r-user&quot;&gt;</span><br><span class="line">              &lt;a href=&quot;/ucenter&quot; title&gt;</span><br><span class="line">                &lt;img</span><br><span class="line">                  :src=&quot;loginInfo.avatar&quot;</span><br><span class="line">                  width=&quot;30&quot;</span><br><span class="line">                  height=&quot;30&quot;</span><br><span class="line">                  class=&quot;vam picImg&quot;</span><br><span class="line">                  alt</span><br><span class="line">                /&gt;</span><br><span class="line">                &lt;span id=&quot;userName&quot; class=&quot;vam disIb&quot;&gt;&#123;&#123;</span><br><span class="line">                  loginInfo.nickname</span><br><span class="line">                &#125;&#125;&lt;/span&gt;</span><br><span class="line">              &lt;/a&gt;</span><br><span class="line">              &lt;a</span><br><span class="line">                href=&quot;javascript:void(0);&quot;</span><br><span class="line">                title=&quot;退出&quot;</span><br><span class="line">                @click=&quot;logout()&quot;</span><br><span class="line">                class=&quot;ml5&quot;</span><br><span class="line">                &gt;退出&lt;/a</span><br><span class="line">              &gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">            &lt;!-- /未登录显示第1 li；登录后显示第2，3 li --&gt;</span><br><span class="line">          &lt;/ul&gt;</span><br><span class="line">          &lt;aside class=&quot;h-r-search&quot;&gt;</span><br><span class="line">            &lt;form action=&quot;#&quot; method=&quot;post&quot;&gt;</span><br><span class="line">              &lt;label class=&quot;h-r-s-box&quot;&gt;</span><br><span class="line">                &lt;input</span><br><span class="line">                  type=&quot;text&quot;</span><br><span class="line">                  placeholder=&quot;输入你想学的课程&quot;</span><br><span class="line">                  name=&quot;queryCourse.courseName&quot;</span><br><span class="line">                  value</span><br><span class="line">                /&gt;</span><br><span class="line">                &lt;button type=&quot;submit&quot; class=&quot;s-btn&quot;&gt;</span><br><span class="line">                  &lt;em class=&quot;icon18&quot;&gt;&amp;nbsp;&lt;/em&gt;</span><br><span class="line">                &lt;/button&gt;</span><br><span class="line">              &lt;/label&gt;</span><br><span class="line">            &lt;/form&gt;</span><br><span class="line">          &lt;/aside&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;aside class=&quot;mw-nav-btn&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;mw-nav-icon&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;/aside&gt;</span><br><span class="line">        &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br><span class="line">      &lt;/section&gt;</span><br><span class="line">    &lt;/header&gt;</span><br><span class="line">    &lt;!-- /公共头引入 --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;nuxt /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 公共底引入 --&gt;</span><br><span class="line">    &lt;footer id=&quot;footer&quot;&gt;</span><br><span class="line">      &lt;section class=&quot;container&quot;&gt;</span><br><span class="line">        &lt;div class&gt;</span><br><span class="line">          &lt;h4 class=&quot;hLh30&quot;&gt;</span><br><span class="line">            &lt;span class=&quot;fsize18 f-fM c-999&quot;&gt;友情链接&lt;/span&gt;</span><br><span class="line">          &lt;/h4&gt;</span><br><span class="line">          &lt;ul class=&quot;of flink-list&quot;&gt;</span><br><span class="line">            &lt;li&gt;</span><br><span class="line">              &lt;a href=&quot;http://www.atguigu.com/&quot; title=&quot;尚硅谷&quot; target=&quot;_blank&quot;</span><br><span class="line">                &gt;尚硅谷&lt;/a</span><br><span class="line">              &gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">          &lt;/ul&gt;</span><br><span class="line">          &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;b-foot&quot;&gt;</span><br><span class="line">          &lt;section class=&quot;fl col-7&quot;&gt;</span><br><span class="line">            &lt;section class=&quot;mr20&quot;&gt;</span><br><span class="line">              &lt;section class=&quot;b-f-link&quot;&gt;</span><br><span class="line">                &lt;a href=&quot;#&quot; title=&quot;关于我们&quot; target=&quot;_blank&quot;&gt;关于我们&lt;/a&gt;|</span><br><span class="line">                &lt;a href=&quot;#&quot; title=&quot;联系我们&quot; target=&quot;_blank&quot;&gt;联系我们&lt;/a&gt;|</span><br><span class="line">                &lt;a href=&quot;#&quot; title=&quot;帮助中心&quot; target=&quot;_blank&quot;&gt;帮助中心&lt;/a&gt;|</span><br><span class="line">                &lt;a href=&quot;#&quot; title=&quot;资源下载&quot; target=&quot;_blank&quot;&gt;资源下载&lt;/a&gt;|</span><br><span class="line">                &lt;span&gt;服务热线：010-56253825(北京) 0755-85293825(深圳)&lt;/span&gt;</span><br><span class="line">                &lt;span&gt;Email：info@atguigu.com&lt;/span&gt;</span><br><span class="line">              &lt;/section&gt;</span><br><span class="line">              &lt;section class=&quot;b-f-link mt10&quot;&gt;</span><br><span class="line">                &lt;span&gt;©2018课程版权均归谷粒学院所有 京ICP备17055252号&lt;/span&gt;</span><br><span class="line">              &lt;/section&gt;</span><br><span class="line">            &lt;/section&gt;</span><br><span class="line">          &lt;/section&gt;</span><br><span class="line">          &lt;aside class=&quot;fl col-3 tac mt15&quot;&gt;</span><br><span class="line">            &lt;section class=&quot;gf-tx&quot;&gt;</span><br><span class="line">              &lt;span&gt;</span><br><span class="line">                &lt;img src=&quot;~/assets/img/wx-icon.png&quot; alt /&gt;</span><br><span class="line">              &lt;/span&gt;</span><br><span class="line">            &lt;/section&gt;</span><br><span class="line">            &lt;section class=&quot;gf-tx&quot;&gt;</span><br><span class="line">              &lt;span&gt;</span><br><span class="line">                &lt;img src=&quot;~/assets/img/wb-icon.png&quot; alt /&gt;</span><br><span class="line">              &lt;/span&gt;</span><br><span class="line">            &lt;/section&gt;</span><br><span class="line">          &lt;/aside&gt;</span><br><span class="line">          &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/section&gt;</span><br><span class="line">    &lt;/footer&gt;</span><br><span class="line">    &lt;!-- /公共底引入 --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import &#x27;~/assets/css/reset.css&#x27;</span><br><span class="line">  import &#x27;~/assets/css/theme.css&#x27;</span><br><span class="line">  import &#x27;~/assets/css/global.css&#x27;</span><br><span class="line">  import &#x27;~/assets/css/web.css&#x27;</span><br><span class="line">  export default &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="index-vue"><a href="#index-vue" class="headerlink" title="index.vue"></a>index.vue</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- 幻灯片 开始 --&gt;</span><br><span class="line">    &lt;div v-swiper:mySwiper=&quot;swiperOption&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;swiper-wrapper&quot;&gt;</span><br><span class="line">        &lt;div</span><br><span class="line">          v-for=&quot;banner in bannerList&quot;</span><br><span class="line">          :key=&quot;banner.id&quot;</span><br><span class="line">          class=&quot;swiper-slide&quot;</span><br><span class="line">          style=&quot;background: #040b1b&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;a target=&quot;_blank&quot; :href=&quot;banner.linkUrl&quot;&gt;</span><br><span class="line">            &lt;img :src=&quot;banner.imageUrl&quot; :alt=&quot;banner.title&quot; /&gt;</span><br><span class="line">          &lt;/a&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div class=&quot;swiper-pagination swiper-pagination-white&quot;&gt;&lt;/div&gt;</span><br><span class="line">      &lt;div</span><br><span class="line">        class=&quot;swiper-button-prev swiper-button-white&quot;</span><br><span class="line">        slot=&quot;button-prev&quot;</span><br><span class="line">      &gt;&lt;/div&gt;</span><br><span class="line">      &lt;div</span><br><span class="line">        class=&quot;swiper-button-next swiper-button-white&quot;</span><br><span class="line">        slot=&quot;button-next&quot;</span><br><span class="line">      &gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- 幻灯片 结束 --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div id=&quot;aCoursesList&quot;&gt;</span><br><span class="line">      &lt;!-- 网校课程 开始 --&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;section class=&quot;container&quot;&gt;</span><br><span class="line">          &lt;header class=&quot;comm-title&quot;&gt;</span><br><span class="line">            &lt;h2 class=&quot;tac&quot;&gt;</span><br><span class="line">              &lt;span class=&quot;c-333&quot;&gt;热门课程&lt;/span&gt;</span><br><span class="line">            &lt;/h2&gt;</span><br><span class="line">          &lt;/header&gt;</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">            &lt;article class=&quot;comm-course-list&quot;&gt;</span><br><span class="line">              &lt;ul class=&quot;of&quot; id=&quot;bna&quot;&gt;</span><br><span class="line">                &lt;li v-for=&quot;course in courseList&quot; :key=&quot;course.id&quot;&gt;</span><br><span class="line">                  &lt;div class=&quot;cc-l-wrap&quot;&gt;</span><br><span class="line">                    &lt;section class=&quot;course-img&quot;&gt;</span><br><span class="line">                      &lt;img</span><br><span class="line">                        :src=&quot;course.cover&quot;</span><br><span class="line">                        class=&quot;img-responsive&quot;</span><br><span class="line">                        :alt=&quot;course.title&quot;</span><br><span class="line">                      /&gt;</span><br><span class="line">                      &lt;div class=&quot;cc-mask&quot;&gt;</span><br><span class="line">                        &lt;a href=&quot;#&quot; title=&quot;开始学习&quot; class=&quot;comm-btn c-btn-1&quot;</span><br><span class="line">                          &gt;开始学习&lt;/a</span><br><span class="line">                        &gt;</span><br><span class="line">                      &lt;/div&gt;</span><br><span class="line">                    &lt;/section&gt;</span><br><span class="line">                    &lt;h3 class=&quot;hLh30 txtOf mt10&quot;&gt;</span><br><span class="line">                      &lt;a</span><br><span class="line">                        href=&quot;#&quot;</span><br><span class="line">                        :title=&quot;course.title&quot;</span><br><span class="line">                        class=&quot;course-title fsize18 c-333&quot;</span><br><span class="line">                        &gt;&#123;&#123; course.title &#125;&#125;&lt;/a</span><br><span class="line">                      &gt;</span><br><span class="line">                    &lt;/h3&gt;</span><br><span class="line">                    &lt;section class=&quot;mt10 hLh20 of&quot;&gt;</span><br><span class="line">                      &lt;span</span><br><span class="line">                        class=&quot;fr jgTag bg-green&quot;</span><br><span class="line">                        v-if=&quot;Number(course.price) === 0&quot;</span><br><span class="line">                      &gt;</span><br><span class="line">                        &lt;i class=&quot;c-fff fsize12 f-fA&quot;&gt;免费&lt;/i&gt;</span><br><span class="line">                      &lt;/span&gt;</span><br><span class="line">                      &lt;span class=&quot;fl jgAttr c-ccc f-fA&quot;&gt;</span><br><span class="line">                        &lt;i class=&quot;c-999 f-fA&quot;&gt;9634人学习&lt;/i&gt;</span><br><span class="line">                        |</span><br><span class="line">                        &lt;i class=&quot;c-999 f-fA&quot;&gt;9634评论&lt;/i&gt;</span><br><span class="line">                      &lt;/span&gt;</span><br><span class="line">                    &lt;/section&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/li&gt;</span><br><span class="line">              &lt;/ul&gt;</span><br><span class="line">              &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br><span class="line">            &lt;/article&gt;</span><br><span class="line">            &lt;section class=&quot;tac pt20&quot;&gt;</span><br><span class="line">              &lt;a href=&quot;#&quot; title=&quot;全部课程&quot; class=&quot;comm-btn c-btn-2&quot;&gt;全部课程&lt;/a&gt;</span><br><span class="line">            &lt;/section&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/section&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- /网校课程 结束 --&gt;</span><br><span class="line">      &lt;!-- 网校名师 开始 --&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;section class=&quot;container&quot;&gt;</span><br><span class="line">          &lt;header class=&quot;comm-title&quot;&gt;</span><br><span class="line">            &lt;h2 class=&quot;tac&quot;&gt;</span><br><span class="line">              &lt;span class=&quot;c-333&quot;&gt;名师大咖&lt;/span&gt;</span><br><span class="line">            &lt;/h2&gt;</span><br><span class="line">          &lt;/header&gt;</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">            &lt;article class=&quot;i-teacher-list&quot;&gt;</span><br><span class="line">              &lt;ul class=&quot;of&quot;&gt;</span><br><span class="line">                &lt;li v-for=&quot;teacher in teacherList&quot; :key=&quot;teacher.id&quot;&gt;</span><br><span class="line">                  &lt;section class=&quot;i-teach-wrap&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;i-teach-pic&quot;&gt;</span><br><span class="line">                      &lt;a href=&quot;/teacher/1&quot; :title=&quot;teacher.name&quot;&gt;</span><br><span class="line">                        &lt;img :alt=&quot;teacher.name&quot; :src=&quot;teacher.avatar&quot; /&gt;</span><br><span class="line">                      &lt;/a&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;mt10 hLh30 txtOf tac&quot;&gt;</span><br><span class="line">                      &lt;a</span><br><span class="line">                        href=&quot;/teacher/1&quot;</span><br><span class="line">                        :title=&quot;teacher.name&quot;</span><br><span class="line">                        class=&quot;fsize18 c-666&quot;</span><br><span class="line">                        &gt;&#123;&#123; teacher.name &#125;&#125;</span><br><span class="line">                      &lt;/a&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;hLh30 txtOf tac&quot;&gt;</span><br><span class="line">                      &lt;span class=&quot;fsize14 c-999&quot;&gt;&#123;&#123; teacher.career &#125;&#125;&lt;/span&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;mt15 i-q-txt&quot;&gt;</span><br><span class="line">                      &lt;p class=&quot;c-999 f-fA&quot;&gt;</span><br><span class="line">                        &#123;&#123; teacher.intro &#125;&#125;</span><br><span class="line">                      &lt;/p&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                  &lt;/section&gt;</span><br><span class="line">                &lt;/li&gt;</span><br><span class="line">              &lt;/ul&gt;</span><br><span class="line">              &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br><span class="line">            &lt;/article&gt;</span><br><span class="line">            &lt;section class=&quot;tac pt20&quot;&gt;</span><br><span class="line">              &lt;a href=&quot;#&quot; title=&quot;全部讲师&quot; class=&quot;comm-btn c-btn-2&quot;&gt;全部讲师&lt;/a&gt;</span><br><span class="line">            &lt;/section&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/section&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- /网校名师 结束 --&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="轮播图组件"><a href="#轮播图组件" class="headerlink" title="轮播图组件"></a>轮播图组件</h3><blockquote>
<p>本项目需要用到一个轮播图组件awesome-swiper（这里使用3.1.3版本）</p>
</blockquote>
<h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p> <code>npm install vue-awesome-swiper@3.1.3</code></p>
<h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><blockquote>
<p>在 plugins 文件夹下新建文件 nuxt-swiper-plugin.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> VueAwesomeSwiper <span class="keyword">from</span> <span class="string">&#x27;vue-awesome-swiper/dist/ssr&#x27;</span></span><br><span class="line">Vue.use(VueAwesomeSwiper)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在 nuxt.config.js 文件中配置插件</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// some nuxt config...</span></span><br><span class="line">  <span class="comment">// awesome-swiper插件配置引入</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    &#123; <span class="attr">src</span>: <span class="string">&#x27;~/plugins/nuxt-swiper-plugin.js&#x27;</span>, <span class="attr">ssr</span>: <span class="literal">false</span> &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">css</span>: [</span><br><span class="line">    <span class="string">&#x27;swiper/dist/css/swiper.css&#x27;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="axios依赖与封装"><a href="#axios依赖与封装" class="headerlink" title="axios依赖与封装"></a>axios依赖与封装</h3><blockquote>
<p>npm install axios</p>
</blockquote>
<blockquote>
<p>创建utils -&gt; request.js</p>
<p>注意这里的baseURL要与nginx对应</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="comment">// 创建axios实例</span></span><br><span class="line"><span class="keyword">const</span> service = axios.create(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&#x27;http://localhost:9001&#x27;</span>, <span class="comment">// api的base_url</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">20000</span> <span class="comment">// 请求超时时间</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service</span><br></pre></td></tr></table></figure>

<h3 id="element-ui"><a href="#element-ui" class="headerlink" title="element-ui"></a>element-ui</h3><h4 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h4><blockquote>
<p>npm install element-ui</p>
</blockquote>
<h4 id="配置-1"><a href="#配置-1" class="headerlink" title="配置"></a>配置</h4><blockquote>
<p>plugins -&gt; nuxt-swiper-plugin.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> VueAwesomeSwiper <span class="keyword">from</span> <span class="string">&#x27;vue-awesome-swiper/dist/ssr&#x27;</span></span><br><span class="line"><span class="keyword">import</span> VueQriously <span class="keyword">from</span> <span class="string">&#x27;vue-qriously&#x27;</span></span><br><span class="line"><span class="keyword">import</span> ElementUI <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span> <span class="comment">//element-ui的全部组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span><span class="comment">//element-ui的css</span></span><br><span class="line">Vue.use(ElementUI) <span class="comment">//使用elementUI</span></span><br><span class="line">Vue.use(VueQriously)</span><br><span class="line">Vue.use(VueAwesomeSwiper)</span><br></pre></td></tr></table></figure>

<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><blockquote>
<p>必看注意，直接启动的话eslint语法检查十分严格，类似于空格是2个就不能是4个，所以要把严格检查关闭</p>
<p><a target="_blank" rel="noopener" href="http://t.zoukankan.com/IwishIcould-p-11879386.html">解决vue/cli3.0 语法验证规则 ESLint: Expected indentation of 2 spaces but found 4. (indent) - 走看看 (zoukankan.com)</a></p>
<p>仔细参考上述文章内容，注意两个步骤都要执行才行（弄了我十几分钟有点烦躁，好在解决了）</p>
</blockquote>
<h2 id="首页基础搭建"><a href="#首页基础搭建" class="headerlink" title="首页基础搭建"></a>首页基础搭建</h2><h3 id="讲师和课程视图模板搭建"><a href="#讲师和课程视图模板搭建" class="headerlink" title="讲师和课程视图模板搭建"></a>讲师和课程视图模板搭建</h3><h4 id="固定路由"><a href="#固定路由" class="headerlink" title="固定路由"></a>固定路由</h4><blockquote>
<p>注意default.js中设置了头导航的固定路由，所以需要在pages文件夹下创建对应的视图</p>
<p>注意其中的router-link（即路由导航），其中的to对应的地址就是视图的地址，值为文件夹的路径，to会自动找到pages文件夹下对应名字的文件夹中的index.vue</p>
<p>按照这个思路创建对应视图即可，然后复制资料中已经有的视图模板</p>
</blockquote>
<h4 id="动态路由"><a href="#动态路由" class="headerlink" title="动态路由"></a>动态路由</h4><blockquote>
<p>动态路由编写有一定的规范</p>
<p>例如需要根据id查询一条记录，需要在对应pages的文件夹下创建_id.vue文件，（必须是以下划线开头，参数名为下划线后面的文件名）</p>
</blockquote>
<h4 id="创建视图"><a href="#创建视图" class="headerlink" title="创建视图"></a>创建视图</h4><blockquote>
<p>根据上述条件创建即可，然后内容模板cv即可</p>
</blockquote>
<h4 id="当前项目结构"><a href="#当前项目结构" class="headerlink" title="当前项目结构"></a>当前项目结构</h4><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210928194240441.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210928194240441.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210928194240441"></p>
<h3 id="后端环境搭建"><a href="#后端环境搭建" class="headerlink" title="后端环境搭建"></a>后端环境搭建</h3><h4 id="创建子模块"><a href="#创建子模块" class="headerlink" title="创建子模块"></a>创建子模块</h4><blockquote>
<p>service_cms</p>
</blockquote>
<h4 id="创建并编写配置文件application-properties"><a href="#创建并编写配置文件application-properties" class="headerlink" title="创建并编写配置文件application.properties"></a>创建并编写配置文件application.properties</h4><blockquote>
<p>注意这里的DataSource配置，如果不对可能会报springboot找不到bean的错误</p>
</blockquote>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 服务端口</span></span><br><span class="line"><span class="meta">server.port</span>=<span class="string">8004</span></span><br><span class="line"><span class="comment"># 服务名</span></span><br><span class="line"><span class="meta">spring.application.name</span>=<span class="string">service-cms</span></span><br><span class="line"><span class="comment"># mysql数据库连接</span></span><br><span class="line"><span class="meta">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/guli?serverTimezone=GMT%2B8</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">123456789</span></span><br><span class="line"><span class="comment">#返回json的全局时间格式</span></span><br><span class="line"><span class="meta">spring.jackson.date-format</span>=<span class="string">yyyy-MM-dd HH:mm:ss</span></span><br><span class="line"><span class="meta">spring.jackson.time-zone</span>=<span class="string">GMT+8</span></span><br><span class="line"><span class="comment">#配置mapper xml文件的路径</span></span><br><span class="line"><span class="meta">mybatis-plus.mapper-locations</span>=<span class="string">classpath:com/atguigu/educms/mapper/xml/*.xml</span></span><br><span class="line"><span class="meta">spring.redis.host</span>=<span class="string">192.168.44.132</span></span><br><span class="line"><span class="meta">spring.redis.port</span>=<span class="string">6379</span></span><br><span class="line"><span class="meta">spring.redis.database</span>=<span class="string">0</span></span><br><span class="line"><span class="meta">spring.redis.timeout</span>=<span class="string">1800000</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-active</span>=<span class="string">20</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-wait</span>=<span class="string">-1</span></span><br><span class="line"><span class="comment">#最大阻塞等待时间(负数表示没限制)</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-idle</span>=<span class="string">5</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.min-idle</span>=<span class="string">0</span></span><br><span class="line"><span class="comment">#mybatis日志</span></span><br><span class="line"><span class="meta">mybatis-plus.configuration.log-impl</span>=<span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line"><span class="comment"># nacos服务地址</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.discovery.server-addr</span>=<span class="string">127.0.0.1:8848</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>这里记得去nginx.conf里配置一下</p>
</blockquote>
<h4 id="创建数据库表"><a href="#创建数据库表" class="headerlink" title="创建数据库表"></a>创建数据库表</h4><blockquote>
<p>导入资料的sql文件即可</p>
</blockquote>
<h4 id="编写启动类"><a href="#编写启动类" class="headerlink" title="编写启动类"></a>编写启动类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &#123;&quot;com.atguigu&quot;&#125;)</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.atguigu.educms.mapper&quot;)</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span>  <span class="comment">// nacos注册</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CmsApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(CmsApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="代码生成器"><a href="#代码生成器" class="headerlink" title="代码生成器"></a>代码生成器</h4><blockquote>
<p>老样子改一下就行</p>
<p>生成之后跨域注释加一下、mapperscan加一下、配置文件中扫描mapper.xml路径加一下</p>
<p>一些实体类字段的注释也要加一下，比如说自动添加和逻辑删除</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MapperScan(&quot;com.atguigu.educms.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CmsApplication</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CrmBannerController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#配置mapper xml文件的路径</span></span><br><span class="line"><span class="meta">mybatis-plus.mapper-locations</span>=<span class="string">classpath:com/atguigu/educms/mapper/xml/*.xml</span></span><br></pre></td></tr></table></figure>

<h4 id="当前项目结构-1"><a href="#当前项目结构-1" class="headerlink" title="当前项目结构"></a>当前项目结构</h4><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210928200432351.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210928200432351.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210928200432351"></p>
<h2 id="首页轮播图（后端）"><a href="#首页轮播图（后端）" class="headerlink" title="首页轮播图（后端）"></a>首页轮播图（后端）</h2><blockquote>
<p>后台应该也有轮播图的管理模块，所以需要两个bannerController</p>
</blockquote>
<h3 id="编写BannerAdminController"><a href="#编写BannerAdminController" class="headerlink" title="编写BannerAdminController"></a>编写BannerAdminController</h3><blockquote>
<p>用于后台的banner管理接口，TODO：前端页面自己写（我选择不写使用swagger测试嘿嘿😙）</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/educms/banneradmin&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BannerAdminController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CrmBannerService bannerService;</span><br><span class="line">    <span class="comment">// 分页查询</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;pageBanner/&#123;pageNo&#125;/&#123;limit&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">pageBanner</span><span class="params">(<span class="meta">@PathVariable</span> Long limit, <span class="meta">@PathVariable</span> Long pageNo)</span> </span>&#123;</span><br><span class="line">        Page&lt;CrmBanner&gt; pageBanner = <span class="keyword">new</span> Page&lt;&gt;(pageNo, limit);</span><br><span class="line">        bannerService.page(pageBanner, <span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">&quot;records&quot;</span>, pageBanner.getRecords()).data(<span class="string">&quot;total&quot;</span>, pageBanner.getTotal());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2 添加banner</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;addBanner&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">addBanner</span><span class="params">(<span class="meta">@RequestBody</span> CrmBanner crmBanner)</span> </span>&#123;</span><br><span class="line">        bannerService.save(crmBanner);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;获取Banner&quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;get/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">get</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span> </span>&#123;</span><br><span class="line">        CrmBanner banner = bannerService.getById(id);</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">&quot;item&quot;</span>, banner);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;修改Banner&quot;)</span></span><br><span class="line">    <span class="meta">@PutMapping(&quot;update&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">updateById</span><span class="params">(<span class="meta">@RequestBody</span> CrmBanner banner)</span> </span>&#123;</span><br><span class="line">        bannerService.updateById(banner);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;删除Banner&quot;)</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;remove/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">remove</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span> </span>&#123;</span><br><span class="line">        bannerService.removeById(id);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="编写BannerFrontController"><a href="#编写BannerFrontController" class="headerlink" title="编写BannerFrontController"></a>编写BannerFrontController</h3><blockquote>
<p>用于前台的banner接口，主要用于显示banner</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/educms/bannerfront&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BannerFrontController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CrmBannerService bannerService;</span><br><span class="line">  <span class="comment">//查询banner信息</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;getBannerList&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">getBannerList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;CrmBanner&gt; list = bannerService.selectAllBanner();</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">&quot;list&quot;</span>, list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="编写Service"><a href="#编写Service" class="headerlink" title="编写Service"></a>编写Service</h3><blockquote>
<p>这里自己写了个service，结果啥也没实现，纯属脱裤子放屁，我改了</p>
<p>我发现我错了，我应该看完整个视频才说话，这个是为了后面的Redis做准备的</p>
<p>写Mapper里最好（弹幕：感谢这段代码，昨天写了，今天老板让我走）</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CrmBannerServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">CrmBannerMapper</span>, <span class="title">CrmBanner</span>&gt; <span class="keyword">implements</span> <span class="title">CrmBannerService</span> </span>&#123;</span><br><span class="line"> 	<span class="comment">// 查询所有banner</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;CrmBanner&gt; <span class="title">selectAllBanner</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 根据id降序排序，显示排序后的前两条记录</span></span><br><span class="line">        QueryWrapper&lt;CrmBanner&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">        <span class="comment">// 设置排序条件</span></span><br><span class="line">        wrapper.orderByDesc(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        <span class="comment">// 设置显示数量，last拼接sql语句</span></span><br><span class="line">        wrapper.last(<span class="string">&quot;limit 2&quot;</span>);</span><br><span class="line">        List&lt;CrmBanner&gt; crmBanners = baseMapper.selectList(wrapper);</span><br><span class="line">        <span class="keyword">return</span> crmBanners;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="首页热门课程和名师（后端）"><a href="#首页热门课程和名师（后端）" class="headerlink" title="首页热门课程和名师（后端）"></a>首页热门课程和名师（后端）</h2><blockquote>
<p>注意这里，controller这些又写到service_edu模块中了</p>
</blockquote>
<h3 id="编写Mapper"><a href="#编写Mapper" class="headerlink" title="编写Mapper"></a>编写Mapper</h3><blockquote>
<p>需求：根据id进行降序排序（或者根据表中专门的热度排序），显示排序之后的前8条数据</p>
</blockquote>
<h4 id="EduTeacherMapper"><a href="#EduTeacherMapper" class="headerlink" title="EduTeacherMapper"></a>EduTeacherMapper</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectIndexList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.eduservice.entity.EduTeacher&quot;</span>&gt;</span></span><br><span class="line">    select *</span><br><span class="line">    from edu_teacher</span><br><span class="line">    order by id desc</span><br><span class="line">    limit 4</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="EduCourseMapper"><a href="#EduCourseMapper" class="headerlink" title="EduCourseMapper"></a>EduCourseMapper</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectIndexList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.eduservice.entity.EduCourse&quot;</span>&gt;</span></span><br><span class="line">    select *</span><br><span class="line">    from edu_course</span><br><span class="line">    order by id desc</span><br><span class="line">    limit 8</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="编写service"><a href="#编写service" class="headerlink" title="编写service"></a>编写service</h3><blockquote>
<p>就直接调用baseMapper中的接口即可</p>
</blockquote>
<h3 id="编写controller"><a href="#编写controller" class="headerlink" title="编写controller"></a>编写controller</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/eduservice/index&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduCourseService courseService;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduTeacherService teacherService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查询热门课程和讲师</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;index&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">getIndex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;EduCourse&gt; courseList = courseService.getIndexList();</span><br><span class="line">        List&lt;EduTeacher&gt; teacherList = teacherService.getIndexList();</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">&quot;courseList&quot;</span>, courseList).data(<span class="string">&quot;teacherList&quot;</span>, teacherList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="首页轮播图和热门讲师课程（前端）"><a href="#首页轮播图和热门讲师课程（前端）" class="headerlink" title="首页轮播图和热门讲师课程（前端）"></a>首页轮播图和热门讲师课程（前端）</h2><h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><blockquote>
<ol>
<li>api -&gt; banner.js</li>
<li>api -&gt; index.js</li>
</ol>
</blockquote>
<h4 id="banner-js"><a href="#banner-js" class="headerlink" title="banner.js"></a>banner.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">//查询前两条banner数据</span></span><br><span class="line">  <span class="function"><span class="title">getBannerList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/educms/bannerfront/getBannerList&#x27;</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">//查询热门课程和名师</span></span><br><span class="line">  <span class="function"><span class="title">getIndexList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/eduservice/index/getIndexList&#x27;</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="调用接口"><a href="#调用接口" class="headerlink" title="调用接口"></a>调用接口</h3><blockquote>
<p>注意这里的response需要两个data，应为这个模板没有帮忙封装response的一些东西，之前的直接获得的是response.data</p>
</blockquote>
<h4 id="轮播图"><a href="#轮播图" class="headerlink" title="轮播图"></a>轮播图</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;!-- 幻灯片 开始 --&gt;</span><br><span class="line">        &lt;div v-swiper:mySwiper=&quot;swiperOption&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;swiper-wrapper&quot;&gt;</span><br><span class="line">                &lt;div</span><br><span class="line">                    v-for=&quot;banner in bannerList&quot;</span><br><span class="line">                    :key=&quot;banner.id&quot;</span><br><span class="line">                    class=&quot;swiper-slide&quot;</span><br><span class="line">                    style=&quot;background: #040b1b&quot;</span><br><span class="line">                &gt;</span><br><span class="line">                    &lt;a target=&quot;_blank&quot; :href=&quot;banner.linkUrl&quot;&gt;</span><br><span class="line">                        &lt;img :src=&quot;banner.imageUrl&quot; :alt=&quot;banner.title&quot; /&gt;</span><br><span class="line">                    &lt;/a&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;swiper-pagination swiper-pagination-white&quot;&gt;&lt;/div&gt;</span><br><span class="line">            &lt;div</span><br><span class="line">                class=&quot;swiper-button-prev swiper-button-white&quot;</span><br><span class="line">                slot=&quot;button-prev&quot;</span><br><span class="line">            &gt;&lt;/div&gt;</span><br><span class="line">            &lt;div</span><br><span class="line">                class=&quot;swiper-button-next swiper-button-white&quot;</span><br><span class="line">                slot=&quot;button-next&quot;</span><br><span class="line">            &gt;&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 幻灯片 结束 --&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import bannerApi from &#x27;@/api/banner&#x27;</span><br><span class="line">    export default &#123;</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          swiperOption: &#123;</span><br><span class="line">            // 配置分页</span><br><span class="line">            pagination: &#123;</span><br><span class="line">              el: &#x27;.swiper-pagination&#x27; // 分页的dom节点</span><br><span class="line">            &#125;,</span><br><span class="line">            // 配置导航</span><br><span class="line">            navigation: &#123;</span><br><span class="line">              nextEl: &#x27;.swiper-button-next&#x27;, // 下一页dom节点</span><br><span class="line">              prevEl: &#x27;.swiper-button-prev&#x27; // 前一页dom节点</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          // 数组</span><br><span class="line">          bannerList: [],</span><br><span class="line">          courseList: [],</span><br><span class="line">          teacherList: []</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      created() &#123;</span><br><span class="line">        // 初始化数据</span><br><span class="line">        this.getBannerList()</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">        // 初始化首页轮播图课程讲师列表</span><br><span class="line">        getBannerList() &#123;</span><br><span class="line">          bannerApi.getBannerList().then(result =&gt; &#123;</span><br><span class="line">            this.bannerList = result.data.data.list</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="热门课程讲师"><a href="#热门课程讲师" class="headerlink" title="热门课程讲师"></a>热门课程讲师</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;div id=&quot;aCoursesList&quot;&gt;</span><br><span class="line">            &lt;!-- 网校课程 开始 --&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;section class=&quot;container&quot;&gt;</span><br><span class="line">                    &lt;header class=&quot;comm-title&quot;&gt;</span><br><span class="line">                        &lt;h2 class=&quot;tac&quot;&gt;</span><br><span class="line">                            &lt;span class=&quot;c-333&quot;&gt;热门课程&lt;/span&gt;</span><br><span class="line">                        &lt;/h2&gt;</span><br><span class="line">                    &lt;/header&gt;</span><br><span class="line">                    &lt;div&gt;</span><br><span class="line">                        &lt;article class=&quot;comm-course-list&quot;&gt;</span><br><span class="line">                            &lt;ul class=&quot;of&quot; id=&quot;bna&quot;&gt;</span><br><span class="line">                                &lt;li</span><br><span class="line">                                    v-for=&quot;course in courseList&quot;</span><br><span class="line">                                    :key=&quot;course.id&quot;</span><br><span class="line">                                &gt;</span><br><span class="line">                                    &lt;div class=&quot;cc-l-wrap&quot;&gt;</span><br><span class="line">                                        &lt;section class=&quot;course-img&quot;&gt;</span><br><span class="line">                                            &lt;img</span><br><span class="line">                                                :src=&quot;course.cover&quot;</span><br><span class="line">                                                class=&quot;img-responsive&quot;</span><br><span class="line">                                                :alt=&quot;course.title&quot;</span><br><span class="line">                                            /&gt;</span><br><span class="line">                                            &lt;div class=&quot;cc-mask&quot;&gt;</span><br><span class="line">                                                &lt;a</span><br><span class="line">                                                    href=&quot;#&quot;</span><br><span class="line">                                                    title=&quot;开始学习&quot;</span><br><span class="line">                                                    class=&quot;comm-btn c-btn-1&quot;</span><br><span class="line">                                                    &gt;开始学习&lt;/a</span><br><span class="line">                                                &gt;</span><br><span class="line">                                            &lt;/div&gt;</span><br><span class="line">                                        &lt;/section&gt;</span><br><span class="line">                                        &lt;h3 class=&quot;hLh30 txtOf mt10&quot;&gt;</span><br><span class="line">                                            &lt;a</span><br><span class="line">                                                href=&quot;#&quot;</span><br><span class="line">                                                :title=&quot;course.title&quot;</span><br><span class="line">                                                class=&quot;</span><br><span class="line">                                                    course-title</span><br><span class="line">                                                    fsize18</span><br><span class="line">                                                    c-333</span><br><span class="line">                                                &quot;</span><br><span class="line">                                                &gt;&#123;&#123; course.title &#125;&#125;&lt;/a</span><br><span class="line">                                            &gt;</span><br><span class="line">                                        &lt;/h3&gt;</span><br><span class="line">                                        &lt;section class=&quot;mt10 hLh20 of&quot;&gt;</span><br><span class="line">                                            &lt;span</span><br><span class="line">                                                class=&quot;fr jgTag bg-green&quot;</span><br><span class="line">                                                v-if=&quot;</span><br><span class="line">                                                    Number(course.price) === 0</span><br><span class="line">                                                &quot;</span><br><span class="line">                                            &gt;</span><br><span class="line">                                                &lt;i class=&quot;c-fff fsize12 f-fA&quot;</span><br><span class="line">                                                    &gt;免费&lt;/i</span><br><span class="line">                                                &gt;</span><br><span class="line">                                            &lt;/span&gt;</span><br><span class="line">                                            &lt;span class=&quot;fl jgAttr c-ccc f-fA&quot;&gt;</span><br><span class="line">                                                &lt;i class=&quot;c-999 f-fA&quot;</span><br><span class="line">                                                    &gt;9634人学习&lt;/i</span><br><span class="line">                                                &gt;</span><br><span class="line">                                                |</span><br><span class="line">                                                &lt;i class=&quot;c-999 f-fA&quot;</span><br><span class="line">                                                    &gt;9634评论&lt;/i</span><br><span class="line">                                                &gt;</span><br><span class="line">                                            &lt;/span&gt;</span><br><span class="line">                                        &lt;/section&gt;</span><br><span class="line">                                    &lt;/div&gt;</span><br><span class="line">                                &lt;/li&gt;</span><br><span class="line">                            &lt;/ul&gt;</span><br><span class="line">                            &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;/article&gt;</span><br><span class="line">                        &lt;section class=&quot;tac pt20&quot;&gt;</span><br><span class="line">                            &lt;a</span><br><span class="line">                                href=&quot;#&quot;</span><br><span class="line">                                title=&quot;全部课程&quot;</span><br><span class="line">                                class=&quot;comm-btn c-btn-2&quot;</span><br><span class="line">                                &gt;全部课程&lt;/a</span><br><span class="line">                            &gt;</span><br><span class="line">                        &lt;/section&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/section&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;!-- /网校课程 结束 --&gt;</span><br><span class="line">            &lt;!-- 网校名师 开始 --&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;section class=&quot;container&quot;&gt;</span><br><span class="line">                    &lt;header class=&quot;comm-title&quot;&gt;</span><br><span class="line">                        &lt;h2 class=&quot;tac&quot;&gt;</span><br><span class="line">                            &lt;span class=&quot;c-333&quot;&gt;名师大咖&lt;/span&gt;</span><br><span class="line">                        &lt;/h2&gt;</span><br><span class="line">                    &lt;/header&gt;</span><br><span class="line">                    &lt;div&gt;</span><br><span class="line">                        &lt;article class=&quot;i-teacher-list&quot;&gt;</span><br><span class="line">                            &lt;ul class=&quot;of&quot;&gt;</span><br><span class="line">                                &lt;li</span><br><span class="line">                                    v-for=&quot;teacher in teacherList&quot;</span><br><span class="line">                                    :key=&quot;teacher.id&quot;</span><br><span class="line">                                &gt;</span><br><span class="line">                                    &lt;section class=&quot;i-teach-wrap&quot;&gt;</span><br><span class="line">                                        &lt;div class=&quot;i-teach-pic&quot;&gt;</span><br><span class="line">                                            &lt;a</span><br><span class="line">                                                href=&quot;/teacher/1&quot;</span><br><span class="line">                                                :title=&quot;teacher.name&quot;</span><br><span class="line">                                            &gt;</span><br><span class="line">                                                &lt;img</span><br><span class="line">                                                    :alt=&quot;teacher.name&quot;</span><br><span class="line">                                                    :src=&quot;teacher.avatar&quot;</span><br><span class="line">                                                /&gt;</span><br><span class="line">                                            &lt;/a&gt;</span><br><span class="line">                                        &lt;/div&gt;</span><br><span class="line">                                        &lt;div class=&quot;mt10 hLh30 txtOf tac&quot;&gt;</span><br><span class="line">                                            &lt;a</span><br><span class="line">                                                href=&quot;/teacher/1&quot;</span><br><span class="line">                                                :title=&quot;teacher.name&quot;</span><br><span class="line">                                                class=&quot;fsize18 c-666&quot;</span><br><span class="line">                                                &gt;&#123;&#123; teacher.name &#125;&#125;&lt;/a</span><br><span class="line">                                            &gt;</span><br><span class="line">                                        &lt;/div&gt;</span><br><span class="line">                                        &lt;div class=&quot;hLh30 txtOf tac&quot;&gt;</span><br><span class="line">                                            &lt;span class=&quot;fsize14 c-999&quot;&gt;&#123;&#123;</span><br><span class="line">                                                teacher.career</span><br><span class="line">                                            &#125;&#125;&lt;/span&gt;</span><br><span class="line">                                        &lt;/div&gt;</span><br><span class="line">                                        &lt;div class=&quot;mt15 i-q-txt&quot;&gt;</span><br><span class="line">                                            &lt;p class=&quot;c-999 f-fA&quot;&gt;</span><br><span class="line">                                                &#123;&#123; teacher.intro &#125;&#125;</span><br><span class="line">                                            &lt;/p&gt;</span><br><span class="line">                                        &lt;/div&gt;</span><br><span class="line">                                    &lt;/section&gt;</span><br><span class="line">                                &lt;/li&gt;</span><br><span class="line">                            &lt;/ul&gt;</span><br><span class="line">                            &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;/article&gt;</span><br><span class="line">                        &lt;section class=&quot;tac pt20&quot;&gt;</span><br><span class="line">                            &lt;a</span><br><span class="line">                                href=&quot;#&quot;</span><br><span class="line">                                title=&quot;全部讲师&quot;</span><br><span class="line">                                class=&quot;comm-btn c-btn-2&quot;</span><br><span class="line">                                &gt;全部讲师&lt;/a</span><br><span class="line">                            &gt;</span><br><span class="line">                        &lt;/section&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/section&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;!-- /网校名师 结束 --&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import bannerApi from &#x27;@/api/banner&#x27;</span><br><span class="line">    import indexApi from &#x27;@/api/index&#x27;</span><br><span class="line">    export default &#123;</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          swiperOption: &#123;</span><br><span class="line">            // 配置分页</span><br><span class="line">            pagination: &#123;</span><br><span class="line">              el: &#x27;.swiper-pagination&#x27; // 分页的dom节点</span><br><span class="line">            &#125;,</span><br><span class="line">            // 配置导航</span><br><span class="line">            navigation: &#123;</span><br><span class="line">              nextEl: &#x27;.swiper-button-next&#x27;, // 下一页dom节点</span><br><span class="line">              prevEl: &#x27;.swiper-button-prev&#x27; // 前一页dom节点</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          // 数组</span><br><span class="line">          bannerList: [],</span><br><span class="line">          courseList: [],</span><br><span class="line">          teacherList: []</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      created() &#123;</span><br><span class="line">        // 初始化数据</span><br><span class="line">        this.getBannerList()</span><br><span class="line">        this.getCourseTeacher()</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">        // 初始化首页课程讲师列表</span><br><span class="line">        getCourseTeacher() &#123;</span><br><span class="line">          indexApi.getIndexList().then(result =&gt; &#123;</span><br><span class="line">            this.courseList = result.data.data.courseList</span><br><span class="line">            this.teacherList = result.data.data.teacherList</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h3><blockquote>
<p>这里我没有把url对应起来，所以报了<code>Access to XMLHttpRequest at &#39;http://localhost:9001/educms/bannerfront/getBannerList&#39; from origin &#39;http://localhost:3000&#39; has been blocked by CORS policy: No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource.</code>的错误</p>
<p>这个错误还有可能是nginx没有配置，或者跨域注解没有加</p>
</blockquote>
<h2 id="单点登录SSO"><a href="#单点登录SSO" class="headerlink" title="单点登录SSO"></a>单点登录SSO</h2><p>![02 单点登录三种方式介绍](<a target="_blank" rel="noopener" href="https://gitee.com/ReRia/images/raw/master/img/02">https://gitee.com/ReRia/images/raw/master/img/02</a> 单点登录三种方式介绍.png)</p>
<h2 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210929131659223.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210929131659223.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210929131659223"></p>
<h3 id="整合"><a href="#整合" class="headerlink" title="整合"></a>整合</h3><blockquote>
<p>该项目在common模块中配置</p>
</blockquote>
<h4 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- redis --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- spring2.X集成redis所需common-pool2--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-pool2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="创建配置类"><a href="#创建配置类" class="headerlink" title="创建配置类"></a>创建配置类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>  <span class="comment">// 配置类</span></span><br><span class="line"><span class="meta">@EnableCaching</span>  <span class="comment">// 开启cashe缓存</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisConfig</span> <span class="keyword">extends</span> <span class="title">CachingConfigurerSupport</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="title">redisTemplate</span><span class="params">(RedisConnectionFactory factory)</span> </span>&#123;</span><br><span class="line">        RedisTemplate&lt;String, Object&gt; template = <span class="keyword">new</span> RedisTemplate&lt;&gt;();</span><br><span class="line">        RedisSerializer&lt;String&gt; redisSerializer = <span class="keyword">new</span> StringRedisSerializer();</span><br><span class="line">        Jackson2JsonRedisSerializer jackson2JsonRedisSerializer = <span class="keyword">new</span> Jackson2JsonRedisSerializer(Object.class);</span><br><span class="line">        ObjectMapper om = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">        om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);</span><br><span class="line">        om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);</span><br><span class="line">        jackson2JsonRedisSerializer.setObjectMapper(om);</span><br><span class="line">        template.setConnectionFactory(factory);</span><br><span class="line">        <span class="comment">//key序列化方式</span></span><br><span class="line">        template.setKeySerializer(redisSerializer);</span><br><span class="line">        <span class="comment">//value序列化</span></span><br><span class="line">        template.setValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        <span class="comment">//value hashmap序列化</span></span><br><span class="line">        template.setHashValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CacheManager <span class="title">cacheManager</span><span class="params">(RedisConnectionFactory factory)</span> </span>&#123;</span><br><span class="line">        RedisSerializer&lt;String&gt; redisSerializer = <span class="keyword">new</span> StringRedisSerializer();</span><br><span class="line">        Jackson2JsonRedisSerializer jackson2JsonRedisSerializer = <span class="keyword">new</span> Jackson2JsonRedisSerializer(Object.class);</span><br><span class="line">        <span class="comment">//解决查询缓存转换异常的问题</span></span><br><span class="line">        ObjectMapper om = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">        om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);</span><br><span class="line">        om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);</span><br><span class="line">        jackson2JsonRedisSerializer.setObjectMapper(om);</span><br><span class="line">        <span class="comment">// 配置序列化（解决乱码的问题）,过期时间600秒</span></span><br><span class="line">        RedisCacheConfiguration config = RedisCacheConfiguration.defaultCacheConfig()</span><br><span class="line">                .entryTtl(Duration.ofSeconds(<span class="number">600</span>))</span><br><span class="line">                .serializeKeysWith(RedisSerializationContext.SerializationPair.fromSerializer(redisSerializer))</span><br><span class="line">                .serializeValuesWith(RedisSerializationContext.SerializationPair.fromSerializer(jackson2JsonRedisSerializer))</span><br><span class="line">                .disableCachingNullValues();</span><br><span class="line">        RedisCacheManager cacheManager = RedisCacheManager.builder(factory)</span><br><span class="line">                .cacheDefaults(config)</span><br><span class="line">                .build();</span><br><span class="line">        <span class="keyword">return</span> cacheManager;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="springboot缓存注解"><a href="#springboot缓存注解" class="headerlink" title="springboot缓存注解"></a>springboot缓存注解</h4><blockquote>
<p>在相对应接口中添加Redis缓存使用注解即可使用Redis缓存</p>
<ol>
<li>@Cacheable：一般用在查询方法上，根据方法对其返回结果进行缓存，下次请求时如果缓存存在，name直接读取缓存数据返回</li>
<li>@CachePut：一般用在新增方法上，使用该注解的方法每次都会执行，并将结果存入指定的缓存中</li>
<li>@CacheEvict：一般用在更新或者删除方法上，会清空指定的缓存</li>
</ol>
</blockquote>
<h3 id="使用Redis服务"><a href="#使用Redis服务" class="headerlink" title="使用Redis服务"></a>使用Redis服务</h3><h4 id="安装Redis并启动"><a href="#安装Redis并启动" class="headerlink" title="安装Redis并启动"></a>安装Redis并启动</h4><blockquote>
<p>这里我去谷粒商城看了</p>
</blockquote>
<h4 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h4><blockquote>
<p>在需要使用redis的模块的配置文件application.properties中添加配置</p>
</blockquote>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#redis配置</span></span><br><span class="line"><span class="comment">#注意这里的host和port要和虚拟机的对应</span></span><br><span class="line"><span class="meta">spring.redis.host</span>=<span class="string">192.168.128.129</span></span><br><span class="line"><span class="meta">spring.redis.port</span>=<span class="string">6379</span></span><br><span class="line"><span class="meta">spring.redis.database</span>=<span class="string">0</span></span><br><span class="line"><span class="meta">spring.redis.timeout</span>=<span class="string">1800000</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-active</span>=<span class="string">20</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-wait</span>=<span class="string">-1</span></span><br></pre></td></tr></table></figure>

<h4 id="首页缓存"><a href="#首页缓存" class="headerlink" title="首页缓存"></a>首页缓存</h4><blockquote>
<p>在相关的service方法上添加注释（注意这里为什么要在service中加，因为注释自动添加到redis的话，是从返回值获取的，controller中定义了统一返回格式，不适用）</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CrmBannerServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">CrmBannerMapper</span>, <span class="title">CrmBanner</span>&gt; <span class="keyword">implements</span> <span class="title">CrmBannerService</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 查询所有banner</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Cacheable(key = &quot;&#x27;selectIndexList&#x27;&quot;, value = &quot;banner&quot;)</span>	<span class="comment">// Redis缓存,注意这里key中要加单引号</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;CrmBanner&gt; <span class="title">selectAllBanner</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="redis相关命令"><a href="#redis相关命令" class="headerlink" title="redis相关命令"></a>redis相关命令</h4><blockquote>
<ol>
<li>使用root权限：su root</li>
<li>查看VMwarehost：ifconfig</li>
<li>修改配置文件：vi /mydata/redis/conf/redis.conf</li>
<li>启动redis：docker start redis</li>
<li>进入redis：docker exec -it redis redis-cli</li>
<li>查看所有keyvalue：keys *</li>
<li>设置查看：set/get xxx</li>
</ol>
</blockquote>
<h2 id="JWT-Json-Web-Token"><a href="#JWT-Json-Web-Token" class="headerlink" title="JWT(Json Web Token)"></a>JWT(Json Web Token)</h2><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210929144700746.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210929144700746.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210929144700746"></p>
<h4 id="依赖-1"><a href="#依赖-1" class="headerlink" title="依赖"></a>依赖</h4><blockquote>
<p>先引入依赖，common_utils模块即可 </p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- JWT--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="utils类"><a href="#utils类" class="headerlink" title="utils类"></a>utils类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.jsonwebtoken.Claims;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.Jws;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.Jwts;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.SignatureAlgorithm;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.StringUtils;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JwtUtils</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> EXPIRE = <span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String APP_SECRET = <span class="string">&quot;ukc8BDbRigUDaY6pZFfWus2jZWLPHO&quot;</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getJwtToken</span><span class="params">(String id, String nickname)</span> </span>&#123;</span><br><span class="line">        String JwtToken = Jwts.builder()</span><br><span class="line">                .setHeaderParam(<span class="string">&quot;typ&quot;</span>, <span class="string">&quot;JWT&quot;</span>)</span><br><span class="line">                .setHeaderParam(<span class="string">&quot;alg&quot;</span>, <span class="string">&quot;HS256&quot;</span>)</span><br><span class="line">                .setSubject(<span class="string">&quot;guli-user&quot;</span>)</span><br><span class="line">                .setIssuedAt(<span class="keyword">new</span> Date())</span><br><span class="line">                .setExpiration(<span class="keyword">new</span> Date(System.currentTimeMillis() + EXPIRE))</span><br><span class="line">                .claim(<span class="string">&quot;id&quot;</span>, id)</span><br><span class="line">                .claim(<span class="string">&quot;nickname&quot;</span>, nickname)</span><br><span class="line">                .signWith(SignatureAlgorithm.HS256, APP_SECRET)</span><br><span class="line">                .compact();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> JwtToken;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断token是否存在与有效</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> jwtToken</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">checkToken</span><span class="params">(String jwtToken)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(jwtToken)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Jwts.parser().setSigningKey(APP_SECRET).parseClaimsJws(jwtToken);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断token是否存在与有效</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">checkToken</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String jwtToken = request.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.isEmpty(jwtToken)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            Jwts.parser().setSigningKey(APP_SECRET).parseClaimsJws(jwtToken);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据token获取会员id</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getMemberIdByJwtToken</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        String jwtToken = request.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(jwtToken)) <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        Jws&lt;Claims&gt; claimsJws = Jwts.parser().setSigningKey(APP_SECRET).parseClaimsJws(jwtToken);</span><br><span class="line">        Claims claims = claimsJws.getBody();</span><br><span class="line">        <span class="keyword">return</span> (String) claims.get(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="短信微服务"><a href="#短信微服务" class="headerlink" title="短信微服务"></a>短信微服务</h2><h4 id="阿里云短信服务"><a href="#阿里云短信服务" class="headerlink" title="阿里云短信服务"></a>阿里云短信服务</h4><blockquote>
<p>开启之后，申请签名管理和模板管理</p>
<p>？？？必须要备案网站好家伙mua的</p>
<p>TODO，没有域名下次再说吧</p>
</blockquote>
<h4 id="创建子模块-1"><a href="#创建子模块-1" class="headerlink" title="创建子模块"></a>创建子模块</h4><blockquote>
<p>service_msm模块</p>
</blockquote>
<h4 id="配置文件application-properties"><a href="#配置文件application-properties" class="headerlink" title="配置文件application.properties"></a>配置文件application.properties</h4><blockquote>
<p>基本上都是一样的写法</p>
</blockquote>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 服务端口</span></span><br><span class="line"><span class="meta">server.port</span>=<span class="string">8005</span></span><br><span class="line"><span class="comment"># 服务名</span></span><br><span class="line"><span class="meta">spring.application.name</span>=<span class="string">service-msm</span></span><br><span class="line"><span class="comment"># mysql数据库连接</span></span><br><span class="line"><span class="meta">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/guli?serverTimezone=GMT%2B8</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">123456789</span></span><br><span class="line"><span class="comment">#redis配置</span></span><br><span class="line"><span class="meta">spring.redis.host</span>=<span class="string">192.168.128.129</span></span><br><span class="line"><span class="meta">spring.redis.port</span>=<span class="string">6379</span></span><br><span class="line"><span class="meta">spring.redis.database</span>=<span class="string">0</span></span><br><span class="line"><span class="meta">spring.redis.timeout</span>=<span class="string">1800000</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-active</span>=<span class="string">20</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-wait</span>=<span class="string">-1</span></span><br><span class="line"><span class="comment">#最大阻塞等待时间(负数表示没限制)</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-idle</span>=<span class="string">5</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.min-idle</span>=<span class="string">0</span></span><br><span class="line"><span class="comment">#最小空闲</span></span><br><span class="line"><span class="comment">#返回json的全局时间格式</span></span><br><span class="line"><span class="meta">spring.jackson.date-format</span>=<span class="string">yyyy-MM-dd HH:mm:ss</span></span><br><span class="line"><span class="meta">spring.jackson.time-zone</span>=<span class="string">GMT+8</span></span><br><span class="line"><span class="comment">#mybatis日志</span></span><br><span class="line"><span class="meta">mybatis-plus.configuration.log-impl</span>=<span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line"><span class="comment"># nacos服务地址</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.discovery.server-addr</span>=<span class="string">127.0.0.1:8848</span></span><br><span class="line"><span class="comment">#配置mapper xml文件的路径</span></span><br><span class="line"><span class="meta">mybatis-plus.mapper-locations</span>=<span class="string">classpath:com/atguigu/educms/mapper/xml/*.xml</span></span><br></pre></td></tr></table></figure>

<h4 id="启动类"><a href="#启动类" class="headerlink" title="启动类"></a>启动类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication(exclude = DataSourceAutoConfiguration.class)</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &#123;&quot;com.atguigu&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MsmApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(MsmApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="controller"><a href="#controller" class="headerlink" title="controller"></a>controller</h4><blockquote>
<p>TODO</p>
</blockquote>
<h4 id="service"><a href="#service" class="headerlink" title="service"></a>service</h4><blockquote>
<p>TODO</p>
</blockquote>
<h2 id="登录注册（后端）"><a href="#登录注册（后端）" class="headerlink" title="登录注册（后端）"></a>登录注册（后端）</h2><h3 id="基础工作"><a href="#基础工作" class="headerlink" title="基础工作"></a>基础工作</h3><h4 id="创建模块"><a href="#创建模块" class="headerlink" title="创建模块"></a>创建模块</h4><blockquote>
<p>service_ucenter</p>
</blockquote>
<h4 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h4><blockquote>
<p>ucenter_member</p>
</blockquote>
<h4 id="代码生成器-1"><a href="#代码生成器-1" class="headerlink" title="代码生成器"></a>代码生成器</h4><blockquote>
<p>老样子</p>
</blockquote>
<h4 id="配置文件-1"><a href="#配置文件-1" class="headerlink" title="配置文件"></a>配置文件</h4><blockquote>
<p>老样子</p>
</blockquote>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 服务端口</span></span><br><span class="line"><span class="meta">server.port</span>=<span class="string">8006</span></span><br><span class="line"><span class="comment"># 服务名</span></span><br><span class="line"><span class="meta">spring.application.name</span>=<span class="string">service-ucenter</span></span><br><span class="line"><span class="comment"># mysql数据库连接</span></span><br><span class="line"><span class="meta">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/guli?serverTimezone=GMT%2B8</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">123456789</span></span><br><span class="line"><span class="comment">#redis配置</span></span><br><span class="line"><span class="meta">spring.redis.host</span>=<span class="string">192.168.128.129</span></span><br><span class="line"><span class="meta">spring.redis.port</span>=<span class="string">6379</span></span><br><span class="line"><span class="meta">spring.redis.database</span>=<span class="string">0</span></span><br><span class="line"><span class="meta">spring.redis.timeout</span>=<span class="string">1800000</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-active</span>=<span class="string">20</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-wait</span>=<span class="string">-1</span></span><br><span class="line"><span class="comment">#最大阻塞等待时间(负数表示没限制)</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-idle</span>=<span class="string">5</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.min-idle</span>=<span class="string">0</span></span><br><span class="line"><span class="comment">#最小空闲</span></span><br><span class="line"><span class="comment">#返回json的全局时间格式</span></span><br><span class="line"><span class="meta">spring.jackson.date-format</span>=<span class="string">yyyy-MM-dd HH:mm:ss</span></span><br><span class="line"><span class="meta">spring.jackson.time-zone</span>=<span class="string">GMT+8</span></span><br><span class="line"><span class="comment">#mybatis日志</span></span><br><span class="line"><span class="meta">mybatis-plus.configuration.log-impl</span>=<span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line"><span class="comment"># nacos服务地址</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.discovery.server-addr</span>=<span class="string">127.0.0.1:8848</span></span><br><span class="line"><span class="comment">#配置mapper xml文件的路径</span></span><br><span class="line"><span class="meta">mybatis-plus.mapper-locations</span>=<span class="string">classpath:com/atguigu/educenter/mapper/xml/*.xml</span></span><br></pre></td></tr></table></figure>

<h4 id="启动类-1"><a href="#启动类-1" class="headerlink" title="启动类"></a>启动类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;com.atguigu&quot;&#125;)</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.atguigu.educenter.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UcenterApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(UcenterApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>还有nginx配置，跨域配置等</p>
</blockquote>
<h3 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h3><h4 id="MD5Utils"><a href="#MD5Utils" class="headerlink" title="MD5Utils"></a>MD5Utils</h4><blockquote>
<p>加密工具</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.educenter.utils;</span><br><span class="line"><span class="keyword">import</span> java.security.MessageDigest;</span><br><span class="line"><span class="keyword">import</span> java.security.NoSuchAlgorithmException;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">MD5</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">encrypt</span><span class="params">(String strSrc)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">char</span> hexChars[] = &#123; <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;8&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span> &#125;;</span><br><span class="line">            <span class="keyword">byte</span>[] bytes = strSrc.getBytes();</span><br><span class="line">            MessageDigest md = MessageDigest.getInstance(<span class="string">&quot;MD5&quot;</span>);</span><br><span class="line">            md.update(bytes);</span><br><span class="line">            bytes = md.digest();</span><br><span class="line">            <span class="keyword">int</span> j = bytes.length;</span><br><span class="line">            <span class="keyword">char</span>[] chars = <span class="keyword">new</span> <span class="keyword">char</span>[j * <span class="number">2</span>];</span><br><span class="line">            <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; bytes.length; i++) &#123;</span><br><span class="line">                <span class="keyword">byte</span> b = bytes[i];</span><br><span class="line">                chars[k++] = hexChars[b &gt;&gt;&gt; <span class="number">4</span> &amp; <span class="number">0xf</span>];</span><br><span class="line">                chars[k++] = hexChars[b &amp; <span class="number">0xf</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> String(chars);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;MD5加密出错！！+&quot;</span> + e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(MD5.encrypt(<span class="string">&quot;111111&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="controller-1"><a href="#controller-1" class="headerlink" title="controller"></a>controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/educenter/member&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UcenterMemberController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UcenterMemberService memberService;</span><br><span class="line">    <span class="comment">// 登录</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;login&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">loginUser</span><span class="params">(<span class="meta">@RequestBody</span> UcenterMember member)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 调用service方法,并且返回token</span></span><br><span class="line">        String token = memberService.login(member);</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">&quot;token&quot;</span>, token);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="service-1"><a href="#service-1" class="headerlink" title="service"></a>service</h4><blockquote>
<p>注意使用MD5工具加密再比较密码</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UcenterMemberServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">UcenterMemberMapper</span>, <span class="title">UcenterMember</span>&gt; <span class="keyword">implements</span> <span class="title">UcenterMemberService</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 登录</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">(UcenterMember member)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 获得手机号和密码</span></span><br><span class="line">        String mobile = member.getMobile();</span><br><span class="line">        String password = member.getPassword();</span><br><span class="line">        <span class="comment">// 非空判断</span></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(mobile) || StringUtils.isEmpty(password)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;手机或密码为空&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 查询数据库</span></span><br><span class="line">        QueryWrapper&lt;UcenterMember&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">        wrapper.eq(<span class="string">&quot;mobile&quot;</span>, mobile);</span><br><span class="line">        UcenterMember mmember = baseMapper.selectOne(wrapper);</span><br><span class="line">        <span class="keyword">if</span> (mmember == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;该账号不存在&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 判断密码是否正确</span></span><br><span class="line">        <span class="comment">// 数据库密码为加密后的密码，所以需要转换</span></span><br><span class="line">        <span class="comment">// 使用加密方式MD5（只能加密）</span></span><br><span class="line">        <span class="keyword">if</span> (!mmember.getPassword().equals(MD5.encrypt(password))) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;密码错误&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 判断是否禁用</span></span><br><span class="line">        <span class="keyword">if</span> (mmember.getIsDisabled()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;账号禁用&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 生成token字符串</span></span><br><span class="line">        String token = JwtUtils.getJwtToken(mmember.getId(), mmember.getNickname());</span><br><span class="line">        <span class="keyword">return</span> token;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="swagger测试"><a href="#swagger测试" class="headerlink" title="swagger测试"></a>swagger测试</h4><blockquote>
<p>初始值随便复制一个mobile，密码统一为111111</p>
</blockquote>
<h3 id="注册"><a href="#注册" class="headerlink" title="注册"></a>注册</h3><h4 id="vo实体类"><a href="#vo实体类" class="headerlink" title="vo实体类"></a>vo实体类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegisterVo</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;昵称&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String nickname;</span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;手机号&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String mobile;</span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;密码&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="comment">//@ApiModelProperty(value = &quot;验证码&quot;)</span></span><br><span class="line">    <span class="comment">//private String code;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="controller-2"><a href="#controller-2" class="headerlink" title="controller"></a>controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注册</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;register&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">registerUser</span><span class="params">(<span class="meta">@RequestBody</span> RegisterVo registerVo)</span> </span>&#123;</span><br><span class="line">    memberService.register(registerVo);</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="service-2"><a href="#service-2" class="headerlink" title="service"></a>service</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注册</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">register</span><span class="params">(RegisterVo registerVo)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// TODO 验证码判断（暂时不写）</span></span><br><span class="line">    <span class="comment">//获取注册的数据</span></span><br><span class="line">    String mobile = registerVo.getMobile(); <span class="comment">//手机号</span></span><br><span class="line">    String nickname = registerVo.getNickname(); <span class="comment">//昵称</span></span><br><span class="line">    String password = registerVo.getPassword(); <span class="comment">//密码</span></span><br><span class="line">    <span class="comment">//非空判断</span></span><br><span class="line">    <span class="keyword">if</span> (StringUtils.isEmpty(mobile) || StringUtils.isEmpty(password) || StringUtils.isEmpty(nickname)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;输入为空&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//判断手机号是否重复，表里面存在相同手机号不进行添加</span></span><br><span class="line">    QueryWrapper&lt;UcenterMember&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    wrapper.eq(<span class="string">&quot;mobile&quot;</span>, mobile);</span><br><span class="line">    Integer count = baseMapper.selectCount(wrapper);</span><br><span class="line">    <span class="keyword">if</span> (count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;手机号重复&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//数据添加数据库中</span></span><br><span class="line">    UcenterMember member = <span class="keyword">new</span> UcenterMember();</span><br><span class="line">    member.setMobile(mobile);</span><br><span class="line">    member.setNickname(nickname);</span><br><span class="line">    member.setPassword(MD5.encrypt(password));<span class="comment">//密码需要加密的</span></span><br><span class="line">    member.setIsDisabled(<span class="keyword">false</span>);<span class="comment">//用户不禁用</span></span><br><span class="line">  member.setAvatar(<span class="string">&quot;http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoj0hHXhgJNOTSOFsS4uZs8x1ConecaVOB8eIl115xmJZcT4oCicvia7wMEufibKtTLqiaJeanU2Lpg3w/132&quot;</span>);</span><br><span class="line">    baseMapper.insert(member);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="回显数据"><a href="#回显数据" class="headerlink" title="回显数据"></a>回显数据</h3><blockquote>
<p>根据token获得用户信息</p>
</blockquote>
<h4 id="controller-3"><a href="#controller-3" class="headerlink" title="controller"></a>controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 根据token获取用户信息</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;getMemberInfo&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">getMemberInfo</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 调用jwt工具类方法获取request对象的头信息，获得id</span></span><br><span class="line">    String memberId = JwtUtils.getMemberIdByJwtToken(request);</span><br><span class="line">    <span class="comment">// 获得用户信息</span></span><br><span class="line">    UcenterMember member = memberService.getById(memberId);</span><br><span class="line">    <span class="comment">// 这里最好额外使用vo实体类</span></span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">&quot;member&quot;</span>, member);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="登录注册（前端）"><a href="#登录注册（前端）" class="headerlink" title="登录注册（前端）"></a>登录注册（前端）</h2><h3 id="注册-1"><a href="#注册-1" class="headerlink" title="注册"></a>注册</h3><h4 id="layout"><a href="#layout" class="headerlink" title="layout"></a>layout</h4><blockquote>
<p>创建sign.vue然后cv</p>
<p>这个是专门的注册登录页面的布局</p>
</blockquote>
<h4 id="api"><a href="#api" class="headerlink" title="api"></a>api</h4><blockquote>
<p>api中创建对应js即可</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// 注册</span></span><br><span class="line">  <span class="function"><span class="title">register</span>(<span class="params">registerVo</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/educenter/member/register&#x27;</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: registerVo</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="vue页面"><a href="#vue页面" class="headerlink" title="vue页面"></a>vue页面</h4><blockquote>
<p>先去layout -&gt; default.vue中的地址该为登录注册页面的地址</p>
<p>然后在pages里创建vue视图</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;main&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;title&quot;&gt;</span><br><span class="line">      &lt;a href=&quot;/login&quot;&gt;登录&lt;/a&gt;</span><br><span class="line">      &lt;span&gt;·&lt;/span&gt;</span><br><span class="line">      &lt;a class=&quot;active&quot; href=&quot;/register&quot;&gt;注册&lt;/a&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;sign-up-container&quot;&gt;</span><br><span class="line">      &lt;el-form ref=&quot;userForm&quot; :model=&quot;params&quot;&gt;</span><br><span class="line">        &lt;el-form-item</span><br><span class="line">          class=&quot;input-prepend restyle&quot;</span><br><span class="line">          prop=&quot;nickname&quot;</span><br><span class="line">          :rules=&quot;[</span><br><span class="line">            &#123; required: true, message: &#x27;请输入你的昵称&#x27;, trigger: &#x27;blur&#x27; &#125;,</span><br><span class="line">          ]&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">            &lt;el-input</span><br><span class="line">              type=&quot;text&quot;</span><br><span class="line">              placeholder=&quot;你的昵称&quot;</span><br><span class="line">              v-model=&quot;params.nickname&quot;</span><br><span class="line">            /&gt;</span><br><span class="line">            &lt;i class=&quot;iconfont icon-user&quot; /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item</span><br><span class="line">          class=&quot;input-prepend restyle no-radius&quot;</span><br><span class="line">          prop=&quot;mobile&quot;</span><br><span class="line">          :rules=&quot;[</span><br><span class="line">            &#123; required: true, message: &#x27;请输入手机号码&#x27;, trigger: &#x27;blur&#x27; &#125;,</span><br><span class="line">            &#123; validator: checkPhone, trigger: &#x27;blur&#x27; &#125;,</span><br><span class="line">          ]&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">            &lt;el-input</span><br><span class="line">              type=&quot;text&quot;</span><br><span class="line">              placeholder=&quot;手机号&quot;</span><br><span class="line">              v-model=&quot;params.mobile&quot;</span><br><span class="line">            /&gt;</span><br><span class="line">            &lt;i class=&quot;iconfont icon-phone&quot; /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-form-item</span><br><span class="line">          class=&quot;input-prepend restyle no-radius&quot;</span><br><span class="line">          prop=&quot;code&quot;</span><br><span class="line">          :rules=&quot;[</span><br><span class="line">            &#123; required: true, message: &#x27;请输入验证码&#x27;, trigger: &#x27;blur&#x27; &#125;,</span><br><span class="line">          ]&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;div</span><br><span class="line">            style=&quot;width: 100%; display: block; float: left; position: relative&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            &lt;el-input type=&quot;text&quot; placeholder=&quot;验证码&quot; v-model=&quot;params.code&quot; /&gt;</span><br><span class="line">            &lt;i class=&quot;iconfont icon-phone&quot; /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div</span><br><span class="line">            class=&quot;btn&quot;</span><br><span class="line">            style=&quot;position: absolute; right: 0; top: 6px; width: 40%&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            &lt;a</span><br><span class="line">              href=&quot;javascript:&quot;</span><br><span class="line">              type=&quot;button&quot;</span><br><span class="line">              @click=&quot;getCodeFun()&quot;</span><br><span class="line">              :value=&quot;codeTest&quot;</span><br><span class="line">              style=&quot;border: none; background-color: none&quot;</span><br><span class="line">              &gt;&#123;&#123; codeTest &#125;&#125;&lt;/a</span><br><span class="line">            &gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-form-item</span><br><span class="line">          class=&quot;input-prepend&quot;</span><br><span class="line">          prop=&quot;password&quot;</span><br><span class="line">          :rules=&quot;[&#123; required: true, message: &#x27;请输入密码&#x27;, trigger: &#x27;blur&#x27; &#125;]&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">            &lt;el-input</span><br><span class="line">              type=&quot;password&quot;</span><br><span class="line">              placeholder=&quot;设置密码&quot;</span><br><span class="line">              v-model=&quot;params.password&quot;</span><br><span class="line">            /&gt;</span><br><span class="line">            &lt;i class=&quot;iconfont icon-password&quot; /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div class=&quot;btn&quot;&gt;</span><br><span class="line">          &lt;input</span><br><span class="line">            type=&quot;button&quot;</span><br><span class="line">            class=&quot;sign-up-button&quot;</span><br><span class="line">            value=&quot;注册&quot;</span><br><span class="line">            @click=&quot;submitRegister()&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;p class=&quot;sign-up-msg&quot;&gt;</span><br><span class="line">          点击 “注册” 即表示您同意并愿意遵守简书</span><br><span class="line">          &lt;br /&gt;</span><br><span class="line">          &lt;a target=&quot;_blank&quot; href=&quot;http://www.jianshu.com/p/c44d171298ce&quot;</span><br><span class="line">            &gt;用户协议&lt;/a</span><br><span class="line">          &gt;</span><br><span class="line">          和</span><br><span class="line">          &lt;a target=&quot;_blank&quot; href=&quot;http://www.jianshu.com/p/2ov8x3&quot;&gt;隐私政策&lt;/a&gt;</span><br><span class="line">          。</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">      &lt;/el-form&gt;</span><br><span class="line">      &lt;!-- 更多注册方式 --&gt;</span><br><span class="line">      &lt;div class=&quot;more-sign&quot;&gt;</span><br><span class="line">        &lt;h6&gt;社交帐号直接注册&lt;/h6&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;a</span><br><span class="line">              id=&quot;weixin&quot;</span><br><span class="line">              class=&quot;weixin&quot;</span><br><span class="line">              target=&quot;_blank&quot;</span><br><span class="line">              href=&quot;http://huaan.free.idcfengye.com/api/ucenter/wx/login&quot;</span><br><span class="line">              &gt;&lt;i class=&quot;iconfont icon-weixin&quot;</span><br><span class="line">            /&gt;&lt;/a&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;a id=&quot;qq&quot; class=&quot;qq&quot; target=&quot;_blank&quot; href=&quot;#&quot;</span><br><span class="line">              &gt;&lt;i class=&quot;iconfont icon-qq&quot;</span><br><span class="line">            /&gt;&lt;/a&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import &#x27;~/assets/css/sign.css&#x27;</span><br><span class="line">  import &#x27;~/assets/css/iconfont.css&#x27;</span><br><span class="line">  export default &#123;</span><br><span class="line">    layout: &#x27;sign&#x27;,</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        params: &#123;</span><br><span class="line">          // 封装注册输入数据</span><br><span class="line">          mobile: &#x27;&#x27;,</span><br><span class="line">          code: &#x27;&#x27;, // 验证码</span><br><span class="line">          nickname: &#x27;&#x27;,</span><br><span class="line">          password: &#x27;&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        sending: true, // 是否发送验证码</span><br><span class="line">        second: 60, // 倒计时间</span><br><span class="line">        codeTest: &#x27;获取验证码&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="vue方法"><a href="#vue方法" class="headerlink" title="vue方法"></a>vue方法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注册提交</span></span><br><span class="line"><span class="function"><span class="title">submitRegister</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  registerApi.register(<span class="built_in">this</span>.params).then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 提示注册成功</span></span><br><span class="line">    <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;注册成功&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 跳转登录页面</span></span><br><span class="line">    <span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span> &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 发送验证码</span></span><br><span class="line"><span class="function"><span class="title">getCodeFun</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> ((<span class="built_in">this</span>.sending = <span class="literal">false</span>)) &#123;</span><br><span class="line">    <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;请勿频繁点击&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 由于阿里云短信服务不能用，所以这里写假验证</span></span><br><span class="line">  <span class="built_in">this</span>.sending = <span class="literal">false</span></span><br><span class="line">  <span class="comment">// 调用倒计时的方法</span></span><br><span class="line">  <span class="built_in">this</span>.timeDown()</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 验证手机号格式</span></span><br><span class="line"><span class="function"><span class="title">checkPhone</span>(<span class="params">rule, value, callback</span>)</span> &#123;</span><br><span class="line">  <span class="comment">// debugger</span></span><br><span class="line">  <span class="keyword">if</span> (!<span class="regexp">/^1[34578]\d&#123;9&#125;$/</span>.test(value)) &#123;</span><br><span class="line">    <span class="keyword">return</span> callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;手机号码格式不正确&#x27;</span>))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> callback()</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 倒计时</span></span><br><span class="line"><span class="function"><span class="title">timeDown</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    --<span class="built_in">this</span>.second</span><br><span class="line">    <span class="built_in">this</span>.codeTest = <span class="built_in">this</span>.second</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.second &lt; <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="built_in">clearInterval</span>(result)</span><br><span class="line">      <span class="built_in">this</span>.sending = <span class="literal">true</span></span><br><span class="line">      <span class="built_in">this</span>.second = <span class="number">60</span></span><br><span class="line">      <span class="built_in">this</span>.codeTest = <span class="string">&#x27;获取验证码&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>TODO：这里有很多地方需要完善：比如点击验证码之后再次点击数字需要弹窗警告，但是现在不会而且还会加速计时器</p>
</blockquote>
<h3 id="登录-1"><a href="#登录-1" class="headerlink" title="登录"></a>登录</h3><h4 id="cookie插件"><a href="#cookie插件" class="headerlink" title="cookie插件"></a>cookie插件</h4><blockquote>
<p>这里需要用到cookie，需要下载</p>
<p>npm install js-cookie</p>
</blockquote>
<h4 id="api-1"><a href="#api-1" class="headerlink" title="api"></a>api</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// 登录</span></span><br><span class="line">  <span class="function"><span class="title">login</span>(<span class="params">member</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/educenter/member/login&#x27;</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: member</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 根据token获取用户信息</span></span><br><span class="line">  <span class="function"><span class="title">getLoginMemberInfo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/educenter/member/getMemberInfo&#x27;</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="vue视图"><a href="#vue视图" class="headerlink" title="vue视图"></a>vue视图</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;main&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;title&quot;&gt;</span><br><span class="line">      &lt;a class=&quot;active&quot; href=&quot;/login&quot;&gt;登录&lt;/a&gt;</span><br><span class="line">      &lt;span&gt;·&lt;/span&gt;</span><br><span class="line">      &lt;a href=&quot;/register&quot;&gt;注册&lt;/a&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;sign-up-container&quot;&gt;</span><br><span class="line">      &lt;el-form ref=&quot;userForm&quot; :model=&quot;user&quot;&gt;</span><br><span class="line">        &lt;el-form-item</span><br><span class="line">          class=&quot;input-prepend restyle&quot;</span><br><span class="line">          prop=&quot;mobile&quot;</span><br><span class="line">          :rules=&quot;[</span><br><span class="line">            &#123; required: true, message: &#x27;请输入手机号码&#x27;, trigger: &#x27;blur&#x27; &#125;,</span><br><span class="line">            &#123; validator: checkPhone, trigger: &#x27;blur&#x27; &#125;,</span><br><span class="line">          ]&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">            &lt;el-input type=&quot;text&quot; placeholder=&quot;手机号&quot; v-model=&quot;user.mobile&quot; /&gt;</span><br><span class="line">            &lt;i class=&quot;iconfont icon-phone&quot; /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-form-item</span><br><span class="line">          class=&quot;input-prepend&quot;</span><br><span class="line">          prop=&quot;password&quot;</span><br><span class="line">          :rules=&quot;[&#123; required: true, message: &#x27;请输入密码&#x27;, trigger: &#x27;blur&#x27; &#125;]&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">            &lt;el-input</span><br><span class="line">              type=&quot;password&quot;</span><br><span class="line">              placeholder=&quot;密码&quot;</span><br><span class="line">              v-model=&quot;user.password&quot;</span><br><span class="line">            /&gt;</span><br><span class="line">            &lt;i class=&quot;iconfont icon-password&quot; /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div class=&quot;btn&quot;&gt;</span><br><span class="line">          &lt;input</span><br><span class="line">            type=&quot;button&quot;</span><br><span class="line">            class=&quot;sign-in-button&quot;</span><br><span class="line">            value=&quot;登录&quot;</span><br><span class="line">            @click=&quot;submitLogin()&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-form&gt;</span><br><span class="line">      &lt;!-- 更多登录方式 --&gt;</span><br><span class="line">      &lt;div class=&quot;more-sign&quot;&gt;</span><br><span class="line">        &lt;h6&gt;社交帐号登录&lt;/h6&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;a</span><br><span class="line">              id=&quot;weixin&quot;</span><br><span class="line">              class=&quot;weixin&quot;</span><br><span class="line">              target=&quot;_blank&quot;</span><br><span class="line">              href=&quot;http://qy.free.idcfengye.com/api/ucenter/weixinLogin/login&quot;</span><br><span class="line">              &gt;&lt;i class=&quot;iconfont icon-weixin&quot;</span><br><span class="line">            /&gt;&lt;/a&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;a id=&quot;qq&quot; class=&quot;qq&quot; target=&quot;_blank&quot; href=&quot;#&quot;</span><br><span class="line">              &gt;&lt;i class=&quot;iconfont icon-qq&quot;</span><br><span class="line">            /&gt;&lt;/a&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import &#x27;~/assets/css/sign.css&#x27;</span><br><span class="line">  import &#x27;~/assets/css/iconfont.css&#x27;</span><br><span class="line">  export default &#123;</span><br><span class="line">    layout: &#x27;sign&#x27;,</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        user: &#123;</span><br><span class="line">          mobile: &#x27;&#x27;,</span><br><span class="line">          password: &#x27;&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        loginInfo: &#123;&#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">  .el-form-item__error &#123;</span><br><span class="line">    z-index: 9999999;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h4 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h4><blockquote>
<p>在下面的方法中有说明登录token的步骤，其中需要用到拦截器</p>
<p>拦截器写在utils文件夹下的request.js文件中</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cookie <span class="keyword">from</span> <span class="string">&#x27;js-cookie&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 每次请求中使用拦截器</span></span><br><span class="line">service.interceptors.request.use(</span><br><span class="line">  <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (cookie.get(<span class="string">&#x27;guli_token&#x27;</span>)) &#123;</span><br><span class="line">      <span class="comment">// 从cookie中获得token并且放入header中</span></span><br><span class="line">      config.headers[<span class="string">&#x27;token&#x27;</span>] = cookie.get(<span class="string">&#x27;guli_token&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(err)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="vue方法-1"><a href="#vue方法-1" class="headerlink" title="vue方法"></a>vue方法</h4><blockquote>
<ol>
<li>调用接口登录获取token</li>
<li>将token放入cookie</li>
<li>前端拦截器：判断cookie里是否有token，如果有则放到header中</li>
<li>根据header中的token调用接口获取用户信息</li>
<li>把获取的用户信息放入cookie</li>
</ol>
</blockquote>
<blockquote>
<p>login.vue中</p>
<p>注意这里把对象放入cookie中是要使用JSON.stringify转换为字符串才行，要不然就是object，回报错（cookie获得的json对象为undefined）</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 登录的方法</span></span><br><span class="line"><span class="function"><span class="title">submitLogin</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="comment">// 1、调用接口进行登录，返回token字符串</span></span><br><span class="line">  loginApi.login(<span class="built_in">this</span>.user).then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 2、获得token,并放入cookie</span></span><br><span class="line">    <span class="comment">// 第一个参数cookie名称，第二个参数值，第三个参数作用范围</span></span><br><span class="line">    cookieApi.set(<span class="string">&#x27;guli_token&#x27;</span>, result.data.data.token, &#123;</span><br><span class="line">      <span class="attr">domain</span>: <span class="string">&#x27;localhost&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 4、调用接口获取header中的token</span></span><br><span class="line">    loginApi.getLoginMemberInfo().then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 5、根据token获取用户信息放入cookie中</span></span><br><span class="line">      <span class="built_in">console</span>.log(response.data.data.member)</span><br><span class="line">      cookieApi.set(<span class="string">&#x27;guli_ucenter&#x27;</span>, <span class="built_in">JSON</span>.stringify(result.data.data.member), &#123;</span><br><span class="line">        <span class="attr">domain</span>: <span class="string">&#x27;localhost&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 跳转页面</span></span><br><span class="line">    <span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span> &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 验证手机号格式</span></span><br><span class="line"><span class="function"><span class="title">checkPhone</span>(<span class="params">rule, value, callback</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="regexp">/^1[34578]\d&#123;9&#125;$/</span>.test(value)) &#123;</span><br><span class="line">    <span class="keyword">return</span> callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;手机号码格式不正确&#x27;</span>))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> callback()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>default.vue中编写根据token获得用户信息</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.showInfo()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">      <span class="comment">// 从cookie中获取用户信息</span></span><br><span class="line">      <span class="function"><span class="title">showInfo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// 注意这里需要转换</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;从cookie中获得用户信息：&#x27;</span> + cookieApi.get(<span class="string">&#x27;guli_ucenter&#x27;</span>))</span><br><span class="line">        <span class="keyword">var</span> loginInfoStr = cookieApi.get(<span class="string">&#x27;guli_ucenter&#x27;</span>)</span><br><span class="line">        <span class="built_in">console</span>.log(cookieApi.get(<span class="string">&#x27;guli_ucenter&#x27;</span>))</span><br><span class="line">        <span class="comment">// 把字符串转换为JSON格式</span></span><br><span class="line">        <span class="keyword">if</span> (loginInfoStr) &#123;</span><br><span class="line">          <span class="built_in">this</span>.loginInfo = <span class="built_in">JSON</span>.parse(loginInfoStr)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 退出登录</span></span><br><span class="line">      <span class="function"><span class="title">logout</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// 清除cookie</span></span><br><span class="line">        cookieApi.set(<span class="string">&#x27;guli_token&#x27;</span>, <span class="string">&#x27;&#x27;</span>, &#123; <span class="attr">domain</span>: <span class="string">&#x27;localhost&#x27;</span> &#125;)</span><br><span class="line">        cookieApi.set(<span class="string">&#x27;guli_ucenter&#x27;</span>, <span class="string">&#x27;&#x27;</span>, &#123; <span class="attr">domain</span>: <span class="string">&#x27;localhost&#x27;</span> &#125;)</span><br><span class="line">        <span class="comment">// 清除数据</span></span><br><span class="line">        <span class="built_in">this</span>.token = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="built_in">this</span>.loginInfo = &#123;&#125;</span><br><span class="line">        <span class="comment">// 跳转至首页</span></span><br><span class="line">        <span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span> &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>TODO：这里需要完善的地方有很多，登录校验（JWT strings must contain exactly 2 period characters. Found: 0）如果输入错误页面竟然显示cookie undefined，而且重新登录也不行，还有前端的信息提示</p>
</blockquote>
<h2 id="微信扫码登录（后端-前端）"><a href="#微信扫码登录（后端-前端）" class="headerlink" title="微信扫码登录（后端+前端）"></a>微信扫码登录（后端+前端）</h2><h3 id="OAuth2"><a href="#OAuth2" class="headerlink" title="OAuth2"></a>OAuth2</h3><blockquote>
<p>一种方案，解决两个问题：</p>
<ol>
<li>开放系统间授权</li>
<li>分布式访问问题</li>
</ol>
</blockquote>
<p>![03 OAuth2介绍](<a target="_blank" rel="noopener" href="https://gitee.com/ReRia/images/raw/master/img/03">https://gitee.com/ReRia/images/raw/master/img/03</a> OAuth2介绍.png)</p>
<h3 id="微信登录准备工作"><a href="#微信登录准备工作" class="headerlink" title="微信登录准备工作"></a>微信登录准备工作</h3><blockquote>
<p>没事了要付钱，鹅肠真有你的</p>
<p>没事了老师共享账号，好耶！</p>
</blockquote>
<h4 id="配置文件-2"><a href="#配置文件-2" class="headerlink" title="配置文件"></a>配置文件</h4><blockquote>
<p>service_ucenter模块的配置文件即可（只用于登录注册）</p>
</blockquote>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 微信开放平台 appid</span></span><br><span class="line"><span class="meta">wx.open.app_id</span>=<span class="string">wxed9954c01bb89b47</span></span><br><span class="line"><span class="comment"># 微信开放平台 appsecret</span></span><br><span class="line"><span class="meta">wx.open.app_secret</span>=<span class="string">a7482517235173ddb4083788de60b90e</span></span><br><span class="line"><span class="comment"># 微信开放平台 重定向url</span></span><br><span class="line"><span class="meta">wx.open.redirect_url</span>=<span class="string">http://localhost:8160/api/ucenter/wx/callback</span></span><br></pre></td></tr></table></figure>

<h4 id="常量类"><a href="#常量类" class="headerlink" title="常量类"></a>常量类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.educenter.utils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.InitializingBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConstantWxUtils</span> <span class="keyword">implements</span> <span class="title">InitializingBean</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;wx.open.app_id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String appId;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;wx.open.app_secret&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String appSecret;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;wx.open.redirect_url&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String redirectUrl;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String WX_OPEN_APP_ID;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String WX_OPEN_APP_SECRET;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String WX_OPEN_REDIRECT_URL;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        WX_OPEN_APP_ID = appId;</span><br><span class="line">        WX_OPEN_APP_SECRET = appSecret;</span><br><span class="line">        WX_OPEN_REDIRECT_URL = redirectUrl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="生成二维码"><a href="#生成二维码" class="headerlink" title="生成二维码"></a>生成二维码</h3><h4 id="controller-4"><a href="#controller-4" class="headerlink" title="controller"></a>controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/api/ucenter/wx&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WxApiController</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 生成扫描二维码</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;login&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getWxCode</span><span class="params">()</span> <span class="keyword">throws</span> UnsupportedEncodingException </span>&#123;</span><br><span class="line">        <span class="comment">// 参数位置都是用%s来代替，然后使用String.format</span></span><br><span class="line">        String baseUrl = <span class="string">&quot;https://open.weixin.qq.com/connect/qrconnect&quot;</span> +</span><br><span class="line">                <span class="string">&quot;?appid=%s&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&amp;redirect_uri=%s&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&amp;response_type=code&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&amp;scope=snsapi_login&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&amp;state=%s&quot;</span> +</span><br><span class="line">                <span class="string">&quot;#wechat_redirect&quot;</span>;</span><br><span class="line">        <span class="comment">// 需要进行url编码</span></span><br><span class="line">        String redirectUrl = URLEncoder.encode(ConstantWxUtils.WX_OPEN_REDIRECT_URL, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="comment">// 传入url中的参数获得最终的url</span></span><br><span class="line">        String url = String.format(baseUrl, ConstantWxUtils.WX_OPEN_APP_ID, redirectUrl, <span class="string">&quot;atguigu&quot;</span>);</span><br><span class="line">        <span class="comment">// 重定向到微信地址</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:&quot;</span> + url;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意这里需要修改端口号，因为用的是老师的url，所以要对应，nginx里也要改</p>
<p>这里我明白了一点nginx的作用，前端只需要访问nginx提供的9001端口号，而9001能够转发到8001等其他端口号，所以后端端口号改了只要该nginx就行，神奇！</p>
</blockquote>
<h3 id="获取扫描人信息"><a href="#获取扫描人信息" class="headerlink" title="获取扫描人信息"></a>获取扫描人信息</h3><h4 id="依赖-2"><a href="#依赖-2" class="headerlink" title="依赖"></a>依赖</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--httpclient--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>httpclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--commons-io--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--gson--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.code.gson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="HttpClientUtils"><a href="#HttpClientUtils" class="headerlink" title="HttpClientUtils"></a>HttpClientUtils</h4><blockquote>
<p>太长不复制了</p>
</blockquote>
<h4 id="controller-5"><a href="#controller-5" class="headerlink" title="controller"></a>controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> UcenterMemberService memberService;</span><br><span class="line"><span class="comment">// 获取扫描人的信息，添加数据</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;callback&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">callback</span><span class="params">(String code, String status)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">// 1、获取code，类似于验证码</span></span><br><span class="line">    <span class="comment">// 2、请求微信api得到access_token和openid</span></span><br><span class="line">    String baseAccessTokenUrl = <span class="string">&quot;https://api.weixin.qq.com/sns/oauth2/access_token&quot;</span> +</span><br><span class="line">            <span class="string">&quot;?appid=%s&quot;</span> +</span><br><span class="line">            <span class="string">&quot;&amp;secret=%s&quot;</span> +</span><br><span class="line">            <span class="string">&quot;&amp;code=%s&quot;</span> +</span><br><span class="line">            <span class="string">&quot;&amp;grant_type=authorization_code&quot;</span>;</span><br><span class="line">    <span class="comment">// 拼接参数，发送请求</span></span><br><span class="line">    String accessTokenUrl = String.format(baseAccessTokenUrl, ConstantWxUtils.WX_OPEN_APP_ID, ConstantWxUtils.WX_OPEN_APP_SECRET, code);</span><br><span class="line">    String accessTokenInfo = HttpClientUtils.get(accessTokenUrl);</span><br><span class="line">    <span class="comment">// 转换json-&gt;map集合,获取其中的两个参数,使用json转换工具 Gson</span></span><br><span class="line">    Gson gson = <span class="keyword">new</span> Gson();</span><br><span class="line">    HashMap accessTokenMap = gson.fromJson(accessTokenInfo, HashMap.class);</span><br><span class="line">    String access_token = (String) accessTokenMap.get(<span class="string">&quot;access_token&quot;</span>);</span><br><span class="line">    String openid = (String) accessTokenMap.get(<span class="string">&quot;openid&quot;</span>);</span><br><span class="line">    <span class="comment">// 把扫描人信息添加数据库里面</span></span><br><span class="line">    <span class="comment">// 判断数据表里面是否存在相同微信信息，根据openid判断</span></span><br><span class="line">    UcenterMember member = memberService.getOpenIdMember(openid);</span><br><span class="line">    <span class="keyword">if</span> (member == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">// 3、拿着得到accsess_token 和 openid，再去请求微信提供固定的地址，获取到扫描人信息</span></span><br><span class="line">        <span class="comment">// 访问微信的资源服务器，获取用户信息</span></span><br><span class="line">        String baseUserInfoUrl = <span class="string">&quot;https://api.weixin.qq.com/sns/userinfo&quot;</span> +</span><br><span class="line">                <span class="string">&quot;?access_token=%s&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&amp;openid=%s&quot;</span>;</span><br><span class="line">        <span class="comment">// 拼接参数，发送请求</span></span><br><span class="line">        String userInfoUrl = String.format(baseUserInfoUrl, access_token, openid);</span><br><span class="line">        String userInfo = HttpClientUtils.get(userInfoUrl);</span><br><span class="line">        <span class="comment">//转换并获取返回userinfo字符串扫描人信息</span></span><br><span class="line">        HashMap userInfoMap = gson.fromJson(userInfo, HashMap.class);</span><br><span class="line">        String nickname = (String) userInfoMap.get(<span class="string">&quot;nickname&quot;</span>);<span class="comment">//昵称</span></span><br><span class="line">        String headimgurl = (String) userInfoMap.get(<span class="string">&quot;headimgurl&quot;</span>);<span class="comment">//头像</span></span><br><span class="line">        <span class="comment">// 创建扫描member对象</span></span><br><span class="line">        member = <span class="keyword">new</span> UcenterMember();</span><br><span class="line">        member.setOpenid(openid);</span><br><span class="line">        member.setNickname(nickname);</span><br><span class="line">        member.setAvatar(headimgurl);</span><br><span class="line">        memberService.save(member);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 4、使用jwt根据member对象生成token字符串</span></span><br><span class="line">    String jwtToken = JwtUtils.getJwtToken(member.getId(), member.getNickname());</span><br><span class="line">    <span class="comment">// 5、最后：返回首页面，通过路径传递token字符串</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:http://localhost:3000?token=&quot;</span> + jwtToken;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="service-3"><a href="#service-3" class="headerlink" title="service"></a>service</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 根据openid查询</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> UcenterMember <span class="title">getOpenIdMember</span><span class="params">(String openid)</span> </span>&#123;</span><br><span class="line">    QueryWrapper&lt;UcenterMember&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    wrapper.eq(<span class="string">&quot;openid&quot;</span>, openid);</span><br><span class="line">    UcenterMember member = baseMapper.selectOne(wrapper);</span><br><span class="line">    <span class="keyword">return</span> member;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h3><blockquote>
<p>取地址栏中的带名称的参数值（而不是xx/xx/xx这种使用this.$route.params.xx）使用this.$route.query.xxx</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="comment">// 获取url中的token</span></span><br><span class="line">  <span class="built_in">this</span>.token = <span class="built_in">this</span>.$route.query.token</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">this</span>.token) &#123;</span><br><span class="line">    <span class="built_in">this</span>.wxLogin()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">this</span>.showInfo()</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="comment">// 微信登录后显示用户信息</span></span><br><span class="line">  <span class="function"><span class="title">wxLogin</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 把token放入cookie</span></span><br><span class="line">    cookieApi.set(<span class="string">&#x27;guli_token&#x27;</span>, <span class="built_in">this</span>.token, &#123; <span class="attr">domain</span>: <span class="string">&#x27;localhost&#x27;</span> &#125;)</span><br><span class="line">    <span class="comment">// 调用接口获取header中的token</span></span><br><span class="line">    loginApi.getLoginMemberInfo().then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 5、根据token获取用户信息放入cookie中</span></span><br><span class="line">      cookieApi.set(<span class="string">&#x27;guli_ucenter&#x27;</span>, <span class="built_in">JSON</span>.stringify(result.data.data.member), &#123;</span><br><span class="line">        <span class="attr">domain</span>: <span class="string">&#x27;localhost&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 跳转页面</span></span><br><span class="line">    <span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span> &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 从cookie中获取用户信息</span></span><br><span class="line">  <span class="function"><span class="title">showInfo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> loginInfoStr = cookieApi.get(<span class="string">&#x27;guli_ucenter&#x27;</span>)</span><br><span class="line">    <span class="comment">// 把字符串转换为JSON格式</span></span><br><span class="line">    <span class="keyword">if</span> (loginInfoStr) &#123;</span><br><span class="line">      <span class="built_in">this</span>.loginInfo = <span class="built_in">JSON</span>.parse(loginInfoStr)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意把进入微信扫码的href改为<a target="_blank" rel="noopener" href="http://localhost:8160/api/ucenter/wx/login%E5%8D%B3%E5%8F%AF">http://localhost:8160/api/ucenter/wx/login即可</a></p>
</blockquote>

  
  
    
    <div class='footer'>
      
      
      
      
    </div>
  
  
    


  <div class='article-meta' id="bottom">
    <div class='new-meta-box'>
      
        
          <div class="new-meta-item date" itemprop="dateUpdated" datetime="2021-10-02T12:40:15+08:00">
  <a class='notlink'>
    <i class="fas fa-edit fa-fw" aria-hidden="true"></i>
    <p>更新于：2021年10月2日</p>
  </a>
</div>

        
      
        
          
  
  <div class="new-meta-item meta-tags"><a class="tag" href="/tags/SpringBoot/" rel="nofollow"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i><p>SpringBoot</p></a></div> <div class="new-meta-item meta-tags"><a class="tag" href="/tags/Vue/" rel="nofollow"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i><p>Vue</p></a></div> <div class="new-meta-item meta-tags"><a class="tag" href="/tags/%E9%A1%B9%E7%9B%AE/" rel="nofollow"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i><p>项目</p></a></div> <div class="new-meta-item meta-tags"><a class="tag" href="/tags/SpringCloud/" rel="nofollow"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i><p>SpringCloud</p></a></div>


        
      
        
          
  <div class="new-meta-item share -mob-share-list">
  <div class="-mob-share-list share-body">
    
      
        <a class="-mob-share-qq" title="" rel="external nofollow noopener noreferrer noopener"
          
          target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://example.com/2021/09/28/xiang-mu-bi-ji-zai-xian-jiao-yu-xiang-mu-shi-zhan-5/&title=【项目笔记】在线教育项目实战5 - Reria's BLOG&summary="
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/128/qq.png">
          
        </a>
      
    
      
        <a class="-mob-share-qzone" title="" rel="external nofollow noopener noreferrer noopener"
          
          target="_blank" href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://example.com/2021/09/28/xiang-mu-bi-ji-zai-xian-jiao-yu-xiang-mu-shi-zhan-5/&title=【项目笔记】在线教育项目实战5 - Reria's BLOG&summary="
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/128/qzone.png">
          
        </a>
      
    
      
        <a class="-mob-share-weibo" title="" rel="external nofollow noopener noreferrer noopener"
          
          target="_blank" href="http://service.weibo.com/share/share.php?url=http://example.com/2021/09/28/xiang-mu-bi-ji-zai-xian-jiao-yu-xiang-mu-shi-zhan-5/&title=【项目笔记】在线教育项目实战5 - Reria's BLOG&summary="
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/128/weibo.png">
          
        </a>
      
    
      
    
      
    
  </div>
</div>



        
      
    </div>
  </div>


  
  

  
    <div class="prev-next">
      
        <a class='prev' href='/2021/10/02/xiang-mu-bi-ji-zai-xian-jiao-yu-xiang-mu-shi-zhan-6/'>
          <p class='title'><i class="fas fa-chevron-left" aria-hidden="true"></i>【项目笔记】在线教育项目实战6</p>
          <p class='content'>前台讲师列表和详情（后端+前端）讲师分页列表（后端）controller1234567891011121314151617@RestController@RequestMapping(&quot...</p>
        </a>
      
      
        <a class='next' href='/2021/09/25/xiang-mu-bi-ji-zai-xian-jiao-yu-xiang-mu-shi-zhan-4/'>
          <p class='title'>【项目笔记】在线教育项目实战4<i class="fas fa-chevron-right" aria-hidden="true"></i></p>
          <p class='content'>多表连接查询
方式如下

内连接
左外连接
右外连接


课程全部信息查询（后端）创建值封装对象类1234567891011@Datapublic class CoursePublishVo &...</p>
        </a>
      
    </div>
  
</article>


  

  <article class="post white-box reveal shadow floatable" id="comments">
    <p ct><i class='fas fa-comments'></i> 评论</p>
    
    <div id="valine_container" class="valine_thread">
  <i class="fas fa-cog fa-spin fa-fw fa-2x"></i>
</div>

  </article>






</div>
<aside class='l_side'>
  
  
    
    

<section class="widget page shadow floatable desktop">
  
  <header>
    
      <i class="fas fa-bullhorn fa-fw" aria-hidden="true"></i><span class='name'>公告</span>
    
  </header>


  <div class='content'>
    
      
    
      
        <article id="page" class="post article-type-page" itemscope itemprop="blogPost">
          <section class="article typo">
            <div class="article-entry" itemprop="articleBody">
              
                <p>本站默认替换了右键菜单，<br>如需唤醒原系统菜单请使用：<br>        <kbd>ctrl</kbd> + <kbd>右键</kbd></p>

              
            </div>
          </section>
        </article>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  </div>
</section>

  

  
    
    



  <section class="widget toc-wrapper shadow floatable desktop mobile" id="toc-div" >
    
  <header>
    
      <i class="fas fa-list fa-fw" aria-hidden="true"></i><span class='name'>本文目录</span>
    
  </header>


    <div class='content'>
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE%E5%89%8D%E5%8F%B0%E7%8E%AF%E5%A2%83"><span class="toc-number">1.</span> <span class="toc-text">搭建项目前台环境</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%AD%E5%BB%BANuxtJS"><span class="toc-number">1.1.</span> <span class="toc-text">搭建NuxtJS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#NUXT%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">1.2.</span> <span class="toc-text">NUXT目录结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E5%9F%BA%E7%A1%80%E8%B5%84%E6%BA%90%E5%92%8C%E9%BB%98%E8%AE%A4%E5%A4%B4%E5%B0%BE%E8%A7%86%E5%9B%BE"><span class="toc-number">1.3.</span> <span class="toc-text">引入基础资源和默认头尾视图</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#default-vue"><span class="toc-number">1.3.1.</span> <span class="toc-text">default.vue</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#index-vue"><span class="toc-number">1.3.2.</span> <span class="toc-text">index.vue</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AE%E6%92%AD%E5%9B%BE%E7%BB%84%E4%BB%B6"><span class="toc-number">1.4.</span> <span class="toc-text">轮播图组件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">1.4.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE"><span class="toc-number">1.4.2.</span> <span class="toc-text">配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#axios%E4%BE%9D%E8%B5%96%E4%B8%8E%E5%B0%81%E8%A3%85"><span class="toc-number">1.5.</span> <span class="toc-text">axios依赖与封装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#element-ui"><span class="toc-number">1.6.</span> <span class="toc-text">element-ui</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-1"><span class="toc-number">1.6.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-1"><span class="toc-number">1.6.2.</span> <span class="toc-text">配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95"><span class="toc-number">1.7.</span> <span class="toc-text">测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A6%96%E9%A1%B5%E5%9F%BA%E7%A1%80%E6%90%AD%E5%BB%BA"><span class="toc-number">2.</span> <span class="toc-text">首页基础搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B2%E5%B8%88%E5%92%8C%E8%AF%BE%E7%A8%8B%E8%A7%86%E5%9B%BE%E6%A8%A1%E6%9D%BF%E6%90%AD%E5%BB%BA"><span class="toc-number">2.1.</span> <span class="toc-text">讲师和课程视图模板搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%BA%E5%AE%9A%E8%B7%AF%E7%94%B1"><span class="toc-number">2.1.1.</span> <span class="toc-text">固定路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1"><span class="toc-number">2.1.2.</span> <span class="toc-text">动态路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE"><span class="toc-number">2.1.3.</span> <span class="toc-text">创建视图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BD%93%E5%89%8D%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-number">2.1.4.</span> <span class="toc-text">当前项目结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8E%E7%AB%AF%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">2.2.</span> <span class="toc-text">后端环境搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%AD%90%E6%A8%A1%E5%9D%97"><span class="toc-number">2.2.1.</span> <span class="toc-text">创建子模块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%B9%B6%E7%BC%96%E5%86%99%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6application-properties"><span class="toc-number">2.2.2.</span> <span class="toc-text">创建并编写配置文件application.properties</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8"><span class="toc-number">2.2.3.</span> <span class="toc-text">创建数据库表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E5%90%AF%E5%8A%A8%E7%B1%BB"><span class="toc-number">2.2.4.</span> <span class="toc-text">编写启动类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-number">2.2.5.</span> <span class="toc-text">代码生成器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BD%93%E5%89%8D%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84-1"><span class="toc-number">2.2.6.</span> <span class="toc-text">当前项目结构</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A6%96%E9%A1%B5%E8%BD%AE%E6%92%AD%E5%9B%BE%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89"><span class="toc-number">3.</span> <span class="toc-text">首页轮播图（后端）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99BannerAdminController"><span class="toc-number">3.1.</span> <span class="toc-text">编写BannerAdminController</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99BannerFrontController"><span class="toc-number">3.2.</span> <span class="toc-text">编写BannerFrontController</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99Service"><span class="toc-number">3.3.</span> <span class="toc-text">编写Service</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A6%96%E9%A1%B5%E7%83%AD%E9%97%A8%E8%AF%BE%E7%A8%8B%E5%92%8C%E5%90%8D%E5%B8%88%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89"><span class="toc-number">4.</span> <span class="toc-text">首页热门课程和名师（后端）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99Mapper"><span class="toc-number">4.1.</span> <span class="toc-text">编写Mapper</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#EduTeacherMapper"><span class="toc-number">4.1.1.</span> <span class="toc-text">EduTeacherMapper</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#EduCourseMapper"><span class="toc-number">4.1.2.</span> <span class="toc-text">EduCourseMapper</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99service"><span class="toc-number">4.2.</span> <span class="toc-text">编写service</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99controller"><span class="toc-number">4.3.</span> <span class="toc-text">编写controller</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A6%96%E9%A1%B5%E8%BD%AE%E6%92%AD%E5%9B%BE%E5%92%8C%E7%83%AD%E9%97%A8%E8%AE%B2%E5%B8%88%E8%AF%BE%E7%A8%8B%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89"><span class="toc-number">5.</span> <span class="toc-text">首页轮播图和热门讲师课程（前端）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#API"><span class="toc-number">5.1.</span> <span class="toc-text">API</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#banner-js"><span class="toc-number">5.1.1.</span> <span class="toc-text">banner.js</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#index-js"><span class="toc-number">5.1.2.</span> <span class="toc-text">index.js</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E6%8E%A5%E5%8F%A3"><span class="toc-number">5.2.</span> <span class="toc-text">调用接口</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AE%E6%92%AD%E5%9B%BE"><span class="toc-number">5.2.1.</span> <span class="toc-text">轮播图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%83%AD%E9%97%A8%E8%AF%BE%E7%A8%8B%E8%AE%B2%E5%B8%88"><span class="toc-number">5.2.2.</span> <span class="toc-text">热门课程讲师</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95-1"><span class="toc-number">5.3.</span> <span class="toc-text">测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95SSO"><span class="toc-number">6.</span> <span class="toc-text">单点登录SSO</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Redis"><span class="toc-number">7.</span> <span class="toc-text">Redis</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-number">7.1.</span> <span class="toc-text">介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B4%E5%90%88"><span class="toc-number">7.2.</span> <span class="toc-text">整合</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96"><span class="toc-number">7.2.1.</span> <span class="toc-text">依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%85%8D%E7%BD%AE%E7%B1%BB"><span class="toc-number">7.2.2.</span> <span class="toc-text">创建配置类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#springboot%E7%BC%93%E5%AD%98%E6%B3%A8%E8%A7%A3"><span class="toc-number">7.2.3.</span> <span class="toc-text">springboot缓存注解</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Redis%E6%9C%8D%E5%8A%A1"><span class="toc-number">7.3.</span> <span class="toc-text">使用Redis服务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Redis%E5%B9%B6%E5%90%AF%E5%8A%A8"><span class="toc-number">7.3.1.</span> <span class="toc-text">安装Redis并启动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">7.3.2.</span> <span class="toc-text">配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A6%96%E9%A1%B5%E7%BC%93%E5%AD%98"><span class="toc-number">7.3.3.</span> <span class="toc-text">首页缓存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#redis%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4"><span class="toc-number">7.3.4.</span> <span class="toc-text">redis相关命令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JWT-Json-Web-Token"><span class="toc-number">8.</span> <span class="toc-text">JWT(Json Web Token)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96-1"><span class="toc-number">8.0.1.</span> <span class="toc-text">依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#utils%E7%B1%BB"><span class="toc-number">8.0.2.</span> <span class="toc-text">utils类</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%AD%E4%BF%A1%E5%BE%AE%E6%9C%8D%E5%8A%A1"><span class="toc-number">9.</span> <span class="toc-text">短信微服务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%98%BF%E9%87%8C%E4%BA%91%E7%9F%AD%E4%BF%A1%E6%9C%8D%E5%8A%A1"><span class="toc-number">9.0.1.</span> <span class="toc-text">阿里云短信服务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%AD%90%E6%A8%A1%E5%9D%97-1"><span class="toc-number">9.0.2.</span> <span class="toc-text">创建子模块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6application-properties"><span class="toc-number">9.0.3.</span> <span class="toc-text">配置文件application.properties</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E7%B1%BB"><span class="toc-number">9.0.4.</span> <span class="toc-text">启动类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#controller"><span class="toc-number">9.0.5.</span> <span class="toc-text">controller</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#service"><span class="toc-number">9.0.6.</span> <span class="toc-text">service</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89"><span class="toc-number">10.</span> <span class="toc-text">登录注册（后端）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E5%B7%A5%E4%BD%9C"><span class="toc-number">10.1.</span> <span class="toc-text">基础工作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%A8%A1%E5%9D%97"><span class="toc-number">10.1.1.</span> <span class="toc-text">创建模块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">10.1.2.</span> <span class="toc-text">数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8-1"><span class="toc-number">10.1.3.</span> <span class="toc-text">代码生成器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-1"><span class="toc-number">10.1.4.</span> <span class="toc-text">配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E7%B1%BB-1"><span class="toc-number">10.1.5.</span> <span class="toc-text">启动类</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%99%BB%E5%BD%95"><span class="toc-number">10.2.</span> <span class="toc-text">登录</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#MD5Utils"><span class="toc-number">10.2.1.</span> <span class="toc-text">MD5Utils</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#controller-1"><span class="toc-number">10.2.2.</span> <span class="toc-text">controller</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#service-1"><span class="toc-number">10.2.3.</span> <span class="toc-text">service</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#swagger%E6%B5%8B%E8%AF%95"><span class="toc-number">10.2.4.</span> <span class="toc-text">swagger测试</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E5%86%8C"><span class="toc-number">10.3.</span> <span class="toc-text">注册</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#vo%E5%AE%9E%E4%BD%93%E7%B1%BB"><span class="toc-number">10.3.1.</span> <span class="toc-text">vo实体类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#controller-2"><span class="toc-number">10.3.2.</span> <span class="toc-text">controller</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#service-2"><span class="toc-number">10.3.3.</span> <span class="toc-text">service</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9E%E6%98%BE%E6%95%B0%E6%8D%AE"><span class="toc-number">10.4.</span> <span class="toc-text">回显数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#controller-3"><span class="toc-number">10.4.1.</span> <span class="toc-text">controller</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89"><span class="toc-number">11.</span> <span class="toc-text">登录注册（前端）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E5%86%8C-1"><span class="toc-number">11.1.</span> <span class="toc-text">注册</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#layout"><span class="toc-number">11.1.1.</span> <span class="toc-text">layout</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#api"><span class="toc-number">11.1.2.</span> <span class="toc-text">api</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vue%E9%A1%B5%E9%9D%A2"><span class="toc-number">11.1.3.</span> <span class="toc-text">vue页面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vue%E6%96%B9%E6%B3%95"><span class="toc-number">11.1.4.</span> <span class="toc-text">vue方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%99%BB%E5%BD%95-1"><span class="toc-number">11.2.</span> <span class="toc-text">登录</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#cookie%E6%8F%92%E4%BB%B6"><span class="toc-number">11.2.1.</span> <span class="toc-text">cookie插件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#api-1"><span class="toc-number">11.2.2.</span> <span class="toc-text">api</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vue%E8%A7%86%E5%9B%BE"><span class="toc-number">11.2.3.</span> <span class="toc-text">vue视图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">11.2.4.</span> <span class="toc-text">拦截器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vue%E6%96%B9%E6%B3%95-1"><span class="toc-number">11.2.5.</span> <span class="toc-text">vue方法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BE%AE%E4%BF%A1%E6%89%AB%E7%A0%81%E7%99%BB%E5%BD%95%EF%BC%88%E5%90%8E%E7%AB%AF-%E5%89%8D%E7%AB%AF%EF%BC%89"><span class="toc-number">12.</span> <span class="toc-text">微信扫码登录（后端+前端）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#OAuth2"><span class="toc-number">12.1.</span> <span class="toc-text">OAuth2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AE%E4%BF%A1%E7%99%BB%E5%BD%95%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">12.2.</span> <span class="toc-text">微信登录准备工作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-2"><span class="toc-number">12.2.1.</span> <span class="toc-text">配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E9%87%8F%E7%B1%BB"><span class="toc-number">12.2.2.</span> <span class="toc-text">常量类</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E4%BA%8C%E7%BB%B4%E7%A0%81"><span class="toc-number">12.3.</span> <span class="toc-text">生成二维码</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#controller-4"><span class="toc-number">12.3.1.</span> <span class="toc-text">controller</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%89%AB%E6%8F%8F%E4%BA%BA%E4%BF%A1%E6%81%AF"><span class="toc-number">12.4.</span> <span class="toc-text">获取扫描人信息</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96-2"><span class="toc-number">12.4.1.</span> <span class="toc-text">依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HttpClientUtils"><span class="toc-number">12.4.2.</span> <span class="toc-text">HttpClientUtils</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#controller-5"><span class="toc-number">12.4.3.</span> <span class="toc-text">controller</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#service-3"><span class="toc-number">12.4.4.</span> <span class="toc-text">service</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF"><span class="toc-number">12.5.</span> <span class="toc-text">前端</span></a></li></ol></li></ol>
    </div>
  </section>


  


</aside>



                
                      <!--此文件用来存放一些不方便取值的变量-->
<!--思路大概是将值藏到重加载的区域内-->

<script>
  window.pdata={}
  pdata.ispage=true;
  pdata.postTitle="【项目笔记】在线教育项目实战5";
  pdata.commentPath="";
  pdata.commentPlaceholder="";
  // header 这里无论是否开启pjax都需要
  var l_header=document.getElementById("l_header");
  
  l_header.classList.remove("show");
  
  
    // cover
    var cover_wrapper=document.querySelector('.cover-wrapper');
    
    cover_wrapper.id="half";
    cover_wrapper.style.display="";
    
  
</script>

            </div>
            
  
  <footer class="footer clearfix">
    <br><br>
    
      
        <div class="aplayer-container">
          

  
    <meting-js
      theme='#1BCDFC'
      autoplay='false'
      volume='0.5'
      loop='all'
      order='list'
      fixed='false'
      list-max-height='320px'
      server='tencent'
      type='playlist'
      id='8119036336'
      list-folded='true'>
    </meting-js>
  


        </div>
      
    
      
        
          <div><p><br>🧡💛💚💙💜🖤🤍</p>
</div>
        
      
    
  </footer>


              <a id="s-top" class="fas fa-arrow-up fa-fw" href="javascript:void(0)"></a>
          </div>
      </div>
      <div>
        <script>
/************这个文件存放不需要重载的全局变量和全局函数*********/
window.volantis={};
window.volantis.loadcss=document.getElementById("loadcss");
/******************** Pjax ********************************/
function VPjax(){
	this.list=[] // 存放回调函数
	this.start=()=>{
	  for(var i=0;i<this.list.length;i++){
		this.list[i].run();
	  }
	}
	this.push=(fn,name)=>{
		var f=new PjaxItem(fn,name);
		this.list.push(f);
	}
	// 构造一个可以run的对象
	function PjaxItem(fn,name){
		// 函数名称
		this.name = name || fn.name
		// run方法
		this.run=()=>{
			fn()
		}
	}
}
volantis.pjax={}
volantis.pjax.method={
	complete: new VPjax(),
	error: new VPjax(),
	send: new VPjax()
}
volantis.pjax={
	...volantis.pjax,
	push: volantis.pjax.method.complete.push,
	error: volantis.pjax.method.error.push,
	send: volantis.pjax.method.send.push
}
/********************脚本懒加载函数********************************/
// 已经加入了setTimeout
function loadScript(src, cb) {
	setTimeout(function() {
		var HEAD = document.getElementsByTagName('head')[0] || document.documentElement;
		var script = document.createElement('script');
		script.setAttribute('type','text/javascript');
		if (cb) script.onload = cb;
		script.setAttribute('src', src);
		HEAD.appendChild(script);
	});
}
//https://github.com/filamentgroup/loadCSS
var loadCSS = function( href, before, media, attributes ){
	var doc = window.document;
	var ss = doc.createElement( "link" );
	var ref;
	if( before ){
		ref = before;
	}
	else {
		var refs = ( doc.body || doc.getElementsByTagName( "head" )[ 0 ] ).childNodes;
		ref = refs[ refs.length - 1];
	}
	var sheets = doc.styleSheets;
	if( attributes ){
		for( var attributeName in attributes ){
			if( attributes.hasOwnProperty( attributeName ) ){
				ss.setAttribute( attributeName, attributes[attributeName] );
			}
		}
	}
	ss.rel = "stylesheet";
	ss.href = href;
	ss.media = "only x";
	function ready( cb ){
		if( doc.body ){
			return cb();
		}
		setTimeout(function(){
			ready( cb );
		});
	}
	ready( function(){
		ref.parentNode.insertBefore( ss, ( before ? ref : ref.nextSibling ) );
	});
	var onloadcssdefined = function( cb ){
		var resolvedHref = ss.href;
		var i = sheets.length;
		while( i-- ){
			if( sheets[ i ].href === resolvedHref ){
				return cb();
			}
		}
		setTimeout(function() {
			onloadcssdefined( cb );
		});
	};
	function loadCB(){
		if( ss.addEventListener ){
			ss.removeEventListener( "load", loadCB );
		}
		ss.media = media || "all";
	}
	if( ss.addEventListener ){
		ss.addEventListener( "load", loadCB);
	}
	ss.onloadcssdefined = onloadcssdefined;
	onloadcssdefined( loadCB );
	return ss;
};
</script>
<script>
  
  loadCSS("https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14/css/all.min.css", window.volantis.loadcss);
  
  
  loadCSS("https://cdn.jsdelivr.net/gh/l-lin/font-awesome-animation/dist/font-awesome-animation.min.css", window.volantis.loadcss);
  
  
  
</script>
<!-- required -->

<script src="https://cdn.jsdelivr.net/npm/jquery@3.5/dist/jquery.min.js"></script>

<script>
  function pjax_fancybox() {
    $(".md .gallery").find("img").each(function () { //渲染 fancybox
      var element = document.createElement("a"); // a 标签
      $(element).attr("class", "fancybox");
      $(element).attr("pjax-fancybox", "");  // 过滤 pjax
      $(element).attr("href", $(this).attr("src"));
      if ($(this).attr("data-original")) {
        $(element).attr("href", $(this).attr("data-original"));
      }
      $(element).attr("data-fancybox", "images");
      var caption = "";   // 描述信息
      if ($(this).attr('alt')) {  // 判断当前页面是否存在描述信息
        $(element).attr('data-caption', $(this).attr('alt'));
        caption = $(this).attr('alt');
      }
      var div = document.createElement("div");
      $(div).addClass("fancybox");
      $(this).wrap(div); // 最外层套 div ，其实主要作用还是 class 样式
      var span = document.createElement("span");
      $(span).addClass("image-caption");
      $(span).text(caption); // 加描述
      $(this).after(span);  // 再套一层描述
      $(this).wrap(element);  // 最后套 a 标签
    })
    $(".md .gallery").find("img").fancybox({
      selector: '[data-fancybox="images"]',
      hash: false,
      loop: false,
      closeClick: true,
      helpers: {
        overlay: {closeClick: true}
      },
      buttons: [
        "zoom",
        "close"
      ]
    });
  };
  function SCload_fancybox() {
    if ($(".md .gallery").find("img").length == 0) return;
    loadCSS("https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css", document.getElementById("loadcss"));
    loadScript('https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js', pjax_fancybox)
  };
  $(function () {
    SCload_fancybox();
  });
  function Pjax_SCload_fancybox(){
	if (typeof $.fancybox == "undefined") {
	 SCload_fancybox();
    } else {
	 pjax_fancybox();
    }
  }
  volantis.pjax.push(Pjax_SCload_fancybox)
  volantis.pjax.send(()=>{
      if (typeof $.fancybox != "undefined") {
        $.fancybox.close();    // 关闭弹窗
      }
  },'fancybox')
</script>


<!-- internal -->

  
  
  
    
<script src="https://cdn.jsdelivr.net/npm/jquery-backstretch@2.1.18/jquery.backstretch.min.js"></script>

    <script type="text/javascript">
        var imgs=["https://bing.ioliu.cn/v1/rand?w=1920&h=1200"];
        if ('false' == 'true') {
          function shuffle(arr){
            /*From countercurrent-time*/
            var n = arr.length;
            while(n--) {
              var index = Math.floor(Math.random() * n);
              var temp = arr[index];
              arr[index] = arr[n];
              arr[n] = temp;
            }
          }
          shuffle(imgs);
        }
	  function Pjax_backstretch(){
        
          $.backstretch(
            imgs,
          {
            duration: "10000",
            fade: "1500"
          });
        
	  }
	  loadScript("https://cdn.jsdelivr.net/npm/jquery-backstretch@2.1.18/jquery.backstretch.min.js",Pjax_backstretch)
    </script>
  



  
  

  <div id="rightmenu-wrapper">
    <ul class="list-v rightmenu" id="rightmenu-content">
      <li class='option'>
        <a class='vlts-menu opt fix-cursor-default' id='menu-copy-text' onclick="document.execCommand('copy')"><i class='fa fa-copy fa-fw'></i>复制文本</a>
        <hr id='hr-text'>
        <a class='vlts-menu opt fix-cursor-default' id='menu-copy-href'><i class='fa fa-link fa-fw'></i>复制链接</a>
        <a class='vlts-menu opt fix-cursor-default' id='menu-open-href'><i class='fa fa-external-link-square-alt fa-fw'></i>在新标签页打开</a>
        <hr id='hr-href'>
        <a class='vlts-menu opt fix-cursor-default' id='menu-copy-src'><i class='fa fa-image fa-fw'></i>复制图片地址</a>
        <hr id='hr-src'>
      </li>
      
        <li class='navigation'>
          <a class='nav icon-only fix-cursor-default' onclick='history.back()'><i class='fa fa-arrow-left fa-fw'></i></a>
          <a class='nav icon-only fix-cursor-default' onclick='history.forward()'><i class='fa fa-arrow-right fa-fw'></i></a>
          <a class='nav icon-only fix-cursor-default' onclick='window.location.reload()'><i class='fa fa-redo fa-fw'></i></a>
          <a class='nav icon-only fix-cursor-default' href='/'><i class='fa fa-home fa-fw'></i></a>
        </li>
      
      <hr>
      
        
          
    <li>
      <a class='vlts-menu fix-cursor-default ' href=/categories/
        
        
        
        
          id="categories"
        >
        <i class='fas fa-folder-open fa-fw'></i> 所有分类
      </a>
    </li>
  
        
      
        
          
    <li>
      <a class='vlts-menu fix-cursor-default ' href=/tags/
        
        
        
        
          id="tags"
        >
        <i class='fas fa-tags fa-fw'></i> 所有标签
      </a>
    </li>
  
        
      
        
          
    <li>
      <a class='vlts-menu fix-cursor-default ' href=/archives/
        
        
        
        
          id="archives"
        >
        <i class='fas fa-archive fa-fw'></i> 归档
      </a>
    </li>
  
        
      
        
          <hr>
        
      
        
          
    <li>
      <a class='vlts-menu fix-cursor-default toggle-mode-btn' 
        
        
        
        >
        <i class='fas fa-moon fa-fw'></i> 开/关灯
      </a>
    </li>
  
        
      
        
          <hr>
        
      
        
          <li class='music name'>
            <p class='nav music-title fix-cursor-default'></p>
          </li>
          <li class='music ctrl'>
            <a class='nav icon-only backward fix-cursor-default' onclick='aplayerBackward()'><i class='fa fa-step-backward fa-fw'></i></a>
            <a class='nav icon-only toggle fix-cursor-default' onclick='aplayerToggle()'><i class='fa fa-play fa-fw'></i></a>
            <a class='nav icon-only forward fix-cursor-default' onclick='aplayerForward()'><i class='fa fa-step-forward fa-fw'></i></a>
          </li>
          <li class='music volume'>
            <a class='nav volume'>
              <div class="aplayer-volume-bar-wrap">
                <div class="aplayer-volume-bar fix-cursor-pointer">
                  <div class="aplayer-volume"></div>
                  <i class='left fa fa-volume-off fa-fw'></i>
                  <i class='right fa fa-volume-up fa-fw'></i>
                </div>
              </div>
            </a>
          </li>
        
      
    </ul>
  </div>

  <script>
    window.document.oncontextmenu = function (event) {
      if (event.ctrlKey) return true;
      if (/Android|webOS|BlackBerry/i.test(navigator.userAgent)) return true;
      return popMenu(event);
    };
    document.addEventListener("click", function (event) {
      var mymenu = document.getElementById('rightmenu-wrapper');
      mymenu.style.display = "none";
    });
    function popMenu(event) {
      var mymenu = document.getElementById('rightmenu-wrapper');
      var menuContent = document.getElementById('rightmenu-content');
      var screenWidth = document.documentElement.clientWidth || document.body.clientWidth;
      var screenHeight = document.documentElement.clientHeight || document.body.clientHeight;
      mymenu.style.left = event.clientX + "px"; // 获取鼠标位置
      mymenu.style.top = event.clientY + "px";
      mymenu.style.display = 'block';
      if (event.clientX * 2 > screenWidth) {
        menuContent.classList.add('left');
      } else {
        menuContent.classList.remove('left');
      }
      if (event.clientY * 2 > screenHeight) {
        menuContent.classList.add('top');
      } else {
        menuContent.classList.remove('top');
      }

      let hrText = document.getElementById('hr-text');
      let hrSrc = document.getElementById('hr-src');
      let hrHref = document.getElementById('hr-href');

      // 选中图片
      let copySrc = document.getElementById('menu-copy-src');
      if (copySrc != undefined) {
        if (event.target.currentSrc) {
          copySrc.style.display = 'block';
          copySrc.addEventListener("click", function (e) {
            copyString(event.target.currentSrc);
          },{once: true});
          hrSrc.style.display = 'block';
        } else {
          copySrc.style.display = 'none';
          hrSrc.style.display = 'none';
        }
      }

      // 选中按钮
      // 判断是不是按钮
      let href = '';
      if (event.path) {
        for (i = 0; i < event.path.length; i++) {
          if (event.path[i].href != undefined && event.path[i].href.length > 0) {
            href = event.path[i].href;
          }
        }
      }

      let copyText = document.getElementById('menu-copy-text');
      copyText.style.display = 'none';
      hrText.style.display = 'none';
      if (href.length == 0) {
        // 选中文本
        if (window.getSelection().toString()) {
          if ('true' == 'true') {
            copyText.style.display = 'block';
            hrText.style.display = 'block';
          }
        }
      }

      // 在新标签页打开
      let openHref = document.getElementById('menu-open-href');
      if (openHref != undefined) {
        if (href.length > 0) {
          openHref.style.display = 'block';
          openHref.addEventListener("click", function (e) {
            window.open(href);
          },{once: true});
          hrHref.style.display = 'block';
        } else {
          openHref.style.display = 'none';
          hrHref.style.display = 'none';
        }
      }
      // 复制链接
      let copyHref = document.getElementById('menu-copy-href');
      if (copyHref != undefined) {
        if (href.length > 0) {
          copyHref.style.display = 'block';
          copyHref.addEventListener("click", function (e) {
            copyString(href);
          },{once: true});
        } else {
          copyHref.style.display = 'none';
        }
      }
      // 有音乐播放器 see: layout/_third-party/aplayer/script.ejs
      
      if(volantis.APlayerLoaded){ // APlayer加载完成？
        // 如果有aplayer，初始化一下
        checkAPlayer();
      }
      
      return false; // 该行代码确保系统自带的右键菜单不会被调出
    }
    function hideMenu() {
      document.getElementById('rightmenu-wrapper').style.display = 'none';
    }
    function copyString(str) {
      const input = document.createElement('input');
      input.setAttribute('readonly', 'readonly');
      document.body.appendChild(input);
      input.setAttribute('value', str);
      input.select();
      document.execCommand('copy');
      document.body.removeChild(input);
    }
    document.execCommand('click');
  </script>




<script>
  function loadIssuesJS() {
    if ($(".md").find(".issues-api").length == 0) return;
	
	  loadScript('/js/issues.js');
	
  };
  $(function () {
    loadIssuesJS();
  });
  volantis.pjax.push(()=>{
	if (typeof IssuesAPI == "undefined") {
	  loadIssuesJS();
	}
  },"IssuesJS")
</script>



  <script defer src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.1.0/dist/lazyload.min.js"></script>
<script>
  // https://www.npmjs.com/package/vanilla-lazyload
  // Set the options globally
  // to make LazyLoad self-initialize
  window.lazyLoadOptions = {
    elements_selector: ".lazyload",
    threshold: 0
  };
  // Listen to the initialization event
  // and get the instance of LazyLoad
  window.addEventListener(
    "LazyLoad::Initialized",
    function (event) {
      window.lazyLoadInstance = event.detail.instance;
    },
    false
  );
  document.addEventListener('DOMContentLoaded', function () {
    lazyLoadInstance.update();
  });
  document.addEventListener('pjax:complete', function () {
    lazyLoadInstance.update();
  });
</script>




  

<script>
  window.FPConfig = {
	delay: 0,
	ignoreKeywords: [],
	maxRPS: 5,
	hoverDelay: 25
  };
</script>
<script defer src="https://cdn.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"></script>





  <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
    var clipboard = new ClipboardJS('.btn-copy', {
        target: function (trigger) {
            return trigger.nextElementSibling
        }
    });
    function wait(callback, seconds) {
        var timelag = null;
        timelag = window.setTimeout(callback, seconds)
    }
    function pjax_initCopyCode() {
		if($(".highlight .code pre").length+$(".article pre code").length==0)return;
        var copyHtml = '';
        copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
        copyHtml += '<i class="fas fa-copy"></i><span>COPY</span>';
        copyHtml += '</button>';
        $(".highlight .code pre").before(copyHtml);
        $(".article pre code").before(copyHtml);
        clipboard.off('success').on('success', function (e) {
            let $btn = $(e.trigger);
            $btn.addClass('copied');
            let $icon = $($btn.find('i'));
            $icon.removeClass('fa-copy');
            $icon.addClass('fa-check-circle');
            let $span = $($btn.find('span'));
            $span[0].innerText = 'COPIED';
            wait(function () {
                $icon.removeClass('fa-check-circle');
                $icon.addClass('fa-copy');
                $span[0].innerText = 'COPY'
            }, 2000)
        });
        clipboard.off('error').on('error', function (e) {
            e.clearSelection();
            let $btn = $(e.trigger);
            $btn.addClass('copy-failed');
            let $icon = $($btn.find('i'));
            $icon.removeClass('fa-copy');
            $icon.addClass('fa-times-circle');
            let $span = $($btn.find('span'));
            $span[0].innerText = 'COPY FAILED';
            wait(function () {
                $icon.removeClass('fa-times-circle');
                $icon.addClass('fa-copy');
                $span[0].innerText = 'COPY'
            }, 2000)
        })
    }
    $(function () {
        pjax_initCopyCode()
    });
	volantis.pjax.push(pjax_initCopyCode)
</script>




   <script type="text/javascript">
  loadScript("https://cdn.jsdelivr.net/npm/scrollreveal@4.0.6/dist/scrollreveal.min.js")
  function pjax_scrollrebeal() {
    ScrollReveal().reveal('.l_main .reveal', {
      distance: '32px',
      duration: '800',
      interval: '20',
      scale: '1',
      easing: 'ease-out'
    });
  }
  $(function () {
  var checkScrollReveal = setInterval(function () {
    if ($("#safearea").css("display")!="block") return
    if (typeof ScrollReveal=="undefined") return
    clearInterval(checkScrollReveal)
	pjax_scrollrebeal();
  }, 100)
  });
  volantis.pjax.push(pjax_scrollrebeal)
</script>




  <script>
  let APlayerController = new Object();
  APlayerController.id = '8119036336';  // 设定全局音乐播放ID
  APlayerController.volume = '0.5';
  loadCSS("https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css", window.volantis.loadcss);
  // APlayer 需要在  MetingJS 之前加载
  loadScript("https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js")
  window.volantis.APlayerLoaded=0 // APlayer加载完成状态
  var checkAPlayer = setInterval(function () {
    if (!window.APlayer) return // APlayer加载完成？
	  if ($("#safearea").css("display")!="block") return // 文章内容加载完成？ see: source/css/first.styl
    clearInterval(checkAPlayer)
	  if (!window.volantis.APlayerLoaded&&!window.MetingJSElement){ // APlayer只能加载一次
      window.volantis.APlayerLoaded=1 // APlayer加载完成
      loadScript("https://cdn.jsdelivr.net/npm/meting@2.0/dist/Meting.min.js") // 加载 MetingJS
	  }
  }, 2500) // 按照网速调节差分2.5s
  // rightmenu see: layout/_partial/rightmenu.ejs

  
    loadScript("/js/aplayer.js")
  

</script>




  
  
<script src="https://cdn.jsdelivr.net/npm/valine@1.4/dist/Valine.min.js"></script>


<script>
  function emoji(path, idx, ext) {
    return path + "/" + path + "-" + idx + "." + ext;
  }
  var emojiMaps = {};
  for (var i = 1; i <= 54; i++) {
    emojiMaps['tieba-' + i] = emoji('tieba', i, 'png');
  }
  for (var i = 1; i <= 101; i++) {
    emojiMaps['qq-' + i] = emoji('qq', i, 'gif');
  }
  for (var i = 1; i <= 116; i++) {
    emojiMaps['aru-' + i] = emoji('aru', i, 'gif');
  }
  for (var i = 1; i <= 125; i++) {
    emojiMaps['twemoji-' + i] = emoji('twemoji', i, 'png');
  }
  for (var i = 1; i <= 4; i++) {
    emojiMaps['weibo-' + i] = emoji('weibo', i, 'png');
  }
  function pjax_valine() {
    if(!document.querySelectorAll("#valine_container")[0])return;
    let pagePlaceholder = pdata.commentPlaceholder || "在这里写评论哦~";
    let path = pdata.commentPath;
    if (path.length == 0) {
      let defaultPath = '';
      path = defaultPath || decodeURI(window.location.pathname);
    }
    var valine = new Valine();
    valine.init(Object.assign({"path":null,"placeholder":"在这里写评论哦~","appId":"hDBihxHSDX3Dq2XdPVRwIrGp-MdYXbMMI","appKey":"1oBqjeOHf3of5LJw7B2BrE2f","meta":["nick","mail","link"],"requiredFields":["nick","mail"],"enableQQ":true,"recordIP":false,"avatar":"mp","pageSize":10,"lang":"zh-cn","highlight":true,"mathJax":false,"js":"https://cdn.jsdelivr.net/npm/valine@1.4/dist/Valine.min.js"}, {
      el: '#valine_container',
      path: path,
      placeholder: pagePlaceholder,
      emojiCDN: 'https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/valine/',
      emojiMaps: emojiMaps,
    }))
  }
  $(function () {
    pjax_valine();
  });
  volantis.pjax.push(pjax_valine);
</script>






  
<script src="/js/app.js"></script>



<!-- optional -->

  <script>
const SearchServiceimagePath="https://cdn.jsdelivr.net/gh/volantis-x/cdn-volantis@master/img/";
const ROOT =  ("/" || "/").endsWith('/') ? ("/" || "/") : ("//" || "/" );

$('.input.u-search-input').one('focus',function(){
	
		loadScript('/js/search/hexo.js',setSearchService);
	
})

function listenSearch(){
  
    customSearch = new HexoSearch({
      imagePath: SearchServiceimagePath
    });
  
}
function setSearchService() {
	listenSearch();
	
		document.addEventListener("pjax:success", listenSearch);
	
}
</script>







  
<script src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-volantis@2/js/comment_typing.js"></script>






  <script defer>

  const LCCounter = {
    app_id: 'yzv0f6bIu6hXwO0xqrI358Js-gzGzoHsz',
    app_key: 'dJh5SEjH7EoUIgUcd2VxqUun',
    custom_api_server: '',

    // 查询存储的记录
    getRecord(Counter, url, title) {
      return new Promise(function (resolve, reject) {
        Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({url})))
          .then(resp => resp.json())
          .then(({results, code, error}) => {
            if (code === 401) {
              throw error;
            }
            if (results && results.length > 0) {
              var record = results[0];
              resolve(record);
            } else {
              Counter('post', '/classes/Counter', {url, title: title, times: 0})
                .then(resp => resp.json())
                .then((record, error) => {
                  if (error) {
                    throw error;
                  }
                  resolve(record);
                }).catch(error => {
                console.error('Failed to create', error);
                reject(error);
              });
            }
          }).catch((error) => {
          console.error('LeanCloud Counter Error:', error);
          reject(error);
        });
      })
    },

    // 发起自增请求
    increment(Counter, incrArr) {
      return new Promise(function (resolve, reject) {
        Counter('post', '/batch', {
          "requests": incrArr
        }).then((res) => {
          res = res.json();
          if (res.error) {
            throw res.error;
          }
          resolve(res);
        }).catch((error) => {
          console.error('Failed to save visitor count', error);
          reject(error);
        });
      });
    },

    // 构建自增请求体
    buildIncrement(objectId) {
      return {
        "method": "PUT",
        "path": `/1.1/classes/Counter/${ objectId }`,
        "body": {
          "times": {
            '__op': 'Increment',
            'amount': 1
          }
        }
      }
    },

    // 校验是否为有效的 UV
    validUV() {
      var key = 'LeanCloudUVTimestamp';
      var flag = localStorage.getItem(key);
      if (flag) {
        // 距离标记小于 24 小时则不计为 UV
        if (new Date().getTime() - parseInt(flag) <= 86400000) {
          return false;
        }
      }
      localStorage.setItem(key, new Date().getTime().toString());
      return true;
    },

    addCount(Counter) {
      var enableIncr = '' === 'true' && window.location.hostname !== 'localhost';
      enableIncr = true;
      var getterArr = [];
      var incrArr = [];
      // 请求 PV 并自增
      var pvCtn = document.querySelector('#lc-sv');
      if (pvCtn || enableIncr) {
        var pvGetter = this.getRecord(Counter, 'http://example.com' + '/#lc-sv', 'Visits').then((record) => {
          incrArr.push(this.buildIncrement(record.objectId))
          var eles = document.querySelectorAll('#lc-sv #number');
          if (eles.length > 0) {
            eles.forEach((el,index,array)=>{
              el.innerText = record.times + 1;
              if (pvCtn) {
                pvCtn.style.display = 'inline';
              }
            })
          }
        });
        getterArr.push(pvGetter);
      }

      // 请求 UV 并自增
      var uvCtn = document.querySelector('#lc-uv');
      if (uvCtn || enableIncr) {
        var uvGetter = this.getRecord(Counter, 'http://example.com' + '/#lc-uv', 'Visitors').then((record) => {
          var vuv = this.validUV();
          vuv && incrArr.push(this.buildIncrement(record.objectId))
          var eles = document.querySelectorAll('#lc-uv #number');
          if (eles.length > 0) {
            eles.forEach((el,index,array)=>{
              el.innerText = record.times + (vuv ? 1 : 0);
              if (uvCtn) {
                uvCtn.style.display = 'inline';
              }
            })
          }
        });
        getterArr.push(uvGetter);
      }

      // 请求文章的浏览数，如果是当前页面就自增
      var allPV = document.querySelectorAll('#lc-pv');
      if (allPV.length > 0 || enableIncr) {
        for (i = 0; i < allPV.length; i++) {
          let pv = allPV[i];
          let title = pv.getAttribute('data-title');
          var url = 'http://example.com' + pv.getAttribute('data-path');
          if (url) {
            var viewGetter = this.getRecord(Counter, url, title).then((record) => {
              // 是当前页面就自增
              let curPath = window.location.pathname;
              if (curPath.includes('index.html')) {
                curPath = curPath.substring(0, curPath.lastIndexOf('index.html'));
              }
              if (pv.getAttribute('data-path') == curPath) {
                incrArr.push(this.buildIncrement(record.objectId));
              }
              if (pv) {
                var ele = pv.querySelector('#lc-pv #number');
                if (ele) {
                  if (pv.getAttribute('data-path') == curPath) {
                    ele.innerText = (record.times || 0) + 1;
                  } else {
                    ele.innerText = record.times || 0;
                  }
                  pv.style.display = 'inline';
                }
              }
            });
            getterArr.push(viewGetter);
          }
        }
      }

      // 如果启动计数自增，批量发起自增请求
      if (enableIncr) {
        Promise.all(getterArr).then(() => {
          incrArr.length > 0 && this.increment(Counter, incrArr);
        })
      }

    },


    fetchData(api_server) {
      var Counter = (method, url, data) => {
        return fetch(`${ api_server }/1.1${ url }`, {
          method,
          headers: {
            'X-LC-Id': this.app_id,
            'X-LC-Key': this.app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      this.addCount(Counter);
    },

    refreshCounter() {
      var api_server = this.app_id.slice(-9) !== '-MdYXbMMI' ? this.custom_api_server : `https://${ this.app_id.slice(0, 8).toLowerCase() }.api.lncldglobal.com`;
      if (api_server) {
        this.fetchData(api_server);
      } else {
        fetch('https://app-router.leancloud.cn/2/route?appId=' + this.app_id)
          .then(resp => resp.json())
          .then(({api_server}) => {
            this.fetchData('https://' + api_server);
          });
      }
    }

  };

  LCCounter.refreshCounter();

  document.addEventListener('pjax:complete', function () {
    LCCounter.refreshCounter();
  });
</script>




  <script>
const rootElement = document.documentElement;
const darkModeStorageKey = "user-color-scheme";
const rootElementDarkModeAttributeName = "data-user-color-scheme";

const setLS = (k, v) => {
    localStorage.setItem(k, v);
};

const removeLS = (k) => {
    localStorage.removeItem(k);
};

const getLS = (k) => {
    return localStorage.getItem(k);
};

const getModeFromCSSMediaQuery = () => {
  return window.matchMedia("(prefers-color-scheme: dark)").matches
    ? "dark"
    : "light";
};

const resetRootDarkModeAttributeAndLS = () => {
  rootElement.removeAttribute(rootElementDarkModeAttributeName);
  removeLS(darkModeStorageKey);
};

const validColorModeKeys = {
  dark: true,
  light: true,
};

const applyCustomDarkModeSettings = (mode) => {
  const currentSetting = mode || getLS(darkModeStorageKey);

  if (currentSetting === getModeFromCSSMediaQuery()) {
    resetRootDarkModeAttributeAndLS();
  } else if (validColorModeKeys[currentSetting]) {
    rootElement.setAttribute(rootElementDarkModeAttributeName, currentSetting);
  } else {
    resetRootDarkModeAttributeAndLS();
  }
};

const invertDarkModeObj = {
  dark: "light",
  light: "dark",
};

/**
 * get target mode
 */
const toggleCustomDarkMode = () => {
  let currentSetting = getLS(darkModeStorageKey);

  if (validColorModeKeys[currentSetting]) {
    currentSetting = invertDarkModeObj[currentSetting];
  } else if (currentSetting === null) {
    currentSetting = invertDarkModeObj[getModeFromCSSMediaQuery()];
  } else {
    return;
  }
  setLS(darkModeStorageKey, currentSetting);
  return currentSetting;
};

/**
 * bind click event for toggle button
 */
var btn=$("#wrapper .toggle-mode-btn,#rightmenu-wrapper .toggle-mode-btn");
function bindToggleButton() {
    btn.on('click',(e) => {
      const mode = toggleCustomDarkMode();
      applyCustomDarkModeSettings(mode);
    });
}

applyCustomDarkModeSettings();
document.addEventListener("DOMContentLoaded", bindToggleButton);
volantis.pjax.push(bindToggleButton);
volantis.pjax.send(()=>{
	btn.unbind('click');
},'toggle-mode-btn-unbind');
</script>








<script>
function listennSidebarTOC() {
  const navItems = document.querySelectorAll(".toc li");
  if (!navItems.length) return;
  const sections = [...navItems].map((element) => {
    const link = element.querySelector(".toc-link");
    const target = document.getElementById(
      decodeURI(link.getAttribute("href")).replace("#", "")
    );
    link.addEventListener("click", (event) => {
      event.preventDefault();
      window.scrollTo({
		top: target.offsetTop + 100,
		
		behavior: "smooth"
		
	  });
    });
    return target;
  });

  function activateNavByIndex(target) {
    if (target.classList.contains("active-current")) return;

    document.querySelectorAll(".toc .active").forEach((element) => {
      element.classList.remove("active", "active-current");
    });
    target.classList.add("active", "active-current");
    let parent = target.parentNode;
    while (!parent.matches(".toc")) {
      if (parent.matches("li")) parent.classList.add("active");
      parent = parent.parentNode;
    }
  }

  function findIndex(entries) {
    let index = 0;
    let entry = entries[index];
    if (entry.boundingClientRect.top > 0) {
      index = sections.indexOf(entry.target);
      return index === 0 ? 0 : index - 1;
    }
    for (; index < entries.length; index++) {
      if (entries[index].boundingClientRect.top <= 0) {
        entry = entries[index];
      } else {
        return sections.indexOf(entry.target);
      }
    }
    return sections.indexOf(entry.target);
  }

  function createIntersectionObserver(marginTop) {
    marginTop = Math.floor(marginTop + 10000);
    let intersectionObserver = new IntersectionObserver(
      (entries, observe) => {
        let scrollHeight = document.documentElement.scrollHeight + 100;
        if (scrollHeight > marginTop) {
          observe.disconnect();
          createIntersectionObserver(scrollHeight);
          return;
        }
        let index = findIndex(entries);
        activateNavByIndex(navItems[index]);
      },
      {
        rootMargin: marginTop + "px 0px -100% 0px",
        threshold: 0,
      }
    );
    sections.forEach((element) => {
      element && intersectionObserver.observe(element);
    });
  }
  createIntersectionObserver(document.documentElement.scrollHeight);
}

document.addEventListener("DOMContentLoaded", listennSidebarTOC);
document.addEventListener("pjax:success", listennSidebarTOC);
</script>

<!-- more -->


          
            


<script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script>


<script>
    var pjax;
    document.addEventListener('DOMContentLoaded', function () {
      pjax = new Pjax({
        elements: 'a[href]:not([href^="#"]):not([href="javascript:void(0)"]):not([pjax-fancybox])',
        selectors: [
          "title",
          
          "#pjax-container",
          "#pjax-header-nav-list"
        ],
        cacheBust: false,   // url 地址追加时间戳，用以避免浏览器缓存
        timeout: 5000
      });
    });

    document.addEventListener('pjax:send', function (e) {
      //window.stop(); // 相当于点击了浏览器的停止按钮

      try {
        var currentUrl = window.location.pathname;
        var targetUrl = e.triggerElement.href;
        var banUrl = ["/artitalk/", "/bb/", "/bangumis/"];
        if (banUrl[0] != "") {
          banUrl.forEach(item => {
            if(currentUrl.indexOf(item) != -1 || targetUrl.indexOf(item) != -1) {
              window.location.href = targetUrl;
            }
          });
        }
      } catch (error) {}

      window.subData = null; // 移除标题（用于一二级导航栏切换处）

      volantis.$switcher.removeClass('active'); // 关闭移动端激活的搜索框
      volantis.$header.removeClass('z_search-open'); // 关闭移动端激活的搜索框
      volantis.$wrapper.removeClass('sub'); // 跳转页面时关闭二级导航

      // 解绑事件 避免重复监听
      volantis.$topBtn.unbind('click');
      $('.menu a').unbind('click');
      $(window).unbind('resize');
      $(window).unbind('scroll');
      $(document).unbind('scroll');
      $(document).unbind('click');
      $('body').unbind('click');
	  // 使用 volantis.pjax.send 方法传入pjax:send回调函数 参见layout/_partial/scripts/global.ejs
	  volantis.pjax.method.send.start();
    });

    document.addEventListener('pjax:complete', function () {
      $('.nav-main').find('.list-v').not('.menu-phone').removeAttr("style",""); // 移除小尾巴的移除
      $('.menu-phone.list-v').removeAttr("style",""); // 移除小尾巴的移除
      $('script[data-pjax], .pjax-reload script').each(function () {
        $(this).parent().append($(this).remove());
      });
      try{
		// 使用 volantis.pjax.push 方法传入重载函数 参见layout/_partial/scripts/global.ejs
		volantis.pjax.method.complete.start();
      } catch (e) {
        console.log(e);
      }
    });

    document.addEventListener('pjax:error', function (e) {
	  // 使用 volantis.pjax.error 方法传入pjax:error回调函数 参见layout/_partial/scripts/global.ejs
	  volantis.pjax.method.error.start();
      window.location.href = e.triggerElement.href;
    });
</script>

              
      </div>
  <script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1.5,"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"left","left":36,"width":150,"height":230,"hOffset":0,"vOffset":-20},"mobile":{"show":false},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false});</script></body>

</html>


<!-- 浏览器搞笑标题 -->
<script type="text/javascript" src="/js/FunnyTitle.js"></script>

<!-- 单击显示文字 -->
<!-- <script type="text/javascript" src="/js/click_show_text.js"></script> -->

<!-- 单击显示特效 -->
<script src="https://cdn.jsdelivr.net/gh/zyoushuo/Blog/hexo/js/mouse_click.js"></script>