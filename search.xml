<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ã€é¡¹ç›®ç¬”è®°ã€‘å•†åŸé¡¹ç›®å®æˆ˜2</title>
      <link href="/2021/10/16/xiang-mu-bi-ji-shang-cheng-xiang-mu-shi-zhan-2/"/>
      <url>/2021/10/16/xiang-mu-bi-ji-shang-cheng-xiang-mu-shi-zhan-2/</url>
      
        <content type="html"><![CDATA[<h2 id="å“ç‰Œç®¡ç†ï¼ˆåå°ï¼‰"><a href="#å“ç‰Œç®¡ç†ï¼ˆåå°ï¼‰" class="headerlink" title="å“ç‰Œç®¡ç†ï¼ˆåå°ï¼‰"></a>å“ç‰Œç®¡ç†ï¼ˆåå°ï¼‰</h2><blockquote><p>å•†å“ç³»ç»Ÿä¸‹çš„å“ç‰Œç®¡ç†ï¼Œæ•°æ®åº“è¡¨å¯¹åº”product-brand</p></blockquote><h3 id="ä½¿ç”¨é€†å‘å·¥ç¨‹"><a href="#ä½¿ç”¨é€†å‘å·¥ç¨‹" class="headerlink" title="ä½¿ç”¨é€†å‘å·¥ç¨‹"></a>ä½¿ç”¨é€†å‘å·¥ç¨‹</h3><blockquote><ol><li>å…ˆä½¿ç”¨äººäººå¿«é€Ÿå¼€å‘å¹³å°ï¼Œç³»ç»Ÿç®¡ç†â€”&gt;èœå•ç®¡ç†â€”&gt;æ·»åŠ èœå•</li><li>ä½¿ç”¨renren-generatoré€†å‘ç”Ÿæˆå·¥ç¨‹ï¼ˆä¹‹å‰å·²ç»åšè¿‡äº†ï¼‰</li><li>å¤åˆ¶ç²˜è´´å…¶ä¸­resourceä¸‹çš„modulesæ–‡ä»¶å¤¹ä¸‹çš„è§†å›¾æ¨¡æ¿ï¼ˆæˆ‘qiaoè¿™ä¹ˆæ£’çš„å—ï¼‰</li><li>è§†å›¾æ¨¡æ¿è¿™é‡Œå¯ä»¥å…ˆæŠŠæƒé™ç®¡ç†åˆ é™¤ï¼ˆv-if=â€isAuthâ€ï¼‰ï¼Œæˆ–è€…å»index.jsä¸­çš„isAuthæ–¹æ³•è¿”å›TRUE</li><li>å¢åˆ æ”¹æŸ¥éƒ½å†™å¥½äº†ï¼ˆè¿˜å¯ä»¥è¿™æ ·æˆ‘qiaoï¼‰</li></ol></blockquote><h3 id="å…³é—­è¯­æ³•æ£€æŸ¥"><a href="#å…³é—­è¯­æ³•æ£€æŸ¥" class="headerlink" title="å…³é—­è¯­æ³•æ£€æŸ¥"></a>å…³é—­è¯­æ³•æ£€æŸ¥</h3><blockquote><p>build -&gt; webpack.base.conf.js -&gt; createLintingRuleæ–¹æ³•ä¸­æ³¨é‡Šå³å¯</p><p>ï¼Ÿæˆ‘å‘ç°æˆ‘æ³¨é‡Šæ‰ä¹‹åä¼šæŠ¥é”™ï¼Œæ‰€ä»¥è¿˜æ˜¯ç”¨æˆ‘ä¹‹å‰é‚£ä¸ªæ–¹æ³•</p></blockquote><h3 id="ä¼˜åŒ–åˆ—æ˜¾ç¤ºå¼€å…³æŒ‰é’®"><a href="#ä¼˜åŒ–åˆ—æ˜¾ç¤ºå¼€å…³æŒ‰é’®" class="headerlink" title="ä¼˜åŒ–åˆ—æ˜¾ç¤ºå¼€å…³æŒ‰é’®"></a>ä¼˜åŒ–åˆ—æ˜¾ç¤ºå¼€å…³æŒ‰é’®</h3><h4 id="element-uiç»„ä»¶"><a href="#element-uiç»„ä»¶" class="headerlink" title="element-uiç»„ä»¶"></a>element-uiç»„ä»¶</h4><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20211016180038613.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20211016180038613.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211016180038613"></p><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20211016180640279.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20211016180640279.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211016180640279"></p><h4 id="æŒ‰é’®äº‹ä»¶"><a href="#æŒ‰é’®äº‹ä»¶" class="headerlink" title="æŒ‰é’®äº‹ä»¶"></a>æŒ‰é’®äº‹ä»¶</h4><blockquote><p>ç»‘å®šchangeäº‹ä»¶</p><p>æ³¨æ„showStatusåœ¨æ•°æ®åº“ä¸­æ˜¯intç±»å‹ï¼Œæ‰€ä»¥éœ€è¦åˆ¤æ–­è½¬æ¢ä¸€ä¸‹ï¼ˆä½†æ˜¯ç›´æ¥æŠŠSwitchçš„active-valueæ¢æˆ10å°±ä¸ç”¨å†è½¬æ¢äº†ï¼‰</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table-column</span><br><span class="line">      prop=&quot;showStatus&quot;</span><br><span class="line">      header-align=&quot;center&quot;</span><br><span class="line">      align=&quot;center&quot;</span><br><span class="line">      label=&quot;æ˜¾ç¤ºçŠ¶æ€&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">&lt;el-switch</span><br><span class="line">          v-model=&quot;scope.row.showStatus&quot;</span><br><span class="line">          active-color=&quot;#13ce66&quot;</span><br><span class="line">          inactive-color=&quot;#ff4949&quot;</span><br><span class="line">          :active-value=&quot;1&quot;</span><br><span class="line">          :inactive-value=&quot;0&quot;</span><br><span class="line">          @change=&quot;updateBrandStatus(scope.row)&quot;</span><br><span class="line">        &gt;</span><br><span class="line">        &lt;/el-switch&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">  methods: &#123;</span><br><span class="line">    <span class="comment">// æ”¹å˜çŠ¶æ€</span></span><br><span class="line">    <span class="function"><span class="title">updateBrandStatus</span>(<span class="params">data</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;å½“å‰scope.rowï¼š&quot;</span>, data);</span><br><span class="line">      <span class="comment">// è§£æ„</span></span><br><span class="line">      <span class="keyword">let</span> &#123; brandId, showStatus &#125; = data;</span><br><span class="line">      <span class="comment">// å‘é€è¯·æ±‚ä¿®æ”¹çŠ¶æ€</span></span><br><span class="line">      <span class="built_in">this</span>.$http(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="built_in">this</span>.$http.adornUrl(<span class="string">&quot;/product/brand/update&quot;</span>),</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&quot;post&quot;</span>,</span><br><span class="line">        <span class="attr">data</span>: <span class="built_in">this</span>.$http.adornData(&#123; brandId, showStatus &#125;, <span class="literal">false</span>)</span><br><span class="line">      &#125;).then(<span class="function">(<span class="params">&#123; data &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">          <span class="attr">type</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&quot;çŠ¶æ€æ›´æ–°æˆåŠŸ&quot;</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="äº‘å­˜å‚¨æœåŠ¡"><a href="#äº‘å­˜å‚¨æœåŠ¡" class="headerlink" title="äº‘å­˜å‚¨æœåŠ¡"></a>äº‘å­˜å‚¨æœåŠ¡</h3><blockquote><p>è€æ ·å­é˜¿é‡Œäº‘OSS</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> é¡¹ç›® </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> SpringCloud </tag>
            
            <tag> redis </tag>
            
            <tag> å¾®æœåŠ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€é¡¹ç›®ç¬”è®°ã€‘å•†åŸé¡¹ç›®å®æˆ˜1</title>
      <link href="/2021/10/08/xiang-mu-bi-ji-shang-cheng-xiang-mu-shi-zhan-1/"/>
      <url>/2021/10/08/xiang-mu-bi-ji-shang-cheng-xiang-mu-shi-zhan-1/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ†å¸ƒå¼åŸºç¡€æ¦‚å¿µ"><a href="#åˆ†å¸ƒå¼åŸºç¡€æ¦‚å¿µ" class="headerlink" title="åˆ†å¸ƒå¼åŸºç¡€æ¦‚å¿µ"></a>åˆ†å¸ƒå¼åŸºç¡€æ¦‚å¿µ</h2><h3 id="å¾®æœåŠ¡"><a href="#å¾®æœåŠ¡" class="headerlink" title="å¾®æœåŠ¡"></a>å¾®æœåŠ¡</h3><blockquote><p>åŸºäºä¸šåŠ¡è¾¹ç•Œè¿›è¡ŒæœåŠ¡å¾®åŒ–æ‹†åˆ†ï¼Œå„ä¸ªæœåŠ¡å™¨ç‹¬ç«‹éƒ¨ç½²è¿è¡Œã€‚</p></blockquote><h3 id="é›†ç¾¤-amp-åˆ†å¸ƒå¼-amp-èŠ‚ç‚¹"><a href="#é›†ç¾¤-amp-åˆ†å¸ƒå¼-amp-èŠ‚ç‚¹" class="headerlink" title="é›†ç¾¤&amp;åˆ†å¸ƒå¼&amp;èŠ‚ç‚¹"></a>é›†ç¾¤&amp;åˆ†å¸ƒå¼&amp;èŠ‚ç‚¹</h3><blockquote><p>é›†ç¾¤æ˜¯ä¸ªç‰©ç†å½¢æ€ï¼Œåˆ†å¸ƒå¼æ˜¯ä¸ªå·¥ä½œæ–¹å¼ã€‚</p><p>åˆ†å¸ƒå¼æ˜¯æŒ‡å°†ä¸åŒçš„ä¸šåŠ¡åˆ†å¸ƒåœ¨ä¸åŒçš„åœ°æ–¹ï¼Œé›†ç¾¤æ˜¯æŒ‡å°†å‡ å°æœåŠ¡å™¨é›†ä¸­åœ¨ä¸€èµ·å®ç°åŒä¸€ä¸šåŠ¡ã€‚</p><p>åˆ†å¸ƒå¼ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ï¼ˆé›†ç¾¤ä¸­çš„ä¸€ä¸ªæœåŠ¡å™¨ï¼‰ï¼Œéƒ½å¯ä»¥åšé›†ç¾¤ï¼Œç„¶è€Œé›†ç¾¤ä¸ä¸€å®šå°±æ˜¯åˆ†å¸ƒå¼çš„ã€‚</p></blockquote><h3 id="è¿œç¨‹è°ƒç”¨"><a href="#è¿œç¨‹è°ƒç”¨" class="headerlink" title="è¿œç¨‹è°ƒç”¨"></a>è¿œç¨‹è°ƒç”¨</h3><blockquote><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå„ä¸ªæœåŠ¡å¯èƒ½å¤„äºä¸åŒä¸»æœºï¼Œä½†æ˜¯æœåŠ¡ä¹‹é—´ä¸å¯é¿å…çš„éœ€è¦ç›¸äº’è°ƒç”¨ï¼Œå³è¿œç¨‹è°ƒç”¨ã€‚</p><p>åœ¨spring-cloudä¸­ä½¿ç”¨HTTP+JSONçš„æ–¹å¼å®Œæˆè¿œç¨‹è°ƒç”¨ã€‚</p></blockquote><h3 id="è´Ÿè½½å‡è¡¡"><a href="#è´Ÿè½½å‡è¡¡" class="headerlink" title="è´Ÿè½½å‡è¡¡"></a>è´Ÿè½½å‡è¡¡</h3><blockquote><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼ŒAæœåŠ¡éœ€è¦è°ƒç”¨BæœåŠ¡ï¼Œä¸”BæœåŠ¡å­˜åœ¨äºå¤šå°æœºå™¨ä¸­ï¼ŒAæœåŠ¡è°ƒç”¨ä»»æ„ä¸€ä¸ªæœåŠ¡å™¨å‡å¯å®ŒæˆåŠŸèƒ½ã€‚ä½†æ˜¯ä¸ºäº†ä½¿å¾—æ¯ä¸€ä¸ªæœåŠ¡å™¨ä¸è¦å¤ªå¿™æˆ–è€…å¤ªé—²ï¼Œå¯ä»¥ä½¿ç”¨è´Ÿè½½å‡è¡¡çš„è°ƒç”¨æ¯ä¸€ä¸ªæœåŠ¡å™¨ã€‚</p><p>å¸¸è§çš„è´Ÿè½½å‡è¡¡ç®—æ³•å¦‚ä¸‹ï¼š</p><ol><li>è½®è¯¢ï¼šæŒ‰é¡ºåºï¼ŒçŸ¥é“æœ€åä¸€ä¸ªï¼Œç„¶åå¾ªç¯ã€‚</li><li>æœ€å°è¿æ¥ï¼šæœ‰é™é€‰æ‹©è¿æ¥æ•°æœ€å°‘ï¼ˆå‹åŠ›æœ€å°ï¼‰çš„æœåŠ¡å™¨ã€‚</li><li>æ•£åˆ—ï¼šæ ¹æ®è¯·æ±‚æºçš„IPçš„æ•£åˆ—ï¼ˆHASHï¼‰æ¥é€‰æ‹©è¦è½¬å‘çš„æœåŠ¡å™¨ã€‚</li></ol></blockquote><h3 id="æœåŠ¡æ³¨å†Œã€å‘ç°-amp-æ³¨å†Œä¸­å¿ƒ"><a href="#æœåŠ¡æ³¨å†Œã€å‘ç°-amp-æ³¨å†Œä¸­å¿ƒ" class="headerlink" title="æœåŠ¡æ³¨å†Œã€å‘ç°&amp;æ³¨å†Œä¸­å¿ƒ"></a>æœåŠ¡æ³¨å†Œã€å‘ç°&amp;æ³¨å†Œä¸­å¿ƒ</h3><blockquote><p>æœåŠ¡ä¸Šçº¿ååœ¨æ³¨å†Œä¸­å¿ƒæ³¨å†Œï¼Œä»è€Œä½¿å¾—å…¶ä»–æœåŠ¡å™¨æˆ–è€…äººèƒ½å¤Ÿæ„ŸçŸ¥å…¶å­˜åœ¨ä¸çŠ¶æ€</p></blockquote><h3 id="é…ç½®ä¸­å¿ƒ"><a href="#é…ç½®ä¸­å¿ƒ" class="headerlink" title="é…ç½®ä¸­å¿ƒ"></a>é…ç½®ä¸­å¿ƒ</h3><blockquote><p>æ¯ä¸€ä¸ªæœåŠ¡å™¨éƒ½å«æœ‰å¤§é‡çš„é…ç½®ï¼Œå¹¶ä¸”æ¯ä¸ªæœåŠ¡å¯èƒ½éƒ¨ç½²åœ¨å¤šå°æœºå™¨ä¸Šï¼Œæ‰€ä»¥ç»å¸¸éœ€è¦å˜æ›´é…ç½®ï¼Œå°±å¯ä»¥ä½¿ç”¨é…ç½®ä¸­å¿ƒæ¥é›†ä¸­ç®¡ç†å¾®æœåŠ¡çš„é…ç½®ä¿¡æ¯ã€‚</p></blockquote><h3 id="æœåŠ¡ç†”æ–­-amp-æœåŠ¡é™çº§"><a href="#æœåŠ¡ç†”æ–­-amp-æœåŠ¡é™çº§" class="headerlink" title="æœåŠ¡ç†”æ–­&amp;æœåŠ¡é™çº§"></a>æœåŠ¡ç†”æ–­&amp;æœåŠ¡é™çº§</h3><blockquote><p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œå¾®æœåŠ¡ä¹‹é—´é€šè¿‡ç½‘ç»œè¿›è¡Œé€šè®¯ï¼Œå½“ä¸€ä¸ªæœåŠ¡ä¸å¯ç”¨çš„æ—¶å€™å¯èƒ½é€ æˆé›ªå´©æ•ˆåº”ã€‚ä¸ºé˜²æ­¢è¿™æ ·çš„æƒ…å†µï¼Œå¿…é¡»è¦æœ‰å®¹é”™æœºåˆ¶æ¥ä¿æŠ¤æœåŠ¡ã€‚</p><p>æœåŠ¡ç†”æ–­ï¼šè®¾ç½®æœåŠ¡çš„è¶…æ—¶æ—¶é—´ï¼Œå½“è¢«è°ƒç”¨çš„æœåŠ¡ç»å¸¸å¤±è´¥åˆ°è¾¾æŸä¸ªé˜ˆå€¼ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å¯æ–­è·¯ä¿æŠ¤æœºåˆ¶ï¼Œä½¿å¾—åæ¥çš„è¯·æ±‚ä¸å†å»è°ƒç”¨è¿™ä¸ªæœåŠ¡ï¼Œè€Œæ˜¯æœ¬åœ°ç›´æ¥è¿”å›é»˜è®¤çš„æ•°æ®ã€‚</p><p>æœåŠ¡é™çº§ï¼šåœ¨è¿ç»´æœŸé—´ï¼Œå½“ç³»ç»Ÿå¤„äºé«˜å³°æœŸï¼Œç³»ç»Ÿèµ„æºç´§å¼ ï¼Œå¯ä»¥è®©éæ ¸å¿ƒä¸šåŠ¡é™çº§è¿è¡Œï¼Œå³æŸäº›æœåŠ¡ä¸å¤„ç†æˆ–è€…ç®€å•å¤„ç†ã€‚</p></blockquote><h3 id="APIç½‘å…³"><a href="#APIç½‘å…³" class="headerlink" title="APIç½‘å…³"></a>APIç½‘å…³</h3><blockquote><p>æŠ½è±¡äº†å¾®æœåŠ¡ä¸­éƒ½éœ€è¦çš„å…¬å…±åŠŸèƒ½ï¼ŒåŒæ—¶æä¾›äº†å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ã€æœåŠ¡ç†”æ–­ã€ç»Ÿä¸€è®¤è¯ã€é™æµæµæ§ã€æ—¥å¿—ç»Ÿè®¡ç­‰åŠŸèƒ½ã€‚</p></blockquote><h2 id="å¾®æœåŠ¡æ¶æ„å›¾"><a href="#å¾®æœåŠ¡æ¶æ„å›¾" class="headerlink" title="å¾®æœåŠ¡æ¶æ„å›¾"></a>å¾®æœåŠ¡æ¶æ„å›¾</h2><p><img src="https://gitee.com/ReRia/images/raw/master/img/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E5%9B%BE.jpg" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E5%9B%BE.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="è°·ç²’å•†åŸ-å¾®æœåŠ¡æ¶æ„å›¾"></p><h2 id="å¾®æœåŠ¡åˆ’åˆ†å›¾"><a href="#å¾®æœåŠ¡åˆ’åˆ†å›¾" class="headerlink" title="å¾®æœåŠ¡åˆ’åˆ†å›¾"></a>å¾®æœåŠ¡åˆ’åˆ†å›¾</h2><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20211009140429986.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20211009140429986.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211009140429986"></p><h2 id="Linuxè™šæ‹Ÿæœºç¯å¢ƒæ­å»º"><a href="#Linuxè™šæ‹Ÿæœºç¯å¢ƒæ­å»º" class="headerlink" title="Linuxè™šæ‹Ÿæœºç¯å¢ƒæ­å»º"></a>Linuxè™šæ‹Ÿæœºç¯å¢ƒæ­å»º</h2><blockquote><p>ä¹‹å‰çš„é¡¹ç›®å·²ç»æ­å»ºçš„å·®ä¸å¤šäº†</p></blockquote><h3 id="ç›¸å…³å‘½ä»¤"><a href="#ç›¸å…³å‘½ä»¤" class="headerlink" title="ç›¸å…³å‘½ä»¤"></a>ç›¸å…³å‘½ä»¤</h3><blockquote><p>winï¼š</p><ol><li>ipconfig</li><li>ping 192.168.128.129</li></ol><p>linuxï¼š</p><ol><li>ip addr</li><li>ping 10.67.99.2</li></ol><p>dockerï¼š</p><ol><li>æˆ‘çš„æŒ‚è½½æ–‡ä»¶åœ°å€éƒ½åœ¨mydataä¸­</li><li>docker images    å½“å‰æ‰€æœ‰é•œåƒ</li><li>docker ps             å½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨</li><li>docker start xxx   å¯åŠ¨å®¹å™¨</li><li>docker exec -it mysql /bin/bash</li><li>docker exec -it redis redis-cli</li><li>whereis [å®¹å™¨å]    æŸ¥çœ‹å½“å‰è¿›å…¥çš„å®¹å™¨æ–‡ä»¶çš„åœ°å€</li><li>docker update redis â€“restart=always     è‡ªåŠ¨é‡å¯å®¹å™¨</li><li>exit</li></ol><p>mysqlï¼š</p><ol><li>mysql -u root -p     è®¿é—®mysql</li></ol><p>redisï¼š</p><ol><li>keys *</li></ol></blockquote><h2 id="é¡¹ç›®å‰åç«¯åŸºç¡€æ­å»º"><a href="#é¡¹ç›®å‰åç«¯åŸºç¡€æ­å»º" class="headerlink" title="é¡¹ç›®å‰åç«¯åŸºç¡€æ­å»º"></a>é¡¹ç›®å‰åç«¯åŸºç¡€æ­å»º</h2><blockquote><p>åé¢å›æ¥å¾—æˆ‘è¡¨ç¤ºï¼Œä»ä¸€å¼€å§‹ç›´æ¥å¤åˆ¶ä¸€æ ·çš„ç‰ˆæœ¬å·ï¼ï¼ï¼</p></blockquote><h3 id="åŸºç¡€æœåŠ¡æ¨¡å—"><a href="#åŸºç¡€æœåŠ¡æ¨¡å—" class="headerlink" title="åŸºç¡€æœåŠ¡æ¨¡å—"></a>åŸºç¡€æœåŠ¡æ¨¡å—</h3><blockquote><p>æ³¨æ„æ¯ä¸ªæœåŠ¡æ¨¡å—ï¼Œå…ˆå¯¼å…¥webå’Œopenfeign</p></blockquote><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20211009155653337.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20211009155653337.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211009155653337"></p><h3 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h3><blockquote><p>æ¯ä¸ªæœåŠ¡éƒ½éœ€è¦ç‹¬ç«‹çš„æ•°æ®åº“</p><p>æ³¨æ„è¿™é‡Œsqlæ–‡ä»¶ä¸è¦ç›´æ¥å¯¼å…¥ï¼Œå¯èƒ½å¯¼å‡ºçš„æ—¶å€™æ ¼å¼è®¾ç½®å’Œç°åœ¨ä¸ç¬¦åˆï¼ˆåˆ›å»ºçš„æ•°æ®åº“å­—ç¬¦ç¼–ç ä¸ºutf8mb4ï¼‰,ç›´æ¥å¯¼å…¥ä¼šä¸­æ–‡ä¹±ç ï¼Œç”¨è®°äº‹æœ¬æ‰“å¼€åå†ç²˜è´´è¿è¡Œã€‚</p></blockquote><h3 id="äººäººå¼€æºæ¨¡æ¿"><a href="#äººäººå¼€æºæ¨¡æ¿" class="headerlink" title="äººäººå¼€æºæ¨¡æ¿"></a>äººäººå¼€æºæ¨¡æ¿</h3><blockquote><p><a href="https://gitee.com/renrenio">äººäººå¼€æº (gitee.com)</a></p><p>renren-fastï¼ˆåç«¯ï¼‰renren-fast-vueï¼ˆå‰ç«¯ï¼‰renren-generatorï¼ˆç”Ÿæˆå™¨ï¼‰</p></blockquote><h4 id="renren-fast"><a href="#renren-fast" class="headerlink" title="renren-fast"></a>renren-fast</h4><blockquote><ol><li>renren-fast cloneåæ”¾åˆ°çˆ¶æ¨¡å—ä¸­ï¼Œè®°å¾—åœ¨çˆ¶æ¨¡å—çš„pomæ–‡ä»¶ä¸­å†™å…¥modelã€‚</li><li>è¿è¡Œdbæ–‡ä»¶å¤¹ä¸­çš„å¯¹åº”sql</li><li>ä¿®æ”¹resourcesä¸‹çš„é…ç½®æ–‡ä»¶<ol><li>application-dev.ymlä¸­çš„druidæ•°æ®æºä¿¡æ¯</li></ol></li></ol></blockquote><h4 id="renren-fast-vue"><a href="#renren-fast-vue" class="headerlink" title="renren-fast-vue"></a>renren-fast-vue</h4><blockquote><ol><li>cloneåç”¨vscodeæ‰“å¼€</li><li>npm installï¼ˆæ³¨æ„å…ˆæŠŠpackage.jsonä¸­sassçš„ç‰ˆæœ¬æ”¹ä¸º4.14ä»¥ä¸Šï¼Œå› ä¸ºnpmçš„ç‰ˆæœ¬ä¸º14ï¼Œä¸¤è€…ç‰ˆæœ¬æœ‰æ‰€å¯¹åº”ï¼Œè¯¦è§ğŸ‘‰<a href="https://blog.csdn.net/qq_24654501/article/details/119005722">Vueè§£å†³æŠ¥é”™9_äººäººå¼€æºrenren-fast-vueæ‰§è¡Œnpm installæŠ¥é”™è§£å†³(sassçš„ç‰ˆæœ¬å¤ªä½è€Œnodeçš„ç‰ˆæœ¬å¤ªé«˜å¯¼è‡´ï¼‰_xiaosiçš„åšå®¢-CSDNåšå®¢</a>ï¼Œå¥‡æ€ªçš„æ˜¯package-lock.jsonä¸­çš„ç‰ˆæœ¬ä¸º4.14.1ï¼Œç„¶è€Œpackageä¸­å´æ˜¯4.13.1ï¼‰</li><li>npm run devï¼Œå¦ˆè€¶runäº†ä¸€ä¸‹è¯•è¯•ï¼Œå°±å¼€äº†ä¸€ä¸ªæœåŠ¡ï¼Œå†…å­˜å·²ç»85%äº†</li><li>å¯ä»¥åœ¨.eslintignoreä¸­æ·»åŠ <code>*.js</code>å’Œ<code>*.vue</code>ç”¨äºå¿½ç•¥è¯­æ³•æ£€æŸ¥</li></ol></blockquote><h4 id="renren-generator"><a href="#renren-generator" class="headerlink" title="renren-generator"></a>renren-generator</h4><blockquote><ol><li>cloneï¼Œå¯¼å…¥åˆ°åç«¯é¡¹ç›®ä¸­ï¼Œè®°å¾—åœ¨çˆ¶æ¨¡å—çš„pomæ–‡ä»¶ä¸­å†™å…¥modelã€‚</li><li>é…ç½®application.ymlä¸­çš„æ•°æ®æºé…ç½®ï¼ˆæ³¨æ„æ•°æ®åº“åçš„ç¼–å†™ï¼‰</li><li>é…ç½®generator.propertiesä¸­çš„ç”Ÿæˆæ•°æ®é…ç½®ï¼ˆæ³¨æ„æ¨¡å—åã€è¡¨å‰ç¼€å³å¯ï¼‰</li><li>è¿è¡Œapplicationæ‰“å¼€é¡µé¢ç‚¹å‡»ç”Ÿæˆä»£ç ï¼ˆå¦‚æœä¸€ç›´åœ¨è¯»å–è¯´æ˜é…ç½®ä¿¡æ¯æœ‰è¯¯ï¼‰</li><li>å°†å‹ç¼©åŒ…ä¸­çš„mainæ–‡ä»¶æ”¾å…¥å¯¹åº”æ¨¡å—srcæ–‡ä»¶å¤¹</li><li>å»renren-fastæ¨¡å—ä¸­çš„commonæ–‡ä»¶å¤¹ä¸­å¤åˆ¶æŠ¥é”™æ‰€éœ€è¦çš„ç±»</li></ol></blockquote><h3 id="commonæ¨¡å—"><a href="#commonæ¨¡å—" class="headerlink" title="commonæ¨¡å—"></a>commonæ¨¡å—</h3><blockquote><p>æ‰¿æ¥ä¸Šæ–‡ï¼Œåæ­£å°±æ˜¯ä¿®ä¿®è¡¥è¡¥</p><p>controllerä¸­çš„@RequiresPermissionsæ³¨é‡Šå¯ä»¥é€šè¿‡ä¿®æ”¹generatorçš„controller templateï¼ˆæ‰€ä»¥è¯´ä¸ºä»€ä¹ˆä¸èƒ½ä¸€å¼€å§‹å°±æŠŠæ¨¡æ¿ä¿®æ”¹äº†ï¼‰</p></blockquote><h4 id="å½“å‰é¡¹ç›®ç»“æ„"><a href="#å½“å‰é¡¹ç›®ç»“æ„" class="headerlink" title="å½“å‰é¡¹ç›®ç»“æ„"></a>å½“å‰é¡¹ç›®ç»“æ„</h4><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20211009192652587.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20211009192652587.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211009192652587"></p><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20211009192720046.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20211009192720046.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211009192720046"></p><h3 id="æ•´åˆmybatis-plus"><a href="#æ•´åˆmybatis-plus" class="headerlink" title="æ•´åˆmybatis-plus"></a>æ•´åˆmybatis-plus</h3><h4 id="ä¾èµ–"><a href="#ä¾èµ–" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h4><blockquote><p>ç”±äºcommonæ¨¡å—ä¸­å·²ç»å¯¼å…¥äº†mybatis-plusä¾èµ–ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨åªéœ€è¦å¯¼å…¥commonæ¨¡å—å³å¯</p><p>åŒæ—¶éœ€è¦åœ¨commonä¸­å¯¼å…¥mysqlé©±åŠ¨</p></blockquote><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><blockquote><p>é…ç½®datasourceã€mapperåœ°å€ã€mybatis-plusç­‰ï¼Œæœ€å¥½ä½¿ç”¨ymlæ ¼å¼</p></blockquote><h5 id="application-yml"><a href="#application-yml" class="headerlink" title="application.yml"></a>application.yml</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mysql</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="comment">#type: com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="comment">#MySQLé…ç½®</span></span><br><span class="line">    <span class="attr">driverClassName:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://192.168.128.129:3306/gulimall_pms?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line"><span class="comment"># mapper</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="comment"># mapper.xmlåœ°å€</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:/mapper/**/*.xml</span></span><br><span class="line">  <span class="comment"># ä¸»é”®è‡ªå¢</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span></span><br><span class="line">      </span><br><span class="line"><span class="comment">#æœåŠ¡å™¨ï¼ˆæ³¨æ„ä¸èƒ½é…ç½®æˆä¸€æ ·çš„ï¼‰</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">7000</span></span><br></pre></td></tr></table></figure><blockquote><p>classpath*è¡¨ç¤ºä¸ä»…æ‰«ææœ¬æ¨¡å—ä¸‹çš„ç±»è·¯å¾„ï¼Œè¿˜åŒ…æ‹¬å¼•å…¥çš„å…¶ä»–ä¾èµ–çš„ç±»è·¯å¾„</p></blockquote><h5 id="GulimallProductApplication"><a href="#GulimallProductApplication" class="headerlink" title="GulimallProductApplication"></a>GulimallProductApplication</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MapperScan(&quot;com.atguigu.gulimall.product.dao&quot;)</span><span class="comment">// mapperåŒ…æ‰«æ</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GulimallProductApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(GulimallProductApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å•å…ƒæµ‹è¯•âœ…"><a href="#å•å…ƒæµ‹è¯•âœ…" class="headerlink" title="å•å…ƒæµ‹è¯•âœ…"></a>å•å…ƒæµ‹è¯•âœ…</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span><span class="comment">// è®°å¾—åŠ ï¼Œè€Œä¸”è¦å¼•å…¥Junitå’Œspringboot-starter-testä¾èµ–</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GulimallProductApplicationTests</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    BrandService brandService;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        BrandEntity be = <span class="keyword">new</span> BrandEntity();</span><br><span class="line">        be.setName(<span class="string">&quot;huawei&quot;</span>);</span><br><span class="line">        brandService.save(be);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‰ç«¯è°ƒç”¨apiæ¥å£è¯·æ±‚åœ°å€é…ç½®"><a href="#å‰ç«¯è°ƒç”¨apiæ¥å£è¯·æ±‚åœ°å€é…ç½®" class="headerlink" title="å‰ç«¯è°ƒç”¨apiæ¥å£è¯·æ±‚åœ°å€é…ç½®"></a>å‰ç«¯è°ƒç”¨apiæ¥å£è¯·æ±‚åœ°å€é…ç½®</h3><blockquote><p>æ³¨æ„å»static-&gt;config-&gt;index.jsä¸­é…ç½®æœåŠ¡åœ°å€</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¼€å‘ç¯å¢ƒ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">; (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">window</span>.SITE_CONFIG = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// apiæ¥å£è¯·æ±‚åœ°å€(88ä¸ºç½‘å…³é…ç½®çš„ç«¯å£å·,apiä¸ºè‡ªå®šä¹‰è§„åˆ™)ï¼Œæ³¨æ„æœ€åä¸è¦æœ‰/</span></span><br><span class="line">  <span class="built_in">window</span>.SITE_CONFIG[<span class="string">&#x27;baseUrl&#x27;</span>] = <span class="string">&#x27;http://localhost:88/api&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// cdnåœ°å€ = åŸŸå + ç‰ˆæœ¬å·</span></span><br><span class="line">  <span class="built_in">window</span>.SITE_CONFIG[<span class="string">&#x27;domain&#x27;</span>] = <span class="string">&#x27;./&#x27;</span>; <span class="comment">// åŸŸå</span></span><br><span class="line">  <span class="built_in">window</span>.SITE_CONFIG[<span class="string">&#x27;version&#x27;</span>] = <span class="string">&#x27;&#x27;</span>;   <span class="comment">// ç‰ˆæœ¬å·(å¹´æœˆæ—¥æ—¶åˆ†)</span></span><br><span class="line">  <span class="built_in">window</span>.SITE_CONFIG[<span class="string">&#x27;cdnUrl&#x27;</span>] = <span class="built_in">window</span>.SITE_CONFIG.domain + <span class="built_in">window</span>.SITE_CONFIG.version;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç½‘å…³é…ç½®"><a href="#ç½‘å…³é…ç½®" class="headerlink" title="ç½‘å…³é…ç½®"></a>ç½‘å…³é…ç½®</h3><blockquote><p>å†™åœ¨application.ymlä¸­ï¼Œåƒä¸‡æ³¨æ„ç¼©è¿›</p></blockquote><h4 id="è§£å†³renren-faseéªŒè¯ç "><a href="#è§£å†³renren-faseéªŒè¯ç " class="headerlink" title="è§£å†³renren-faseéªŒè¯ç "></a>è§£å†³renren-faseéªŒè¯ç </h4><blockquote><p>å› ä¸ºä¿®æ”¹äº†ç«¯å£å·ï¼Œä½†æ˜¯renren-fastç™»å½•æ—¶å€™çš„éªŒè¯ç æ˜¯åœ¨å¥¹æœ¬æ¥çš„ç«¯å£8080æ‰èƒ½è·å–ï¼Œæ‰€ä»¥éœ€è¦è®©ç½‘å…³å‘ç°renren-fast</p><p>æ”¹å˜å¦‚localhost:88/api/captcha  -&gt;  localhost:8080/renren-fast/captcha</p></blockquote><blockquote><ol><li>å…ˆç»™renren-fastæŠŠnacosé…å¥½ï¼ˆæ³¨å†Œä¸­å¿ƒå’Œé…ç½®ä¸­å¿ƒçš„éƒ½å¯ä»¥é…ï¼‰</li><li>ç¼–å†™ç½‘å…³é…ç½®å¦‚ä¸‹</li></ol></blockquote><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">admin_route</span></span><br><span class="line">          <span class="comment"># lbè´Ÿè½½å‡è¡¡ï¼Œè‡ªåŠ¨æŸ¥è¯¢æœåŠ¡åä¸ºrenren-fastçš„æœåŠ¡å™¨ï¼Œä»è€Œè‡ªåŠ¨è·å¾—å…¶ip:port</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://renren-fast</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="comment"># åŒ¹é…æ‰€æœ‰ä»¥apiå¼€å¤´çš„å‰ç«¯è¯·æ±‚åœ°å€</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/api/**</span></span><br><span class="line">          <span class="comment"># å®ç°è½¬å‘</span></span><br><span class="line">          <span class="attr">filters:</span></span><br><span class="line">            <span class="comment"># æ³¨æ„è¿™é‡Œçš„å†™æ³•ï¼Œsegmentè¿™ä¸€éƒ¨åˆ†æ•´ä½“ä¸å˜ï¼Œç„¶ååˆ«çš„åœ°æ–¹è¿›è¡Œæ›¿æ¢</span></span><br><span class="line">            <span class="comment"># localhost:88/api/xxx  -&gt;   localhost:8080/renren-fast/xxx</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">RewritePath=/api/(?&lt;segment&gt;.*),/renren-fast/$\&#123;segment&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>è¿˜è¦å¼€å¯è·¨åŸŸ</p></blockquote><h3 id="è§£å†³è·¨åŸŸ"><a href="#è§£å†³è·¨åŸŸ" class="headerlink" title="è§£å†³è·¨åŸŸ"></a>è§£å†³è·¨åŸŸ</h3><blockquote><p>åœ¨ç½‘å…³å½“ä¸­å†™ä¸€ä¸ªconfigç±»ç»Ÿä¸€é…ç½®è·¨åŸŸï¼Œå¯</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.gulimall.config;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.CorsConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.reactive.CorsWebFilter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.reactive.UrlBasedCorsConfigurationSource;</span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GulimallCorsConfiguration</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span>   <span class="comment">// åŠ å…¥åˆ°springå®¹å™¨ä¸­ç›´æ¥ä½¿ç”¨</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CorsWebFilter <span class="title">crosWebFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        UrlBasedCorsConfigurationSource source = <span class="keyword">new</span> UrlBasedCorsConfigurationSource();</span><br><span class="line">        CorsConfiguration corsConfiguration = <span class="keyword">new</span> CorsConfiguration();</span><br><span class="line">        <span class="comment">// é…ç½®è·¨åŸŸ</span></span><br><span class="line">        corsConfiguration.addAllowedHeader(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        corsConfiguration.addAllowedMethod(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        corsConfiguration.addAllowedOrigin(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        corsConfiguration.setAllowCredentials(<span class="keyword">true</span>);    <span class="comment">// æ˜¯å¦å…è®¸æºå¸¦cookie</span></span><br><span class="line">        <span class="comment">// pathä¸ºéœ€è¦è·¨åŸŸçš„åœ°å€ï¼ŒcorsConfigurationä¸ºè·¨åŸŸé…ç½®</span></span><br><span class="line">        source.registerCorsConfiguration(<span class="string">&quot;/**&quot;</span>, corsConfiguration);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> CorsWebFilter(source);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20211010154403925.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20211010154403925.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211010154403925"></p><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20211010154515355.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20211010154515355.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211010154515355"></p><blockquote><p>è¿™é‡Œè¯´æ˜ä¸€ä¸‹ï¼Œä¸€ä¸ªloginï¼ˆmethodsä¸ºOPTIONè¡¨ç¤ºé¢„è§è¯·æ±‚ï¼‰å·²ç»é€šè¿‡äº†</p><p>ç¬¬äºŒæ˜¯çœŸå®è¯·æ±‚ï¼Œæºå¸¦äº†è¯·æ±‚æ•°æ®ç­‰</p><p>è¿™é‡Œæµ‹è¯•è¿˜æ˜¯å¤±è´¥çš„åŸå› æ˜¯renren-fastè‡ªå·±å·²ç»é…ç½®è¿‡äº†è·¨åŸŸï¼Œä¸¤æ¬¡è·¨åŸŸ=æ²¡è·¨ï¼ŒæŠŠrenren-fastçš„configæ–‡ä»¶å¤¹ä¸‹çš„CorsConfigæ³¨é‡Šæ‰å³å¯</p></blockquote><h2 id="åˆ†å¸ƒå¼ç»„ä»¶"><a href="#åˆ†å¸ƒå¼ç»„ä»¶" class="headerlink" title="åˆ†å¸ƒå¼ç»„ä»¶"></a>åˆ†å¸ƒå¼ç»„ä»¶</h2><blockquote><p>spring-cloud-alibaba</p><ol><li>nacosï¼šæ³¨å†Œä¸­å¿ƒé…ç½®ä¸­å¿ƒ</li><li>Sentinelï¼šæœåŠ¡å®¹é”™ï¼ˆé™æµã€é™çº§ã€ç†”æ–­ï¼‰</li><li>Seataï¼šåˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ</li></ol><p>spring-cloudï¼š</p><ol><li>Ribbonï¼šè´Ÿè½½å‡è¡¡</li><li>Feignï¼šå£°æ˜å¼HTTPå®¢æˆ·ç«¯ï¼ˆè¿œç¨‹æœåŠ¡ï¼‰</li><li>Gatewayï¼šAPIç½‘å…³</li><li>Sleuthï¼šè°ƒç”¨é“¾ç›‘æ§</li></ol></blockquote><h3 id="spring-cloudå’Œspring-bootç‰ˆæœ¬å¯¹åº”"><a href="#spring-cloudå’Œspring-bootç‰ˆæœ¬å¯¹åº”" class="headerlink" title="spring-cloudå’Œspring-bootç‰ˆæœ¬å¯¹åº”"></a>spring-cloudå’Œspring-bootç‰ˆæœ¬å¯¹åº”</h3><blockquote><p><a href="https://start.spring.io/actuator/info">https://start.spring.io/actuator/info</a></p><p><a href="https://github.com/alibaba/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E">ç‰ˆæœ¬è¯´æ˜ Â· alibaba/spring-cloud-alibaba Wiki (github.com)</a></p><p>è¿™ä¸ªç‰ˆæœ¬ä¸€å®šè¦å¯¹åº”èµ·æ¥</p></blockquote><h3 id="nacosæ³¨å†Œä¸­å¿ƒ"><a href="#nacosæ³¨å†Œä¸­å¿ƒ" class="headerlink" title="nacosæ³¨å†Œä¸­å¿ƒ"></a>nacosæ³¨å†Œä¸­å¿ƒ</h3><h4 id="ä¾èµ–-1"><a href="#ä¾èµ–-1" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h4><blockquote><p>commonæ¨¡å—å³å¯</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ******************** spring-cloud ******************** --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- nacos --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ******************** spring-cloudç‰ˆæœ¬ç®¡ç† ******************** --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2021.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="é…ç½®nacosåœ°å€"><a href="#é…ç½®nacosåœ°å€" class="headerlink" title="é…ç½®nacosåœ°å€"></a>é…ç½®nacosåœ°å€</h4><blockquote><p>æ³¨æ„éœ€è¦ä½¿ç”¨çš„æœåŠ¡å°±éœ€è¦åœ¨applicationä¸­é…ç½®</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mysql</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="comment">#type: com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="comment">#MySQLé…ç½®</span></span><br><span class="line">    <span class="attr">driverClassName:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://192.168.128.129:3306/gulimall_sms?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">  <span class="comment">#nacosåœ°å€</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:8848</span></span><br><span class="line">  <span class="comment"># æœåŠ¡å</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">gulimall-coupon</span></span><br></pre></td></tr></table></figure><h4 id="æ³¨è§£å¼€å¯"><a href="#æ³¨è§£å¼€å¯" class="headerlink" title="æ³¨è§£å¼€å¯"></a>æ³¨è§£å¼€å¯</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MapperScan(&quot;com.atguigu.gulimall.coupon.dao&quot;)</span>    <span class="comment">// mapperåŒ…æ‰«æ</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span>  <span class="comment">// nacos</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GulimallCouponApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(GulimallCouponApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¯è§†åŒ–ç•Œé¢"><a href="#å¯è§†åŒ–ç•Œé¢" class="headerlink" title="å¯è§†åŒ–ç•Œé¢"></a>å¯è§†åŒ–ç•Œé¢</h4><blockquote><p><a href="http://127.0.0.1:8848/nacos">http://127.0.0.1:8848/nacos</a></p></blockquote><h3 id="Feignè¿œç¨‹æœåŠ¡"><a href="#Feignè¿œç¨‹æœåŠ¡" class="headerlink" title="Feignè¿œç¨‹æœåŠ¡"></a>Feignè¿œç¨‹æœåŠ¡</h3><h4 id="ä¾èµ–-2"><a href="#ä¾èµ–-2" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æœåŠ¡æ¥å£"><a href="#æœåŠ¡æ¥å£" class="headerlink" title="æœåŠ¡æ¥å£"></a>æœåŠ¡æ¥å£</h4><blockquote><p>feignæ–‡ä»¶å¤¹ä¸‹å†™ä¸€ä¸ªæ¥å£ï¼Œåœ¨æ¥å£ä¸­æä¾›å£°æ˜éœ€è¦è¢«è°ƒç”¨çš„æœåŠ¡çš„controllerä¸­çš„å¯¹åº”æ–¹æ³•ï¼Œå¹¶ä¸”æŠŠæ˜ å°„åœ°å€æ”¹ä¸ºå…¨åœ°å€ï¼Œå¹¶ä¸”ä¸ºæ¥å£æ·»åŠ @FeignClientæ³¨é‡Šï¼Œvalueä¸ºéœ€è¦è°ƒç”¨çš„æœåŠ¡çš„æœåŠ¡åã€‚</p></blockquote><h4 id="æ³¨è§£å¼€å¯-1"><a href="#æ³¨è§£å¼€å¯-1" class="headerlink" title="æ³¨è§£å¼€å¯"></a>æ³¨è§£å¼€å¯</h4><blockquote><p>åœ¨è°ƒç”¨æœåŠ¡çš„å¯åŠ¨ç±»ä¸Šæ·»åŠ æ³¨è§£@EnableFeignClients(basepackages=â€æ¥å£åœ°å€â€)</p></blockquote><h3 id="nacosé…ç½®ä¸­å¿ƒ"><a href="#nacosé…ç½®ä¸­å¿ƒ" class="headerlink" title="nacosé…ç½®ä¸­å¿ƒ"></a>nacosé…ç½®ä¸­å¿ƒ</h3><h4 id="ä¾èµ–-3"><a href="#ä¾èµ–-3" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h4><blockquote><p>åœ¨resourcesæ–‡ä»¶å¤¹ä¸‹çš„bootstrap.propertiesæ–‡ä»¶ä¸­é…ç½®Nacos Configå…ƒæ•°æ®ï¼ˆä¸€å®šå¾—æ˜¯bootstrapï¼‰</p><p>ï¼ï¼ï¼ä¸€å®šè¦åœ¨bootstrap.propertiesä¸­é…ç½®</p></blockquote><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å½“å‰åº”ç”¨å</span></span><br><span class="line"><span class="meta">spring.application.name</span>=<span class="string">gulimall-coupon</span></span><br><span class="line"><span class="comment"># nacosé…ç½®ä¸­å¿ƒçš„åœ°å€</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.server-addr</span>=<span class="string">127.0.0.1:8848</span></span><br><span class="line"><span class="comment"># nacosé…ç½®ä¸­å¿ƒä½¿ç”¨çš„å‘½åç©ºé—´ï¼ˆå¦‚æœæ˜¯è‡ªå®šä¹‰çš„å¡«å†™å¯¹åº”idï¼‰å’Œç»„</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.namespace</span>=<span class="string">d066b643-6689-4ed1-967d-585be9a3b121</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.group</span>=<span class="string">dev</span></span><br></pre></td></tr></table></figure><h4 id="é…ç½®ä¸­å¿ƒ-1"><a href="#é…ç½®ä¸­å¿ƒ-1" class="headerlink" title="é…ç½®ä¸­å¿ƒ"></a>é…ç½®ä¸­å¿ƒ</h4><blockquote><p>åœ¨é…ç½®ä¸­å¿ƒçš„é…ç½®åˆ—è¡¨ä¸­æ–°å»ºé…ç½®ï¼ŒDataIDä¸º<code>æœåŠ¡å.properties</code>ï¼ˆå¦‚æœæ˜¯è¦åŠ è½½application.propertiesçš„è¯ï¼‰ï¼Œç„¶åå¯ä»¥ç²˜è´´ä¸Šé…ç½®å†…å®¹</p><p>æ³¨æ„è¿™é‡Œæµ‹è¯•äº†ä¸€ä¸‹ï¼Œè¿˜æ˜¯æŠŠç‰ˆæœ¬éƒ½å’Œè¯¾ä»¶å¯¹åº”ä¸Šæ¯”è¾ƒå¥½ï¼Œè¦ä¸ç„¶ä¼šæœ‰å¾ˆå¤šé—®é¢˜ã€‚</p></blockquote><h4 id="æ³¨è§£å¼€å¯-2"><a href="#æ³¨è§£å¼€å¯-2" class="headerlink" title="æ³¨è§£å¼€å¯"></a>æ³¨è§£å¼€å¯</h4><blockquote><p>åœ¨å¯¹åº”controllerä¸­@RefreshScopeï¼Œå½“é…ç½®ä¸­å¿ƒçš„é…ç½®å€¼æ”¹å˜çš„æ—¶å€™ï¼Œå¯¹åº”æœåŠ¡ä¸­çš„é…ç½®å€¼ä¹Ÿä¼šæ”¹å˜</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RefreshScope</span>   <span class="comment">// å¼€å¯é…ç½®ä¸­å¿ƒåŠ¨æ€è·å–é…ç½®</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;coupon/coupon&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CouponController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;coupon.user.name&#125;&quot;)</span><span class="comment">// ä»é…ç½®æ–‡ä»¶ä¸­è·å–å€¼</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;coupon.user.age&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String age;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * testé…ç½®ä¸­å¿ƒ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line">    <span class="comment">//@RequiresPermissions(&quot;coupon:coupon:list&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> R.ok().put(<span class="string">&quot;name&quot;</span>, name).put(<span class="string">&quot;age&quot;</span>, age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¤šé…ç½®é›†"><a href="#å¤šé…ç½®é›†" class="headerlink" title="å¤šé…ç½®é›†"></a>å¤šé…ç½®é›†</h4><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20211010113405307.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20211010113405307.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211010113405307"></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># nacosé…ç½®ä¸­å¿ƒä½¿ç”¨çš„å‘½åç©ºé—´ï¼ˆå¦‚æœæ˜¯è‡ªå®šä¹‰çš„å¡«å†™å¯¹åº”idï¼‰å’Œç»„</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.namespace</span>=<span class="string">d066b643-6689-4ed1-967d-585be9a3b121</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.group</span>=<span class="string">dev</span></span><br><span class="line"><span class="comment"># å¤šé…ç½®é›†</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.ext-config[0].data-id</span>=<span class="string">datasource.yml</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.ext-config[0].group</span>=<span class="string">dev</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.ext-config[0].refresh</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.ext-config[1].data-id</span>=<span class="string">mybatis.yml</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.ext-config[1].group</span>=<span class="string">dev</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.ext-config[1].refresh</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.ext-config[2].data-id</span>=<span class="string">others.yml</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.ext-config[2].group</span>=<span class="string">dev</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.ext-config[2].refresh</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure><h4 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h4><blockquote><ol><li>å‘½åç©ºé—´ï¼šç”¨äºé…ç½®éš”ç¦»ï¼Œå¯ä»¥é€šè¿‡åœ¨bootstrap.propertiesé…ç½®æ–‡ä»¶ä¿®æ”¹ä»è€Œä¿®æ”¹å¯¹åº”å†…å®¹<ol><li>ä¸åŒçš„ç”Ÿäº§ç¯èŠ‚ä¸‹ä½¿ç”¨ä¸åŒå‘½åç©ºé—´éš”ç¦»</li><li>ä¸åŒå¾®æœåŠ¡ä¹‹é—´éš”ç¦»</li></ol></li><li>é…ç½®é›†ï¼šæ‰€æœ‰çš„é…ç½®çš„é›†åˆ</li><li>é…ç½®é›†IDï¼šå³nacosä¸­çš„Data ID</li><li>é…ç½®åˆ†ç»„ï¼šå³nacosä¸­çš„groupï¼Œä¹Ÿå¯ä»¥éš”ç¦»</li></ol></blockquote><h3 id="Gatewayç½‘å…³"><a href="#Gatewayç½‘å…³" class="headerlink" title="Gatewayç½‘å…³"></a>Gatewayç½‘å…³</h3><h4 id="æ¨¡å—"><a href="#æ¨¡å—" class="headerlink" title="æ¨¡å—"></a>æ¨¡å—</h4><blockquote><p>åˆ›å»ºGatewayæ¨¡å—ï¼Œè®°å¾—å¼•å…¥commonï¼Œåœ¨çˆ¶æ¨¡å—ä¸­æ·»åŠ model</p><p>å¯åŠ¨ç±»ä¸ŠåŠ å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@EnableDiscoveryClient  //nacos</span><br><span class="line">@SpringBootApplication(exclude = &#123;DataSourceAutoConfiguration.class&#125;)</span><br></pre></td></tr></table></figure></blockquote><h4 id="ä¾èµ–-4"><a href="#ä¾èµ–-4" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="é…ç½®æ–‡ä»¶-1"><a href="#é…ç½®æ–‡ä»¶-1" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h4><p>application.properties</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#nacosæ³¨å†Œä¸­å¿ƒ</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.discovery.server-addr</span>=<span class="string">127.0.0.1.8848</span></span><br><span class="line"><span class="comment">#åº”ç”¨å</span></span><br><span class="line"><span class="meta">spring.application.name</span>=<span class="string">gulimall-gateway</span></span><br><span class="line"><span class="comment">#æœåŠ¡ç«¯å£å·</span></span><br><span class="line"><span class="meta">server.port</span>=<span class="string">12000</span></span><br></pre></td></tr></table></figure><h4 id="ç½‘å…³é…ç½®-1"><a href="#ç½‘å…³é…ç½®-1" class="headerlink" title="ç½‘å…³é…ç½®"></a>ç½‘å…³é…ç½®</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">test_route</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">https://www.baidu.com</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Query=url,baidu</span></span><br><span class="line"></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">qq_route</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">https://www.qq.com</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Query=url,qq</span></span><br></pre></td></tr></table></figure><blockquote><p>urlä¸ºè½¬å‘çš„åœ°å€ï¼Œpredicatesæ–­è¨€ä¸ºåˆ¤æ–­æ¡ä»¶ï¼ˆè¯¦è§å®˜ç½‘ï¼‰ï¼Œä»¥ä¸Šçš„æ„æ€ä¸ºå½“uriä¸­æœ‰ä¸€ä¸ªkey valueå¯¹åº”url=baiduã€url=qqï¼Œåˆ™è¿›è¡Œè·³è½¬ã€‚</p><p>æµ‹è¯•åœ°å€ï¼š<a href="http://localhost:88/?url=baidu">http://localhost:88/?url=baidu</a></p></blockquote><h2 id="å•†å“æœåŠ¡-ä¸‰çº§åˆ†ç±»ï¼ˆåå°ï¼‰"><a href="#å•†å“æœåŠ¡-ä¸‰çº§åˆ†ç±»ï¼ˆåå°ï¼‰" class="headerlink" title="å•†å“æœåŠ¡ - ä¸‰çº§åˆ†ç±»ï¼ˆåå°ï¼‰"></a>å•†å“æœåŠ¡ - ä¸‰çº§åˆ†ç±»ï¼ˆåå°ï¼‰</h2><blockquote><p>productæ¨¡å—ï¼Œcategoryç›¸å…³</p></blockquote><h3 id="nacosé…ç½®"><a href="#nacosé…ç½®" class="headerlink" title="nacosé…ç½®"></a>nacosé…ç½®</h3><h5 id="application-yml-1"><a href="#application-yml-1" class="headerlink" title="application.yml"></a>application.yml</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mysql</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="comment"># nacos æ³¨å†Œä¸­å¿ƒ</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="comment"># nacosåœ°å€</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:8848</span></span><br><span class="line">  <span class="comment"># æœåŠ¡å</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">gulimall-product</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="bootstrap-properties"><a href="#bootstrap-properties" class="headerlink" title="bootstrap.properties"></a>bootstrap.properties</h5><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å½“å‰åº”ç”¨å</span></span><br><span class="line"><span class="meta">spring.application.name</span>=<span class="string">gulimall-product</span></span><br><span class="line"><span class="comment"># nacosé…ç½®ä¸­å¿ƒçš„åœ°å€</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.server-addr</span>=<span class="string">127.0.0.1:8848</span></span><br><span class="line"><span class="comment"># nacosé…ç½®ä¸­å¿ƒä½¿ç”¨çš„å‘½åç©ºé—´ï¼ˆå¦‚æœæ˜¯è‡ªå®šä¹‰çš„å¡«å†™å¯¹åº”idï¼‰å’Œç»„</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.namespace</span>=<span class="string">415d4381-f509-4bb6-8ad8-c0497e20d904</span></span><br></pre></td></tr></table></figure><h3 id="ç½‘å…³é…ç½®-2"><a href="#ç½‘å…³é…ç½®-2" class="headerlink" title="ç½‘å…³é…ç½®"></a>ç½‘å…³é…ç½®</h3><blockquote><p>è¿™é‡Œå‘å¾ˆå¤šï¼Œé¡ºåºï¼Œè¿˜æœ‰ç¼©è¿›ï¼Œè¿˜æœ‰æ–­è¨€åŒ¹é…è¿˜æœ‰è½¬å‘çš„å†™æ³•</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">product_route</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://gulimall-product</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/api/product/**</span></span><br><span class="line">          <span class="comment"># å®ç°è½¬å‘</span></span><br><span class="line">          <span class="attr">filters:</span></span><br><span class="line">            <span class="comment"># localhost:88/api/product/xxx  -&gt;   localhost:10000/product/xxx</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">RewritePath=/api/(?&lt;segment&gt;.*),/$\&#123;segment&#125;</span></span><br><span class="line">        <span class="comment"># æ³¨æ„é¡ºåºï¼Œé«˜ç²¾åº¦çš„åœ¨å‰</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">admin_route</span></span><br><span class="line">          <span class="comment"># lbè´Ÿè½½å‡è¡¡ï¼Œè‡ªåŠ¨æŸ¥è¯¢æœåŠ¡åä¸ºrenren-fastçš„æœåŠ¡å™¨ï¼Œä»è€Œè‡ªåŠ¨è·å¾—å…¶ip:port</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://renren-fast</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="comment"># åŒ¹é…æ‰€æœ‰ä»¥apiå¼€å¤´çš„å‰ç«¯è¯·æ±‚åœ°å€</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/api/**</span></span><br><span class="line">          <span class="comment"># å®ç°è½¬å‘</span></span><br><span class="line">          <span class="attr">filters:</span></span><br><span class="line">            <span class="comment"># æ³¨æ„è¿™é‡Œçš„å†™æ³•ï¼Œsegmentè¿™ä¸€éƒ¨åˆ†æ•´ä½“ä¸å˜ï¼Œç„¶ååˆ«çš„åœ°æ–¹è¿›è¡Œæ›¿æ¢</span></span><br><span class="line">            <span class="comment"># localhost:88/api/xxx  -&gt;   localhost:8080/renren-fast/xxx</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">RewritePath=/api/(?&lt;segment&gt;.*),/renren-fast/$\&#123;segment&#125;</span></span><br></pre></td></tr></table></figure><h3 id="é€’å½’æ ‘å½¢ç»“æ„æŸ¥è¯¢æ‰€æœ‰åˆ†ç±»ï¼ˆåç«¯ï¼‰"><a href="#é€’å½’æ ‘å½¢ç»“æ„æŸ¥è¯¢æ‰€æœ‰åˆ†ç±»ï¼ˆåç«¯ï¼‰" class="headerlink" title="é€’å½’æ ‘å½¢ç»“æ„æŸ¥è¯¢æ‰€æœ‰åˆ†ç±»ï¼ˆåç«¯ï¼‰"></a>é€’å½’æ ‘å½¢ç»“æ„æŸ¥è¯¢æ‰€æœ‰åˆ†ç±»ï¼ˆåç«¯ï¼‰</h3><h4 id="CategoryEntity"><a href="#CategoryEntity" class="headerlink" title="CategoryEntity"></a>CategoryEntity</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;pms_category&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CategoryEntity</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å­åˆ†ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(exist = false)</span>    <span class="comment">// è¡¨ç¤ºè¯¥å±æ€§åœ¨æ•°æ®è¡¨ä¸­ä¸å­˜åœ¨</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;CategoryEntity&gt; children;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="CategoryController"><a href="#CategoryController" class="headerlink" title="CategoryController"></a>CategoryController</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;product/category&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CategoryController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CategoryService categoryService;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ†é¡µæŸ¥è¯¢æ‰€æœ‰åˆ†ç±»ï¼Œå¹¶ä¸”ä»¥æ ‘å½¢ç»“æ„ç»„åˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/list/tree&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">listWithTree</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        List&lt;CategoryEntity&gt; list = categoryService.listWithTree();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> R.ok().put(<span class="string">&quot;data&quot;</span>, list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="CategoryServiceImpl"><a href="#CategoryServiceImpl" class="headerlink" title="CategoryServiceImpl"></a>CategoryServiceImpl</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service(&quot;categoryService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CategoryServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">CategoryDao</span>, <span class="title">CategoryEntity</span>&gt; <span class="keyword">implements</span> <span class="title">CategoryService</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ†é¡µæŸ¥è¯¢æ‰€æœ‰åˆ†ç±»ï¼Œå¹¶ä¸”ä»¥æ ‘å½¢ç»“æ„ç»„åˆ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;CategoryEntity&gt; <span class="title">listWithTree</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1ã€æŸ¥å‡ºæ‰€æœ‰åˆ†ç±»</span></span><br><span class="line">        List&lt;CategoryEntity&gt; categories = baseMapper.selectList(<span class="keyword">null</span>);</span><br><span class="line">        <span class="comment">// 2ã€ç»„è£…æ ‘å½¢ç»“æ„</span></span><br><span class="line">        <span class="comment">// æµå¼ã€è¿‡æ»¤ã€mapæ˜ å°„ã€æ’åºã€é€’å½’ã€lambda</span></span><br><span class="line">        List&lt;CategoryEntity&gt; level1Menus = categories.stream().filter((categoryEntity) -&gt; &#123;</span><br><span class="line">            <span class="keyword">return</span> categoryEntity.getParentCid() == <span class="number">0</span>;</span><br><span class="line">        &#125;).map(categoryEntity -&gt; &#123;</span><br><span class="line">            categoryEntity.setChildren(getChildrens(categoryEntity, categories));</span><br><span class="line">            <span class="keyword">return</span> categoryEntity;</span><br><span class="line">        &#125;).sorted((ce1, ce2) -&gt; &#123;</span><br><span class="line">            <span class="keyword">return</span> (ce1.getSort() == <span class="keyword">null</span> ? <span class="number">0</span> : ce1.getSort()) - (ce2.getSort() == <span class="keyword">null</span> ? <span class="number">0</span> : ce2.getSort());</span><br><span class="line">        &#125;).collect(Collectors.toList());</span><br><span class="line">        <span class="keyword">return</span> level1Menus;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€’å½’æŸ¥è¯¢æ‰€æœ‰å­åˆ†ç±»</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> father</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entityList</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> List&lt;CategoryEntity&gt; <span class="title">getChildrens</span><span class="params">(CategoryEntity father, List&lt;CategoryEntity&gt; entityList)</span> </span>&#123;</span><br><span class="line">        List&lt;CategoryEntity&gt; childList = entityList.stream().filter((categoryEntity) -&gt; &#123;</span><br><span class="line">            <span class="comment">// å–å‡ºæ¯ä¸€ä¸ªentityï¼Œåˆ¤æ–­å…¶æ˜¯å¦ç¬¦åˆï¼Œç¬¦åˆçš„ç•™ä¸‹</span></span><br><span class="line">            <span class="keyword">return</span> categoryEntity.getParentCid() == father.getCatId();</span><br><span class="line">        &#125;).map(categoryEntity -&gt; &#123;</span><br><span class="line">            <span class="comment">// å–å‡ºæ¯ä¸€ä¸ªentityï¼Œä¸ºå…¶è®¾ç½®childrenï¼ˆä½¿ç”¨é€’å½’ï¼‰</span></span><br><span class="line">            categoryEntity.setChildren(getChildrens(categoryEntity, entityList));</span><br><span class="line">            <span class="keyword">return</span> categoryEntity;</span><br><span class="line">        &#125;).sorted((ce1, ce2) -&gt; &#123;</span><br><span class="line">            <span class="comment">// è¿™é‡Œé˜²æ­¢getSort()è¿”å›nullï¼Œç„¶åæ ¹æ®sortæƒé‡æ’åº</span></span><br><span class="line">            <span class="keyword">return</span> (ce1.getSort() == <span class="keyword">null</span> ? <span class="number">0</span> : ce1.getSort()) - (ce2.getSort() == <span class="keyword">null</span> ? <span class="number">0</span> : ce2.getSort());</span><br><span class="line">        &#125;).collect(Collectors.toList());</span><br><span class="line">        <span class="keyword">return</span> childList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ä¸Šæ¥å°±æ”¾äº†ä¸ªå¤§æ‹›ï¼Œjava8çš„æ–°ç‰¹æ€§</p></blockquote><h3 id="æ˜¾ç¤ºæ‰€æœ‰åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰"><a href="#æ˜¾ç¤ºæ‰€æœ‰åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="æ˜¾ç¤ºæ‰€æœ‰åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰"></a>æ˜¾ç¤ºæ‰€æœ‰åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰</h3><h4 id="è·¯ç”±é…ç½®"><a href="#è·¯ç”±é…ç½®" class="headerlink" title="è·¯ç”±é…ç½®"></a>è·¯ç”±é…ç½®</h4><blockquote><p>å¯åŠ¨renrenfastå’Œrenrenfase-vue</p><p>ç³»ç»Ÿç®¡ç† -&gt; èœå•ç®¡ç† -&gt; æ·»åŠ ç›®å½•å’Œèœå•ï¼ˆæˆ‘çš„å¦ˆå‘€å¯è§†åŒ–æ“ä½œè¿™ä¹Ÿå¤ªæ£’äº†å§ï¼‰</p></blockquote><blockquote><p>è·¯å¾„ä¸­å¡«å†™/ä¼šè¢«æ›¿æ¢æˆ-ï¼Œæ‰€ä»¥å¯ä»¥æ ¹æ®è¿™ä¸ªå¯¹åº”src-&gt;views-&gt;modulesä¸‹çš„è·¯å¾„</p><p>å³<a href="http://localhost:8001/#/product-category%E5%AF%B9%E5%BA%94%E6%96%87%E4%BB%B6%E5%A4%B9src-&gt;views-&gt;modules-&gt;product-&gt;category.vue">http://localhost:8001/#/product-categoryå¯¹åº”æ–‡ä»¶å¤¹src-&gt;views-&gt;modules-&gt;product-&gt;category.vue</a></p></blockquote><h4 id="vueé¡µé¢"><a href="#vueé¡µé¢" class="headerlink" title="vueé¡µé¢"></a>vueé¡µé¢</h4><blockquote><p>renren-fast-vue\src\views\modules\product\category.vue</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å•†å“ç®¡ç†-åˆ†ç±»ç»´æŠ¤ --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-tree</span><br><span class="line">    :data=&quot;menus&quot;</span><br><span class="line">    :props=&quot;defaultProps&quot;</span><br><span class="line">    @node-click=&quot;handleNodeClick&quot;</span><br><span class="line">  &gt;&lt;/el-tree&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;&#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      menus: [],</span><br><span class="line">      defaultProps: &#123;</span><br><span class="line">        children: &quot;children&quot;, // å­èŠ‚ç‚¹å±æ€§</span><br><span class="line">        label: &quot;name&quot; //æ˜¾ç¤ºçš„å±æ€§</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    // è·å–æ‰€æœ‰åˆ†ç±»</span><br><span class="line">    getMenus() &#123;</span><br><span class="line">      this.$http(&#123;</span><br><span class="line">        url: this.$http.adornUrl(&quot;/product/category/list/tree&quot;),</span><br><span class="line">        method: &quot;get&quot;</span><br><span class="line">      &#125;).then((&#123; data &#125;) =&gt; &#123;</span><br><span class="line">        // è¿™é‡Œdataä½¿ç”¨äº†è§£æ„</span><br><span class="line">        console.log(&quot;è°ƒç”¨apiè·å¾—èœå•æ•°æ®&quot; + data.data);</span><br><span class="line">        this.menus = data.data;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getMenus();</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤åˆ†ç±»ï¼ˆåç«¯ï¼‰"><a href="#åˆ é™¤åˆ†ç±»ï¼ˆåç«¯ï¼‰" class="headerlink" title="åˆ é™¤åˆ†ç±»ï¼ˆåç«¯ï¼‰"></a>åˆ é™¤åˆ†ç±»ï¼ˆåç«¯ï¼‰</h3><h4 id="é€»è¾‘åˆ é™¤"><a href="#é€»è¾‘åˆ é™¤" class="headerlink" title="é€»è¾‘åˆ é™¤"></a>é€»è¾‘åˆ é™¤</h4><blockquote><p>åœ¨application.ymlä¸­é…ç½®</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mybatis</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="comment"># mapper.xmlåœ°å€</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:/mapper/**/*.xml</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="comment"># ä¸»é”®è‡ªå¢</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span></span><br><span class="line">      <span class="comment"># é€»è¾‘åˆ é™¤</span></span><br><span class="line">      <span class="attr">logic-delete-value:</span> <span class="number">0</span></span><br><span class="line">      <span class="attr">logic-not-delete-value:</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><blockquote><p>åœ¨å¯¹åº”å®ä½“ç±»çš„å­—æ®µä¸Šæ·»åŠ æ³¨è§£@TableLogic</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;pms_category&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CategoryEntity</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€»è¾‘åˆ é™¤</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableLogic(value = &quot;1&quot;, delval = &quot;0&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer showStatus;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="CategoryController-1"><a href="#CategoryController-1" class="headerlink" title="CategoryController"></a>CategoryController</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;product/category&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CategoryController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CategoryService categoryService;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤åˆ†ç±»ï¼Œåˆ¤æ–­æ˜¯å¦è¢«å…¶ä»–å¼•ç”¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/delete&quot;)</span></span><br><span class="line">    <span class="comment">//@RequiresPermissions(&quot;product:category:delete&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">deleteWithoutUse</span><span class="params">(<span class="meta">@RequestBody</span> Long[] catIds)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ£€æŸ¥å½“å‰åˆ é™¤çš„èœå•æ˜¯å¦è¢«å…¶ä»–çš„åœ°æ–¹å¼•ç”¨</span></span><br><span class="line">        categoryService.removeByIdsWithoutUse(Arrays.asList(catIds));</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="CategoryServiceImpl-1"><a href="#CategoryServiceImpl-1" class="headerlink" title="CategoryServiceImpl"></a>CategoryServiceImpl</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service(&quot;categoryService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CategoryServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">CategoryDao</span>, <span class="title">CategoryEntity</span>&gt; <span class="keyword">implements</span> <span class="title">CategoryService</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤åˆ†ç±»ï¼Œåˆ¤æ–­æ˜¯å¦è¢«å…¶ä»–å¼•ç”¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> asList</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeByIdsWithoutUse</span><span class="params">(List&lt;Long&gt; asList)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//TODO æ£€æŸ¥æ˜¯å¦è¢«å…¶ä»–çš„ä¸œè¥¿å¼•ç”¨</span></span><br><span class="line">        baseMapper.deleteBatchIds(asList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰"><a href="#åˆ é™¤åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="åˆ é™¤åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰"></a>åˆ é™¤åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å•†å“ç®¡ç†-åˆ†ç±»ç»´æŠ¤ --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- ====================== åˆ†ç±»æ ‘å½¢ç»“æ„æ˜¾ç¤º å¼€å§‹ ====================== --&gt;</span><br><span class="line">  &lt;!-- </span><br><span class="line">    node-key=&quot;catId&quot;                  å…¶å€¼ä¸ºèŠ‚ç‚¹æ•°æ®ä¸­çš„ä¸€ä¸ªå­—æ®µå</span><br><span class="line">    :expand-on-click-node=&quot;false&quot;     è¡¨ç¤ºè®¾ç½®å±•å¼€èŠ‚ç‚¹çš„ç‚¹å‡»ä½ç½®ï¼ŒFALSEåªæœ‰å½“ç‚¹å‡»ç®­å¤´çš„æ—¶å€™æ‰å±•å¼€</span><br><span class="line">    :default-expanded-keys=&quot;[2, 3]&quot;   è¡¨ç¤ºé»˜è®¤å±•å¼€çš„èŠ‚ç‚¹</span><br><span class="line">  --&gt;</span><br><span class="line">  &lt;el-tree</span><br><span class="line">    node-key=&quot;catId&quot;</span><br><span class="line">    show-checkbox</span><br><span class="line">    :data=&quot;menus&quot;</span><br><span class="line">    :props=&quot;defaultProps&quot;</span><br><span class="line">    :expand-on-click-node=&quot;false&quot;</span><br><span class="line">    :default-expanded-keys=&quot;expandedKey&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;!-- ====================== æ“ä½œæŒ‰é’® å¼€å§‹ ====================== --&gt;</span><br><span class="line">    &lt;!-- ä½¿ç”¨slotæ·»åŠ å¯æ“ä½œæ€§æŒ‰é’® --&gt;</span><br><span class="line">    &lt;!-- nodeä¸ºæ¯ä¸€ä¸ªèŠ‚ç‚¹å¯¹è±¡ï¼ˆä¸å’Œåç«¯ä¸­entityå¯¹åº”ï¼Œè€Œæ˜¯elementè‡ªå®šä¹‰çš„ï¼‰ï¼Œdataä¸ºè¯¥èŠ‚ç‚¹çš„æ•°æ® --&gt;</span><br><span class="line">    &lt;span class=&quot;custom-tree-node&quot; slot-scope=&quot;&#123; node, data &#125;&quot;&gt;</span><br><span class="line">      &lt;span&gt;&#123;&#123; node.label &#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;span&gt;</span><br><span class="line">        &lt;!-- è¿™é‡Œéœ€è¦æœ‰æ‰€åˆ¤æ–­æ˜¯å¦æ˜¾ç¤ºå¯¹åº”æŒ‰é’® --&gt;</span><br><span class="line">        &lt;el-button</span><br><span class="line">          v-if=&quot;node.level &lt;= 2&quot;</span><br><span class="line">          type=&quot;text&quot;</span><br><span class="line">          size=&quot;mini&quot;</span><br><span class="line">          @click=&quot;() =&gt; append(data)&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          Append</span><br><span class="line">        &lt;/el-button&gt;</span><br><span class="line">        &lt;el-button</span><br><span class="line">          v-if=&quot;node.childNodes.length == 0&quot;</span><br><span class="line">          type=&quot;text&quot;</span><br><span class="line">          size=&quot;mini&quot;</span><br><span class="line">          @click=&quot;() =&gt; remove(node, data)&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          Delete</span><br><span class="line">        &lt;/el-button&gt;</span><br><span class="line">      &lt;/span&gt;</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">    &lt;!-- ====================== æ“ä½œæŒ‰é’® ç»“æŸ ====================== --&gt;</span><br><span class="line">  &lt;/el-tree&gt;</span><br><span class="line">  &lt;!-- ====================== åˆ†ç±»æ ‘å½¢ç»“æ„æ˜¾ç¤º ç»“æŸ ====================== --&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;&#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      menus: [], // èœå•åˆ—è¡¨</span><br><span class="line">      defaultProps: &#123;</span><br><span class="line">        children: &quot;children&quot;, // å­èŠ‚ç‚¹å±æ€§</span><br><span class="line">        label: &quot;name&quot; // æ˜¾ç¤ºçš„å±æ€§</span><br><span class="line">      &#125;,</span><br><span class="line">      expandedKey: [] // é»˜è®¤å±•å¼€çš„èŠ‚ç‚¹</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    // æŒ‰é’®æ“ä½œ</span><br><span class="line">    append(data) &#123;&#125;,</span><br><span class="line">    remove(node, data) &#123;</span><br><span class="line">      var ids = [data.catId];</span><br><span class="line">      this.$confirm(`ç¡®å®šåˆ é™¤ã€$&#123;data.name&#125;ã€‘èœå•å—?`, &quot;æç¤º&quot;, &#123;</span><br><span class="line">        confirmButtonText: &quot;ç¡®å®š&quot;,</span><br><span class="line">        cancelButtonText: &quot;å–æ¶ˆ&quot;,</span><br><span class="line">        type: &quot;warning&quot;</span><br><span class="line">      &#125;)</span><br><span class="line">        .then(() =&gt; &#123;</span><br><span class="line">          // è°ƒç”¨API</span><br><span class="line">          this.$http(&#123;</span><br><span class="line">            url: this.$http.adornUrl(&quot;/product/category/delete&quot;),</span><br><span class="line">            method: &quot;post&quot;,</span><br><span class="line">            data: this.$http.adornData(ids, false)</span><br><span class="line">          &#125;).then((&#123; data &#125;) =&gt; &#123;</span><br><span class="line">            if (data &amp;&amp; data.code === 0) &#123;</span><br><span class="line">              this.$message(&#123;</span><br><span class="line">                message: &quot;åˆ é™¤æˆåŠŸ&quot;,</span><br><span class="line">                type: &quot;success&quot;,</span><br><span class="line">                duration: 800,</span><br><span class="line">                onClose: () =&gt; &#123;</span><br><span class="line">                  // åˆ·æ–°åˆ—è¡¨</span><br><span class="line">                  this.getMenus();</span><br><span class="line">                  // å±•å¼€çˆ¶èŠ‚ç‚¹ä½ç½®(è¿™é‡Œçš„idå¯¹åº”node-keyç»‘å®šçš„å±æ€§å)</span><br><span class="line">                  this.expandedKey = [node.parent.data.catId];</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">              this.$message.error(data.msg);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(() =&gt; &#123;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ åˆ†ç±»ï¼ˆåç«¯ï¼‰"><a href="#æ·»åŠ åˆ†ç±»ï¼ˆåç«¯ï¼‰" class="headerlink" title="æ·»åŠ åˆ†ç±»ï¼ˆåç«¯ï¼‰"></a>æ·»åŠ åˆ†ç±»ï¼ˆåç«¯ï¼‰</h3><blockquote><p>å·²æœ‰</p></blockquote><h3 id="æ·»åŠ åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰"><a href="#æ·»åŠ åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="æ·»åŠ åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰"></a>æ·»åŠ åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å•†å“ç®¡ç†-åˆ†ç±»ç»´æŠ¤ --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- ====================== åˆ†ç±»æ ‘å½¢ç»“æ„æ˜¾ç¤º å¼€å§‹ ====================== --&gt;</span><br><span class="line">    &lt;!-- </span><br><span class="line">    node-key=&quot;catId&quot;                  å…¶å€¼ä¸ºèŠ‚ç‚¹æ•°æ®ä¸­çš„ä¸€ä¸ªå­—æ®µå</span><br><span class="line">    :expand-on-click-node=&quot;false&quot;     è¡¨ç¤ºè®¾ç½®å±•å¼€èŠ‚ç‚¹çš„ç‚¹å‡»ä½ç½®ï¼ŒFALSEåªæœ‰å½“ç‚¹å‡»ç®­å¤´çš„æ—¶å€™æ‰å±•å¼€</span><br><span class="line">    :default-expanded-keys=&quot;[2, 3]&quot;   è¡¨ç¤ºé»˜è®¤å±•å¼€çš„èŠ‚ç‚¹</span><br><span class="line">  --&gt;</span><br><span class="line">    &lt;el-tree</span><br><span class="line">      node-key=&quot;catId&quot;</span><br><span class="line">      show-checkbox</span><br><span class="line">      :data=&quot;menus&quot;</span><br><span class="line">      :props=&quot;defaultProps&quot;</span><br><span class="line">      :expand-on-click-node=&quot;false&quot;</span><br><span class="line">      :default-expanded-keys=&quot;expandedKey&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;!-- ====================== æ“ä½œæŒ‰é’® å¼€å§‹ ====================== --&gt;</span><br><span class="line">      &lt;!-- ä½¿ç”¨slotæ·»åŠ å¯æ“ä½œæ€§æŒ‰é’® --&gt;</span><br><span class="line">      &lt;!-- nodeä¸ºæ¯ä¸€ä¸ªèŠ‚ç‚¹å¯¹è±¡ï¼ˆä¸å’Œåç«¯ä¸­entityå¯¹åº”ï¼Œè€Œæ˜¯elementè‡ªå®šä¹‰çš„ï¼‰ï¼Œdataä¸ºè¯¥èŠ‚ç‚¹çš„æ•°æ® --&gt;</span><br><span class="line">      &lt;span class=&quot;custom-tree-node&quot; slot-scope=&quot;&#123; node, data &#125;&quot;&gt;</span><br><span class="line">        &lt;span&gt;&#123;&#123; node.label &#125;&#125;&lt;/span&gt;</span><br><span class="line">        &lt;span&gt;</span><br><span class="line">          &lt;!-- è¿™é‡Œéœ€è¦æœ‰æ‰€åˆ¤æ–­æ˜¯å¦æ˜¾ç¤ºå¯¹åº”æŒ‰é’® --&gt;</span><br><span class="line">          &lt;el-button</span><br><span class="line">            v-if=&quot;node.level &lt;= 2&quot;</span><br><span class="line">            type=&quot;text&quot;</span><br><span class="line">            size=&quot;mini&quot;</span><br><span class="line">            @click=&quot;() =&gt; append(data)&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            Append</span><br><span class="line">          &lt;/el-button&gt;</span><br><span class="line">          &lt;el-button</span><br><span class="line">            v-if=&quot;node.childNodes.length == 0&quot;</span><br><span class="line">            type=&quot;text&quot;</span><br><span class="line">            size=&quot;mini&quot;</span><br><span class="line">            @click=&quot;() =&gt; remove(node, data)&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            Delete</span><br><span class="line">          &lt;/el-button&gt;</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">      &lt;/span&gt;</span><br><span class="line">      &lt;!-- ====================== æ“ä½œæŒ‰é’® ç»“æŸ ====================== --&gt;</span><br><span class="line">    &lt;/el-tree&gt;</span><br><span class="line">    &lt;!-- ====================== åˆ†ç±»æ ‘å½¢ç»“æ„æ˜¾ç¤º ç»“æŸ ====================== --&gt;</span><br><span class="line">    &lt;!-- ====================== æ·»åŠ åˆ†ç±»çš„å¯¹è¯æ¡† å¼€å§‹ ====================== --&gt;</span><br><span class="line">    &lt;el-dialog</span><br><span class="line">      title=&quot;æ·»åŠ åˆ†ç±»èœå•&quot;</span><br><span class="line">      :visible.sync=&quot;dialogVisible&quot;</span><br><span class="line">      width=&quot;30%&quot;</span><br><span class="line">      center</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;el-form :model=&quot;category&quot;&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;åˆ†ç±»å&quot;&gt;</span><br><span class="line">          &lt;el-input v-model=&quot;category.name&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/el-form&gt;</span><br><span class="line">      &lt;div slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">        &lt;el-button @click=&quot;dialogVisible = false&quot;&gt;å– æ¶ˆ&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;addCategory()&quot;&gt;ç¡® å®š&lt;/el-button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/el-dialog&gt;</span><br><span class="line">    &lt;!-- ====================== æ·»åŠ åˆ†ç±»çš„å¯¹è¯æ¡† ç»“æŸ ====================== --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;&#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      menus: [], // èœå•åˆ—è¡¨</span><br><span class="line">      defaultProps: &#123;</span><br><span class="line">        // èœå•æ ‘å±æ€§</span><br><span class="line">        children: &quot;children&quot;, // å­èŠ‚ç‚¹å±æ€§</span><br><span class="line">        label: &quot;name&quot; // æ˜¾ç¤ºçš„å±æ€§</span><br><span class="line">      &#125;,</span><br><span class="line">      expandedKey: [], // é»˜è®¤å±•å¼€çš„èŠ‚ç‚¹</span><br><span class="line">      dialogVisible: false, // æ˜¯å¦æ‰“å¼€æ·»åŠ åˆ†ç±»çš„å¯¹è¯æ¡†</span><br><span class="line">      category: &#123;</span><br><span class="line">        name: &quot;&quot;,</span><br><span class="line">        parentCid: 0,</span><br><span class="line">        catLevel: 0,</span><br><span class="line">        showStatus: 1,</span><br><span class="line">        sort: 0</span><br><span class="line">      &#125; // èœå•å¯¹è±¡</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    // æ·»åŠ åˆ†ç±»èœå•</span><br><span class="line">    addCategory() &#123;</span><br><span class="line">      // è°ƒç”¨api</span><br><span class="line">      this.$http(&#123;</span><br><span class="line">        url: this.$http.adornUrl(&quot;/product/category/save&quot;),</span><br><span class="line">        method: &quot;post&quot;,</span><br><span class="line">        data: this.$http.adornData(this.category, false)</span><br><span class="line">      &#125;)</span><br><span class="line">        .then((&#123; data &#125;) =&gt; &#123;</span><br><span class="line">          this.$message(&#123;</span><br><span class="line">            message: &quot;ä¿å­˜æˆåŠŸ&quot;,</span><br><span class="line">            type: &quot;success&quot;</span><br><span class="line">          &#125;);</span><br><span class="line">          // å…³é—­å¯¹è¯æ¡†</span><br><span class="line">          this.dialogVisible = false;</span><br><span class="line">          // åˆ·æ–°åˆ—è¡¨</span><br><span class="line">          this.getMenus();</span><br><span class="line">          // å±•å¼€çˆ¶èŠ‚ç‚¹ä½ç½®æ•°ç»„(è¿™é‡Œçš„idå¯¹åº”node-keyç»‘å®šçš„å±æ€§å)</span><br><span class="line">          this.expandedKey = [this.category.parentCid];</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(result =&gt; &#123;</span><br><span class="line">          this.$message(&#123;</span><br><span class="line">            message: &quot;ä¿å­˜å¤±è´¥&quot;,</span><br><span class="line">            type: &quot;error&quot;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    // æ‰“å¼€æ·»åŠ èœå•å¯¹è¯æ¡†</span><br><span class="line">    append(data) &#123;</span><br><span class="line">      this.dialogVisible = true;</span><br><span class="line">      // åˆå§‹åŒ–categoryå¯¹è±¡</span><br><span class="line">      this.category.name = &quot;&quot;;</span><br><span class="line">      this.category.parentCid = data.catId;</span><br><span class="line">      this.category.catLevel = data.catLevel * 1 + 1;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹åˆ†ç±»ï¼ˆåç«¯ï¼‰"><a href="#ä¿®æ”¹åˆ†ç±»ï¼ˆåç«¯ï¼‰" class="headerlink" title="ä¿®æ”¹åˆ†ç±»ï¼ˆåç«¯ï¼‰"></a>ä¿®æ”¹åˆ†ç±»ï¼ˆåç«¯ï¼‰</h3><blockquote><p>å·²æœ‰</p></blockquote><h3 id="ä¿®æ”¹åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰"><a href="#ä¿®æ”¹åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="ä¿®æ”¹åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰"></a>ä¿®æ”¹åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰</h3><blockquote><p>å®ç°ç®€å•åœ°ä¿¡æ¯ä¿®æ”¹ï¼ŒåŒ…æ‹¬nameï¼Œiconï¼ŒproductUnit</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å•†å“ç®¡ç†-åˆ†ç±»ç»´æŠ¤ --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- ====================== åˆ†ç±»æ ‘å½¢ç»“æ„æ˜¾ç¤º å¼€å§‹ ====================== --&gt;</span><br><span class="line">      &lt;!-- ====================== æ“ä½œæŒ‰é’® å¼€å§‹ ====================== --&gt;</span><br><span class="line">      &lt;!-- ä½¿ç”¨slotæ·»åŠ å¯æ“ä½œæ€§æŒ‰é’® --&gt;</span><br><span class="line">      &lt;!-- nodeä¸ºæ¯ä¸€ä¸ªèŠ‚ç‚¹å¯¹è±¡ï¼ˆä¸å’Œåç«¯ä¸­entityå¯¹åº”ï¼Œè€Œæ˜¯elementè‡ªå®šä¹‰çš„ï¼‰ï¼Œdataä¸ºè¯¥èŠ‚ç‚¹çš„æ•°æ® --&gt;</span><br><span class="line">      &lt;span class=&quot;custom-tree-node&quot; slot-scope=&quot;&#123; node, data &#125;&quot;&gt;</span><br><span class="line">        &lt;span&gt;&#123;&#123; node.label &#125;&#125;&lt;/span&gt;</span><br><span class="line">        &lt;span&gt;</span><br><span class="line">          &lt;el-button type=&quot;text&quot; size=&quot;mini&quot; @click=&quot;openDialogWithInfo(data)&quot;&gt;</span><br><span class="line">            ä¿®æ”¹</span><br><span class="line">          &lt;/el-button&gt;</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">      &lt;/span&gt;</span><br><span class="line">      &lt;!-- ====================== æ“ä½œæŒ‰é’® ç»“æŸ ====================== --&gt;</span><br><span class="line">    &lt;/el-tree&gt;</span><br><span class="line">    &lt;!-- ====================== åˆ†ç±»æ ‘å½¢ç»“æ„æ˜¾ç¤º ç»“æŸ ====================== --&gt;</span><br><span class="line">    &lt;!-- ====================== æ·»åŠ åˆ†ç±»çš„å¯¹è¯æ¡† å¼€å§‹ ====================== --&gt;</span><br><span class="line">    &lt;el-dialog</span><br><span class="line">      :title=&quot;dialogTitle&quot;</span><br><span class="line">      :visible.sync=&quot;dialogVisible&quot;</span><br><span class="line">      :close-on-click-modal=&quot;false&quot;</span><br><span class="line">      width=&quot;30%&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;el-form :model=&quot;category&quot;&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;åˆ†ç±»å&quot;&gt;</span><br><span class="line">          &lt;el-input v-model=&quot;category.name&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;å›¾è¡¨&quot;&gt;</span><br><span class="line">          &lt;el-input v-model=&quot;category.icon&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;è®¡é‡å•ä½&quot;&gt;</span><br><span class="line">          &lt;el-input</span><br><span class="line">            v-model=&quot;category.productUnit&quot;</span><br><span class="line">            autocomplete=&quot;off&quot;</span><br><span class="line">          &gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/el-form&gt;</span><br><span class="line">      &lt;div slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">        &lt;el-button @click=&quot;dialogVisible = false&quot;&gt;å– æ¶ˆ&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;addOrUpdate()&quot;&gt;ç¡® å®š&lt;/el-button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/el-dialog&gt;</span><br><span class="line">    &lt;!-- ====================== æ·»åŠ åˆ†ç±»çš„å¯¹è¯æ¡† ç»“æŸ ====================== --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;&#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      menus: [], // èœå•åˆ—è¡¨</span><br><span class="line">      defaultProps: &#123;</span><br><span class="line">        // èœå•æ ‘å±æ€§</span><br><span class="line">        children: &quot;children&quot;, // å­èŠ‚ç‚¹å±æ€§</span><br><span class="line">        label: &quot;name&quot; // æ˜¾ç¤ºçš„å±æ€§</span><br><span class="line">      &#125;,</span><br><span class="line">      expandedKey: [], // é»˜è®¤å±•å¼€çš„èŠ‚ç‚¹</span><br><span class="line">      dialogVisible: false, // æ˜¯å¦æ‰“å¼€æ·»åŠ åˆ†ç±»çš„å¯¹è¯æ¡†</span><br><span class="line">      dialogType: &quot;&quot;, // å¯¹è¯æ¡†ç”¨äºæ·»åŠ è¿˜æ˜¯ä¿®æ”¹</span><br><span class="line">      dialogTitle: &quot;&quot;, // å¯¹è¯æ¡†æ ‡é¢˜</span><br><span class="line">      category: &#123;</span><br><span class="line">        name: &quot;&quot;,</span><br><span class="line">        catId: null,</span><br><span class="line">        parentCid: 0,</span><br><span class="line">        catLevel: 0,</span><br><span class="line">        showStatus: 1,</span><br><span class="line">        sort: 0,</span><br><span class="line">        icon: &quot;&quot;,</span><br><span class="line">        productUnit: &quot;&quot;</span><br><span class="line">      &#125; // èœå•å¯¹è±¡</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    // æ‰“å¼€æ·»åŠ èœå•å¯¹è¯æ¡†</span><br><span class="line">    openDialog(data) &#123;</span><br><span class="line">      this.dialogVisible = true;</span><br><span class="line">      this.dialogType = &quot;add&quot;;</span><br><span class="line">      this.dialogTitle = &quot;æ·»åŠ åˆ†ç±»&quot;;</span><br><span class="line">      // åˆå§‹åŒ–categoryå¯¹è±¡</span><br><span class="line">      this.category.catId = null;</span><br><span class="line">      this.category.name = &quot;&quot;;</span><br><span class="line">      this.category.parentCid = data.catId;</span><br><span class="line">      this.category.icon = &quot;&quot;;</span><br><span class="line">      this.category.productUnit = &quot;&quot;;</span><br><span class="line">      this.category.catLevel = data.catLevel * 1 + 1;</span><br><span class="line">    &#125;,</span><br><span class="line">    // æ‰“å¼€ä¿®æ”¹èœå•å¯¹è¯æ¡†</span><br><span class="line">    openDialogWithInfo(data) &#123;</span><br><span class="line">      this.dialogVisible = true;</span><br><span class="line">      this.dialogType = &quot;update&quot;;</span><br><span class="line">      this.dialogTitle = &quot;ä¿®æ”¹åˆ†ç±»&quot;;</span><br><span class="line">      // è°ƒç”¨æ¥å£è·å–å¯¹åº”idçš„ä¿¡æ¯ï¼Œå¹¶åˆå§‹åŒ–categoryå¯¹è±¡</span><br><span class="line">      this.$http(&#123;</span><br><span class="line">        url: this.$http.adornUrl(`/product/category/info/$&#123;data.catId&#125;`),</span><br><span class="line">        method: &quot;get&quot;</span><br><span class="line">      &#125;).then((&#123; data &#125;) =&gt; &#123;</span><br><span class="line">        this.category.catId = data.data.catId;</span><br><span class="line">        // åªä¿®æ”¹è¿™å‡ ä¸ªå€¼</span><br><span class="line">        this.category.name = data.data.name;</span><br><span class="line">        this.category.icon = data.data.icon;</span><br><span class="line">        this.category.productUnit = data.data.productUnit;</span><br><span class="line">        // ç”¨äºä¿®æ”¹å®Œä¹‹åå±•å¼€çˆ¶èœå•</span><br><span class="line">        this.category.parentCid = data.data.parentCid;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    // å¯¹è¯æ¡†ç¡®å®šæŒ‰é’®åˆ¤æ–­</span><br><span class="line">    addOrUpdate() &#123;</span><br><span class="line">      if (this.dialogType == &quot;update&quot;) &#123;</span><br><span class="line">        this.updateCategory();</span><br><span class="line">      &#125; else if (this.dialogType == &quot;add&quot;) &#123;</span><br><span class="line">        this.addCategory();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    // ä¿®æ”¹åˆ†ç±»èœå•</span><br><span class="line">    updateCategory() &#123;</span><br><span class="line">      // ä½¿ç”¨è§£æ„</span><br><span class="line">      var &#123; catId, name, icon, productUnit &#125; = this.category;</span><br><span class="line">      this.$http(&#123;</span><br><span class="line">        url: this.$http.adornUrl(&quot;/product/category/update&quot;),</span><br><span class="line">        method: &quot;post&quot;,</span><br><span class="line">        // ä¸èƒ½ç›´æ¥å‘é€this.categoryå¯¹è±¡,è€Œæ˜¯é‡æ–°å°è£…éœ€è¦ä¿®æ”¹çš„å¯¹è±¡</span><br><span class="line">        data: this.$http.adornData(&#123; catId, name, icon, productUnit &#125;, false)</span><br><span class="line">      &#125;).then((&#123; data &#125;) =&gt; &#123;</span><br><span class="line">        this.$message(&#123;</span><br><span class="line">          message: &quot;ä¿®æ”¹æˆåŠŸ&quot;,</span><br><span class="line">          type: &quot;success&quot;</span><br><span class="line">        &#125;);</span><br><span class="line">        // å…³é—­å¯¹è¯æ¡†</span><br><span class="line">        this.dialogVisible = false;</span><br><span class="line">        // åˆ·æ–°åˆ—è¡¨</span><br><span class="line">        this.getMenus();</span><br><span class="line">        // å±•å¼€çˆ¶èŠ‚ç‚¹ä½ç½®æ•°ç»„(è¿™é‡Œçš„idå¯¹åº”node-keyç»‘å®šçš„å±æ€§å)</span><br><span class="line">        this.expandedKey = [this.category.parentCid];</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="æ‹–æ‹½ä¿®æ”¹åˆ†ç±»ï¼ˆåç«¯ï¼‰"><a href="#æ‹–æ‹½ä¿®æ”¹åˆ†ç±»ï¼ˆåç«¯ï¼‰" class="headerlink" title="æ‹–æ‹½ä¿®æ”¹åˆ†ç±»ï¼ˆåç«¯ï¼‰"></a>æ‹–æ‹½ä¿®æ”¹åˆ†ç±»ï¼ˆåç«¯ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‰¹é‡ä¿®æ”¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/update/sort&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">updateSort</span><span class="params">(<span class="meta">@RequestBody</span> CategoryEntity[] category)</span> </span>&#123;</span><br><span class="line">    categoryService.updateBatchById(Arrays.asList(category));</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ‹–æ‹½ä¿®æ”¹åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰"><a href="#æ‹–æ‹½ä¿®æ”¹åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="æ‹–æ‹½ä¿®æ”¹åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰"></a>æ‹–æ‹½ä¿®æ”¹åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰</h3><blockquote><p>el-tree å¼€å¯draggableå³å¯ï¼Œallow-dropåˆ¤æ–­</p><p>è¿™ä¸€partå€¼å¾—é‡å¤è§‚çœ‹</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å•†å“ç®¡ç†-åˆ†ç±»ç»´æŠ¤ --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;el-switch</span><br><span class="line">      v-model=&quot;draggable&quot;</span><br><span class="line">      active-text=&quot;å¼€å¯æ‹–æ‹½æ’åº&quot;</span><br><span class="line">      inactive-text=&quot;å…³é—­æ‹–æ‹½æ’åº&quot;</span><br><span class="line">    &gt;</span><br><span class="line">    &lt;/el-switch&gt;</span><br><span class="line">    &lt;el-button v-if=&quot;draggable&quot; @click=&quot;batchSave&quot;&gt;</span><br><span class="line">      æ‰¹é‡ä¿å­˜</span><br><span class="line">    &lt;/el-button&gt;</span><br><span class="line">    &lt;!-- ====================== åˆ†ç±»æ ‘å½¢ç»“æ„æ˜¾ç¤º å¼€å§‹ ====================== --&gt;</span><br><span class="line">    &lt;!-- </span><br><span class="line">    node-key=&quot;catId&quot;                  å…¶å€¼ä¸ºèŠ‚ç‚¹æ•°æ®ä¸­çš„ä¸€ä¸ªå­—æ®µå</span><br><span class="line">    :expand-on-click-node=&quot;false&quot;     è¡¨ç¤ºè®¾ç½®å±•å¼€èŠ‚ç‚¹çš„ç‚¹å‡»ä½ç½®ï¼ŒFALSEåªæœ‰å½“ç‚¹å‡»ç®­å¤´çš„æ—¶å€™æ‰å±•å¼€</span><br><span class="line">    :default-expanded-keys=&quot;[2, 3]&quot;   è¡¨ç¤ºé»˜è®¤å±•å¼€çš„èŠ‚ç‚¹</span><br><span class="line">    draggable                         å¼€å¯å¯æ‹–æ‹½çš„æ–¹å¼</span><br><span class="line">  --&gt;</span><br><span class="line">    &lt;el-tree</span><br><span class="line">      node-key=&quot;catId&quot;</span><br><span class="line">      show-checkbox</span><br><span class="line">      :data=&quot;menus&quot;</span><br><span class="line">      :props=&quot;defaultProps&quot;</span><br><span class="line">      :expand-on-click-node=&quot;false&quot;</span><br><span class="line">      :default-expanded-keys=&quot;expandedKey&quot;</span><br><span class="line">      :draggable=&quot;draggable&quot;</span><br><span class="line">      :allow-drop=&quot;allowDrop&quot;</span><br><span class="line">      @node-drop=&quot;handleDrop&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;!-- ====================== æ“ä½œæŒ‰é’® å¼€å§‹ ====================== --&gt;</span><br><span class="line">      &lt;!-- ä½¿ç”¨slotæ·»åŠ å¯æ“ä½œæ€§æŒ‰é’® --&gt;</span><br><span class="line">      &lt;!-- nodeä¸ºæ¯ä¸€ä¸ªèŠ‚ç‚¹å¯¹è±¡ï¼ˆä¸å’Œåç«¯ä¸­entityå¯¹åº”ï¼Œè€Œæ˜¯elementè‡ªå®šä¹‰çš„ï¼‰ï¼Œdataä¸ºè¯¥èŠ‚ç‚¹çš„æ•°æ® --&gt;</span><br><span class="line">      &lt;span class=&quot;custom-tree-node&quot; slot-scope=&quot;&#123; node, data &#125;&quot;&gt;</span><br><span class="line">        &lt;span&gt;&#123;&#123; node.label &#125;&#125;&lt;/span&gt;</span><br><span class="line">        &lt;span&gt;</span><br><span class="line">          &lt;!-- è¿™é‡Œéœ€è¦æœ‰æ‰€åˆ¤æ–­æ˜¯å¦æ˜¾ç¤ºå¯¹åº”æŒ‰é’® --&gt;</span><br><span class="line">          &lt;el-button</span><br><span class="line">            v-if=&quot;node.level &lt;= 2&quot;</span><br><span class="line">            type=&quot;text&quot;</span><br><span class="line">            size=&quot;mini&quot;</span><br><span class="line">            @click=&quot;openDialog(data)&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            æ·»åŠ </span><br><span class="line">          &lt;/el-button&gt;</span><br><span class="line">          &lt;el-button type=&quot;text&quot; size=&quot;mini&quot; @click=&quot;openDialogWithInfo(data)&quot;&gt;</span><br><span class="line">            ä¿®æ”¹</span><br><span class="line">          &lt;/el-button&gt;</span><br><span class="line">          &lt;el-button</span><br><span class="line">            v-if=&quot;node.childNodes.length == 0&quot;</span><br><span class="line">            type=&quot;text&quot;</span><br><span class="line">            size=&quot;mini&quot;</span><br><span class="line">            @click=&quot;remove(node, data)&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            åˆ é™¤</span><br><span class="line">          &lt;/el-button&gt;</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">      &lt;/span&gt;</span><br><span class="line">      &lt;!-- ====================== æ“ä½œæŒ‰é’® ç»“æŸ ====================== --&gt;</span><br><span class="line">    &lt;/el-tree&gt;</span><br><span class="line">    &lt;!-- ====================== åˆ†ç±»æ ‘å½¢ç»“æ„æ˜¾ç¤º ç»“æŸ ====================== --&gt;</span><br><span class="line">    &lt;!-- ====================== æ·»åŠ åˆ†ç±»çš„å¯¹è¯æ¡† å¼€å§‹ ====================== --&gt;</span><br><span class="line">    &lt;el-dialog</span><br><span class="line">      :title=&quot;dialogTitle&quot;</span><br><span class="line">      :visible.sync=&quot;dialogVisible&quot;</span><br><span class="line">      :close-on-click-modal=&quot;false&quot;</span><br><span class="line">      width=&quot;30%&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;el-form :model=&quot;category&quot;&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;åˆ†ç±»å&quot;&gt;</span><br><span class="line">          &lt;el-input v-model=&quot;category.name&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;å›¾è¡¨&quot;&gt;</span><br><span class="line">          &lt;el-input v-model=&quot;category.icon&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;è®¡é‡å•ä½&quot;&gt;</span><br><span class="line">          &lt;el-input</span><br><span class="line">            v-model=&quot;category.productUnit&quot;</span><br><span class="line">            autocomplete=&quot;off&quot;</span><br><span class="line">          &gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/el-form&gt;</span><br><span class="line">      &lt;div slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">        &lt;el-button @click=&quot;dialogVisible = false&quot;&gt;å– æ¶ˆ&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;addOrUpdate()&quot;&gt;ç¡® å®š&lt;/el-button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/el-dialog&gt;</span><br><span class="line">    &lt;!-- ====================== æ·»åŠ åˆ†ç±»çš„å¯¹è¯æ¡† ç»“æŸ ====================== --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;&#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      menus: [], // èœå•åˆ—è¡¨</span><br><span class="line">      defaultProps: &#123;</span><br><span class="line">        // èœå•æ ‘å±æ€§</span><br><span class="line">        children: &quot;children&quot;, // å­èŠ‚ç‚¹å±æ€§</span><br><span class="line">        label: &quot;name&quot; // æ˜¾ç¤ºçš„å±æ€§</span><br><span class="line">      &#125;,</span><br><span class="line">      expandedKey: [], // é»˜è®¤å±•å¼€çš„èŠ‚ç‚¹</span><br><span class="line">      dialogVisible: false, // æ˜¯å¦æ‰“å¼€æ·»åŠ åˆ†ç±»çš„å¯¹è¯æ¡†</span><br><span class="line">      dialogType: &quot;&quot;, // å¯¹è¯æ¡†ç”¨äºæ·»åŠ è¿˜æ˜¯ä¿®æ”¹</span><br><span class="line">      dialogTitle: &quot;&quot;, // å¯¹è¯æ¡†æ ‡é¢˜</span><br><span class="line">      category: &#123;</span><br><span class="line">        name: &quot;&quot;,</span><br><span class="line">        catId: null,</span><br><span class="line">        parentCid: 0,</span><br><span class="line">        catLevel: 0,</span><br><span class="line">        showStatus: 1,</span><br><span class="line">        sort: 0,</span><br><span class="line">        icon: &quot;&quot;,</span><br><span class="line">        productUnit: &quot;&quot;</span><br><span class="line">      &#125;, // èœå•å¯¹è±¡</span><br><span class="line">      pCid: 0,</span><br><span class="line">      maxLevel: 0, // ç”¨äºè®°å½•å­èŠ‚ç‚¹æœ€æ·±æ·±åº¦</span><br><span class="line">      updateNodes: [], //æ‰€æœ‰éœ€è¦ä¿®æ”¹çš„èŠ‚ç‚¹</span><br><span class="line">      draggable: false // å¯å¦æ‹–æ‹½</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getMenus();</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    batchSave() &#123;</span><br><span class="line">      this.$http(&#123;</span><br><span class="line">        url: this.$http.adornUrl(&quot;/product/category/update/sort&quot;),</span><br><span class="line">        method: &quot;post&quot;,</span><br><span class="line">        data: this.$http.adornData(this.updateNodes, false)</span><br><span class="line">      &#125;)</span><br><span class="line">        .then((&#123; data &#125;) =&gt; &#123;</span><br><span class="line">          this.$message(&#123;</span><br><span class="line">            message: &quot;èœå•é¡ºåºä¿®æ”¹æˆåŠŸ&quot;,</span><br><span class="line">            type: &quot;success&quot;</span><br><span class="line">          &#125;);</span><br><span class="line">          // åˆ·æ–°,åˆå§‹åŒ–</span><br><span class="line">          this.updateNodes = [];</span><br><span class="line">          this.maxLevel = 0;</span><br><span class="line">          this.getMenus();</span><br><span class="line">          this.expandedKey = [this.pCid];</span><br><span class="line">          this.pCid = 0;</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(() =&gt; &#123;</span><br><span class="line">          this.$message(&#123;</span><br><span class="line">            message: &quot;èœå•é¡ºåºä¿®æ”¹å¤±è´¥&quot;,</span><br><span class="line">            type: &quot;error&quot;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    // ä¿®æ”¹å­èŠ‚ç‚¹çš„å±‚çº§</span><br><span class="line">    updateNodesChildLevel(node) &#123;</span><br><span class="line">      if (node.childNodes.length &gt; 0) &#123;</span><br><span class="line">        for (let i = 0; i &lt; node.childNodes.length; i++) &#123;</span><br><span class="line">          this.updateNodes.push(&#123;</span><br><span class="line">            catId: node.childNodes[i].data.catId,</span><br><span class="line">            catLevel: node.childNodes[i].level</span><br><span class="line">          &#125;);</span><br><span class="line">          this.updateNodesChildLevel(node.childNodes[i]);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    // æ‹–æ‹½æˆåŠŸè§¦å‘</span><br><span class="line">    handleDrop(draggingNode, dropNode, dropType, ev) &#123;</span><br><span class="line">      // è·å–æœ€æ–°èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹id(çœŸå®æ•°æ®åº“ä¸­çš„id,è€Œä¸æ˜¯nodeçš„id)å’Œé¡ºåºå’Œå±‚çº§</span><br><span class="line">      let pCid = 0;</span><br><span class="line">      let siblings = null;</span><br><span class="line">      if (dropType == &quot;inner&quot;) &#123;</span><br><span class="line">        pCid = dropNode.data.catId;</span><br><span class="line">        siblings = dropNode.childNodes;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        pCid =</span><br><span class="line">          dropNode.parent.data.catId == undefined</span><br><span class="line">            ? 0</span><br><span class="line">            : dropNode.parent.data.catId;</span><br><span class="line">        siblings = dropNode.parent.childNodes;</span><br><span class="line">      &#125;</span><br><span class="line">      //å¯¹å…„å¼ŸèŠ‚ç‚¹æ’åºï¼Œè·å¾—å½“å‰çš„é¡ºåº</span><br><span class="line">      for (let i = 0; i &lt; siblings.length; i++) &#123;</span><br><span class="line">        // å…ˆåˆ¤æ–­å½“å‰éå†åˆ°çš„èŠ‚ç‚¹æ˜¯ä¸æ˜¯è¢«æ‹–æ‹½çš„èŠ‚ç‚¹ï¼Œæ˜¯çš„è¯éœ€è¦ä¿®æ”¹ä»–çš„pCid</span><br><span class="line">        if (siblings[i].data.catId == draggingNode.data.catId) &#123;</span><br><span class="line">          // åˆ¤æ–­å±‚çº§æ˜¯å¦æ”¹å˜</span><br><span class="line">          if (siblings[i].level != draggingNode.level) &#123;</span><br><span class="line">            // å­—èŠ‚ç‚¹çš„å±‚çº§ä¹Ÿè¦æ”¹å˜</span><br><span class="line">            this.updateNodesChildLevel(siblings[i]);</span><br><span class="line">            this.updateNodes.push(&#123;</span><br><span class="line">              catId: siblings[i].data.catId,</span><br><span class="line">              sort: i,</span><br><span class="line">              parentCid: pCid,</span><br><span class="line">              catLevel: siblings[i].level</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            this.updateNodes.push(&#123;</span><br><span class="line">              catId: siblings[i].data.catId,</span><br><span class="line">              sort: i,</span><br><span class="line">              parentCid: pCid</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          // éœ€è¦ä¿®æ”¹çš„å•†å“å¯¹è±¡ï¼Œæ”¾å…¥updateNodes</span><br><span class="line">          this.updateNodes.push(&#123; catId: siblings[i].data.catId, sort: i &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      this.pCid = pCid;</span><br><span class="line">      console.log(&quot;this.updateNodes:&quot;, this.updateNodes);</span><br><span class="line">      // è°ƒç”¨api</span><br><span class="line">      // this.$http(&#123;</span><br><span class="line">      //   url: this.$http.adornUrl(&quot;/product/category/update/sort&quot;),</span><br><span class="line">      //   method: &quot;post&quot;,</span><br><span class="line">      //   data: this.$http.adornData(this.updateNodes, false)</span><br><span class="line">      // &#125;)</span><br><span class="line">      //   .then((&#123; data &#125;) =&gt; &#123;</span><br><span class="line">      //     this.$message(&#123;</span><br><span class="line">      //       message: &quot;èœå•é¡ºåºä¿®æ”¹æˆåŠŸ&quot;,</span><br><span class="line">      //       type: &quot;success&quot;</span><br><span class="line">      //     &#125;);</span><br><span class="line">      //     // åˆ·æ–°,åˆå§‹åŒ–</span><br><span class="line">      //     this.updateNodes = [];</span><br><span class="line">      //     this.maxLevel = 0;</span><br><span class="line">      //     this.getMenus();</span><br><span class="line">      //     this.expandedKey = [pCid];</span><br><span class="line">      //   &#125;)</span><br><span class="line">      //   .catch(() =&gt; &#123;</span><br><span class="line">      //     this.$message(&#123;</span><br><span class="line">      //       message: &quot;èœå•é¡ºåºä¿®æ”¹å¤±è´¥&quot;,</span><br><span class="line">      //       type: &quot;error&quot;</span><br><span class="line">      //     &#125;);</span><br><span class="line">      //   &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    // åˆ¤æ–­æ˜¯å¦è¢«æ‹–æ‹½æ”¾ç½®ï¼ˆè¿™é‡Œè¦æ³¨æ„å±‚çº§å’Œæ·±åº¦ï¼‰</span><br><span class="line">    allowDrop(draggingNode, dropNode, type) &#123;</span><br><span class="line">      // å½“å‰è¢«æ‹–åŠ¨åˆ°çš„èŠ‚ç‚¹çš„æœ€å¤§æ·±åº¦ï¼ˆå› ä¸ºå¯èƒ½æ‹–å®¶å¸¦å£ï¼‰+æ‹–åŠ¨åˆ°çš„èŠ‚ç‚¹çš„å±‚æ•° &lt;= 3å³å¯</span><br><span class="line">      // æ±‚å½“å‰å­èŠ‚ç‚¹æœ€å¤§å±‚çº§</span><br><span class="line">      console.log(&quot;draggingNode:&quot;, draggingNode);</span><br><span class="line">      this.countNodeLevel(draggingNode);</span><br><span class="line">      // æ³¨æ„è¿™é‡Œï¼Œéœ€è¦ç”¨å­èŠ‚ç‚¹çš„æœ€å¤§å±‚çº§-å½“å‰è¢«æ‹–åŠ¨çš„èŠ‚ç‚¹çš„å±‚çº§+1ï¼Œè·å¾—çš„å€¼å°±æ˜¯è¢«æ‹–åŠ¨æ•´ä½“çš„æœ€å¤§æ·±åº¦</span><br><span class="line">      console.log(&quot;maxLevel:&quot; + this.maxLevel);</span><br><span class="line">      console.log(&quot;draggingNode.level:&quot; + draggingNode.level);</span><br><span class="line">      let deep = this.maxLevel - draggingNode.level + 1;</span><br><span class="line">      console.log(&quot;deep:&quot; + deep);</span><br><span class="line">      this.maxLevel = 0;</span><br><span class="line">      // æ³¨æ„è¿™é‡Œè¦åˆ¤æ–­type: å‰åä¸­ï¼ˆå› ä¸ºelementuiä»–çš„è®¾è®¡å°±æ˜¯è¿™æ ·ï¼Œä¸¤ä¸ªnodeæ˜¯æŒ‡æ‹–æ‹½åæœ‰ä½ç½®å…³ç³»çš„ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œtypeæ˜¯è¿”å›çš„ä¸¤ä¸ªnodeä¹‹é—´çš„å…³ç³»ï¼Œï¼‰</span><br><span class="line">      if (type == &quot;inner&quot;) &#123;</span><br><span class="line">        console.log(&quot;dropNode.level:&quot; + dropNode.level);</span><br><span class="line">        return deep + dropNode.level &lt;= 3;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        console.log(&quot;dropNode.parent.level:&quot; + dropNode.parent.level);</span><br><span class="line">        return deep + dropNode.parent.level &lt;= 3;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    // é€’å½’æŸ¥æ‰¾æœ€æ·±å­èŠ‚ç‚¹ï¼Œè®°å½•åœ¨this.maxLevelä¸­</span><br><span class="line">    countNodeLevel(node) &#123;</span><br><span class="line">      // å¦‚æœæœ‰å­èŠ‚ç‚¹</span><br><span class="line">      if (node.childNodes != null &amp;&amp; node.childNodes.length &gt; 0) &#123;</span><br><span class="line">        // éå†é€’å½’</span><br><span class="line">        for (let i = 0; i &lt; node.childNodes.length; i++) &#123;</span><br><span class="line">          if (node.childNodes[i].level &gt; this.maxLevel) &#123;</span><br><span class="line">            this.maxLevel = node.childNodes[i].level;</span><br><span class="line">          &#125;</span><br><span class="line">          // æ³¨æ„è¿™é‡ŒmaxLevelæ”¾åœ¨dataä¸­ï¼Œè¦ä¸ç„¶é€’å½’æ‹¿ä¸åˆ°</span><br><span class="line">          this.countNodeLevel(node.childNodes[i]);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        // æ²¡æœ‰å­èŠ‚ç‚¹</span><br><span class="line">        this.maxLevel = node.level;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    // è·å–æ‰€æœ‰åˆ†ç±»</span><br><span class="line">    getMenus() &#123;</span><br><span class="line">      this.$http(&#123;</span><br><span class="line">        url: this.$http.adornUrl(&quot;/product/category/list/tree&quot;),</span><br><span class="line">        method: &quot;get&quot;</span><br><span class="line">      &#125;).then((&#123; data &#125;) =&gt; &#123;</span><br><span class="line">        console.log(data);</span><br><span class="line">        // è¿™é‡Œdataä½¿ç”¨äº†è§£æ„</span><br><span class="line">        this.menus = data.data;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    // æ‰“å¼€æ·»åŠ èœå•å¯¹è¯æ¡†</span><br><span class="line">    openDialog(data) &#123;</span><br><span class="line">      this.dialogVisible = true;</span><br><span class="line">      this.dialogType = &quot;add&quot;;</span><br><span class="line">      this.dialogTitle = &quot;æ·»åŠ åˆ†ç±»&quot;;</span><br><span class="line">      // åˆå§‹åŒ–categoryå¯¹è±¡</span><br><span class="line">      this.category.catId = null;</span><br><span class="line">      this.category.name = &quot;&quot;;</span><br><span class="line">      this.category.parentCid = data.catId;</span><br><span class="line">      this.category.icon = &quot;&quot;;</span><br><span class="line">      this.category.productUnit = &quot;&quot;;</span><br><span class="line">      this.category.catLevel = data.catLevel * 1 + 1;</span><br><span class="line">    &#125;,</span><br><span class="line">    // æ‰“å¼€ä¿®æ”¹èœå•å¯¹è¯æ¡†</span><br><span class="line">    openDialogWithInfo(data) &#123;</span><br><span class="line">      this.dialogVisible = true;</span><br><span class="line">      this.dialogType = &quot;update&quot;;</span><br><span class="line">      this.dialogTitle = &quot;ä¿®æ”¹åˆ†ç±»&quot;;</span><br><span class="line">      // è°ƒç”¨æ¥å£è·å–å¯¹åº”idçš„ä¿¡æ¯ï¼Œå¹¶åˆå§‹åŒ–categoryå¯¹è±¡</span><br><span class="line">      this.$http(&#123;</span><br><span class="line">        url: this.$http.adornUrl(`/product/category/info/$&#123;data.catId&#125;`),</span><br><span class="line">        method: &quot;get&quot;</span><br><span class="line">      &#125;).then((&#123; data &#125;) =&gt; &#123;</span><br><span class="line">        this.category.catId = data.data.catId;</span><br><span class="line">        // åªä¿®æ”¹è¿™å‡ ä¸ªå€¼</span><br><span class="line">        this.category.name = data.data.name;</span><br><span class="line">        this.category.icon = data.data.icon;</span><br><span class="line">        this.category.productUnit = data.data.productUnit;</span><br><span class="line">        // ç”¨äºä¿®æ”¹å®Œä¹‹åå±•å¼€çˆ¶èœå•</span><br><span class="line">        this.category.parentCid = data.data.parentCid;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    // å¯¹è¯æ¡†ç¡®å®šæŒ‰é’®åˆ¤æ–­</span><br><span class="line">    addOrUpdate() &#123;</span><br><span class="line">      if (this.dialogType == &quot;update&quot;) &#123;</span><br><span class="line">        this.updateCategory();</span><br><span class="line">      &#125; else if (this.dialogType == &quot;add&quot;) &#123;</span><br><span class="line">        this.addCategory();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    // ä¿®æ”¹åˆ†ç±»èœå•</span><br><span class="line">    updateCategory() &#123;</span><br><span class="line">      // ä½¿ç”¨è§£æ„</span><br><span class="line">      var &#123; catId, name, icon, productUnit &#125; = this.category;</span><br><span class="line">      this.$http(&#123;</span><br><span class="line">        url: this.$http.adornUrl(&quot;/product/category/update&quot;),</span><br><span class="line">        method: &quot;post&quot;,</span><br><span class="line">        // ä¸èƒ½ç›´æ¥å‘é€this.categoryå¯¹è±¡,è€Œæ˜¯é‡æ–°å°è£…éœ€è¦ä¿®æ”¹çš„å¯¹è±¡</span><br><span class="line">        data: this.$http.adornData(&#123; catId, name, icon, productUnit &#125;, false)</span><br><span class="line">      &#125;).then((&#123; data &#125;) =&gt; &#123;</span><br><span class="line">        this.$message(&#123;</span><br><span class="line">          message: &quot;ä¿®æ”¹æˆåŠŸ&quot;,</span><br><span class="line">          type: &quot;success&quot;</span><br><span class="line">        &#125;);</span><br><span class="line">        // å…³é—­å¯¹è¯æ¡†</span><br><span class="line">        this.dialogVisible = false;</span><br><span class="line">        // åˆ·æ–°åˆ—è¡¨</span><br><span class="line">        this.getMenus();</span><br><span class="line">        // å±•å¼€çˆ¶èŠ‚ç‚¹ä½ç½®æ•°ç»„(è¿™é‡Œçš„idå¯¹åº”node-keyç»‘å®šçš„å±æ€§å)</span><br><span class="line">        this.expandedKey = [this.category.parentCid];</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    // æ·»åŠ åˆ†ç±»èœå•</span><br><span class="line">    addCategory() &#123;</span><br><span class="line">      // è°ƒç”¨api</span><br><span class="line">      this.$http(&#123;</span><br><span class="line">        url: this.$http.adornUrl(&quot;/product/category/save&quot;),</span><br><span class="line">        method: &quot;post&quot;,</span><br><span class="line">        data: this.$http.adornData(this.category, false)</span><br><span class="line">      &#125;)</span><br><span class="line">        .then((&#123; data &#125;) =&gt; &#123;</span><br><span class="line">          this.$message(&#123;</span><br><span class="line">            message: &quot;ä¿å­˜æˆåŠŸ&quot;,</span><br><span class="line">            type: &quot;success&quot;</span><br><span class="line">          &#125;);</span><br><span class="line">          // å…³é—­å¯¹è¯æ¡†</span><br><span class="line">          this.dialogVisible = false;</span><br><span class="line">          // åˆ·æ–°åˆ—è¡¨</span><br><span class="line">          this.getMenus();</span><br><span class="line">          // å±•å¼€çˆ¶èŠ‚ç‚¹ä½ç½®æ•°ç»„(è¿™é‡Œçš„idå¯¹åº”node-keyç»‘å®šçš„å±æ€§å)</span><br><span class="line">          this.expandedKey = [this.category.parentCid];</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(result =&gt; &#123;</span><br><span class="line">          this.$message(&#123;</span><br><span class="line">            message: &quot;ä¿å­˜å¤±è´¥&quot;,</span><br><span class="line">            type: &quot;error&quot;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    // åˆ é™¤å¯¹åº”èœå•</span><br><span class="line">    remove(node, data) &#123;</span><br><span class="line">      var ids = [data.catId];</span><br><span class="line">      this.$confirm(`ç¡®å®šåˆ é™¤ã€$&#123;data.name&#125;ã€‘èœå•å—?`, &quot;æç¤º&quot;, &#123;</span><br><span class="line">        confirmButtonText: &quot;ç¡®å®š&quot;,</span><br><span class="line">        cancelButtonText: &quot;å–æ¶ˆ&quot;,</span><br><span class="line">        type: &quot;warning&quot;</span><br><span class="line">      &#125;)</span><br><span class="line">        .then(() =&gt; &#123;</span><br><span class="line">          // è°ƒç”¨API</span><br><span class="line">          this.$http(&#123;</span><br><span class="line">            url: this.$http.adornUrl(&quot;/product/category/delete&quot;),</span><br><span class="line">            method: &quot;post&quot;,</span><br><span class="line">            data: this.$http.adornData(ids, false)</span><br><span class="line">          &#125;)</span><br><span class="line">            .then((&#123; data &#125;) =&gt; &#123;</span><br><span class="line">              this.$message(&#123;</span><br><span class="line">                message: &quot;åˆ é™¤æˆåŠŸ&quot;,</span><br><span class="line">                type: &quot;success&quot;</span><br><span class="line">              &#125;);</span><br><span class="line">              // åˆ·æ–°åˆ—è¡¨</span><br><span class="line">              this.getMenus();</span><br><span class="line">              // å±•å¼€çˆ¶èŠ‚ç‚¹ä½ç½®(è¿™é‡Œçš„idå¯¹åº”node-keyç»‘å®šçš„å±æ€§å)</span><br><span class="line">              this.expandedKey = [node.parent.data.catId];</span><br><span class="line">            &#125;)</span><br><span class="line">            .catch(result =&gt; &#123;</span><br><span class="line">              this.$message(&#123;</span><br><span class="line">                message: &quot;åˆ é™¤å¤±è´¥&quot;,</span><br><span class="line">                type: &quot;error&quot;</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(() =&gt; &#123;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>TODO : å½“å‰bugï¼Œå¦‚æœå±‚çº§3çš„èœå•æ‹–æ‹½åˆ°å±‚çº§2åå¤±è¸ªï¼Œåº”è¯¥å’Œpcidæœ‰å…³ï¼ˆæ‹–æ‹½è‡³å±‚çº§1æœ‰æ•ˆï¼‰</p><p>å±‚çº§2æ— å­èŠ‚ç‚¹æ‹–æ‹½åˆ°å±‚çº§2åå¤±è¸ªï¼ˆä¸è¿‡çœ‹èµ·æ¥åå°æ•°æ®åº“æ²¡é—®é¢˜å‘€ï¼Ÿï¼‰</p><p>TODOï¼šè¿™ä¸ªbugè¢«åæ¥çš„æ‰¹é‡ä¿å­˜æ”¹æ­£äº†ï¼Œåæ­£éƒ½æ‰¹é‡ä¿å­˜äº†ï¼Œä¹Ÿæœ‰é—®é¢˜äº†</p></blockquote><h3 id="æ‰¹é‡åˆ é™¤åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰"><a href="#æ‰¹é‡åˆ é™¤åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="æ‰¹é‡åˆ é™¤åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰"></a>æ‰¹é‡åˆ é™¤åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰</h3><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20211016171830386.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20211016171830386.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211016171830386"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"> &lt;div&gt;</span><br><span class="line">    &lt;el-button type=&quot;danger&quot; @click=&quot;batchDelete&quot;&gt;æ‰¹é‡åˆ é™¤&lt;/el-button&gt;</span><br><span class="line">    &lt;!-- ====================== åˆ†ç±»æ ‘å½¢ç»“æ„æ˜¾ç¤º å¼€å§‹ ====================== --&gt;</span><br><span class="line">    &lt;!-- </span><br><span class="line">    node-key=&quot;catId&quot;                  å…¶å€¼ä¸ºèŠ‚ç‚¹æ•°æ®ä¸­çš„ä¸€ä¸ªå­—æ®µå</span><br><span class="line">    :expand-on-click-node=&quot;false&quot;     è¡¨ç¤ºè®¾ç½®å±•å¼€èŠ‚ç‚¹çš„ç‚¹å‡»ä½ç½®ï¼ŒFALSEåªæœ‰å½“ç‚¹å‡»ç®­å¤´çš„æ—¶å€™æ‰å±•å¼€</span><br><span class="line">    :default-expanded-keys=&quot;[2, 3]&quot;   è¡¨ç¤ºé»˜è®¤å±•å¼€çš„èŠ‚ç‚¹</span><br><span class="line">    draggable                         å¼€å¯å¯æ‹–æ‹½çš„æ–¹å¼â€˜</span><br><span class="line">    ref                               å¯ä»¥ä»this.$refsä¸­è·å–åˆ°è¯¥å¯¹åº”ç»„ä»¶</span><br><span class="line">  --&gt;</span><br><span class="line">    &lt;el-tree</span><br><span class="line">      node-key=&quot;catId&quot;</span><br><span class="line">      show-checkbox</span><br><span class="line">      :data=&quot;menus&quot;</span><br><span class="line">      :props=&quot;defaultProps&quot;</span><br><span class="line">      :expand-on-click-node=&quot;false&quot;</span><br><span class="line">      :default-expanded-keys=&quot;expandedKey&quot;</span><br><span class="line">      :draggable=&quot;draggable&quot;</span><br><span class="line">      :allow-drop=&quot;allowDrop&quot;</span><br><span class="line">      @node-drop=&quot;handleDrop&quot;</span><br><span class="line">      ref=&quot;menuTree&quot;</span><br><span class="line">    &gt;</span><br><span class="line"> </span><br><span class="line">        &lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line"> methods: &#123;</span><br><span class="line">    // æ‰¹é‡åˆ é™¤</span><br><span class="line">    batchDelete() &#123;</span><br><span class="line">      let catIds = [];</span><br><span class="line">      // è·å–å½“å‰é€‰ä¸­çš„èŠ‚ç‚¹</span><br><span class="line">      let checkedNodes = this.$refs.menuTree.getCheckedNodes();</span><br><span class="line">      // console.log(checkedNodes);</span><br><span class="line">      // éå†æ‰€æœ‰è¢«é€‰ä¸­çš„èŠ‚ç‚¹</span><br><span class="line">      for (let i = 0; i &lt; checkedNodes.length; i++) &#123;</span><br><span class="line">        catIds.push(checkedNodes[i].catId);</span><br><span class="line">      &#125;</span><br><span class="line">      // å‘é€è¯·æ±‚</span><br><span class="line">      this.$confirm(`ç¡®å®šæ‰¹é‡åˆ é™¤ã€$&#123;catIds&#125;ã€‘èœå•å—?`, &quot;æç¤º&quot;, &#123;</span><br><span class="line">        confirmButtonText: &quot;ç¡®å®š&quot;,</span><br><span class="line">        cancelButtonText: &quot;å–æ¶ˆ&quot;,</span><br><span class="line">        type: &quot;warning&quot;</span><br><span class="line">      &#125;)</span><br><span class="line">        .then(() =&gt; &#123;</span><br><span class="line">          // è°ƒç”¨API</span><br><span class="line">          this.$http(&#123;</span><br><span class="line">            url: this.$http.adornUrl(&quot;/product/category/delete&quot;),</span><br><span class="line">            method: &quot;post&quot;,</span><br><span class="line">            data: this.$http.adornData(catIds, false)</span><br><span class="line">          &#125;)</span><br><span class="line">            .then((&#123; data &#125;) =&gt; &#123;</span><br><span class="line">              this.$message(&#123;</span><br><span class="line">                message: &quot;æ‰¹é‡åˆ é™¤æˆåŠŸ&quot;,</span><br><span class="line">                type: &quot;success&quot;</span><br><span class="line">              &#125;);</span><br><span class="line">              // åˆ·æ–°åˆ—è¡¨</span><br><span class="line">              this.getMenus();</span><br><span class="line">            &#125;)</span><br><span class="line">            .catch(result =&gt; &#123;</span><br><span class="line">              this.$message(&#123;</span><br><span class="line">                message: &quot;æ‰¹é‡åˆ é™¤å¤±è´¥&quot;,</span><br><span class="line">                type: &quot;error&quot;</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(() =&gt; &#123;&#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt; </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> é¡¹ç›® </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> SpringCloud </tag>
            
            <tag> redis </tag>
            
            <tag> å¾®æœåŠ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€é¡¹ç›®ç¬”è®°ã€‘åœ¨çº¿æ•™è‚²é¡¹ç›®å®æˆ˜7</title>
      <link href="/2021/10/05/xiang-mu-bi-ji-zai-xian-jiao-yu-xiang-mu-shi-zhan-7/"/>
      <url>/2021/10/05/xiang-mu-bi-ji-zai-xian-jiao-yu-xiang-mu-shi-zhan-7/</url>
      
        <content type="html"><![CDATA[<h2 id="ç»Ÿè®¡åˆ†æåå°ï¼ˆåç«¯-å‰ç«¯ï¼‰"><a href="#ç»Ÿè®¡åˆ†æåå°ï¼ˆåç«¯-å‰ç«¯ï¼‰" class="headerlink" title="ç»Ÿè®¡åˆ†æåå°ï¼ˆåç«¯+å‰ç«¯ï¼‰"></a>ç»Ÿè®¡åˆ†æåå°ï¼ˆåç«¯+å‰ç«¯ï¼‰</h2><h3 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h3><blockquote><p>è€æ ·å­</p></blockquote><h3 id="ç”Ÿæˆç»Ÿè®¡æ•°æ®ï¼ˆåç«¯ï¼‰"><a href="#ç”Ÿæˆç»Ÿè®¡æ•°æ®ï¼ˆåç«¯ï¼‰" class="headerlink" title="ç”Ÿæˆç»Ÿè®¡æ•°æ®ï¼ˆåç«¯ï¼‰"></a>ç”Ÿæˆç»Ÿè®¡æ•°æ®ï¼ˆåç«¯ï¼‰</h3><blockquote><p>æ³¨æ„ï¼Œè¦æŸ¥è¯¢ä»€ä¹ˆæ•°æ®è¦åœ¨å¯¹åº”æ¨¡å—ä¸­æŸ¥è¯¢ï¼Œç„¶ååœ¨ç»Ÿè®¡æ¨¡å—è¿œç¨‹è°ƒç”¨è·å–</p></blockquote><h4 id="è¢«è°ƒç”¨æ–¹controller"><a href="#è¢«è°ƒç”¨æ–¹controller" class="headerlink" title="è¢«è°ƒç”¨æ–¹controller"></a>è¢«è°ƒç”¨æ–¹controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/educenter/member&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UcenterMemberController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UcenterMemberService memberService;</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢ç‰¹å®šå¤©çš„æ³¨å†Œäººæ•°</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;countRegister/&#123;day&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">countRegister</span><span class="params">(<span class="meta">@PathVariable</span> String day)</span> </span>&#123;</span><br><span class="line">        Integer count = memberService.countRegister(day);</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è¢«è°ƒç”¨æ–¹service"><a href="#è¢«è°ƒç”¨æ–¹service" class="headerlink" title="è¢«è°ƒç”¨æ–¹service"></a>è¢«è°ƒç”¨æ–¹service</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŸ¥è¯¢ç‰¹å®šå¤©çš„æ³¨å†Œäººæ•°</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Integer <span class="title">countRegister</span><span class="params">(String day)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> baseMapper.countRegisterByDay(day);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è¢«è°ƒç”¨æ–¹mapper"><a href="#è¢«è°ƒç”¨æ–¹mapper" class="headerlink" title="è¢«è°ƒç”¨æ–¹mapper"></a>è¢«è°ƒç”¨æ–¹mapper</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.atguigu.educenter.mapper.UcenterMemberMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æŸ¥è¯¢ç‰¹å®šå¤©çš„æ³¨å†Œäººæ•° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;countRegisterByDay&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">        SELECT COUNT(*)</span><br><span class="line">        FROM ucenter_member uc</span><br><span class="line">        WHERE DATE(uc.gmt_create) = #&#123;day&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="è¿œç¨‹è°ƒç”¨æ¥å£"><a href="#è¿œç¨‹è°ƒç”¨æ¥å£" class="headerlink" title="è¿œç¨‹è°ƒç”¨æ¥å£"></a>è¿œç¨‹è°ƒç”¨æ¥å£</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@FeignClient(&quot;service-ucenter&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UcenterClient</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢ç‰¹å®šå¤©çš„æ³¨å†Œäººæ•°</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/educenter/member/countRegister/&#123;day&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">countRegister</span><span class="params">(<span class="meta">@PathVariable(&quot;day&quot;)</span> String day)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è°ƒç”¨æ–¹controller"><a href="#è°ƒç”¨æ–¹controller" class="headerlink" title="è°ƒç”¨æ–¹controller"></a>è°ƒç”¨æ–¹controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/staservice/sta&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StatisticsDailyController</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StatisticsDailyService staService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»Ÿè®¡ç‰¹å®šå¤©çš„æ³¨å†Œäººæ•°</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;countRegister/&#123;day&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">countRegister</span><span class="params">(<span class="meta">@PathVariable</span> String day)</span> </span>&#123;</span><br><span class="line">        staService.countRegister(day);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è°ƒç”¨æ–¹service"><a href="#è°ƒç”¨æ–¹service" class="headerlink" title="è°ƒç”¨æ–¹service"></a>è°ƒç”¨æ–¹service</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StatisticsDailyServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">StatisticsDailyMapper</span>, <span class="title">StatisticsDaily</span>&gt; <span class="keyword">implements</span> <span class="title">StatisticsDailyService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UcenterClient ucenterClient;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">countRegister</span><span class="params">(String day)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å…ˆåˆ é™¤ç›¸åŒæ—¥æœŸçš„è®°å½•</span></span><br><span class="line">        QueryWrapper&lt;StatisticsDaily&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">        wrapper.eq(<span class="string">&quot;date_calculated&quot;</span>, day);</span><br><span class="line">        baseMapper.delete(wrapper);</span><br><span class="line">        <span class="comment">// è·å¾—æŒ‡å®šæ—¥æœŸçš„ç»Ÿè®¡æ•°</span></span><br><span class="line">        Integer count = ucenterClient.countRegister(day);</span><br><span class="line">        <span class="comment">// æŠŠç»Ÿè®¡æ•°æ®æ·»åŠ åˆ°ç»Ÿè®¡è¡¨å½“ä¸­</span></span><br><span class="line">        StatisticsDaily statisticsDaily = <span class="keyword">new</span> StatisticsDaily();</span><br><span class="line">        statisticsDaily.setRegisterNum(count);</span><br><span class="line">        statisticsDaily.setDateCalculated(day);</span><br><span class="line">        <span class="comment">// ä¸€ä¸‹æ˜¯ä¸€äº›éšæœºæ•°</span></span><br><span class="line">        statisticsDaily.setVideoViewNum(RandomUtils.nextInt(<span class="number">100</span>, <span class="number">200</span>));</span><br><span class="line">        statisticsDaily.setLoginNum(RandomUtils.nextInt(<span class="number">100</span>, <span class="number">200</span>));</span><br><span class="line">        statisticsDaily.setCourseNum(RandomUtils.nextInt(<span class="number">100</span>, <span class="number">200</span>));</span><br><span class="line">        <span class="comment">// æ’å…¥æ•°æ®åº“</span></span><br><span class="line">        baseMapper.insert(statisticsDaily);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆç»Ÿè®¡æ•°æ®ï¼ˆå‰ç«¯ï¼‰"><a href="#ç”Ÿæˆç»Ÿè®¡æ•°æ®ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="ç”Ÿæˆç»Ÿè®¡æ•°æ®ï¼ˆå‰ç«¯ï¼‰"></a>ç”Ÿæˆç»Ÿè®¡æ•°æ®ï¼ˆå‰ç«¯ï¼‰</h3><h4 id="router"><a href="#router" class="headerlink" title="router"></a>router</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»Ÿè®¡åˆ†ææ¨¡å—</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/sta&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: Layout,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/sta/create&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;ç»Ÿè®¡åˆ†æ&#x27;</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;ç»Ÿè®¡åˆ†æ&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;example&#x27;</span> &#125;,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;create&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;ç”Ÿæˆæ•°æ®&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/statistics/create&#x27;</span>),</span><br><span class="line">        <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;ç”Ÿæˆæ•°æ®&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;table&#x27;</span> &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;show&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;å›¾è¡¨æ˜¾ç¤º&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/statistics/show&#x27;</span>),</span><br><span class="line">        <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;å›¾è¡¨æ˜¾ç¤º&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;tree&#x27;</span> &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><h4 id="api"><a href="#api" class="headerlink" title="api"></a>api</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// ç»Ÿè®¡æŒ‡å®šæ—¥æœŸçš„æ³¨å†Œæ•°</span></span><br><span class="line">    <span class="function"><span class="title">createCountRegister</span>(<span class="params">day</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> request(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">`/staservice/sta/countRegister/<span class="subst">$&#123;day&#125;</span>`</span>,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="vueæ¨¡æ¿ä¸æ–¹æ³•"><a href="#vueæ¨¡æ¿ä¸æ–¹æ³•" class="headerlink" title="vueæ¨¡æ¿ä¸æ–¹æ³•"></a>vueæ¨¡æ¿ä¸æ–¹æ³•</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;  &lt;div class=&quot;app-container&quot;&gt;    &lt;!--è¡¨å•--&gt;    &lt;el-form :inline=&quot;true&quot; class=&quot;demo-form-inline&quot;&gt;      &lt;el-form-item label=&quot;æ—¥æœŸ&quot;&gt;        &lt;!-- è¿™é‡Œç»‘å®šäº†day --&gt;        &lt;el-date-picker          v-model=&quot;day&quot;          type=&quot;date&quot;          placeholder=&quot;é€‰æ‹©è¦ç»Ÿè®¡çš„æ—¥æœŸ&quot;          value-format=&quot;yyyy-MM-dd&quot;        /&gt;      &lt;/el-form-item&gt;      &lt;el-button :disabled=&quot;btnDisabled&quot; type=&quot;primary&quot; @click=&quot;create()&quot;        &gt;ç”Ÿæˆ&lt;/el-button      &gt;    &lt;/el-form&gt;  &lt;/div&gt;&lt;/template&gt;&lt;script&gt;  import staApi from &#x27;@/api/statistics&#x27;  export default &#123;    data() &#123;      return &#123;        day: &#x27;&#x27;,        btnDisabled: false      &#125;    &#125;,    created() &#123;&#125;,    methods: &#123;      create() &#123;        staApi.createCountRegister(this.day).then(result =&gt; &#123;          // æç¤ºä¿¡æ¯          this.$message(&#123;            type: &#x27;success&#x27;,            message: &#x27;ç”Ÿæˆæ•°æ®æˆåŠŸ!&#x27;          &#125;)          // è·³è½¬åˆ°å›¾è¡¨æ˜¾ç¤ºé¡µé¢          this.$router.push(&#123; path: &#x27;/sta/show&#x27; &#125;)        &#125;)      &#125;    &#125;  &#125;&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="å®šæ—¶ä»»åŠ¡"><a href="#å®šæ—¶ä»»åŠ¡" class="headerlink" title="å®šæ—¶ä»»åŠ¡"></a>å®šæ—¶ä»»åŠ¡</h3><blockquote><p>åœ¨å›ºå®šæ—¶å€™è‡ªåŠ¨æ‰§è¡Œç¨‹åº</p></blockquote><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><blockquote><p>åœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ æ³¨è§£@EnableScheduling</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableScheduling</span>   <span class="comment">// ä½¿ç”¨è‡ªåŠ¨ä»»åŠ¡public class StatisticsApplication &#123;    public static void main(String[] args) &#123;        SpringApplication.run(StatisticsApplication.class, args);    &#125;&#125;</span></span><br></pre></td></tr></table></figure><h4 id="å®šæ—¶ä»»åŠ¡ç±»"><a href="#å®šæ—¶ä»»åŠ¡ç±»" class="headerlink" title="å®šæ—¶ä»»åŠ¡ç±»"></a>å®šæ—¶ä»»åŠ¡ç±»</h4><blockquote><p>ä½¿ç”¨cronè¡¨è¾¾å¼ï¼Œè®¾ç½®æ‰§è¡Œè§„åˆ™</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Componentpublic</span> <span class="class"><span class="keyword">class</span> <span class="title">ScheduledTask</span> </span>&#123;    <span class="meta">@Autowired</span>    <span class="keyword">private</span> StatisticsDailyService staService;    <span class="comment">// 0/5 * * * * ?è¡¨ç¤ºæ¯éš”5ç§’æ‰§è¡Œä¸€æ¬¡è¿™ä¸ªæ–¹æ³•    @Scheduled(cron = &quot;0/5 * * * * ?&quot;)    public void task1() &#123;        System.out.println(&quot;**************task1æ‰§è¡Œäº†..&quot;);    &#125;    //åœ¨æ¯å¤©å‡Œæ™¨1ç‚¹ï¼ŒæŠŠå‰ä¸€å¤©æ•°æ®è¿›è¡Œæ•°æ®æŸ¥è¯¢æ·»åŠ     @Scheduled(cron = &quot;0 0 1 * * ?&quot;)    public void task2() &#123;        staService.countRegister(DateUtil.formatDate(DateUtil.addDays(new Date(), -1)));    &#125;&#125;</span></span><br></pre></td></tr></table></figure><h4 id="æ—¥æœŸå·¥å…·ç±»"><a href="#æ—¥æœŸå·¥å…·ç±»" class="headerlink" title="æ—¥æœŸå·¥å…·ç±»"></a>æ—¥æœŸå·¥å…·ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateUtil</span> </span>&#123;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String dateFormat = <span class="string">&quot;yyyy-MM-dd&quot;</span>;    <span class="comment">/**     * æ ¼å¼åŒ–æ—¥æœŸ     *     * <span class="doctag">@param</span> date     * <span class="doctag">@return</span>     */</span>    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">formatDate</span><span class="params">(Date date)</span> </span>&#123;        SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(dateFormat);        <span class="keyword">return</span> sdf.format(date);    &#125;    <span class="comment">/**     * åœ¨æ—¥æœŸdateä¸Šå¢åŠ amountå¤© ã€‚     *     * <span class="doctag">@param</span> date   å¤„ç†çš„æ—¥æœŸï¼Œénull     * <span class="doctag">@param</span> amount è¦åŠ çš„å¤©æ•°ï¼Œå¯èƒ½ä¸ºè´Ÿæ•°     */</span>    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Date <span class="title">addDays</span><span class="params">(Date date, <span class="keyword">int</span> amount)</span> </span>&#123;        Calendar now =Calendar.getInstance();        now.setTime(date);        now.set(Calendar.DATE,now.get(Calendar.DATE)+amount);        <span class="keyword">return</span> now.getTime();    &#125;    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;        System.out.println(DateUtil.formatDate(<span class="keyword">new</span> Date()));        System.out.println(DateUtil.formatDate(DateUtil.addDays(<span class="keyword">new</span> Date(), -<span class="number">1</span>)));    &#125;&#125;</span><br></pre></td></tr></table></figure><h2 id="ç»Ÿè®¡åˆ†æå›¾è¡¨æ˜¾ç¤ºï¼ˆåç«¯-å‰ç«¯ï¼‰"><a href="#ç»Ÿè®¡åˆ†æå›¾è¡¨æ˜¾ç¤ºï¼ˆåç«¯-å‰ç«¯ï¼‰" class="headerlink" title="ç»Ÿè®¡åˆ†æå›¾è¡¨æ˜¾ç¤ºï¼ˆåç«¯+å‰ç«¯ï¼‰"></a>ç»Ÿè®¡åˆ†æå›¾è¡¨æ˜¾ç¤ºï¼ˆåç«¯+å‰ç«¯ï¼‰</h2><blockquote><p>ä½¿ç”¨echarts</p></blockquote><h3 id="åç«¯"><a href="#åç«¯" class="headerlink" title="åç«¯"></a>åç«¯</h3><h4 id="controller"><a href="#controller" class="headerlink" title="controller"></a>controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// echatrtså›¾è¡¨æ˜¾ç¤º@GetMapping(&quot;showChartData/&#123;type&#125;/&#123;begin&#125;/&#123;end&#125;&quot;)public R getChartData(@PathVariable String begin, @PathVariable String end, @PathVariable String type) &#123;    Map&lt;String, Object&gt; map = staService.getChartData(type, begin, end);    return R.ok().data(map);&#125;</span></span><br></pre></td></tr></table></figure><h4 id="service"><a href="#service" class="headerlink" title="service"></a>service</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// echatrtså›¾è¡¨æ˜¾ç¤º@Overridepublic Map&lt;String, Object&gt; getChartData(String type, String begin, String end) &#123;    // æŒ‡å®šæ—¥æœŸèŒƒå›´    QueryWrapper&lt;StatisticsDaily&gt; wrapper = new QueryWrapper&lt;&gt;();    wrapper.between(&quot;date_calculated&quot;, begin, end);    // è¿™é‡Œè¦æ±‚å‰ç«¯çš„ä¼ é€’çš„valueå’Œè¡¨ä¸­å¯¹åº”å­—æ®µå€¼ç›¸åŒï¼ŒselectæŒ‡å®šæŸ¥è¯¢åˆ—    wrapper.select(&quot;date_calculated&quot;, type);    List&lt;StatisticsDaily&gt; staDataList = baseMapper.selectList(wrapper);    //å‰ç«¯è¦æ±‚æ•°ç»„jsonç»“æ„ï¼Œå¯¹åº”åç«¯javaä»£ç æ˜¯listé›†åˆ    //åˆ›å»ºä¸¤ä¸ªlisté›†åˆï¼Œä¸€ä¸ªæ—¥æœŸlistï¼Œä¸€ä¸ªæ•°é‡list    List&lt;String&gt; dateList = new ArrayList&lt;&gt;();    List&lt;Integer&gt; numList = new ArrayList&lt;&gt;();    //éå†æŸ¥è¯¢æ‰€æœ‰æ•°æ®listé›†åˆï¼Œè¿›è¡Œå°è£…    for (int i = 0; i &lt; staDataList.size(); i++) &#123;        StatisticsDaily daily = staDataList.get(i);        //å°è£…æ—¥æœŸlisté›†åˆ        dateList.add(daily.getDateCalculated());        //å°è£…å¯¹åº”é€‰æ‹©çš„æ•°é‡        switch (type) &#123;            case &quot;login_num&quot;:                numList.add(daily.getLoginNum());                break;            case &quot;register_num&quot;:                numList.add(daily.getRegisterNum());                break;            case &quot;video_view_num&quot;:                numList.add(daily.getVideoViewNum());                break;            case &quot;course_num&quot;:                numList.add(daily.getCourseNum());                break;            default:                break;        &#125;    &#125;    //æŠŠå°è£…ä¹‹åä¸¤ä¸ªlisté›†åˆæ”¾åˆ°mapé›†åˆï¼Œè¿›è¡Œè¿”å›    Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();    map.put(&quot;dateList&quot;, dateList);    map.put(&quot;numList&quot;, numList);    return map;&#125;</span></span><br></pre></td></tr></table></figure><h3 id="å‰ç«¯"><a href="#å‰ç«¯" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h3><h4 id="å¼•å…¥npmä¾èµ–"><a href="#å¼•å…¥npmä¾èµ–" class="headerlink" title="å¼•å…¥npmä¾èµ–"></a>å¼•å…¥npmä¾èµ–</h4><blockquote><p>npm install â€“save <a href="mailto:&#x65;&#99;&#104;&#x61;&#114;&#x74;&#115;&#64;&#52;&#46;&#x31;&#x2e;&#x30;">&#x65;&#99;&#104;&#x61;&#114;&#x74;&#115;&#64;&#52;&#46;&#x31;&#x2e;&#x30;</a></p></blockquote><h4 id="api-1"><a href="#api-1" class="headerlink" title="api"></a>api</h4><blockquote><p>è¿™é‡Œæ²¡æœ‰ä½¿ç”¨RequestBodyä¼ é€’å¯¹è±¡ï¼Œè€Œæ˜¯ç›´æ¥å‰ç«¯è°ƒç”¨çš„æ—¶å€™ä¼ é€’å¯¹è±¡å–å¯¹åº”å€¼</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å¾—å›¾è¡¨æ•°æ®    getChartData(searchObj) &#123;        return request(&#123;            url: `/staservice/sta/getChartData/$&#123;searchObj.type&#125;/$&#123;searchObj.begin&#125;/$&#123;searchObj.end&#125;`,            method: &#x27;get&#x27;        &#125;)    &#125;</span></span><br></pre></td></tr></table></figure><h4 id="vueæ¨¡æ¿å’Œæ–¹æ³•"><a href="#vueæ¨¡æ¿å’Œæ–¹æ³•" class="headerlink" title="vueæ¨¡æ¿å’Œæ–¹æ³•"></a>vueæ¨¡æ¿å’Œæ–¹æ³•</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;  &lt;div class=&quot;app-container&quot;&gt;    &lt;!--è¡¨å•--&gt;    &lt;el-form :inline=&quot;true&quot; class=&quot;demo-form-inline&quot;&gt;      &lt;el-form-item&gt;        &lt;el-select v-model=&quot;searchObj.type&quot; clearable placeholder=&quot;è¯·é€‰æ‹©&quot;&gt;          &lt;el-option label=&quot;å­¦å‘˜ç™»å½•æ•°ç»Ÿè®¡&quot; value=&quot;login_num&quot; /&gt;          &lt;el-option label=&quot;å­¦å‘˜æ³¨å†Œæ•°ç»Ÿè®¡&quot; value=&quot;register_num&quot; /&gt;          &lt;el-option label=&quot;è¯¾ç¨‹æ’­æ”¾æ•°ç»Ÿè®¡&quot; value=&quot;video_view_num&quot; /&gt;          &lt;el-option label=&quot;æ¯æ—¥è¯¾ç¨‹æ•°ç»Ÿè®¡&quot; value=&quot;course_num&quot; /&gt;        &lt;/el-select&gt;      &lt;/el-form-item&gt;      &lt;el-form-item&gt;        &lt;el-date-picker          v-model=&quot;searchObj.begin&quot;          type=&quot;date&quot;          placeholder=&quot;é€‰æ‹©å¼€å§‹æ—¥æœŸ&quot;          value-format=&quot;yyyy-MM-dd&quot;        /&gt;      &lt;/el-form-item&gt;      &lt;el-form-item&gt;        &lt;el-date-picker          v-model=&quot;searchObj.end&quot;          type=&quot;date&quot;          placeholder=&quot;é€‰æ‹©æˆªæ­¢æ—¥æœŸ&quot;          value-format=&quot;yyyy-MM-dd&quot;        /&gt;      &lt;/el-form-item&gt;      &lt;el-button        :disabled=&quot;btnDisabled&quot;        type=&quot;primary&quot;        icon=&quot;el-icon-search&quot;        @click=&quot;showChart()&quot;        &gt;æŸ¥è¯¢&lt;/el-button      &gt;    &lt;/el-form&gt;    &lt;div class=&quot;chart-container&quot;&gt;      &lt;div id=&quot;chart&quot; class=&quot;chart&quot; style=&quot;height: 500px; width: 100%&quot; /&gt;    &lt;/div&gt;  &lt;/div&gt;&lt;/template&gt;&lt;script&gt;  import echarts from &#x27;echarts&#x27;  import staApi from &#x27;@/api/statistics&#x27;  export default &#123;    data() &#123;      return &#123;        searchObj: &#123;&#125;,        btnDisabled: false,        xData: [],        yData: []      &#125;    &#125;,    methods: &#123;      showChart() &#123;        staApi.getChartData(this.searchObj).then(result =&gt; &#123;          this.yData = result.data.numList          this.xData = result.data.dateList          // è°ƒç”¨ä¸‹é¢ç”Ÿæˆå›¾è¡¨çš„æ–¹æ³•ï¼Œæ”¹å˜å€¼          this.setChart()        &#125;)      &#125;,      // é»˜è®¤æ˜¾ç¤ºå›¾è¡¨æ–¹æ³•      setChart() &#123;        // åŸºäºå‡†å¤‡å¥½çš„domï¼Œåˆå§‹åŒ–echartså®ä¾‹        this.chart = echarts.init(document.getElementById(&#x27;chart&#x27;))        // console.log(this.chart)        // æŒ‡å®šå›¾è¡¨çš„é…ç½®é¡¹å’Œæ•°æ®        var option = &#123;          title: &#123;            text: &#x27;æ•°æ®ç»Ÿè®¡&#x27;          &#125;,          tooltip: &#123;            trigger: &#x27;axis&#x27;          &#125;,          dataZoom: [            &#123;              show: true,              height: 30,              xAxisIndex: [0],              bottom: 30,              start: 10,              end: 80,              handleIcon:                &#x27;path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z&#x27;,              handleSize: &#x27;110%&#x27;,              handleStyle: &#123;                color: &#x27;#d3dee5&#x27;              &#125;,              textStyle: &#123;                color: &#x27;#fff&#x27;              &#125;,              borderColor: &#x27;#90979c&#x27;            &#125;,            &#123;              type: &#x27;inside&#x27;,              show: true,              height: 15,              start: 1,              end: 35            &#125;          ],          // xè½´æ˜¯ç±»ç›®è½´ï¼ˆç¦»æ•£æ•°æ®ï¼‰,å¿…é¡»é€šè¿‡dataè®¾ç½®ç±»ç›®æ•°æ®          xAxis: &#123;            type: &#x27;category&#x27;,            data: this.xData          &#125;,          // yè½´æ˜¯æ•°æ®è½´ï¼ˆè¿ç»­æ•°æ®ï¼‰          yAxis: &#123;            type: &#x27;value&#x27;          &#125;,          // ç³»åˆ—åˆ—è¡¨ã€‚æ¯ä¸ªç³»åˆ—é€šè¿‡ type å†³å®šè‡ªå·±çš„å›¾è¡¨ç±»å‹          series: [            &#123;              // ç³»åˆ—ä¸­çš„æ•°æ®å†…å®¹æ•°ç»„              data: this.yData,              // æŠ˜çº¿å›¾              type: &#x27;line&#x27;            &#125;          ]        &#125;        this.chart.setOption(option)      &#125;    &#125;  &#125;&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="Canalæ•°æ®åŒæ­¥"><a href="#Canalæ•°æ®åŒæ­¥" class="headerlink" title="Canalæ•°æ®åŒæ­¥"></a>Canalæ•°æ®åŒæ­¥</h2><blockquote><p>å°†è¿œç¨‹æ•°æ®åº“ä¸­çš„æ•°æ®åŒæ­¥åˆ°æœ¬åœ°æ•°æ®åº“ä¸­ï¼Œä¸€èˆ¬å®é™…ä¸­é¡¹ç›®æœ‰å¾ˆå¤šä¸ªæ•°æ®åº“ï¼ˆæ¯”å¦‚è¯´ç»Ÿè®¡åˆ†æä¸“é—¨ä¸€ä¸ªæ•°æ®åº“ï¼‰ï¼Œå…¶ä¸è¿œç¨‹æœåŠ¡è°ƒç”¨è°ƒç”¨çš„åŒºåˆ«æ˜¯ï¼Œè¯¥åŒæ­¥è€¦åˆåº¦ä½ï¼Œæ•ˆç‡æ›´é«˜ã€‚</p></blockquote><h3 id="linuxé…ç½®ä¸å¼€å¯"><a href="#linuxé…ç½®ä¸å¼€å¯" class="headerlink" title="linuxé…ç½®ä¸å¼€å¯"></a>linuxé…ç½®ä¸å¼€å¯</h3><blockquote><ol><li>linuxä¸­éœ€è¦å®‰è£…mysqlï¼ˆæœ¬åœ°Windowsä¹Ÿéœ€è¦mysqlï¼‰</li><li>åˆ›å»ºæ•°æ®åº“è¡¨ï¼ˆç»“æ„éœ€è¦ä¸€æ ·ï¼‰</li></ol></blockquote><h4 id="linuxä¸­dockerä¸­ä½¿ç”¨mysqlä¸€äº›å¸¸è§å‘½ä»¤"><a href="#linuxä¸­dockerä¸­ä½¿ç”¨mysqlä¸€äº›å¸¸è§å‘½ä»¤" class="headerlink" title="linuxä¸­dockerä¸­ä½¿ç”¨mysqlä¸€äº›å¸¸è§å‘½ä»¤"></a>linuxä¸­dockerä¸­ä½¿ç”¨mysqlä¸€äº›å¸¸è§å‘½ä»¤</h4><blockquote><ol><li>su root</li><li>docker ps</li><li>docker start mysql</li><li>docker exec -it mysql bash</li><li>mysql -u root -p</li><li>å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨é…å¥½çš„Navicatï¼ˆå®æˆ˜5ä¸­é…ç½®redisçš„æ—¶å€™å·²ç»é…ç½®å¥½äº†mysqlï¼‰</li><li>exit</li><li>docker stop CONTAINER ID</li></ol></blockquote><h4 id="åˆ›å»ºæ•°æ®åº“è¡¨"><a href="#åˆ›å»ºæ•°æ®åº“è¡¨" class="headerlink" title="åˆ›å»ºæ•°æ®åº“è¡¨"></a>åˆ›å»ºæ•°æ®åº“è¡¨</h4><blockquote><p>æ•°æ®åº“guliï¼Œè¡¨test_canal</p><p>æ³¨æ„ç»“æ„éœ€è¦ä¸€æ ·</p></blockquote><h4 id="mysqlå¼€å¯binlog"><a href="#mysqlå¼€å¯binlog" class="headerlink" title="mysqlå¼€å¯binlog"></a>mysqlå¼€å¯binlog</h4><blockquote><ol><li>å¼€å¯å¹¶è¿›å…¥mysql</li><li>show variables like â€˜log_binâ€™;  æŸ¥è¯¢æ˜¯å¦å¼€å¯binlog</li><li>ä¿®æ”¹my.cnfï¼ˆå¦‚æœä½¿ç”¨dockerï¼Œé‚£ä¹ˆè¦å»æŒ‚è½½çš„ç›®å½•ä¸‹ä¿®æ”¹ï¼‰ï¼Œå…·ä½“å¦‚ä¸‹ç¯‡æ–‡ç« </li><li><a href="https://www.freebytes.net/it/java/dokcer-mysql-binlog.htmlz">https://www.freebytes.net/it/java/dokcer-mysql-binlog.htmlz</a></li></ol><p>è¿™é‡ŒèŠ±äº†å¤§æ¦‚åŠä¸ªå°æ—¶å§ï¼Œè¿˜æ˜¯ä¸ªäººåšå®¢æ–‡ç« é è°±ï¼Œé‚£äº›CSDNçš„æ–‡ç« éƒ½æ˜¯ç‚’æ¥ç‚’å»çš„ï¼Œè¿™ç¯‡æ–‡ç« å¾ˆæ¸…æ¥šåœ°è®²äº†ä½ æŒ‚è½½çš„ç›®å½•æ˜¯å‰åŠéƒ¨åˆ†ï¼ˆæˆ‘çœ‹CSDNé‚£äº›æ–‡ç« æ€»ä»¥ä¸ºæ˜¯é…ç½®æŒ‚è½½çš„æ—¶å€™çš„ååŠéƒ¨åˆ†ï¼Œæ‰€ä»¥å¼„äº†å¥½ä¹…éƒ½æ²¡æœ‰ç”¨ï¼Œçœ‹äº†è¿™ç¯‡æ–‡ç« å‡ åˆ†é’Ÿå°±è§£å†³äº†ï¼‰</p></blockquote><h4 id="å®‰è£…å¹¶é…ç½®canal"><a href="#å®‰è£…å¹¶é…ç½®canal" class="headerlink" title="å®‰è£…å¹¶é…ç½®canal"></a>å®‰è£…å¹¶é…ç½®canal</h4><blockquote><p>linuxä¸­ä¸‹è½½ç„¶åè§£å‹</p><p>å…·ä½“é…ç½®è§è§†é¢‘</p><p>å¼€å¯canalå³å¯ï¼Œè¿›å…¥binæ–‡ä»¶å¤¹ä¸‹sh startup.sh</p></blockquote><h3 id="å®¢æˆ·ç«¯ä»£ç ç¼–å†™"><a href="#å®¢æˆ·ç«¯ä»£ç ç¼–å†™" class="headerlink" title="å®¢æˆ·ç«¯ä»£ç ç¼–å†™"></a>å®¢æˆ·ç«¯ä»£ç ç¼–å†™</h3><blockquote><p>åˆ›å»ºæ¨¡å—</p></blockquote><h4 id="å¼•å…¥ä¾èµ–"><a href="#å¼•å…¥ä¾èµ–" class="headerlink" title="å¼•å…¥ä¾èµ–"></a>å¼•å…¥ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--mysql--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-dbutils<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-dbutils<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.otter<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>canal.client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœåŠ¡ç«¯å£</span></span><br><span class="line"><span class="meta">server.port</span>=<span class="string">10000</span></span><br><span class="line"><span class="comment"># æœåŠ¡å</span></span><br><span class="line"><span class="meta">spring.application.name</span>=<span class="string">canal-client</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># ç¯å¢ƒè®¾ç½®ï¼šdevã€testã€prod</span></span><br><span class="line"><span class="meta">spring.profiles.active</span>=<span class="string">dev</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># mysqlæ•°æ®åº“è¿æ¥</span></span><br><span class="line"><span class="meta">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/guli?serverTimezone=GMT%2B8</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">123456789</span></span><br></pre></td></tr></table></figure><h4 id="canalå®¢æˆ·ç«¯ç±»"><a href="#canalå®¢æˆ·ç«¯ç±»" class="headerlink" title="canalå®¢æˆ·ç«¯ç±»"></a>canalå®¢æˆ·ç«¯ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CanalClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//sqlé˜Ÿåˆ—</span></span><br><span class="line">    <span class="keyword">private</span> Queue&lt;String&gt; SQL_QUEUE = <span class="keyword">new</span> ConcurrentLinkedQueue&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> DataSource dataSource;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * canalå…¥åº“æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        CanalConnector connector = CanalConnectors.newSingleConnector(<span class="keyword">new</span> InetSocketAddress(<span class="string">&quot;192.168.128.129&quot;</span>,</span><br><span class="line">                <span class="number">11111</span>), <span class="string">&quot;example&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="keyword">int</span> batchSize = <span class="number">1000</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connector.connect();</span><br><span class="line">            connector.subscribe(<span class="string">&quot;.*\\..*&quot;</span>);</span><br><span class="line">            connector.rollback();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                    <span class="comment">//å°è¯•ä»masteré‚£è¾¹æ‹‰å»æ•°æ®batchSizeæ¡è®°å½•ï¼Œæœ‰å¤šå°‘å–å¤šå°‘</span></span><br><span class="line">                    Message message = connector.getWithoutAck(batchSize);</span><br><span class="line">                    <span class="keyword">long</span> batchId = message.getId();</span><br><span class="line">                    <span class="keyword">int</span> size = message.getEntries().size();</span><br><span class="line">                    <span class="keyword">if</span> (batchId == -<span class="number">1</span> || size == <span class="number">0</span>) &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        dataHandle(message.getEntries());</span><br><span class="line">                    &#125;</span><br><span class="line">                    connector.ack(batchId);</span><br><span class="line"></span><br><span class="line">                    <span class="comment">//å½“é˜Ÿåˆ—é‡Œé¢å †ç§¯çš„sqlå¤§äºä¸€å®šæ•°å€¼çš„æ—¶å€™å°±æ¨¡æ‹Ÿæ‰§è¡Œ</span></span><br><span class="line">                    <span class="keyword">if</span> (SQL_QUEUE.size() &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">                        executeQueueSql();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InvalidProtocolBufferException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            connector.disconnect();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¨¡æ‹Ÿæ‰§è¡Œé˜Ÿåˆ—é‡Œé¢çš„sqlè¯­å¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">executeQueueSql</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> size = SQL_QUEUE.size();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">            String sql = SQL_QUEUE.poll();</span><br><span class="line">            System.out.println(<span class="string">&quot;[sql]----&gt; &quot;</span> + sql);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">this</span>.execute(sql.toString());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ•°æ®å¤„ç†</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entrys</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dataHandle</span><span class="params">(List&lt;Entry&gt; entrys)</span> <span class="keyword">throws</span> InvalidProtocolBufferException </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (Entry entry : entrys) &#123;</span><br><span class="line">            <span class="keyword">if</span> (EntryType.ROWDATA == entry.getEntryType()) &#123;</span><br><span class="line">                RowChange rowChange = RowChange.parseFrom(entry.getStoreValue());</span><br><span class="line">                EventType eventType = rowChange.getEventType();</span><br><span class="line">                <span class="keyword">if</span> (eventType == EventType.DELETE) &#123;</span><br><span class="line">                    saveDeleteSql(entry);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (eventType == EventType.UPDATE) &#123;</span><br><span class="line">                    saveUpdateSql(entry);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (eventType == EventType.INSERT) &#123;</span><br><span class="line">                    saveInsertSql(entry);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¿å­˜æ›´æ–°è¯­å¥</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entry</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">saveUpdateSql</span><span class="params">(Entry entry)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            RowChange rowChange = RowChange.parseFrom(entry.getStoreValue());</span><br><span class="line">            List&lt;RowData&gt; rowDatasList = rowChange.getRowDatasList();</span><br><span class="line">            <span class="keyword">for</span> (RowData rowData : rowDatasList) &#123;</span><br><span class="line">                List&lt;Column&gt; newColumnList = rowData.getAfterColumnsList();</span><br><span class="line">                StringBuffer sql = <span class="keyword">new</span> StringBuffer(<span class="string">&quot;update &quot;</span> + entry.getHeader().getTableName() + <span class="string">&quot; set &quot;</span>);</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; newColumnList.size(); i++) &#123;</span><br><span class="line">                    sql.append(<span class="string">&quot; &quot;</span> + newColumnList.get(i).getName()</span><br><span class="line">                            + <span class="string">&quot; = &#x27;&quot;</span> + newColumnList.get(i).getValue() + <span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">                    <span class="keyword">if</span> (i != newColumnList.size() - <span class="number">1</span>) &#123;</span><br><span class="line">                        sql.append(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                sql.append(<span class="string">&quot; where &quot;</span>);</span><br><span class="line">                List&lt;Column&gt; oldColumnList = rowData.getBeforeColumnsList();</span><br><span class="line">                <span class="keyword">for</span> (Column column : oldColumnList) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (column.getIsKey()) &#123;</span><br><span class="line">                        <span class="comment">//æš‚æ—¶åªæ”¯æŒå•ä¸€ä¸»é”®</span></span><br><span class="line">                        sql.append(column.getName() + <span class="string">&quot;=&quot;</span> + column.getValue());</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                SQL_QUEUE.add(sql.toString());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InvalidProtocolBufferException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¿å­˜åˆ é™¤è¯­å¥</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entry</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">saveDeleteSql</span><span class="params">(Entry entry)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            RowChange rowChange = RowChange.parseFrom(entry.getStoreValue());</span><br><span class="line">            List&lt;RowData&gt; rowDatasList = rowChange.getRowDatasList();</span><br><span class="line">            <span class="keyword">for</span> (RowData rowData : rowDatasList) &#123;</span><br><span class="line">                List&lt;Column&gt; columnList = rowData.getBeforeColumnsList();</span><br><span class="line">                StringBuffer sql = <span class="keyword">new</span> StringBuffer(<span class="string">&quot;delete from &quot;</span> + entry.getHeader().getTableName() + <span class="string">&quot; where &quot;</span>);</span><br><span class="line">                <span class="keyword">for</span> (Column column : columnList) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (column.getIsKey()) &#123;</span><br><span class="line">                        <span class="comment">//æš‚æ—¶åªæ”¯æŒå•ä¸€ä¸»é”®</span></span><br><span class="line">                        sql.append(column.getName() + <span class="string">&quot;=&quot;</span> + column.getValue());</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                SQL_QUEUE.add(sql.toString());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InvalidProtocolBufferException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¿å­˜æ’å…¥è¯­å¥</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entry</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">saveInsertSql</span><span class="params">(Entry entry)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            RowChange rowChange = RowChange.parseFrom(entry.getStoreValue());</span><br><span class="line">            List&lt;RowData&gt; rowDatasList = rowChange.getRowDatasList();</span><br><span class="line">            <span class="keyword">for</span> (RowData rowData : rowDatasList) &#123;</span><br><span class="line">                List&lt;Column&gt; columnList = rowData.getAfterColumnsList();</span><br><span class="line">                StringBuffer sql = <span class="keyword">new</span> StringBuffer(<span class="string">&quot;insert into &quot;</span> + entry.getHeader().getTableName() + <span class="string">&quot; (&quot;</span>);</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; columnList.size(); i++) &#123;</span><br><span class="line">                    sql.append(columnList.get(i).getName());</span><br><span class="line">                    <span class="keyword">if</span> (i != columnList.size() - <span class="number">1</span>) &#123;</span><br><span class="line">                        sql.append(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                sql.append(<span class="string">&quot;) VALUES (&quot;</span>);</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; columnList.size(); i++) &#123;</span><br><span class="line">                    sql.append(<span class="string">&quot;&#x27;&quot;</span> + columnList.get(i).getValue() + <span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">                    <span class="keyword">if</span> (i != columnList.size() - <span class="number">1</span>) &#123;</span><br><span class="line">                        sql.append(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                sql.append(<span class="string">&quot;)&quot;</span>);</span><br><span class="line">                SQL_QUEUE.add(sql.toString());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InvalidProtocolBufferException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å…¥åº“</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sql</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(String sql)</span> </span>&#123;</span><br><span class="line">        Connection con = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">null</span> == sql) <span class="keyword">return</span>;</span><br><span class="line">            con = dataSource.getConnection();</span><br><span class="line">            QueryRunner qr = <span class="keyword">new</span> QueryRunner();</span><br><span class="line">            <span class="keyword">int</span> row = qr.execute(con, sql);</span><br><span class="line">            System.out.println(<span class="string">&quot;update: &quot;</span> + row);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            DbUtils.closeQuietly(con);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨ç±»"><a href="#å¯åŠ¨ç±»" class="headerlink" title="å¯åŠ¨ç±»"></a>å¯åŠ¨ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CanalApplication</span> <span class="keyword">implements</span> <span class="title">CommandLineRunner</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> CanalClient canalClient;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(CanalApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String... strings)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//é¡¹ç›®å¯åŠ¨ï¼Œæ‰§è¡Œcanalå®¢æˆ·ç«¯ç›‘å¬</span></span><br><span class="line">        canalClient.run();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><blockquote><p>TODOï¼Œè¿™é‡Œapplicationå¯åŠ¨å¤±è´¥ï¼Œå»canalçš„logé‡Œçœ‹ï¼Œè¯´è¿æ¥mysqlçš„ipå¤±è´¥äº†ï¼ŒåŸå› æ˜¯address already in use,</p><p>ç„¶åæˆ‘æ”¹äº†é‡å¯è¿˜æ˜¯è¿™ä¸ªåŸå› ï¼Œæœ¬æ¥æ²¡æœ‰è¢«å ç”¨çš„ç«¯å£å¯åŠ¨äº†ä¹‹åå°±è¢«å ç”¨äº†ï¼Œä½†æ˜¯canalè¿˜æ˜¯å¯åŠ¨å¤±è´¥ï¼Œå°±ç¦»è°±ï¼Œ</p><p>æ€»ä¹‹åŸå› æ˜¯canalæ²¡æœ‰å¯åŠ¨ï¼Œaddress already in use</p><p>è¿˜æ˜¯æ²¡è§£å†³ï¼Œæ”¾å¼ƒäº†ï¼ˆæˆ‘ä¸ç†è§£ï¼ï¼ï¼ï¼‰</p></blockquote><h2 id="SpringCloudå¾®æœåŠ¡"><a href="#SpringCloudå¾®æœåŠ¡" class="headerlink" title="SpringCloudå¾®æœåŠ¡"></a>SpringCloudå¾®æœåŠ¡</h2><h3 id="Gatewayç½‘å…³"><a href="#Gatewayç½‘å…³" class="headerlink" title="Gatewayç½‘å…³"></a>Gatewayç½‘å…³</h3><h4 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h4><blockquote><p>å¾®æœåŠ¡æ¶æ„ä¹‹ä¸‹ä¸åŒçš„å¾®æœåŠ¡æœ‰ä¸åŒçš„ç½‘ç»œåœ°å€ï¼Œå¤–éƒ¨å®¢æˆ·ç«¯éœ€è¦è°ƒç”¨å¤šä¸ªæœåŠ¡çš„æ¥å£æ‰èƒ½å®Œæˆä¸€ä¸ªä¸šåŠ¡éœ€æ±‚ï¼Œä½†æ˜¯å¦‚æœç›´æ¥è®©å®¢æˆ·ç«¯ä¸å„ä¸ªæœåŠ¡å™¨é€šä¿¡ï¼Œä¼šå‡ºç°è®¸å¤šé—®é¢˜ï¼Œæ‰€ä»¥è¿™äº›é—®é¢˜éœ€è¦å€ŸåŠ©APIç½‘å…³è§£å†³ã€‚</p><p>ç½‘å…³æ˜¯ç»“ä½™å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´çš„ä¹‹é—´å±‚ï¼Œæ‰€æœ‰å¤–éƒ¨è¯·æ±‚éƒ½ä¼šå…ˆç»è¿‡APIç½‘å…³è¿™ä¸€å±‚ï¼Œæ‰€ä»¥ç½‘å…³å®ç°å®‰å…¨ï¼Œæ€§èƒ½ï¼Œç›‘æ§ç­‰æ“ä½œã€‚</p><p>å°±æ˜¯ä¹‹å‰çš„nginxçš„å¢å¼ºç‰ˆ</p></blockquote><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20211006164431906.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20211006164431906.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211006164431906"></p><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20211006171309513.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20211006171309513.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211006171309513"></p><h4 id="åˆ›å»ºæ¨¡å—"><a href="#åˆ›å»ºæ¨¡å—" class="headerlink" title="åˆ›å»ºæ¨¡å—"></a>åˆ›å»ºæ¨¡å—</h4><blockquote><p>åˆ›å»ºæ¨¡å—infrastructureï¼Œå­æ¨¡å—api_gateway</p></blockquote><h4 id="ä¾èµ–"><a href="#ä¾èµ–" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>common_utils<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--gson--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.code.gson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æœåŠ¡è°ƒç”¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="é…ç½®æ–‡ä»¶-1"><a href="#é…ç½®æ–‡ä»¶-1" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h4><blockquote><p>é…ç½®æœåŠ¡æŒ‰å¦‚ä¸‹é…ç½®å³å¯</p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨YAMLæ ¼å¼ï¼Œæ›´æ–¹ä¾¿ä¸ç”¨å†™ä¸‹æ ‡</p></blockquote><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœåŠ¡ç«¯å£</span></span><br><span class="line"><span class="meta">server.port</span>=<span class="string">8222</span></span><br><span class="line"><span class="comment"># æœåŠ¡å</span></span><br><span class="line"><span class="meta">spring.application.name</span>=<span class="string">service-gateway</span></span><br><span class="line"><span class="comment"># nacosæœåŠ¡åœ°å€</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.discovery.server-addr</span>=<span class="string">127.0.0.1:8848</span></span><br><span class="line"><span class="comment">#ä½¿ç”¨æœåŠ¡å‘ç°è·¯ç”±</span></span><br><span class="line"><span class="meta">spring.cloud.gateway.discovery.locator.enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="comment">#è®¾ç½®è·¯ç”±id</span></span><br><span class="line"><span class="meta">spring.cloud.gateway.routes[0].id</span>=<span class="string">service-acl</span></span><br><span class="line"><span class="comment">#è®¾ç½®è·¯ç”±çš„uri   lb://nacosæ³¨å†ŒæœåŠ¡åç§°</span></span><br><span class="line"><span class="meta">spring.cloud.gateway.routes[0].uri</span>=<span class="string">lb://service-acl</span></span><br><span class="line"><span class="comment">#è®¾ç½®è·¯ç”±æ–­è¨€,ä»£ç†servicerIdä¸ºauth-serviceçš„/auth/è·¯å¾„</span></span><br><span class="line"><span class="meta">spring.cloud.gateway.routes[0].predicates</span>=<span class="string">Path=/*/acl/**</span></span><br><span class="line"><span class="comment">#é…ç½®service-eduæœåŠ¡</span></span><br><span class="line"><span class="meta">spring.cloud.gateway.routes[1].id</span>=<span class="string">service-edu</span></span><br><span class="line"><span class="meta">spring.cloud.gateway.routes[1].uri</span>=<span class="string">lb://service-edu</span></span><br><span class="line"><span class="meta">spring.cloud.gateway.routes[1].predicates</span>=<span class="string">Path=/eduservice/**</span></span><br><span class="line"><span class="comment">#é…ç½®service-eduæœåŠ¡</span></span><br><span class="line"><span class="meta">spring.cloud.gateway.routes[2].id</span>=<span class="string">service-msm</span></span><br><span class="line"><span class="meta">spring.cloud.gateway.routes[2].uri</span>=<span class="string">lb://service-msm</span></span><br><span class="line"><span class="meta">spring.cloud.gateway.routes[2].predicates</span>=<span class="string">Path=/edumsm/**</span></span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨ç±»-1"><a href="#å¯åŠ¨ç±»-1" class="headerlink" title="å¯åŠ¨ç±»"></a>å¯åŠ¨ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span><span class="comment">//nacos</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GatewayApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(GatewayApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æµ‹è¯•ï¼šä½¿ç”¨ç½‘å…³çš„ç«¯å£å·å³å¯è®¿é—®å·²é…ç½®çš„å¾®æœåŠ¡OK</p></blockquote><h4 id="è·¨åŸŸé—®é¢˜"><a href="#è·¨åŸŸé—®é¢˜" class="headerlink" title="è·¨åŸŸé—®é¢˜"></a>è·¨åŸŸé—®é¢˜</h4><blockquote><p>åœ¨ç½‘å…³ä¸­ç»Ÿä¸€å¼€å¯è·¨åŸŸï¼Œcvä¸€ä¸‹å›ºå®šconfigã€filterã€handler</p><p>æ³¨æ„controllerä¸­çš„è·¨åŸŸæ³¨è§£ä¸èƒ½æœ‰ï¼Œè¦ä¸ç„¶ä¸¤æ¬¡è·¨åŸŸæŠµæ¶ˆ</p></blockquote><h2 id="æƒé™ç®¡ç†ï¼ˆåç«¯ï¼‰"><a href="#æƒé™ç®¡ç†ï¼ˆåç«¯ï¼‰" class="headerlink" title="æƒé™ç®¡ç†ï¼ˆåç«¯ï¼‰"></a>æƒé™ç®¡ç†ï¼ˆåç«¯ï¼‰</h2><p>![07 æƒé™ç®¡ç†éœ€æ±‚](<a href="https://gitee.com/ReRia/images/raw/master/img/07">https://gitee.com/ReRia/images/raw/master/img/07</a> æƒé™ç®¡ç†éœ€æ±‚.png)</p><h3 id="ç¯å¢ƒæ­å»º-1"><a href="#ç¯å¢ƒæ­å»º-1" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h3><h4 id="æ¨¡å—"><a href="#æ¨¡å—" class="headerlink" title="æ¨¡å—"></a>æ¨¡å—</h4><blockquote><p>service_aclï¼Œspring_security</p></blockquote><h4 id="ä¾èµ–-1"><a href="#ä¾èµ–-1" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring_security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ•´åˆæ¥å£"><a href="#æ•´åˆæ¥å£" class="headerlink" title="æ•´åˆæ¥å£"></a>æ•´åˆæ¥å£</h4><blockquote><p>ç›´æ¥CVå¥½å®¶ä¼™ï¼Œå¥½åƒæ˜¯å› ä¸ºå¤ªå¤æ‚äº†å§ï¼Œæ²¡äº‹ä¸‹ä¸ªé¡¹ç›®è‡ªå·±åš</p></blockquote><h3 id="è·å–æ‰€æœ‰èœå•"><a href="#è·å–æ‰€æœ‰èœå•" class="headerlink" title="è·å–æ‰€æœ‰èœå•"></a>è·å–æ‰€æœ‰èœå•</h3><blockquote><p>é€’å½’ï¼Œæ„å»ºæ ‘å½¢ç»“æ„ï¼ˆæ³¨æ„èœå•å¯èƒ½æœ‰å¤šçº§ç»“æ„ï¼ˆä¹‹å‰åšè¿‡ä¸¤çº§çš„ï¼‰ï¼‰</p></blockquote><h4 id="entity"><a href="#entity" class="headerlink" title="entity"></a>entity</h4><blockquote><p>æ³¨æ„è¿™ä¸ªå®ä½“ç±»çš„å±æ€§ï¼Œä½¿ç”¨äº†é€’å½’å­˜å‚¨children</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Permission</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;ç¼–å·&quot;)</span></span><br><span class="line">    <span class="meta">@TableId(value = &quot;id&quot;, type = IdType.ID_WORKER_STR)</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;æ‰€å±ä¸Šçº§&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String pid;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;å±‚çº§&quot;)</span></span><br><span class="line">    <span class="meta">@TableField(exist = false)</span></span><br><span class="line">    <span class="keyword">private</span> Integer level;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;ä¸‹çº§&quot;)</span></span><br><span class="line">    <span class="meta">@TableField(exist = false)</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Permission&gt; children;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="controller-1"><a href="#controller-1" class="headerlink" title="controller"></a>controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/admin/acl/permission&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PermissionController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> PermissionService permissionService;</span><br><span class="line">    <span class="comment">//è·å–å…¨éƒ¨èœå•</span></span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;æŸ¥è¯¢æ‰€æœ‰èœå•&quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">indexAllPermission</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;Permission&gt; list =  permissionService.queryAllMenuGuli();</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">&quot;children&quot;</span>,list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="service-1"><a href="#service-1" class="headerlink" title="service"></a>service</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·å–å…¨éƒ¨èœå•</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Permission&gt; <span class="title">queryAllMenuGuli</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1 æŸ¥è¯¢èœå•è¡¨æ‰€æœ‰æ•°æ®</span></span><br><span class="line">    QueryWrapper&lt;Permission&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    wrapper.orderByDesc(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    List&lt;Permission&gt; permissionList = baseMapper.selectList(wrapper);</span><br><span class="line">    <span class="comment">//2 æŠŠæŸ¥è¯¢æ‰€æœ‰èœå•listé›†åˆæŒ‰ç…§è¦æ±‚è¿›è¡Œå°è£…</span></span><br><span class="line">    List&lt;Permission&gt; resultList = bulidPermission(permissionList);</span><br><span class="line">    <span class="keyword">return</span> resultList;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŠŠè¿”å›æ‰€æœ‰èœå•listé›†åˆè¿›è¡Œå°è£…çš„æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;Permission&gt; <span class="title">bulidPermission</span><span class="params">(List&lt;Permission&gt; permissionList)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ›å»ºlisté›†åˆï¼Œç”¨äºæ•°æ®æœ€ç»ˆå°è£…</span></span><br><span class="line">    List&lt;Permission&gt; finalNode = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="comment">//æŠŠæ‰€æœ‰èœå•listé›†åˆéå†ï¼Œå¾—åˆ°é¡¶å±‚èœå• pid=0èœå•ï¼Œè®¾ç½®levelæ˜¯1</span></span><br><span class="line">    <span class="keyword">for</span>(Permission permissionNode : permissionList) &#123;</span><br><span class="line">        <span class="comment">//å¾—åˆ°é¡¶å±‚èœå• pid=0èœå•</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;0&quot;</span>.equals(permissionNode.getPid())) &#123;</span><br><span class="line">            <span class="comment">//è®¾ç½®é¡¶å±‚èœå•çš„levelæ˜¯1</span></span><br><span class="line">            permissionNode.setLevel(<span class="number">1</span>);</span><br><span class="line">            <span class="comment">//æ ¹æ®é¡¶å±‚èœå•ï¼Œå‘é‡Œé¢è¿›è¡ŒæŸ¥è¯¢å­èœå•ï¼Œå°è£…åˆ°finalNodeé‡Œé¢</span></span><br><span class="line">            finalNode.add(selectChildren(permissionNode,permissionList));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> finalNode;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Permission <span class="title">selectChildren</span><span class="params">(Permission permissionNode, List&lt;Permission&gt; permissionList)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1 å› ä¸ºå‘ä¸€å±‚èœå•é‡Œé¢æ”¾äºŒå±‚èœå•ï¼ŒäºŒå±‚é‡Œé¢è¿˜è¦æ”¾ä¸‰å±‚ï¼ŒæŠŠå¯¹è±¡åˆå§‹åŒ–</span></span><br><span class="line">    permissionNode.setChildren(<span class="keyword">new</span> ArrayList&lt;Permission&gt;());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2 éå†æ‰€æœ‰èœå•listé›†åˆï¼Œè¿›è¡Œåˆ¤æ–­æ¯”è¾ƒï¼Œæ¯”è¾ƒidå’Œpidå€¼æ˜¯å¦ç›¸åŒ</span></span><br><span class="line">    <span class="keyword">for</span>(Permission it : permissionList) &#123;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­ idå’Œpidå€¼æ˜¯å¦ç›¸åŒ</span></span><br><span class="line">        <span class="keyword">if</span>(permissionNode.getId().equals(it.getPid())) &#123;</span><br><span class="line">            <span class="comment">//å½“å‰level=çˆ¶èœå•çš„levelå€¼+1</span></span><br><span class="line">            <span class="keyword">int</span> level = permissionNode.getLevel()+<span class="number">1</span>;</span><br><span class="line">            it.setLevel(level);</span><br><span class="line">            <span class="comment">//å¦‚æœchildrenä¸ºç©ºï¼Œè¿›è¡Œåˆå§‹åŒ–æ“ä½œ</span></span><br><span class="line">            <span class="comment">//if(permissionNode.getChildren() == null) &#123;</span></span><br><span class="line">            <span class="comment">//    permissionNode.setChildren(new ArrayList&lt;Permission&gt;());</span></span><br><span class="line">            <span class="comment">//&#125;</span></span><br><span class="line">            <span class="comment">//æŠŠæŸ¥è¯¢å‡ºæ¥çš„å­èœå•æ”¾åˆ°çˆ¶èœå•é‡Œé¢</span></span><br><span class="line">            permissionNode.getChildren().add(selectChildren(it,permissionList));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> permissionNode;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•-1"><a href="#æµ‹è¯•-1" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><blockquote><p>SwaggerConfigç±»ä¸­æœ‰ä¸€è¡Œä»£ç éœ€è¦æ³¨é‡Šæ‰èƒ½æµ‹è¯•,ï¼Œè¡¨ç¤ºè·¯å¾„ä¸­æœ‰è¿™ä¸ªå…³é”®å­—åˆ™ä¸è®©æµ‹è¯•ï¼Œå¯ä»¥æ³¨é‡Šæ‰è¿™è¡Œä»£ç ä¹Ÿå¯ä»¥ä¿®æ”¹controllerçš„è·¯å¾„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Docket <span class="title">webApiConfig</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">               .groupName(<span class="string">&quot;webApi&quot;</span>)</span><br><span class="line">               .apiInfo(webApiInfo())</span><br><span class="line">               .select()</span><br><span class="line">               <span class="comment">// .paths(Predicates.not(PathSelectors.regex(&quot;/admin/.*&quot;)))</span></span><br><span class="line">               .paths(Predicates.not(PathSelectors.regex(<span class="string">&quot;/error.*&quot;</span>)))</span><br><span class="line">               .build();</span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></blockquote><h3 id="åˆ é™¤èœå•"><a href="#åˆ é™¤èœå•" class="headerlink" title="åˆ é™¤èœå•"></a>åˆ é™¤èœå•</h3><blockquote><p>é€’å½’åˆ é™¤ï¼Œåˆ é™¤ä¸Šçº§èœå•ä¸‹çº§èœå•ä¹Ÿè¦åŒæ—¶åˆ é™¤</p></blockquote><h4 id="controller-2"><a href="#controller-2" class="headerlink" title="controller"></a>controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation(value = &quot;é€’å½’åˆ é™¤èœå•&quot;)</span></span><br><span class="line"><span class="meta">@DeleteMapping(&quot;remove/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">remove</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span> </span>&#123;</span><br><span class="line">    permissionService.removeChildByIdGuli(id);</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="service-2"><a href="#service-2" class="headerlink" title="service"></a>service</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//============é€’å½’åˆ é™¤èœå•==================================</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeChildByIdGuli</span><span class="params">(String id)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1 åˆ›å»ºlisté›†åˆï¼Œç”¨äºå°è£…æ‰€æœ‰åˆ é™¤èœå•idå€¼</span></span><br><span class="line">    List&lt;String&gt; idList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="comment">//2 å‘idListé›†åˆè®¾ç½®åˆ é™¤èœå•id</span></span><br><span class="line">    <span class="keyword">this</span>.selectPermissionChildById(id, idList);</span><br><span class="line">    <span class="comment">//æŠŠå½“å‰idå°è£…åˆ°listé‡Œé¢</span></span><br><span class="line">    idList.add(id);</span><br><span class="line">    baseMapper.deleteBatchIds(idList);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2 æ ¹æ®å½“å‰èœå•idï¼ŒæŸ¥è¯¢èœå•é‡Œé¢å­èœå•idï¼Œå°è£…åˆ°listé›†åˆ</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">selectPermissionChildById</span><span class="params">(String id, List&lt;String&gt; idList)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢èœå•é‡Œé¢å­èœå•id</span></span><br><span class="line">    QueryWrapper&lt;Permission&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    wrapper.eq(<span class="string">&quot;pid&quot;</span>, id);</span><br><span class="line">    wrapper.select(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    List&lt;Permission&gt; childIdList = baseMapper.selectList(wrapper);</span><br><span class="line">    <span class="comment">//æŠŠchildIdListé‡Œé¢èœå•idå€¼è·å–å‡ºæ¥ï¼Œå°è£…idListé‡Œé¢ï¼Œåšé€’å½’æŸ¥è¯¢</span></span><br><span class="line">    childIdList.stream().forEach(item -&gt; &#123;</span><br><span class="line">        <span class="comment">//å°è£…idListé‡Œé¢</span></span><br><span class="line">        idList.add(item.getId());</span><br><span class="line">        <span class="comment">//é€’å½’æŸ¥è¯¢</span></span><br><span class="line">        <span class="keyword">this</span>.selectPermissionChildById(item.getId(), idList);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è§’è‰²åˆ†é…æƒé™"><a href="#è§’è‰²åˆ†é…æƒé™" class="headerlink" title="è§’è‰²åˆ†é…æƒé™"></a>è§’è‰²åˆ†é…æƒé™</h3><h4 id="controller-3"><a href="#controller-3" class="headerlink" title="controller"></a>controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation(value = &quot;ç»™è§’è‰²åˆ†é…æƒé™&quot;)</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/doAssign&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">doAssign</span><span class="params">(String roleId,String[] permissionId)</span> </span>&#123;</span><br><span class="line">    permissionService.saveRolePermissionRealtionShipGuli(roleId,permissionId);</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="service-3"><a href="#service-3" class="headerlink" title="service"></a>service</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//=========================ç»™è§’è‰²åˆ†é…èœå•=======================</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveRolePermissionRealtionShipGuli</span><span class="params">(String roleId, String[] permissionIds)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//roleIdè§’è‰²id</span></span><br><span class="line">    <span class="comment">//permissionIdèœå•id æ•°ç»„å½¢å¼</span></span><br><span class="line">    <span class="comment">//1 åˆ›å»ºlisté›†åˆï¼Œç”¨äºå°è£…æ·»åŠ æ•°æ®</span></span><br><span class="line">    List&lt;RolePermission&gt; rolePermissionList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="comment">//éå†æ‰€æœ‰èœå•æ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span> (String perId : permissionIds) &#123;</span><br><span class="line">        <span class="comment">//RolePermissionå¯¹è±¡</span></span><br><span class="line">        RolePermission rolePermission = <span class="keyword">new</span> RolePermission();</span><br><span class="line">        rolePermission.setRoleId(roleId);</span><br><span class="line">        rolePermission.setPermissionId(perId);</span><br><span class="line">        <span class="comment">//å°è£…åˆ°listé›†åˆ</span></span><br><span class="line">        rolePermissionList.add(rolePermission);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ·»åŠ åˆ°è§’è‰²èœå•å…³ç³»è¡¨</span></span><br><span class="line">    rolePermissionService.saveBatch(rolePermissionList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="SpringSecurity"><a href="#SpringSecurity" class="headerlink" title="SpringSecurity"></a>SpringSecurity</h2><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><blockquote><p>spring-securityå®ç°åŠŸèƒ½å¦‚ä¸‹ï¼š</p><ol><li>ç”¨æˆ·è®¤è¯ï¼šç”¨æˆ·ç™»å½•æ—¶æŸ¥è¯¢æ•°æ®åº“éªŒè¯ç”¨æˆ·åå’Œå¯†ç </li><li>ç”¨æˆ·æˆæƒï¼šç™»å½•ä¹‹åç»™äºˆç”¨æˆ·å¯¹åº”çš„æƒé™å’Œæ“ä½œåŠŸèƒ½</li></ol><p>spring-securityæœ¬è´¨ä¸Šæ˜¯filterï¼Œå¯¹è¯·æ±‚è¿›è¡Œè¿‡æ»¤ï¼š</p><ul><li>åŸºäºsessionï¼Œåˆ™å¯¹cookieä¸­çš„sessionidè¿›è¡Œè§£ææ‰¾åˆ°æœåŠ¡å™¨å­˜å‚¨çš„sessionä¿¡æ¯ç„¶ååˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦ç¬¦åˆè¯·æ±‚çš„è¦æ±‚</li><li>åŸºäºtokenï¼Œåˆ™è§£æå‡ºtokenç„¶åå°†å½“å‰è¯·æ±‚åŠ å…¥åˆ°spring-securityç®¡ç†çš„æƒé™ä¿¡æ¯å½“ä¸­</li></ul></blockquote><h3 id="è®¤è¯å’Œæˆæƒå®ç°æ€è·¯"><a href="#è®¤è¯å’Œæˆæƒå®ç°æ€è·¯" class="headerlink" title="è®¤è¯å’Œæˆæƒå®ç°æ€è·¯"></a>è®¤è¯å’Œæˆæƒå®ç°æ€è·¯</h3><blockquote><p>å¦‚æœç³»ç»Ÿçš„æ¨¡å—ä¼—å¤šï¼Œæ¯ä¸ªæ¨¡å—éƒ½éœ€è¦å°±è¡Œæˆæƒä¸è®¤è¯ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©åŸºäºtokençš„å½¢å¼è¿›è¡Œæˆæƒä¸è®¤è¯ï¼Œç”¨æˆ·æ ¹æ®ç”¨æˆ·åå¯†ç è®¤è¯æˆåŠŸï¼Œç„¶åè·å–å½“å‰ç”¨æˆ·è§’è‰²çš„ä¸€ç³»åˆ—æƒé™å€¼ï¼Œå¹¶ä»¥ç”¨æˆ·åä¸ºkeyï¼Œæƒé™åˆ—è¡¨ä¸ºvalueçš„å½¢å¼å­˜å…¥redisç¼“å­˜ä¸­ï¼Œæ ¹æ®ç”¨æˆ·åç›¸å…³ä¿¡æ¯ç”Ÿæˆtokenè¿”å›ï¼Œæµè§ˆå™¨å°†tokenè®°å½•åˆ°cookieä¸­ï¼Œæ¯æ¬¡è°ƒç”¨apiæ¥å£éƒ½é»˜è®¤å°†tokenæºå¸¦åˆ°headerè¯·æ±‚å¤´ä¸­ï¼ŒSpring-securityè§£æheaderå¤´è·å–tokenä¿¡æ¯ï¼Œè§£ætokenè·å–å½“å‰ç”¨æˆ·åï¼Œæ ¹æ®ç”¨æˆ·åå°±å¯ä»¥ä»redisä¸­è·å–æƒé™åˆ—è¡¨ï¼Œè¿™æ ·Spring-securityå°±èƒ½å¤Ÿåˆ¤æ–­å½“å‰è¯·æ±‚æ˜¯å¦æœ‰æƒé™è®¿é—®</p></blockquote><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20211007145558209.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20211007145558209.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20211007145558209"></p><h3 id="æ•´åˆ"><a href="#æ•´åˆ" class="headerlink" title="æ•´åˆ"></a>æ•´åˆ</h3><h4 id="ä¾èµ–-2"><a href="#ä¾èµ–-2" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>common_utils<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Spring Securityä¾èµ– --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h4><p><img src="https://gitee.com/ReRia/images/raw/master/img/6aafe337-8a5d-440c-b93d-ff60d4f9cef6.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/6aafe337-8a5d-440c-b93d-ff60d4f9cef6.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="6aafe337-8a5d-440c-b93d-ff60d4f9cef6"></p><h3 id="æµ‹è¯•-2"><a href="#æµ‹è¯•-2" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><blockquote><p>å¦ˆè€¶å¤ªå“äººäº†å¹¸å¥½æˆ‘å¤‡ä»½äº†ï¼ˆä¸ºå•¥gitä¸å…ˆè®²ï¼‰ï¼Œè¯•äº†ä¸‹æ•´åˆï¼Œèœå•æ è¿˜æ˜¯æ˜¾ç¤ºä¸å‡ºæ¥ï¼Œå…ˆæ¢å¤äº†ï¼Œä»¥åå†è¯•</p></blockquote><h2 id="Nacosé…ç½®ç®¡ç†"><a href="#Nacosé…ç½®ç®¡ç†" class="headerlink" title="Nacosé…ç½®ç®¡ç†"></a>Nacosé…ç½®ç®¡ç†</h2><h2 id="Gitç‰ˆæœ¬ç®¡ç†"><a href="#Gitç‰ˆæœ¬ç®¡ç†" class="headerlink" title="Gitç‰ˆæœ¬ç®¡ç†"></a>Gitç‰ˆæœ¬ç®¡ç†</h2><blockquote><p>åˆ›å»ºæœ¬åœ°gitä»“åº“ï¼šidea -&gt; VCS -&gt; Create Git Repository </p><p>å°†æ–‡ä»¶åŠ åˆ°æœ¬åœ°ä»“åº“ï¼šidea -&gt; çˆ¶é¡¹ç›®å -&gt; å³é”® -&gt; git -&gt; add</p><p>æ·»åŠ è¿œç¨‹ä»“åº“åœ°å€ï¼šidea -&gt; çˆ¶é¡¹ç›®å -&gt; å³é”® -&gt; git -&gt; git remotes</p><p>å°†æ–‡ä»¶æäº¤è‡³è¿œç¨‹ä»“åº“ï¼šcommit</p><p>ä¸Šä¼ ï¼špush</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> é¡¹ç›® </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> SpringCloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€é¡¹ç›®ç¬”è®°ã€‘åœ¨çº¿æ•™è‚²é¡¹ç›®å®æˆ˜6</title>
      <link href="/2021/10/02/xiang-mu-bi-ji-zai-xian-jiao-yu-xiang-mu-shi-zhan-6/"/>
      <url>/2021/10/02/xiang-mu-bi-ji-zai-xian-jiao-yu-xiang-mu-shi-zhan-6/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰å°è®²å¸ˆåˆ—è¡¨å’Œè¯¦æƒ…ï¼ˆåç«¯-å‰ç«¯ï¼‰"><a href="#å‰å°è®²å¸ˆåˆ—è¡¨å’Œè¯¦æƒ…ï¼ˆåç«¯-å‰ç«¯ï¼‰" class="headerlink" title="å‰å°è®²å¸ˆåˆ—è¡¨å’Œè¯¦æƒ…ï¼ˆåç«¯+å‰ç«¯ï¼‰"></a>å‰å°è®²å¸ˆåˆ—è¡¨å’Œè¯¦æƒ…ï¼ˆåç«¯+å‰ç«¯ï¼‰</h2><h3 id="è®²å¸ˆåˆ†é¡µåˆ—è¡¨ï¼ˆåç«¯ï¼‰"><a href="#è®²å¸ˆåˆ†é¡µåˆ—è¡¨ï¼ˆåç«¯ï¼‰" class="headerlink" title="è®²å¸ˆåˆ†é¡µåˆ—è¡¨ï¼ˆåç«¯ï¼‰"></a>è®²å¸ˆåˆ†é¡µåˆ—è¡¨ï¼ˆåç«¯ï¼‰</h3><h4 id="controller"><a href="#controller" class="headerlink" title="controller"></a>controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/eduservice/teacherfront&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TeacherController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduTeacherService teacherService;</span><br><span class="line">    <span class="comment">// åˆ†é¡µæŸ¥è¯¢è®²å¸ˆåˆ—è¡¨</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;getTeacherFront/&#123;pageNo&#125;/&#123;limit&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">getTeacherFront</span><span class="params">(<span class="meta">@PathVariable</span> Long limit, <span class="meta">@PathVariable</span> Long pageNo)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºpageå¯¹è±¡</span></span><br><span class="line">        Page&lt;EduTeacher&gt; pageTeacher = <span class="keyword">new</span> Page&lt;&gt;(pageNo, limit);</span><br><span class="line">        <span class="comment">// è°ƒç”¨æ–¹æ³•å®ç°åˆ†ç±»</span></span><br><span class="line">        Map&lt;String, Object&gt; map = teacherService.getTeacherFront(pageTeacher);</span><br><span class="line">        <span class="comment">// è¿”å›åˆ†é¡µæ‰€æœ‰æ•°æ®</span></span><br><span class="line">        <span class="keyword">return</span> R.ok().data(map);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="service"><a href="#service" class="headerlink" title="service"></a>service</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduTeacherServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">EduTeacherMapper</span>, <span class="title">EduTeacher</span>&gt; <span class="keyword">implements</span> <span class="title">EduTeacherService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Cacheable(key = &quot;&#x27;indexTeacherList&#x27;&quot;, value = &quot;teacher&quot;)</span>   <span class="comment">// redis</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;EduTeacher&gt; <span class="title">getIndexList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> baseMapper.selectIndexList();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ†é¡µæŸ¥è¯¢è®²å¸ˆåˆ—è¡¨</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getTeacherFront</span><span class="params">(Page&lt;EduTeacher&gt; pageTeacher)</span> </span>&#123;</span><br><span class="line">        QueryWrapper wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">        wrapper.orderByDesc(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        baseMapper.selectPage(pageTeacher, wrapper);</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;records&quot;</span>, pageTeacher.getRecords());</span><br><span class="line">        map.put(<span class="string">&quot;total&quot;</span>, pageTeacher.getTotal());</span><br><span class="line">        map.put(<span class="string">&quot;size&quot;</span>, pageTeacher.getSize());</span><br><span class="line">        map.put(<span class="string">&quot;current&quot;</span>, pageTeacher.getCurrent());</span><br><span class="line">        map.put(<span class="string">&quot;pages&quot;</span>, pageTeacher.getPages());</span><br><span class="line">        map.put(<span class="string">&quot;hasNext&quot;</span>, pageTeacher.hasNext());</span><br><span class="line">        map.put(<span class="string">&quot;hasPrevious&quot;</span>, pageTeacher.hasPrevious());</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è®²å¸ˆåˆ†é¡µåˆ—è¡¨ï¼ˆå‰ç«¯ï¼‰"><a href="#è®²å¸ˆåˆ†é¡µåˆ—è¡¨ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="è®²å¸ˆåˆ†é¡µåˆ—è¡¨ï¼ˆå‰ç«¯ï¼‰"></a>è®²å¸ˆåˆ†é¡µåˆ—è¡¨ï¼ˆå‰ç«¯ï¼‰</h3><h4 id="api"><a href="#api" class="headerlink" title="api"></a>api</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// è®²å¸ˆåˆ†é¡µåˆ—è¡¨</span></span><br><span class="line">  <span class="function"><span class="title">getTeacherList</span>(<span class="params">pageNo, limit</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">`/eduservice/teacherfront/getTeacherFront/<span class="subst">$&#123;pageNo&#125;</span>/<span class="subst">$&#123;limit&#125;</span>`</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="vue"><a href="#vue" class="headerlink" title="vue"></a>vue</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;aCoursesList&quot; class=&quot;bg-fa of&quot;&gt;</span><br><span class="line">    &lt;!-- è®²å¸ˆåˆ—è¡¨ å¼€å§‹ --&gt;</span><br><span class="line">    &lt;section class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;header class=&quot;comm-title all-teacher-title&quot;&gt;</span><br><span class="line">        &lt;h2 class=&quot;fl tac&quot;&gt;</span><br><span class="line">          &lt;span class=&quot;c-333&quot;&gt;å…¨éƒ¨è®²å¸ˆ&lt;/span&gt;</span><br><span class="line">        &lt;/h2&gt;</span><br><span class="line">        &lt;section class=&quot;c-tab-title&quot;&gt;</span><br><span class="line">          &lt;a id=&quot;subjectAll&quot; title=&quot;å…¨éƒ¨&quot; href=&quot;#&quot;&gt;å…¨éƒ¨&lt;/a&gt;</span><br><span class="line">        &lt;/section&gt;</span><br><span class="line">      &lt;/header&gt;</span><br><span class="line">      &lt;section class=&quot;c-sort-box unBr&quot;&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;!-- /æ— æ•°æ®æç¤º å¼€å§‹--&gt;</span><br><span class="line">          &lt;section class=&quot;no-data-wrap&quot; v-if=&quot;listMap.total == 0&quot;&gt;</span><br><span class="line">            &lt;em class=&quot;icon30 no-data-ico&quot;&gt;&amp;nbsp;&lt;/em&gt;</span><br><span class="line">            &lt;span class=&quot;c-666 fsize14 ml10 vam&quot;</span><br><span class="line">              &gt;æ²¡æœ‰ç›¸å…³æ•°æ®ï¼Œå°ç¼–æ­£åœ¨åŠªåŠ›æ•´ç†ä¸­...&lt;/span</span><br><span class="line">            &gt;</span><br><span class="line">          &lt;/section&gt;</span><br><span class="line">          &lt;!-- /æ— æ•°æ®æç¤º ç»“æŸ--&gt;</span><br><span class="line">          &lt;article class=&quot;i-teacher-list&quot; v-if=&quot;listMap.total &gt; 0&quot;&gt;</span><br><span class="line">            &lt;ul class=&quot;of&quot;&gt;</span><br><span class="line">              &lt;li v-for=&quot;teacher in listMap.records&quot; :key=&quot;teacher.id&quot;&gt;</span><br><span class="line">                &lt;section class=&quot;i-teach-wrap&quot;&gt;</span><br><span class="line">                  &lt;div class=&quot;i-teach-pic&quot;&gt;</span><br><span class="line">                    &lt;a </span><br><span class="line">                       :href=&quot;&#x27;/teacehr/&#x27;+teacher.id&quot;</span><br><span class="line">                       :title=&quot;teacher.name&quot; target=&quot;_blank&quot;&gt;</span><br><span class="line">                      &lt;img :src=&quot;teacher.avatar&quot; alt /&gt;</span><br><span class="line">                    &lt;/a&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                  &lt;div class=&quot;mt10 hLh30 txtOf tac&quot;&gt;</span><br><span class="line">                    &lt;a</span><br><span class="line">                      :href=&quot;&#x27;/teacehr/&#x27;+teacher.id&quot;</span><br><span class="line">                      :title=&quot;teacher.name&quot;</span><br><span class="line">                      target=&quot;_blank&quot;</span><br><span class="line">                      class=&quot;fsize18 c-666&quot;</span><br><span class="line">                      &gt;&#123;&#123; teacher.name &#125;&#125;&lt;/a</span><br><span class="line">                    &gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                  &lt;div class=&quot;hLh30 txtOf tac&quot;&gt;</span><br><span class="line">                    &lt;span class=&quot;fsize14 c-999&quot;&gt;&#123;&#123; teacher.intro &#125;&#125;&lt;/span&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                  &lt;div class=&quot;mt15 i-q-txt&quot;&gt;</span><br><span class="line">                    &lt;p class=&quot;c-999 f-fA&quot;&gt;&#123;&#123; teacher.career &#125;&#125;&lt;/p&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/section&gt;</span><br><span class="line">              &lt;/li&gt;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">            &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br><span class="line">          &lt;/article&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/section&gt;</span><br><span class="line">    &lt;/section&gt;</span><br><span class="line">    &lt;!-- /è®²å¸ˆåˆ—è¡¨ ç»“æŸ --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import teacherApi from &#x27;@/api/teacher&#x27;</span><br><span class="line">  export default &#123;</span><br><span class="line">    // è¿™ä¸ªé¡µé¢æ¨¡æ¿æ²¡æœ‰ä½¿ç”¨element-uiçš„åˆ†é¡µæ¡ï¼Œæ‰€ä»¥å†™æ³•æœ‰æ‰€å˜åŒ–</span><br><span class="line">    // ä½¿ç”¨å¼‚æ­¥è°ƒç”¨ï¼ˆthis.$route.param == paramsè·å–urlä¸­çš„å‚æ•°å€¼ï¼‰</span><br><span class="line">    // è¯¥æ–¹æ³•åªè°ƒç”¨ä¸€æ¬¡</span><br><span class="line">    asyncData(&#123; params, error &#125;) &#123;</span><br><span class="line">      return teacherApi.getTeacherList(1, 8).then(result =&gt; &#123;</span><br><span class="line">        // è¿™é‡Œæ˜¯èµ‹å€¼çš„ç®€å†™æ–¹å¼</span><br><span class="line">        return &#123; listMap: result.data.data &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="åˆ†é¡µæ¡"><a href="#åˆ†é¡µæ¡" class="headerlink" title="åˆ†é¡µæ¡"></a>åˆ†é¡µæ¡</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;aCoursesList&quot; class=&quot;bg-fa of&quot;&gt;</span><br><span class="line">        &lt;!-- å…¬å…±åˆ†é¡µ å¼€å§‹ --&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;div class=&quot;paging&quot;&gt;</span><br><span class="line">            &lt;!-- undisableè¿™ä¸ªclassæ˜¯å¦å­˜åœ¨ï¼Œå–å†³äºæ•°æ®å±æ€§hasPrevious --&gt;</span><br><span class="line">            &lt;a</span><br><span class="line">              :class=&quot;&#123; undisable: !listMap.hasPrevious &#125;&quot;</span><br><span class="line">              href=&quot;#&quot;</span><br><span class="line">              title=&quot;é¦–é¡µ&quot;</span><br><span class="line">              @click.prevent=&quot;gotoPage(1)&quot;</span><br><span class="line">              &gt;é¦–é¡µ&lt;/a</span><br><span class="line">            &gt;</span><br><span class="line">            &lt;a</span><br><span class="line">              :class=&quot;&#123; undisable: !listMap.hasPrevious &#125;&quot;</span><br><span class="line">              href=&quot;#&quot;</span><br><span class="line">              title=&quot;å‰ä¸€é¡µ&quot;</span><br><span class="line">              @click.prevent=&quot;gotoPage(listMap.current - 1)&quot;</span><br><span class="line">              &gt;&amp;lt;&lt;/a</span><br><span class="line">            &gt;</span><br><span class="line">            &lt;a</span><br><span class="line">              v-for=&quot;page in listMap.pages&quot;</span><br><span class="line">              :key=&quot;page&quot;</span><br><span class="line">              :class=&quot;&#123;</span><br><span class="line">                current: listMap.current == page,</span><br><span class="line">                undisable: listMap.current == page,</span><br><span class="line">              &#125;&quot;</span><br><span class="line">              :title=&quot;&#x27;ç¬¬&#x27; + page + &#x27;é¡µ&#x27;&quot;</span><br><span class="line">              href=&quot;#&quot;</span><br><span class="line">              @click.prevent=&quot;gotoPage(page)&quot;</span><br><span class="line">              &gt;&#123;&#123; page &#125;&#125;&lt;/a</span><br><span class="line">            &gt;</span><br><span class="line">            &lt;a</span><br><span class="line">              :class=&quot;&#123; undisable: !listMap.hasNext &#125;&quot;</span><br><span class="line">              href=&quot;#&quot;</span><br><span class="line">              title=&quot;åä¸€é¡µ&quot;</span><br><span class="line">              @click.prevent=&quot;gotoPage(listMap.current + 1)&quot;</span><br><span class="line">              &gt;&amp;gt;&lt;/a</span><br><span class="line">            &gt;</span><br><span class="line">            &lt;a</span><br><span class="line">              :class=&quot;&#123; undisable: !listMap.hasNext &#125;&quot;</span><br><span class="line">              href=&quot;#&quot;</span><br><span class="line">              title=&quot;æœ«é¡µ&quot;</span><br><span class="line">              @click.prevent=&quot;gotoPage(listMap.pages)&quot;</span><br><span class="line">              &gt;æœ«é¡µ&lt;/a</span><br><span class="line">            &gt;</span><br><span class="line">            &lt;div class=&quot;clear&quot; /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- å…¬å…±åˆ†é¡µ ç»“æŸ --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import teacherApi from &#x27;@/api/teacher&#x27;</span><br><span class="line">  export default &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">      // åˆ†é¡µåˆ‡æ¢</span><br><span class="line">      gotoPage(page) &#123;</span><br><span class="line">        teacherApi.getTeacherList(page, 8).then(result =&gt; &#123;</span><br><span class="line">          this.listMap = result.data.data</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="è®²å¸ˆè¯¦æƒ…ï¼ˆåç«¯ï¼‰"><a href="#è®²å¸ˆè¯¦æƒ…ï¼ˆåç«¯ï¼‰" class="headerlink" title="è®²å¸ˆè¯¦æƒ…ï¼ˆåç«¯ï¼‰"></a>è®²å¸ˆè¯¦æƒ…ï¼ˆåç«¯ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®²å¸ˆè¯¦æƒ…</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;getTeacherInfoFront/&#123;teacherId&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">getTeacherInfoFront</span><span class="params">(<span class="meta">@PathVariable</span> String teacherId)</span> </span>&#123;</span><br><span class="line">    EduTeacher teacherInfo = teacherService.getById(teacherId);</span><br><span class="line">    QueryWrapper wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    wrapper.eq(<span class="string">&quot;teacher_id&quot;</span>, teacherId);</span><br><span class="line">    List&lt;EduCourse&gt; courseList = courseService.list(wrapper);</span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">&quot;teacherInfo&quot;</span>, teacherInfo).data(<span class="string">&quot;courseList&quot;</span>, courseList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è®²å¸ˆè¯¦æƒ…ï¼ˆå‰ç«¯ï¼‰"><a href="#è®²å¸ˆè¯¦æƒ…ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="è®²å¸ˆè¯¦æƒ…ï¼ˆå‰ç«¯ï¼‰"></a>è®²å¸ˆè¯¦æƒ…ï¼ˆå‰ç«¯ï¼‰</h3><h4 id="api-1"><a href="#api-1" class="headerlink" title="api"></a>api</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®²å¸ˆè¯¦æƒ…</span></span><br><span class="line"><span class="function"><span class="title">getTeacherInfo</span>(<span class="params">teacherId</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> request(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/eduservice/teacherfront/getTeacherInfoFront/<span class="subst">$&#123;teacherId&#125;</span>`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="vue-1"><a href="#vue-1" class="headerlink" title="vue"></a>vue</h4><blockquote><p>æ³¨æ„NUXTçš„åŠ¨æ€å˜é‡çš„é¡µé¢ä¸º_xxx.vue</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;aCoursesList&quot; class=&quot;bg-fa of&quot;&gt;</span><br><span class="line">    &lt;!-- è®²å¸ˆä»‹ç» å¼€å§‹ --&gt;</span><br><span class="line">    &lt;section class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;header class=&quot;comm-title&quot;&gt;</span><br><span class="line">        &lt;h2 class=&quot;fl tac&quot;&gt;</span><br><span class="line">          &lt;span class=&quot;c-333&quot;&gt;è®²å¸ˆä»‹ç»&lt;/span&gt;</span><br><span class="line">        &lt;/h2&gt;</span><br><span class="line">      &lt;/header&gt;</span><br><span class="line">      &lt;div class=&quot;t-infor-wrap&quot;&gt;</span><br><span class="line">        &lt;!-- è®²å¸ˆåŸºæœ¬ä¿¡æ¯ --&gt;</span><br><span class="line">        &lt;section class=&quot;fl t-infor-box c-desc-content&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;mt20 ml20&quot;&gt;</span><br><span class="line">            &lt;section class=&quot;t-infor-pic&quot;&gt;</span><br><span class="line">              &lt;img :src=&quot;teacherInfo.avatar&quot; /&gt;</span><br><span class="line">            &lt;/section&gt;</span><br><span class="line">            &lt;h3 class=&quot;hLh30&quot;&gt;</span><br><span class="line">              &lt;span class=&quot;fsize24 c-333&quot;</span><br><span class="line">                &gt;&#123;&#123; teacherInfo.name &#125;&#125;&amp;nbsp;&#123;&#123;</span><br><span class="line">                  teacherInfo.level === 1 ? &quot;é«˜çº§è®²å¸ˆ&quot; : &quot;é¦–å¸­è®²å¸ˆ&quot;</span><br><span class="line">                &#125;&#125;&lt;/span</span><br><span class="line">              &gt;</span><br><span class="line">            &lt;/h3&gt;</span><br><span class="line">            &lt;section class=&quot;mt10&quot;&gt;</span><br><span class="line">              &lt;span class=&quot;t-tag-bg&quot;&gt;&#123;&#123; teacherInfo.career &#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;/section&gt;</span><br><span class="line">            &lt;section class=&quot;t-infor-txt&quot;&gt;</span><br><span class="line">              &lt;p class=&quot;mt20&quot;&gt;</span><br><span class="line">                &#123;&#123; teacherInfo.intro &#125;&#125;</span><br><span class="line">              &lt;/p&gt;</span><br><span class="line">            &lt;/section&gt;</span><br><span class="line">            &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/section&gt;</span><br><span class="line">        &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;section class=&quot;mt30&quot;&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;header class=&quot;comm-title all-teacher-title c-course-content&quot;&gt;</span><br><span class="line">            &lt;h2 class=&quot;fl tac&quot;&gt;</span><br><span class="line">              &lt;span class=&quot;c-333&quot;&gt;ä¸»è®²è¯¾ç¨‹&lt;/span&gt;</span><br><span class="line">            &lt;/h2&gt;</span><br><span class="line">            &lt;section class=&quot;c-tab-title&quot;&gt;</span><br><span class="line">              &lt;a href=&quot;javascript: void(0)&quot;&gt;&amp;nbsp;&lt;/a&gt;</span><br><span class="line">            &lt;/section&gt;</span><br><span class="line">          &lt;/header&gt;</span><br><span class="line">          &lt;!-- /æ— æ•°æ®æç¤º å¼€å§‹--&gt;</span><br><span class="line">          &lt;section class=&quot;no-data-wrap&quot; v-if=&quot;courseList.length == 0&quot;&gt;</span><br><span class="line">            &lt;em class=&quot;icon30 no-data-ico&quot;&gt;&amp;nbsp;&lt;/em&gt;</span><br><span class="line">            &lt;span class=&quot;c-666 fsize14 ml10 vam&quot;</span><br><span class="line">              &gt;æ²¡æœ‰ç›¸å…³æ•°æ®ï¼Œå°ç¼–æ­£åœ¨åŠªåŠ›æ•´ç†ä¸­...&lt;/span</span><br><span class="line">            &gt;</span><br><span class="line">          &lt;/section&gt;</span><br><span class="line">          &lt;!-- /æ— æ•°æ®æç¤º ç»“æŸ--&gt;</span><br><span class="line">          &lt;article class=&quot;comm-course-list&quot; v-if=&quot;courseList.length &gt; 0&quot;&gt;</span><br><span class="line">            &lt;ul class=&quot;of&quot;&gt;</span><br><span class="line">              &lt;li v-for=&quot;course in courseList&quot; :key=&quot;course.id&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;cc-l-wrap&quot;&gt;</span><br><span class="line">                  &lt;section class=&quot;course-img&quot;&gt;</span><br><span class="line">                    &lt;img :src=&quot;course.cover&quot; class=&quot;img-responsive&quot; /&gt;</span><br><span class="line">                    &lt;div class=&quot;cc-mask&quot;&gt;</span><br><span class="line">                      &lt;a</span><br><span class="line">                        href=&quot;#&quot;</span><br><span class="line">                        title=&quot;å¼€å§‹å­¦ä¹ &quot;</span><br><span class="line">                        target=&quot;_blank&quot;</span><br><span class="line">                        class=&quot;comm-btn c-btn-1&quot;</span><br><span class="line">                        &gt;å¼€å§‹å­¦ä¹ &lt;/a</span><br><span class="line">                      &gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                  &lt;/section&gt;</span><br><span class="line">                  &lt;h3 class=&quot;hLh30 txtOf mt10&quot;&gt;</span><br><span class="line">                    &lt;a</span><br><span class="line">                      href=&quot;#&quot;</span><br><span class="line">                      :title=&quot;course.title&quot;</span><br><span class="line">                      target=&quot;_blank&quot;</span><br><span class="line">                      class=&quot;course-title fsize18 c-333&quot;</span><br><span class="line">                      &gt;&#123;&#123; course.title &#125;&#125;&lt;/a</span><br><span class="line">                    &gt;</span><br><span class="line">                  &lt;/h3&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/li&gt;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">            &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br><span class="line">          &lt;/article&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/section&gt;</span><br><span class="line">    &lt;/section&gt;</span><br><span class="line">    &lt;!-- /è®²å¸ˆä»‹ç» ç»“æŸ --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import teacherApi from &#x27;@/api/teacher&#x27;</span><br><span class="line">  export default &#123;</span><br><span class="line">    asyncData(&#123; params, error &#125;) &#123;</span><br><span class="line">      // æ³¨æ„è¿™é‡Œçš„paramsåè·Ÿçš„åå­—è¦å’Œvueæ–‡ä»¶åå¯¹åº”ï¼ˆæ‰€ä»¥ä»–æ˜¯åªèƒ½ä¼ ä¸€ä¸ªå‚æ•°å—ï¼Ÿï¼‰</span><br><span class="line">      return teacherApi.getTeacherInfo(params.id).then(result =&gt; &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          teacherInfo: result.data.data.teacherInfo,</span><br><span class="line">          courseList: result.data.data.courseList</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="å‰å°è¯¾ç¨‹åˆ—è¡¨å’Œè¯¦æƒ…ï¼ˆåç«¯-å‰ç«¯ï¼‰"><a href="#å‰å°è¯¾ç¨‹åˆ—è¡¨å’Œè¯¦æƒ…ï¼ˆåç«¯-å‰ç«¯ï¼‰" class="headerlink" title="å‰å°è¯¾ç¨‹åˆ—è¡¨å’Œè¯¦æƒ…ï¼ˆåç«¯+å‰ç«¯ï¼‰"></a>å‰å°è¯¾ç¨‹åˆ—è¡¨å’Œè¯¦æƒ…ï¼ˆåç«¯+å‰ç«¯ï¼‰</h2><h3 id="è¯¾ç¨‹åˆ—è¡¨ï¼ˆåç«¯ï¼‰"><a href="#è¯¾ç¨‹åˆ—è¡¨ï¼ˆåç«¯ï¼‰" class="headerlink" title="è¯¾ç¨‹åˆ—è¡¨ï¼ˆåç«¯ï¼‰"></a>è¯¾ç¨‹åˆ—è¡¨ï¼ˆåç«¯ï¼‰</h3><h4 id="voç±»"><a href="#voç±»" class="headerlink" title="voç±»"></a>voç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CourseFrontVo</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;è¯¾ç¨‹åç§°&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;è®²å¸ˆid&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String teacherId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;ä¸€çº§ç±»åˆ«id&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String subjectParentId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;äºŒçº§ç±»åˆ«id&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String subjectId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;é”€é‡æ’åº&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String buyCountSort;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;æœ€æ–°æ—¶é—´æ’åº&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String gmtCreateSort;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;ä»·æ ¼æ’åº&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String priceSort;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="controller-1"><a href="#controller-1" class="headerlink" title="controller"></a>controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/eduservice/coursefront&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CourseController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduCourseService courseService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¡ä»¶æŸ¥è¯¢å¸¦åˆ†é¡µ</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;getCourseList/&#123;pageNo&#125;/&#123;limit&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">getCourseListCondition</span><span class="params">(<span class="meta">@PathVariable</span> Long limit, <span class="meta">@PathVariable</span> Long pageNo, <span class="meta">@RequestBody(required = false)</span> CourseFrontVo courseFrontVo)</span> </span>&#123;</span><br><span class="line">        Page&lt;EduCourse&gt; pageCourse = <span class="keyword">new</span> Page&lt;&gt;(pageNo, limit);</span><br><span class="line">        Map&lt;String, Object&gt; map = courseService.getCOurseFrontList(pageCourse, courseFrontVo);</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(map);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="service-1"><a href="#service-1" class="headerlink" title="service"></a>service</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getCourseFrontList</span><span class="params">(Page&lt;EduCourse&gt; pageCourse, CourseFrontVo courseFrontVo)</span> </span>&#123;</span><br><span class="line">    QueryWrapper wrapper = <span class="keyword">new</span> QueryWrapper();</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ¡ä»¶æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (!StringUtils.isEmpty(courseFrontVo.getSubjectParentId())) &#123;</span><br><span class="line">        wrapper.eq(<span class="string">&quot;subject_parent_id&quot;</span>, courseFrontVo.getSubjectParentId());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!StringUtils.isEmpty(courseFrontVo.getSubjectId())) &#123;</span><br><span class="line">        wrapper.eq(<span class="string">&quot;subject_id&quot;</span>, courseFrontVo.getSubjectId());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!StringUtils.isEmpty(courseFrontVo.getBuyCountSort())) &#123;</span><br><span class="line">        wrapper.orderByDesc(<span class="string">&quot;buy_count&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!StringUtils.isEmpty(courseFrontVo.getGmtCreateSort())) &#123; <span class="comment">//æœ€æ–°</span></span><br><span class="line">        wrapper.orderByDesc(<span class="string">&quot;gmt_create&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!StringUtils.isEmpty(courseFrontVo.getPriceSort())) &#123;<span class="comment">//ä»·æ ¼</span></span><br><span class="line">        wrapper.orderByDesc(<span class="string">&quot;price&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    baseMapper.selectPage(pageCourse, wrapper);</span><br><span class="line"></span><br><span class="line">    List&lt;EduCourse&gt; records = pageCourse.getRecords();</span><br><span class="line">    <span class="keyword">long</span> current = pageCourse.getCurrent();</span><br><span class="line">    <span class="keyword">long</span> pages = pageCourse.getPages();</span><br><span class="line">    <span class="keyword">long</span> size = pageCourse.getSize();</span><br><span class="line">    <span class="keyword">long</span> total = pageCourse.getTotal();</span><br><span class="line">    <span class="keyword">boolean</span> hasNext = pageCourse.hasNext();<span class="comment">//ä¸‹ä¸€é¡µ</span></span><br><span class="line">    <span class="keyword">boolean</span> hasPrevious = pageCourse.hasPrevious();<span class="comment">//ä¸Šä¸€é¡µ</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŠŠåˆ†é¡µæ•°æ®è·å–å‡ºæ¥ï¼Œæ”¾åˆ°mapé›†åˆ</span></span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;items&quot;</span>, records);</span><br><span class="line">    map.put(<span class="string">&quot;current&quot;</span>, current);</span><br><span class="line">    map.put(<span class="string">&quot;pages&quot;</span>, pages);</span><br><span class="line">    map.put(<span class="string">&quot;size&quot;</span>, size);</span><br><span class="line">    map.put(<span class="string">&quot;total&quot;</span>, total);</span><br><span class="line">    map.put(<span class="string">&quot;hasNext&quot;</span>, hasNext);</span><br><span class="line">    map.put(<span class="string">&quot;hasPrevious&quot;</span>, hasPrevious);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//mapè¿”å›</span></span><br><span class="line">    <span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¯¾ç¨‹åˆ—è¡¨ï¼ˆå‰ç«¯ï¼‰"><a href="#è¯¾ç¨‹åˆ—è¡¨ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="è¯¾ç¨‹åˆ—è¡¨ï¼ˆå‰ç«¯ï¼‰"></a>è¯¾ç¨‹åˆ—è¡¨ï¼ˆå‰ç«¯ï¼‰</h3><h4 id="api-2"><a href="#api-2" class="headerlink" title="api"></a>api</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// è®²å¸ˆåˆ†é¡µåˆ—è¡¨</span></span><br><span class="line">  <span class="function"><span class="title">getCourseList</span>(<span class="params">pageNo, limit, queryCourse</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">`/eduservice/coursefront/getCourseList/<span class="subst">$&#123;pageNo&#125;</span>/<span class="subst">$&#123;limit&#125;</span>`</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: queryCourse</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// è¯¾ç¨‹åˆ†ç±»åˆ—è¡¨</span></span><br><span class="line">  <span class="function"><span class="title">getSubjectList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">`/eduservice/subject/getAllSubjects`</span>,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="vue-2"><a href="#vue-2" class="headerlink" title="vue"></a>vue</h4><blockquote><p>è¿™ä¸€å—å†…å®¹æŒºå¤šçš„ï¼Œæœ‰äºŒçº§è”åŠ¨æŸ¥è¯¢ï¼Œæœ‰åˆ†é¡µæ¡ï¼Œæœ‰æ¡ä»¶æ’åºç­‰</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;aCoursesList&quot; class=&quot;bg-fa of&quot;&gt;</span><br><span class="line">    &lt;!-- /è¯¾ç¨‹åˆ—è¡¨ å¼€å§‹ --&gt;</span><br><span class="line">    &lt;section class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;header class=&quot;comm-title&quot;&gt;</span><br><span class="line">        &lt;h2 class=&quot;fl tac&quot;&gt;</span><br><span class="line">          &lt;span class=&quot;c-333&quot;&gt;å…¨éƒ¨è¯¾ç¨‹&lt;/span&gt;</span><br><span class="line">        &lt;/h2&gt;</span><br><span class="line">      &lt;/header&gt;</span><br><span class="line">      &lt;section class=&quot;c-sort-box&quot;&gt;</span><br><span class="line">        &lt;section class=&quot;c-s-dl&quot;&gt;</span><br><span class="line">          &lt;dl&gt;</span><br><span class="line">            &lt;dt&gt;</span><br><span class="line">              &lt;span class=&quot;c-999 fsize14&quot;&gt;è¯¾ç¨‹ç±»åˆ«&lt;/span&gt;</span><br><span class="line">            &lt;/dt&gt;</span><br><span class="line">            &lt;dd class=&quot;c-s-dl-li&quot;&gt;</span><br><span class="line">              &lt;ul class=&quot;clearfix&quot;&gt;</span><br><span class="line">                &lt;li&gt;</span><br><span class="line">                  &lt;a title=&quot;å…¨éƒ¨&quot; href=&quot;#&quot;&gt;å…¨éƒ¨&lt;/a&gt;</span><br><span class="line">                &lt;/li&gt;</span><br><span class="line">                &lt;li</span><br><span class="line">                  v-for=&quot;(item, index) in subjectNestedList&quot;</span><br><span class="line">                  :key=&quot;index&quot;</span><br><span class="line">                  :class=&quot;&#123; active: oneIndex == index &#125;&quot;</span><br><span class="line">                &gt;</span><br><span class="line">                  &lt;a</span><br><span class="line">                    :title=&quot;item.title&quot;</span><br><span class="line">                    href=&quot;#&quot;</span><br><span class="line">                    @click=&quot;searchOne(item.id, index)&quot;</span><br><span class="line">                    &gt;&#123;&#123; item.title &#125;&#125;&lt;/a</span><br><span class="line">                  &gt;</span><br><span class="line">                &lt;/li&gt;</span><br><span class="line">              &lt;/ul&gt;</span><br><span class="line">            &lt;/dd&gt;</span><br><span class="line">          &lt;/dl&gt;</span><br><span class="line">          &lt;dl&gt;</span><br><span class="line">            &lt;dt&gt;</span><br><span class="line">              &lt;span class=&quot;c-999 fsize14&quot;&gt;&lt;/span&gt;</span><br><span class="line">            &lt;/dt&gt;</span><br><span class="line">            &lt;dd class=&quot;c-s-dl-li&quot;&gt;</span><br><span class="line">              &lt;ul class=&quot;clearfix&quot;&gt;</span><br><span class="line">                &lt;li</span><br><span class="line">                  v-for=&quot;(item, index) in subSubjectList&quot;</span><br><span class="line">                  :key=&quot;index&quot;</span><br><span class="line">                  :class=&quot;&#123; active: twoIndex == index &#125;&quot;</span><br><span class="line">                &gt;</span><br><span class="line">                  &lt;a</span><br><span class="line">                    :title=&quot;item.title&quot;</span><br><span class="line">                    href=&quot;#&quot;</span><br><span class="line">                    @click=&quot;searchTwo(item.id, index)&quot;</span><br><span class="line">                    &gt;&#123;&#123; item.title &#125;&#125;&lt;/a</span><br><span class="line">                  &gt;</span><br><span class="line">                &lt;/li&gt;</span><br><span class="line">              &lt;/ul&gt;</span><br><span class="line">            &lt;/dd&gt;</span><br><span class="line">          &lt;/dl&gt;</span><br><span class="line">          &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;/section&gt;</span><br><span class="line">        &lt;div class=&quot;js-wrap&quot;&gt;</span><br><span class="line">          &lt;section class=&quot;fr&quot;&gt;</span><br><span class="line">            &lt;span class=&quot;c-ccc&quot;&gt;</span><br><span class="line">              &lt;i class=&quot;c-master f-fM&quot;&gt;1&lt;/i&gt;/</span><br><span class="line">              &lt;i class=&quot;c-666 f-fM&quot;&gt;1&lt;/i&gt;</span><br><span class="line">            &lt;/span&gt;</span><br><span class="line">          &lt;/section&gt;</span><br><span class="line">          &lt;section class=&quot;fl&quot;&gt;</span><br><span class="line">            &lt;ol class=&quot;js-tap clearfix&quot;&gt;</span><br><span class="line">              &lt;li :class=&quot;&#123; &#x27;current bg-orange&#x27;: buyCountSort != &#x27;&#x27; &#125;&quot;&gt;</span><br><span class="line">                &lt;a</span><br><span class="line">                  title=&quot;é”€é‡&quot;</span><br><span class="line">                  href=&quot;javascript:void(0);&quot;</span><br><span class="line">                  @click=&quot;searchBuyCount()&quot;</span><br><span class="line">                  &gt;é”€é‡</span><br><span class="line">                  &lt;span :class=&quot;&#123; hide: buyCountSort == &#x27;&#x27; &#125;&quot;&gt;â†“&lt;/span&gt;</span><br><span class="line">                &lt;/a&gt;</span><br><span class="line">              &lt;/li&gt;</span><br><span class="line">              &lt;li :class=&quot;&#123; &#x27;current bg-orange&#x27;: gmtCreateSort != &#x27;&#x27; &#125;&quot;&gt;</span><br><span class="line">                &lt;a</span><br><span class="line">                  title=&quot;æœ€æ–°&quot;</span><br><span class="line">                  href=&quot;javascript:void(0);&quot;</span><br><span class="line">                  @click=&quot;searchGmtCreate()&quot;</span><br><span class="line">                  &gt;æœ€æ–°</span><br><span class="line">                  &lt;span :class=&quot;&#123; hide: gmtCreateSort == &#x27;&#x27; &#125;&quot;&gt;â†“&lt;/span&gt;</span><br><span class="line">                &lt;/a&gt;</span><br><span class="line">              &lt;/li&gt;</span><br><span class="line">              &lt;li :class=&quot;&#123; &#x27;current bg-orange&#x27;: priceSort != &#x27;&#x27; &#125;&quot;&gt;</span><br><span class="line">                &lt;a</span><br><span class="line">                  title=&quot;ä»·æ ¼&quot;</span><br><span class="line">                  href=&quot;javascript:void(0);&quot;</span><br><span class="line">                  @click=&quot;searchPrice()&quot;</span><br><span class="line">                  &gt;ä»·æ ¼&amp;nbsp;</span><br><span class="line">                  &lt;span :class=&quot;&#123; hide: priceSort == &#x27;&#x27; &#125;&quot;&gt;â†“&lt;/span&gt;</span><br><span class="line">                &lt;/a&gt;</span><br><span class="line">              &lt;/li&gt;</span><br><span class="line">            &lt;/ol&gt;</span><br><span class="line">          &lt;/section&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;mt40&quot;&gt;</span><br><span class="line">          &lt;!-- /æ— æ•°æ®æç¤º å¼€å§‹--&gt;</span><br><span class="line">          &lt;section class=&quot;no-data-wrap&quot; v-if=&quot;data.total == 0&quot;&gt;</span><br><span class="line">            &lt;em class=&quot;icon30 no-data-ico&quot;&gt;&amp;nbsp;&lt;/em&gt;</span><br><span class="line">            &lt;span class=&quot;c-666 fsize14 ml10 vam&quot;</span><br><span class="line">              &gt;æ²¡æœ‰ç›¸å…³æ•°æ®ï¼Œå°ç¼–æ­£åœ¨åŠªåŠ›æ•´ç†ä¸­...&lt;/span</span><br><span class="line">            &gt;</span><br><span class="line">          &lt;/section&gt;</span><br><span class="line">          &lt;!-- /æ— æ•°æ®æç¤º ç»“æŸ--&gt;</span><br><span class="line">          &lt;article v-if=&quot;data.total &gt; 0&quot; class=&quot;comm-course-list&quot;&gt;</span><br><span class="line">            &lt;ul class=&quot;of&quot; id=&quot;bna&quot;&gt;</span><br><span class="line">              &lt;li v-for=&quot;item in data.items&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;cc-l-wrap&quot;&gt;</span><br><span class="line">                  &lt;section class=&quot;course-img&quot;&gt;</span><br><span class="line">                    &lt;img</span><br><span class="line">                      :src=&quot;item.cover&quot;</span><br><span class="line">                      class=&quot;img-responsive&quot;</span><br><span class="line">                      :alt=&quot;item.title&quot;</span><br><span class="line">                    /&gt;</span><br><span class="line">                    &lt;div class=&quot;cc-mask&quot;&gt;</span><br><span class="line">                      &lt;a</span><br><span class="line">                        :href=&quot;&#x27;/course/&#x27; + item.id&quot;</span><br><span class="line">                        title=&quot;å¼€å§‹å­¦ä¹ &quot;</span><br><span class="line">                        class=&quot;comm-btn c-btn-1&quot;</span><br><span class="line">                        &gt;å¼€å§‹å­¦ä¹ &lt;/a</span><br><span class="line">                      &gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                  &lt;/section&gt;</span><br><span class="line">                  &lt;h3 class=&quot;hLh30 txtOf mt10&quot;&gt;</span><br><span class="line">                    &lt;a</span><br><span class="line">                      :href=&quot;&#x27;/course/&#x27; + item.id&quot;</span><br><span class="line">                      :title=&quot;item.title&quot;</span><br><span class="line">                      class=&quot;course-title fsize18 c-333&quot;</span><br><span class="line">                      &gt;&#123;&#123; item.title &#125;&#125;&lt;/a</span><br><span class="line">                    &gt;</span><br><span class="line">                  &lt;/h3&gt;</span><br><span class="line">                  &lt;section class=&quot;mt10 hLh20 of&quot;&gt;</span><br><span class="line">                    &lt;span</span><br><span class="line">                      v-if=&quot;Number(item.price) === 0&quot;</span><br><span class="line">                      class=&quot;fr jgTag bg-green&quot;</span><br><span class="line">                    &gt;</span><br><span class="line">                      &lt;i class=&quot;c-fff fsize12 f-fA&quot;&gt;å…è´¹&lt;/i&gt;</span><br><span class="line">                    &lt;/span&gt;</span><br><span class="line">                    &lt;span class=&quot;fl jgAttr c-ccc f-fA&quot;&gt;</span><br><span class="line">                      &lt;i class=&quot;c-999 f-fA&quot;&gt;9634äººå­¦ä¹ &lt;/i&gt;</span><br><span class="line">                      |</span><br><span class="line">                      &lt;i class=&quot;c-999 f-fA&quot;&gt;9634è¯„è®º&lt;/i&gt;</span><br><span class="line">                    &lt;/span&gt;</span><br><span class="line">                  &lt;/section&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/li&gt;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">            &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br><span class="line">          &lt;/article&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- å…¬å…±åˆ†é¡µ å¼€å§‹ --&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;div class=&quot;paging&quot;&gt;</span><br><span class="line">            &lt;!-- undisableè¿™ä¸ªclassæ˜¯å¦å­˜åœ¨ï¼Œå–å†³äºæ•°æ®å±æ€§hasPrevious --&gt;</span><br><span class="line">            &lt;a</span><br><span class="line">              :class=&quot;&#123; undisable: !data.hasPrevious &#125;&quot;</span><br><span class="line">              href=&quot;#&quot;</span><br><span class="line">              title=&quot;é¦–é¡µ&quot;</span><br><span class="line">              @click.prevent=&quot;gotoPage(1)&quot;</span><br><span class="line">              &gt;é¦–&lt;/a</span><br><span class="line">            &gt;</span><br><span class="line">            &lt;a</span><br><span class="line">              :class=&quot;&#123; undisable: !data.hasPrevious &#125;&quot;</span><br><span class="line">              href=&quot;#&quot;</span><br><span class="line">              title=&quot;å‰ä¸€é¡µ&quot;</span><br><span class="line">              @click.prevent=&quot;gotoPage(data.current - 1)&quot;</span><br><span class="line">              &gt;&amp;lt;&lt;/a</span><br><span class="line">            &gt;</span><br><span class="line">            &lt;a</span><br><span class="line">              v-for=&quot;page in data.pages&quot;</span><br><span class="line">              :key=&quot;page&quot;</span><br><span class="line">              :class=&quot;&#123;</span><br><span class="line">                current: data.current == page,</span><br><span class="line">                undisable: data.current == page,</span><br><span class="line">              &#125;&quot;</span><br><span class="line">              :title=&quot;&#x27;ç¬¬&#x27; + page + &#x27;é¡µ&#x27;&quot;</span><br><span class="line">              href=&quot;#&quot;</span><br><span class="line">              @click.prevent=&quot;gotoPage(page)&quot;</span><br><span class="line">              &gt;&#123;&#123; page &#125;&#125;&lt;/a</span><br><span class="line">            &gt;</span><br><span class="line">            &lt;a</span><br><span class="line">              :class=&quot;&#123; undisable: !data.hasNext &#125;&quot;</span><br><span class="line">              href=&quot;#&quot;</span><br><span class="line">              title=&quot;åä¸€é¡µ&quot;</span><br><span class="line">              @click.prevent=&quot;gotoPage(data.current + 1)&quot;</span><br><span class="line">              &gt;&amp;gt;&lt;/a</span><br><span class="line">            &gt;</span><br><span class="line">            &lt;a</span><br><span class="line">              :class=&quot;&#123; undisable: !data.hasNext &#125;&quot;</span><br><span class="line">              href=&quot;#&quot;</span><br><span class="line">              title=&quot;æœ«é¡µ&quot;</span><br><span class="line">              @click.prevent=&quot;gotoPage(data.pages)&quot;</span><br><span class="line">              &gt;æœ«&lt;/a</span><br><span class="line">            &gt;</span><br><span class="line">            &lt;div class=&quot;clear&quot; /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/section&gt;</span><br><span class="line">    &lt;/section&gt;</span><br><span class="line">    &lt;!-- /è¯¾ç¨‹åˆ—è¡¨ ç»“æŸ --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import courseApi from &#x27;@/api/course&#x27;</span><br><span class="line">  export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        page: 1, // å½“å‰é¡µ</span><br><span class="line">        data: &#123;&#125;, // è¯¾ç¨‹åˆ—è¡¨</span><br><span class="line">        subjectNestedList: [], // ä¸€çº§åˆ†ç±»åˆ—è¡¨</span><br><span class="line">        subSubjectList: [], // äºŒçº§åˆ†ç±»åˆ—è¡¨</span><br><span class="line"></span><br><span class="line">        queryObj: &#123;&#125;, // æŸ¥è¯¢è¡¨å•å¯¹è±¡</span><br><span class="line"></span><br><span class="line">        oneIndex: -1,</span><br><span class="line">        twoIndex: -1,</span><br><span class="line">        buyCountSort: &#x27;&#x27;,</span><br><span class="line">        gmtCreateSort: &#x27;&#x27;,</span><br><span class="line">        priceSort: &#x27;&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line">      // è¯¾ç¨‹ç¬¬ä¸€æ¬¡æŸ¥è¯¢</span><br><span class="line">      this.initCourseFirst()</span><br><span class="line">      // ä¸€çº§åˆ†ç±»æ˜¾ç¤º</span><br><span class="line">      this.initSubject()</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      // 1 æŸ¥è¯¢ç¬¬ä¸€é¡µæ•°æ®</span><br><span class="line">      initCourseFirst() &#123;</span><br><span class="line">        courseApi.getCourseList(1, 8, this.queryObj).then(response =&gt; &#123;</span><br><span class="line">          this.data = response.data.data</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">      // 2 æŸ¥è¯¢æ‰€æœ‰ä¸€çº§åˆ†ç±»</span><br><span class="line">      initSubject() &#123;</span><br><span class="line">        courseApi.getSubjectList().then(response =&gt; &#123;</span><br><span class="line">          this.subjectNestedList = response.data.data.list</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      // 3 åˆ†é¡µåˆ‡æ¢çš„æ–¹æ³•</span><br><span class="line">      gotoPage(page) &#123;</span><br><span class="line">        courseApi.getCourseList(page, 8, this.queryObj).then(response =&gt; &#123;</span><br><span class="line">          this.data = response.data.data</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      // 4 ç‚¹å‡»æŸä¸ªä¸€çº§åˆ†ç±»ï¼ŒæŸ¥è¯¢å¯¹åº”äºŒçº§åˆ†ç±»</span><br><span class="line">      searchOne(subjectParentId, index) &#123;</span><br><span class="line">        // æŠŠä¼ é€’indexå€¼èµ‹å€¼ç»™oneIndex,ä¸ºäº†activeæ ·å¼ç”Ÿæ•ˆ</span><br><span class="line">        this.oneIndex = index</span><br><span class="line"></span><br><span class="line">        this.twoIndex = -1</span><br><span class="line">        this.queryObj.subjectId = &#x27;&#x27;</span><br><span class="line">        this.subSubjectList = []</span><br><span class="line"></span><br><span class="line">        // æŠŠä¸€çº§åˆ†ç±»ç‚¹å‡»idå€¼ï¼Œèµ‹å€¼ç»™queryObj</span><br><span class="line">        this.queryObj.subjectParentId = subjectParentId</span><br><span class="line">        // ç‚¹å‡»æŸä¸ªä¸€çº§åˆ†ç±»è¿›è¡Œæ¡ä»¶æŸ¥è¯¢</span><br><span class="line">        this.gotoPage(1)</span><br><span class="line"></span><br><span class="line">        // æ‹¿ç€ç‚¹å‡»ä¸€çº§åˆ†ç±»id å’Œ æ‰€æœ‰ä¸€çº§åˆ†ç±»idè¿›è¡Œæ¯”è¾ƒï¼Œ</span><br><span class="line">        // å¦‚æœidç›¸åŒï¼Œä»ä¸€çº§åˆ†ç±»é‡Œé¢è·å–å¯¹åº”çš„äºŒçº§åˆ†ç±»</span><br><span class="line">        for (let i = 0; i &lt; this.subjectNestedList.length; i++) &#123;</span><br><span class="line">          // è·å–æ¯ä¸ªä¸€çº§åˆ†ç±»</span><br><span class="line">          var oneSubject = this.subjectNestedList[i]</span><br><span class="line">          // æ¯”è¾ƒidæ˜¯å¦ç›¸åŒ</span><br><span class="line">          if (subjectParentId == oneSubject.id) &#123;</span><br><span class="line">            // ä»ä¸€çº§åˆ†ç±»é‡Œé¢è·å–å¯¹åº”çš„äºŒçº§åˆ†ç±»</span><br><span class="line">            this.subSubjectList = oneSubject.children</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      // 5 ç‚¹å‡»æŸä¸ªäºŒçº§åˆ†ç±»å®ç°æŸ¥è¯¢</span><br><span class="line">      searchTwo(subjectId, index) &#123;</span><br><span class="line">        // æŠŠindexèµ‹å€¼,ä¸ºäº†æ ·å¼ç”Ÿæ•ˆ</span><br><span class="line">        this.twoIndex = index</span><br><span class="line">        // æŠŠäºŒçº§åˆ†ç±»ç‚¹å‡»idå€¼ï¼Œèµ‹å€¼ç»™queryObj</span><br><span class="line">        this.queryObj.subjectId = subjectId</span><br><span class="line">        // ç‚¹å‡»æŸä¸ªäºŒçº§åˆ†ç±»è¿›è¡Œæ¡ä»¶æŸ¥è¯¢</span><br><span class="line">        this.gotoPage(1)</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      // 6 æ ¹æ®é”€é‡æ’åº</span><br><span class="line">      searchBuyCount() &#123;</span><br><span class="line">        // è®¾ç½®å¯¹åº”å˜é‡å€¼ï¼Œä¸ºäº†æ ·å¼ç”Ÿæ•ˆ</span><br><span class="line">        this.buyCountSort = &#x27;1&#x27;</span><br><span class="line">        this.gmtCreateSort = &#x27;&#x27;</span><br><span class="line">        this.priceSort = &#x27;&#x27;</span><br><span class="line"></span><br><span class="line">        // æŠŠå€¼èµ‹å€¼åˆ°queryObj</span><br><span class="line">        this.queryObj.buyCountSort = this.buyCountSort</span><br><span class="line">        this.queryObj.gmtCreateSort = this.gmtCreateSort</span><br><span class="line">        this.queryObj.priceSort = this.priceSort</span><br><span class="line"></span><br><span class="line">        // è°ƒç”¨æ–¹æ³•æŸ¥è¯¢</span><br><span class="line">        this.gotoPage(1)</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      // 7 æœ€æ–°æ’åº</span><br><span class="line">      searchGmtCreate() &#123;</span><br><span class="line">        // è®¾ç½®å¯¹åº”å˜é‡å€¼ï¼Œä¸ºäº†æ ·å¼ç”Ÿæ•ˆ</span><br><span class="line">        this.buyCountSort = &#x27;&#x27;</span><br><span class="line">        this.gmtCreateSort = &#x27;1&#x27;</span><br><span class="line">        this.priceSort = &#x27;&#x27;</span><br><span class="line"></span><br><span class="line">        // æŠŠå€¼èµ‹å€¼åˆ°queryObj</span><br><span class="line">        this.queryObj.buyCountSort = this.buyCountSort</span><br><span class="line">        this.queryObj.gmtCreateSort = this.gmtCreateSort</span><br><span class="line">        this.queryObj.priceSort = this.priceSort</span><br><span class="line"></span><br><span class="line">        // è°ƒç”¨æ–¹æ³•æŸ¥è¯¢</span><br><span class="line">        this.gotoPage(1)</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      // 8 ä»·æ ¼æ’åº</span><br><span class="line">      searchPrice() &#123;</span><br><span class="line">        // è®¾ç½®å¯¹åº”å˜é‡å€¼ï¼Œä¸ºäº†æ ·å¼ç”Ÿæ•ˆ</span><br><span class="line">        this.buyCountSort = &#x27;&#x27;</span><br><span class="line">        this.gmtCreateSort = &#x27;&#x27;</span><br><span class="line">        this.priceSort = &#x27;1&#x27;</span><br><span class="line"></span><br><span class="line">        // æŠŠå€¼èµ‹å€¼åˆ°queryObj</span><br><span class="line">        this.queryObj.buyCountSort = this.buyCountSort</span><br><span class="line">        this.queryObj.gmtCreateSort = this.gmtCreateSort</span><br><span class="line">        this.queryObj.priceSort = this.priceSort</span><br><span class="line"></span><br><span class="line">        // è°ƒç”¨æ–¹æ³•æŸ¥è¯¢</span><br><span class="line">        this.gotoPage(1)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .active &#123;</span><br><span class="line">    background: #bdbdbd;</span><br><span class="line">  &#125;</span><br><span class="line">  .hide &#123;</span><br><span class="line">    display: none;</span><br><span class="line">  &#125;</span><br><span class="line">  .show &#123;</span><br><span class="line">    display: block;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h3 id="è¯¾ç¨‹è¯¦æƒ…ï¼ˆåç«¯ï¼‰"><a href="#è¯¾ç¨‹è¯¦æƒ…ï¼ˆåç«¯ï¼‰" class="headerlink" title="è¯¾ç¨‹è¯¦æƒ…ï¼ˆåç«¯ï¼‰"></a>è¯¾ç¨‹è¯¦æƒ…ï¼ˆåç«¯ï¼‰</h3><h4 id="voç±»-1"><a href="#voç±»-1" class="headerlink" title="voç±»"></a>voç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¯¾ç¨‹åŸºç¡€ä¿¡æ¯VO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CourseFrontInfoVo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;è¯¾ç¨‹æ ‡é¢˜&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;è¯¾ç¨‹é”€å”®ä»·æ ¼ï¼Œè®¾ç½®ä¸º0åˆ™å¯å…è´¹è§‚çœ‹&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> BigDecimal price;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;æ€»è¯¾æ—¶&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer lessonNum;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;è¯¾ç¨‹å°é¢å›¾ç‰‡è·¯å¾„&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String cover;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;é”€å”®æ•°é‡&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long buyCount;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;æµè§ˆæ•°é‡&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long viewCount;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;è¯¾ç¨‹ç®€ä»‹&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;è®²å¸ˆID&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String teacherId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;è®²å¸ˆå§“å&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String teacherName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;è®²å¸ˆèµ„å†,ä¸€å¥è¯è¯´æ˜è®²å¸ˆ&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String intro;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;è®²å¸ˆå¤´åƒ&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String avatar;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;è¯¾ç¨‹ä¸€çº§ç±»åˆ«ID&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String subjectLevelOneId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;ç±»åˆ«ä¸€çº§åç§°&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String subjectLevelOne;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;è¯¾ç¨‹äºŒçº§ç±»åˆ«ID&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String subjectLevelTwoId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;ç±»åˆ«äºŒçº§åç§°&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String subjectLevelTwo;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="controller-2"><a href="#controller-2" class="headerlink" title="controller"></a>controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯¾ç¨‹è¯¦æƒ…ä¿¡æ¯</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;getCourseInfo/&#123;courseId&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">getCourseInfo</span><span class="params">(<span class="meta">@PathVariable</span> String courseId)</span> </span>&#123;</span><br><span class="line">    CourseFrontInfoVo courseInfo = courseService.getBaseCourseInfo(courseId);</span><br><span class="line">    List&lt;ChapterVo&gt; chapterList = chapterService.getChapterVideoByCourseId(courseId);</span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">&quot;courseInfo&quot;</span>, courseInfo).data(<span class="string">&quot;chapterList&quot;</span>, chapterList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="service-2"><a href="#service-2" class="headerlink" title="service"></a>service</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®è¯¾ç¨‹idæŸ¥è¯¢è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯ä»¥åŠå…¶ç« èŠ‚åˆ—è¡¨</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> CourseFrontInfoVo <span class="title">getBaseCourseInfo</span><span class="params">(String courseId)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> baseMapper.getBaseCourseInfo(courseId);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="mapper"><a href="#mapper" class="headerlink" title="mapper"></a>mapper</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ ¹æ®è¯¾ç¨‹idæŸ¥è¯¢è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getBaseCourseInfo&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.eduservice.entity.frontVo.CourseFrontInfoVo&quot;</span>&gt;</span></span><br><span class="line">    select ec.id,</span><br><span class="line">           ec.title,</span><br><span class="line">           ec.price,</span><br><span class="line">           ec.cover,</span><br><span class="line">           ec.lesson_num AS lessonNum,</span><br><span class="line">           ec.buy_count  AS buyCount,</span><br><span class="line">           ec.view_count AS viewCount,</span><br><span class="line">           ecd.description,</span><br><span class="line">           et.id         AS teacherId,</span><br><span class="line">           et.name       AS teacherName,</span><br><span class="line">           et.intro,</span><br><span class="line">           et.avatar,</span><br><span class="line">           es1.id        AS subjectLevelOneId,</span><br><span class="line">           es1.title     AS subjectLevelOne,</span><br><span class="line">           es2.id        AS subjectLevelTwoId,</span><br><span class="line">           es2.title     AS subjectLevelTwo</span><br><span class="line">    from edu_course ec</span><br><span class="line">             left join edu_course_description ecd on ec.id = ecd.id</span><br><span class="line">             left join edu_teacher et on ec.teacher_id = et.id</span><br><span class="line">             left join edu_subject es1 on ec.subject_parent_id = es1.id</span><br><span class="line">             left join edu_subject es2 on ec.subject_id = es2.id</span><br><span class="line">    where ec.id = #&#123;courseId&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="è¯¾ç¨‹è¯¦æƒ…ï¼ˆå‰ç«¯ï¼‰"><a href="#è¯¾ç¨‹è¯¦æƒ…ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="è¯¾ç¨‹è¯¦æƒ…ï¼ˆå‰ç«¯ï¼‰"></a>è¯¾ç¨‹è¯¦æƒ…ï¼ˆå‰ç«¯ï¼‰</h3><h4 id="api-3"><a href="#api-3" class="headerlink" title="api"></a>api</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å¾—è¯¾ç¨‹ä¿¡æ¯</span></span><br><span class="line"><span class="function"><span class="title">getCourseInfo</span>(<span class="params">courseId</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> request(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/eduservice/coursefront/getCourseInfo/<span class="subst">$&#123;courseId&#125;</span>`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="vue-3"><a href="#vue-3" class="headerlink" title="vue"></a>vue</h4><blockquote><p>æ³¨æ„è¿™é‡Œçš„ç®€ä»‹æ˜¾ç¤ºï¼Œéœ€è¦ä½¿ç”¨v-html</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;aCoursesList&quot; class=&quot;bg-fa of&quot;&gt;</span><br><span class="line">    &lt;!-- /è¯¾ç¨‹è¯¦æƒ… å¼€å§‹ --&gt;</span><br><span class="line">    &lt;section class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;!-- è¿™é‡Œæ˜¯ä¸€ä¸ªé¢åŒ…å±‘å¯¼èˆª --&gt;</span><br><span class="line">      &lt;section class=&quot;path-wrap txtOf hLh30&quot;&gt;</span><br><span class="line">        &lt;a href=&quot;#&quot; title class=&quot;c-999 fsize14&quot;&gt;é¦–é¡µ&lt;/a&gt;</span><br><span class="line">        \</span><br><span class="line">        &lt;a href=&quot;#&quot; title class=&quot;c-999 fsize14&quot;&gt;&#123;&#123;</span><br><span class="line">          courseInfo.subjectLevelOne</span><br><span class="line">        &#125;&#125;&lt;/a&gt;</span><br><span class="line">        \</span><br><span class="line">        &lt;span class=&quot;c-333 fsize14&quot;&gt;&#123;&#123; courseInfo.subjectLevelTwo &#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;/section&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;article class=&quot;c-v-pic-wrap&quot; style=&quot;height: 357px&quot;&gt;</span><br><span class="line">          &lt;section class=&quot;p-h-video-box&quot; id=&quot;videoPlay&quot;&gt;</span><br><span class="line">            &lt;img</span><br><span class="line">              :src=&quot;courseInfo.cover&quot;</span><br><span class="line">              :alt=&quot;courseInfo.title&quot;</span><br><span class="line">              class=&quot;dis c-v-pic&quot;</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/section&gt;</span><br><span class="line">        &lt;/article&gt;</span><br><span class="line">        &lt;aside class=&quot;c-attr-wrap&quot;&gt;</span><br><span class="line">          &lt;section class=&quot;ml20 mr15&quot;&gt;</span><br><span class="line">            &lt;h2 class=&quot;hLh30 txtOf mt15&quot;&gt;</span><br><span class="line">              &lt;span class=&quot;c-fff fsize24&quot;&gt;&#123;&#123; courseInfo.title &#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;/h2&gt;</span><br><span class="line">            &lt;section class=&quot;c-attr-jg&quot;&gt;</span><br><span class="line">              &lt;span class=&quot;c-fff&quot;&gt;ä»·æ ¼ï¼š&lt;/span&gt;</span><br><span class="line">              &lt;b class=&quot;c-yellow&quot; style=&quot;font-size: 24px&quot;</span><br><span class="line">                &gt;ï¿¥&#123;&#123; courseInfo.price &#125;&#125;&lt;/b</span><br><span class="line">              &gt;</span><br><span class="line">            &lt;/section&gt;</span><br><span class="line">            &lt;section class=&quot;c-attr-mt c-attr-undis&quot;&gt;</span><br><span class="line">              &lt;span class=&quot;c-fff fsize14&quot;</span><br><span class="line">                &gt;ä¸»è®²ï¼š &#123;&#123; courseInfo.teacherName &#125;&#125;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span</span><br><span class="line">              &gt;</span><br><span class="line">            &lt;/section&gt;</span><br><span class="line">            &lt;section class=&quot;c-attr-mt of&quot;&gt;</span><br><span class="line">              &lt;span class=&quot;ml10 vam&quot;&gt;</span><br><span class="line">                &lt;em class=&quot;icon18 scIcon&quot;&gt;&lt;/em&gt;</span><br><span class="line">                &lt;a class=&quot;c-fff vam&quot; title=&quot;æ”¶è—&quot; href=&quot;#&quot;&gt;æ”¶è—&lt;/a&gt;</span><br><span class="line">              &lt;/span&gt;</span><br><span class="line">            &lt;/section&gt;</span><br><span class="line">            &lt;section class=&quot;c-attr-mt&quot;&gt;</span><br><span class="line">              &lt;a href=&quot;#&quot; title=&quot;ç«‹å³è§‚çœ‹&quot; class=&quot;comm-btn c-btn-3&quot;&gt;ç«‹å³è§‚çœ‹&lt;/a&gt;</span><br><span class="line">            &lt;/section&gt;</span><br><span class="line">          &lt;/section&gt;</span><br><span class="line">        &lt;/aside&gt;</span><br><span class="line">        &lt;aside class=&quot;thr-attr-box&quot;&gt;</span><br><span class="line">          &lt;ol class=&quot;thr-attr-ol clearfix&quot;&gt;</span><br><span class="line">            &lt;li&gt;</span><br><span class="line">              &lt;p&gt;&amp;nbsp;&lt;/p&gt;</span><br><span class="line">              &lt;aside&gt;</span><br><span class="line">                &lt;span class=&quot;c-fff f-fM&quot;&gt;è´­ä¹°æ•°&lt;/span&gt;</span><br><span class="line">                &lt;br /&gt;</span><br><span class="line">                &lt;h6 class=&quot;c-fff f-fM mt10&quot;&gt;&#123;&#123; courseInfo.buyCount &#125;&#125;&lt;/h6&gt;</span><br><span class="line">              &lt;/aside&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">            &lt;li&gt;</span><br><span class="line">              &lt;p&gt;&amp;nbsp;&lt;/p&gt;</span><br><span class="line">              &lt;aside&gt;</span><br><span class="line">                &lt;span class=&quot;c-fff f-fM&quot;&gt;è¯¾æ—¶æ•°&lt;/span&gt;</span><br><span class="line">                &lt;br /&gt;</span><br><span class="line">                &lt;h6 class=&quot;c-fff f-fM mt10&quot;&gt;&#123;&#123; courseInfo.lessonNum &#125;&#125;&lt;/h6&gt;</span><br><span class="line">              &lt;/aside&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">            &lt;li&gt;</span><br><span class="line">              &lt;p&gt;&amp;nbsp;&lt;/p&gt;</span><br><span class="line">              &lt;aside&gt;</span><br><span class="line">                &lt;span class=&quot;c-fff f-fM&quot;&gt;æµè§ˆæ•°&lt;/span&gt;</span><br><span class="line">                &lt;br /&gt;</span><br><span class="line">                &lt;h6 class=&quot;c-fff f-fM mt10&quot;&gt;&#123;&#123; courseInfo.viewCount &#125;&#125;&lt;/h6&gt;</span><br><span class="line">              &lt;/aside&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">          &lt;/ol&gt;</span><br><span class="line">        &lt;/aside&gt;</span><br><span class="line">        &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- /è¯¾ç¨‹å°é¢ä»‹ç» --&gt;</span><br><span class="line">      &lt;div class=&quot;mt20 c-infor-box&quot;&gt;</span><br><span class="line">        &lt;article class=&quot;fl col-7&quot;&gt;</span><br><span class="line">          &lt;section class=&quot;mr30&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;i-box&quot;&gt;</span><br><span class="line">              &lt;div&gt;</span><br><span class="line">                &lt;section id=&quot;c-i-tabTitle&quot; class=&quot;c-infor-tabTitle c-tab-title&quot;&gt;</span><br><span class="line">                  &lt;a name=&quot;c-i&quot; class=&quot;current&quot; title=&quot;è¯¾ç¨‹è¯¦æƒ…&quot;&gt;è¯¾ç¨‹è¯¦æƒ…&lt;/a&gt;</span><br><span class="line">                &lt;/section&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;article class=&quot;ml10 mr10 pt20&quot;&gt;</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                  &lt;h6 class=&quot;c-i-content c-infor-title&quot;&gt;</span><br><span class="line">                    &lt;span&gt;è¯¾ç¨‹ä»‹ç»&lt;/span&gt;</span><br><span class="line">                  &lt;/h6&gt;</span><br><span class="line">                  &lt;div class=&quot;course-txt-body-wrap&quot;&gt;</span><br><span class="line">                    &lt;section class=&quot;course-txt-body&quot;&gt;</span><br><span class="line">                      &lt;!-- ç”±äºå½“åˆç¼–å†™çš„æ—¶å€™ä½¿ç”¨çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¾ç¤ºè¦ä½¿ç”¨v-html --&gt;</span><br><span class="line">                      &lt;p v-html=&quot;courseInfo.description&quot;&gt;</span><br><span class="line">                        &#123;&#123; courseInfo.description &#125;&#125;</span><br><span class="line">                      &lt;/p&gt;</span><br><span class="line">                    &lt;/section&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;!-- /è¯¾ç¨‹ä»‹ç» --&gt;</span><br><span class="line">                &lt;div class=&quot;mt50&quot;&gt;</span><br><span class="line">                  &lt;h6 class=&quot;c-g-content c-infor-title&quot;&gt;</span><br><span class="line">                    &lt;span&gt;è¯¾ç¨‹å¤§çº²&lt;/span&gt;</span><br><span class="line">                  &lt;/h6&gt;</span><br><span class="line">                  &lt;section class=&quot;mt20&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;lh-menu-wrap&quot;&gt;</span><br><span class="line">                      &lt;menu id=&quot;lh-menu&quot; class=&quot;lh-menu mt10 mr10&quot;&gt;</span><br><span class="line">                        &lt;ul&gt;</span><br><span class="line">                          &lt;!-- æ–‡ä»¶ç›®å½• --&gt;</span><br><span class="line">                          &lt;li</span><br><span class="line">                            class=&quot;lh-menu-stair&quot;</span><br><span class="line">                            v-for=&quot;chapter in chapterList&quot;</span><br><span class="line">                            :key=&quot;chapter.id&quot;</span><br><span class="line">                          &gt;</span><br><span class="line">                            &lt;a</span><br><span class="line">                              href=&quot;javascript: void(0)&quot;</span><br><span class="line">                              :title=&quot;chapter.title&quot;</span><br><span class="line">                              class=&quot;current-1&quot;</span><br><span class="line">                            &gt;</span><br><span class="line">                              &lt;em class=&quot;lh-menu-i-1 icon18 mr10&quot;&gt;&lt;/em</span><br><span class="line">                              &gt;&#123;&#123; chapter.title &#125;&#125;</span><br><span class="line">                            &lt;/a&gt;</span><br><span class="line">                            &lt;ol class=&quot;lh-menu-ol&quot; style=&quot;display: block&quot;&gt;</span><br><span class="line">                              &lt;li</span><br><span class="line">                                class=&quot;lh-menu-second ml30&quot;</span><br><span class="line">                                v-for=&quot;video in chapter.children&quot;</span><br><span class="line">                                :key=&quot;video.id&quot;</span><br><span class="line">                              &gt;</span><br><span class="line">                                &lt;a href=&quot;#&quot; :title=&quot;video.title&quot;&gt;</span><br><span class="line">                                  &lt;span class=&quot;fr&quot;&gt;</span><br><span class="line">                                    &lt;i class=&quot;free-icon vam mr10&quot;&gt;å…è´¹è¯•å¬&lt;/i&gt;</span><br><span class="line">                                  &lt;/span&gt;</span><br><span class="line">                                  &lt;em class=&quot;lh-menu-i-2 icon16 mr5&quot;&gt;&amp;nbsp;&lt;/em</span><br><span class="line">                                  &gt;&#123;&#123;video.title&#125;&#125;</span><br><span class="line">                                &lt;/a&gt;</span><br><span class="line">                              &lt;/li&gt;</span><br><span class="line">                            &lt;/ol&gt;</span><br><span class="line">                          &lt;/li&gt;</span><br><span class="line">                        &lt;/ul&gt;</span><br><span class="line">                      &lt;/menu&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                  &lt;/section&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;!-- /è¯¾ç¨‹å¤§çº² --&gt;</span><br><span class="line">              &lt;/article&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/section&gt;</span><br><span class="line">        &lt;/article&gt;</span><br><span class="line">        &lt;aside class=&quot;fl col-3&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;i-box&quot;&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">              &lt;section class=&quot;c-infor-tabTitle c-tab-title&quot;&gt;</span><br><span class="line">                &lt;a title href=&quot;javascript:void(0)&quot;&gt;ä¸»è®²è®²å¸ˆ&lt;/a&gt;</span><br><span class="line">              &lt;/section&gt;</span><br><span class="line">              &lt;section class=&quot;stud-act-list&quot;&gt;</span><br><span class="line">                &lt;ul style=&quot;height: auto&quot;&gt;</span><br><span class="line">                  &lt;li&gt;</span><br><span class="line">                    &lt;div class=&quot;u-face&quot;&gt;</span><br><span class="line">                      &lt;a href=&quot;#&quot;&gt;</span><br><span class="line">                        &lt;img :src=&quot;courseInfo.avatar&quot; width=&quot;50&quot; height=&quot;50&quot; /&gt;</span><br><span class="line">                      &lt;/a&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;section class=&quot;hLh30 txtOf&quot;&gt;</span><br><span class="line">                      &lt;a class=&quot;c-333 fsize16 fl&quot; href=&quot;#&quot;&gt;&#123;&#123;</span><br><span class="line">                        courseInfo.teacherName</span><br><span class="line">                      &#125;&#125;&lt;/a&gt;</span><br><span class="line">                    &lt;/section&gt;</span><br><span class="line">                    &lt;section class=&quot;hLh20 txtOf&quot;&gt;</span><br><span class="line">                      &lt;span class=&quot;c-999&quot;&gt;&#123;&#123; courseInfo.intro &#125;&#125;&lt;/span&gt;</span><br><span class="line">                    &lt;/section&gt;</span><br><span class="line">                  &lt;/li&gt;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">              &lt;/section&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/aside&gt;</span><br><span class="line">        &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/section&gt;</span><br><span class="line">    &lt;!-- /è¯¾ç¨‹è¯¦æƒ… ç»“æŸ --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import courseApi from &#x27;@/api/course&#x27;</span><br><span class="line">  export default &#123;</span><br><span class="line">    asyncData(&#123; params, error &#125;) &#123;</span><br><span class="line">      return courseApi.getCourseInfo(params.id).then(result =&gt; &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          courseInfo: result.data.data.courseInfo,</span><br><span class="line">          chapterList: result.data.data.chapterList</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><blockquote><p>TODOï¼šé‡Œé¢è¿˜æœ‰ä¸€äº›è·³è½¬è¿˜è¦å®Œå–„</p></blockquote><h2 id="è§†é¢‘æ’­æ”¾å™¨"><a href="#è§†é¢‘æ’­æ”¾å™¨" class="headerlink" title="è§†é¢‘æ’­æ”¾å™¨"></a>è§†é¢‘æ’­æ”¾å™¨</h2><blockquote><p>é˜¿é‡Œäº‘è§†é¢‘æ’­æ”¾å™¨ï¼Œä½¿ç”¨æ’­æ”¾å‡­è¯æ’­æ”¾</p></blockquote><blockquote><p>æ³¨æ„è¿™é‡Œè¦å†™åˆ°service_vodæ¨¡å—ï¼Œå› ä¸ºæ˜¯å’Œé˜¿é‡Œäº‘è§†é¢‘ç›¸å…³</p></blockquote><h3 id="åç«¯"><a href="#åç«¯" class="headerlink" title="åç«¯"></a>åç«¯</h3><h4 id="controller-3"><a href="#controller-3" class="headerlink" title="controller"></a>controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®è§†é¢‘idè·å–è§†é¢‘å‡­è¯</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;getPlayAuth/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">getPlayAuth</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span> <span class="keyword">throws</span> ClientException </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºåˆå§‹åŒ–å¯¹è±¡</span></span><br><span class="line">    DefaultAcsClient client = InitVodClient.initVodClient(ConstantVodUtils.ACCESS_KEY_ID, ConstantVodUtils.ACCESS_KEY_SECRET);</span><br><span class="line">    <span class="comment">// åˆ›å»ºè·å–å‡­è¯çš„requestå’Œresponse</span></span><br><span class="line">    GetVideoPlayAuthRequest request = <span class="keyword">new</span> GetVideoPlayAuthRequest();</span><br><span class="line">    request.setVideoId(id);</span><br><span class="line">    <span class="comment">// è°ƒç”¨æ–¹æ³•è·å¾—å‡­è¯</span></span><br><span class="line">    GetVideoPlayAuthResponse acsResponse = client.getAcsResponse(request);</span><br><span class="line">    String playAuth = acsResponse.getPlayAuth();</span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">&quot;playAuth&quot;</span>, playAuth);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‰ç«¯"><a href="#å‰ç«¯" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h3><blockquote><p> å…ˆå»ä¿®æ”¹aæ ‡ç­¾çš„hrefå€¼</p><p> <code> :href=&quot;&#39;/video_player/&#39; + video.videoSourceId&quot;  target=&quot;_blank&quot;</code></p></blockquote><blockquote><p>ç„¶åå‰ç«¯åœ¨pagesæ–‡ä»¶å¤¹ä¸‹ç¼–å†™ä¸€ä¸ªåŠ¨æ€è·¯ç”±çš„vueè§†å›¾ï¼Œå¯ä»¥å‘½åä¸º_vid.vueï¼Œé‡Œé¢ç¼–å†™æ’­æ”¾å™¨çš„æ¨¡æ¿ï¼Œè¿™é‡Œè¿˜ä¸“é—¨å†™äº†ä¸€ä¸ªvideoçš„å¸ƒå±€layoutï¼Œcvå³å¯</p></blockquote><h4 id="layout"><a href="#layout" class="headerlink" title="layout"></a>layout</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;guli-player&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;head&quot;&gt;</span><br><span class="line">      &lt;a href=&quot;#&quot; title=&quot;è°·ç²’å­¦é™¢&quot;&gt;</span><br><span class="line">        &lt;img class=&quot;logo&quot; src=&quot;~/assets/img/logo.png&quot; lt=&quot;è°·ç²’å­¦é™¢&quot;&gt;</span><br><span class="line">    &lt;/a&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;body&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;content&quot;&gt;&lt;nuxt/&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">html,body&#123;</span><br><span class="line">  height:100%;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.head &#123;</span><br><span class="line">  height: 50px;</span><br><span class="line">  position: absolute;</span><br><span class="line">  top: 0;</span><br><span class="line">  left: 0;</span><br><span class="line">  width: 100%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.head .logo&#123;</span><br><span class="line">  height: 50px;</span><br><span class="line">  margin-left: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.body &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  top: 50px;</span><br><span class="line">  left: 0;</span><br><span class="line">  right: 0;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h4 id="api-4"><a href="#api-4" class="headerlink" title="api"></a>api</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">getPlayAuth</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">`/eduvod/video/getPlayAuth/<span class="subst">$&#123;id&#125;</span>`</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="vueè§†å›¾"><a href="#vueè§†å›¾" class="headerlink" title="vueè§†å›¾"></a>vueè§†å›¾</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- é˜¿é‡Œäº‘è§†é¢‘æ’­æ”¾å™¨æ ·å¼ --&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://g.alicdn.com/de/prismplayer/2.8.1/skins/default/aliplayer-min.css&quot; &gt;</span><br><span class="line">    &lt;!-- é˜¿é‡Œäº‘è§†é¢‘æ’­æ”¾å™¨è„šæœ¬ --&gt;</span><br><span class="line">    &lt;script charset=&quot;utf-8&quot; type=&quot;text/javascript&quot; src=&quot;https://g.alicdn.com/de/prismplayer/2.8.1/aliplayer-min.js&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- å®šä¹‰æ’­æ”¾å™¨dom --&gt;</span><br><span class="line">    &lt;div id=&quot;J_prismPlayer&quot; class=&quot;prism-player&quot; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import vod from &#x27;@/api/vod&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    layout: &#x27;video&#x27;,//åº”ç”¨videoå¸ƒå±€</span><br><span class="line">    asyncData(&#123; params, error &#125;) &#123;</span><br><span class="line">       return vod.getPlayAuth(params.vid)</span><br><span class="line">        .then(response =&gt; &#123;</span><br><span class="line">            return &#123; </span><br><span class="line">                playAuth: response.data.data.playAuth,</span><br><span class="line">                vid: params.vid</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123; //é¡µé¢æ¸²æŸ“ä¹‹å  created</span><br><span class="line">        new Aliplayer(&#123;</span><br><span class="line">            id: &#x27;J_prismPlayer&#x27;,</span><br><span class="line">            vid: this.vid, // è§†é¢‘id</span><br><span class="line">            playauth: this.playAuth, // æ’­æ”¾å‡­è¯</span><br><span class="line">            encryptType: &#x27;1&#x27;, // å¦‚æœæ’­æ”¾åŠ å¯†è§†é¢‘ï¼Œåˆ™éœ€è®¾ç½®encryptType=1ï¼ŒéåŠ å¯†è§†é¢‘æ— éœ€è®¾ç½®æ­¤é¡¹</span><br><span class="line">            width: &#x27;100%&#x27;,</span><br><span class="line">            height: &#x27;500px&#x27;,</span><br><span class="line">            // ä»¥ä¸‹å¯é€‰è®¾ç½®</span><br><span class="line">            cover: &#x27;http://guli.shop/photo/banner/1525939573202.jpg&#x27;, // å°é¢</span><br><span class="line">            qualitySort: &#x27;asc&#x27;, // æ¸…æ™°åº¦æ’åº</span><br><span class="line"></span><br><span class="line">            mediaType: &#x27;video&#x27;, // è¿”å›éŸ³é¢‘è¿˜æ˜¯è§†é¢‘</span><br><span class="line">            autoplay: false, // è‡ªåŠ¨æ’­æ”¾</span><br><span class="line">            isLive: false, // ç›´æ’­</span><br><span class="line">            rePlay: false, // å¾ªç¯æ’­æ”¾</span><br><span class="line">            preload: true,</span><br><span class="line">            controlBarVisibility: &#x27;hover&#x27;, // æ§åˆ¶æ¡çš„æ˜¾ç¤ºæ–¹å¼ï¼šé¼ æ ‡æ‚¬åœ</span><br><span class="line">            useH5Prism: true, // æ’­æ”¾å™¨ç±»å‹ï¼šhtml5</span><br><span class="line">        &#125;, function(player) &#123;</span><br><span class="line">            console.log(&#x27;æ’­æ”¾å™¨åˆ›å»ºæˆåŠŸ&#x27;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="æ›´å¤šåŠŸèƒ½"><a href="#æ›´å¤šåŠŸèƒ½" class="headerlink" title="æ›´å¤šåŠŸèƒ½"></a>æ›´å¤šåŠŸèƒ½</h3><blockquote><p><a href="https://player.alicdn.com/aliplayer/index.html">é˜¿é‡Œäº‘Aliplayeræ’­æ”¾å™¨ (alicdn.com)</a></p><p>è¯¦è§æ–‡æ¡£</p></blockquote><h2 id="è§†é¢‘è¯„è®ºï¼ˆåç«¯-å‰ç«¯ï¼‰"><a href="#è§†é¢‘è¯„è®ºï¼ˆåç«¯-å‰ç«¯ï¼‰" class="headerlink" title="è§†é¢‘è¯„è®ºï¼ˆåç«¯+å‰ç«¯ï¼‰"></a>è§†é¢‘è¯„è®ºï¼ˆåç«¯+å‰ç«¯ï¼‰</h2><blockquote><p>å…·ä½“å®ç°åˆ†æï¼š</p><ol><li>åˆ›å»ºè¯¾ç¨‹è¯„è®ºè¡¨</li><li>åˆ›å»ºåç«¯æ¥å£<ol><li>åˆ†é¡µæŸ¥è¯¢å¯¹åº”è¯¾ç¨‹è¯„è®º</li><li>æ·»åŠ è¯„è®º<ol><li>è¯¾ç¨‹è¯„è®ºå†…å®¹ï¼šè¾“å…¥ï¼Œè°ƒç”¨æ¥å£</li><li>è¯¾ç¨‹idï¼šè¿›å…¥è¯¦æƒ…é¡µé¢å°±å¯ä»¥æŸ¥è¯¢åˆ°è¯¾ç¨‹id</li><li>ç”¨æˆ·idï¼šæ ¹æ®cookieä¸­çš„tokenæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</li></ol></li><li>è¿œç¨‹è°ƒç”¨ï¼ˆedu -&gt; ucenterï¼‰</li></ol></li></ol></blockquote><h2 id="è®¢å•ä¸æ”¯ä»˜ï¼ˆåç«¯-å‰ç«¯ï¼‰"><a href="#è®¢å•ä¸æ”¯ä»˜ï¼ˆåç«¯-å‰ç«¯ï¼‰" class="headerlink" title="è®¢å•ä¸æ”¯ä»˜ï¼ˆåç«¯+å‰ç«¯ï¼‰"></a>è®¢å•ä¸æ”¯ä»˜ï¼ˆåç«¯+å‰ç«¯ï¼‰</h2><blockquote><ol><li>åˆ›å»ºå­æ¨¡å—service_order, application.proertiesé‡Œå¤§å·®ä¸å·®</li><li>ä»£ç ç”Ÿæˆå™¨å¸¸è§„æ“ä½œ</li></ol></blockquote><h3 id="åç«¯åŸºç¡€æ­å»º"><a href="#åç«¯åŸºç¡€æ­å»º" class="headerlink" title="åç«¯åŸºç¡€æ­å»º"></a>åç«¯åŸºç¡€æ­å»º</h3><h4 id="å¯åŠ¨ç±»"><a href="#å¯åŠ¨ç±»" class="headerlink" title="å¯åŠ¨ç±»"></a>å¯åŠ¨ç±»</h4><blockquote><p>è¿™ä¸ªæ¨¡å—éœ€è¦è°ƒç”¨eduå’ŒUCenteræ¨¡å—ä¸­çš„æ–¹æ³•æŸ¥è¯¢è¯¾ç¨‹å’Œç”¨æˆ·ä¿¡æ¯</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &#123;&quot;com.atguigu&quot;&#125;)</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.atguigu.eduorder.mapper&quot;)</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span>  <span class="comment">// nacosæ³¨å†Œ</span></span><br><span class="line"><span class="meta">@EnableFeignClients</span>     <span class="comment">// ä½¿ç”¨Feign</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(OrderApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¾èµ–"><a href="#ä¾èµ–" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h4><blockquote><p>å¾®ä¿¡æ”¯ä»˜æ¥å£çš„ä¾èµ–</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.wxpay<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>wxpay-sdk<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆè®¢å•ï¼ˆåç«¯ï¼‰"><a href="#ç”Ÿæˆè®¢å•ï¼ˆåç«¯ï¼‰" class="headerlink" title="ç”Ÿæˆè®¢å•ï¼ˆåç«¯ï¼‰"></a>ç”Ÿæˆè®¢å•ï¼ˆåç«¯ï¼‰</h3><h4 id="OrderController"><a href="#OrderController" class="headerlink" title="OrderController"></a>OrderController</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/eduorder/order&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OrderService orderService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”Ÿæˆè®¢å•æ–¹æ³•</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;createOrder/&#123;courseId&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">createOrder</span><span class="params">(<span class="meta">@PathVariable</span> String courseId, HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºè®¢å•è¿”å›è®¢å•å·</span></span><br><span class="line">        String memberId = JwtUtils.getMemberIdByJwtToken(request);</span><br><span class="line">        String orderNo = orderService.createOrder(courseId, memberId);</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">&quot;orderNo&quot;</span>, orderNo);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å®ä½“ç±»"><a href="#å®ä½“ç±»" class="headerlink" title="å®ä½“ç±»"></a>å®ä½“ç±»</h4><blockquote><p>æ³¨æ„è¿™é‡Œè¦é¢å¤–å†™ä¸€ä¸ªvoç±»ç”¨äºè¿œç¨‹è°ƒç”¨çš„æ—¶å€™è¿”å›</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@EqualsAndHashCode(callSuper = false)</span></span><br><span class="line"><span class="meta">@Accessors(chain = true)</span></span><br><span class="line"><span class="meta">@ApiModel(value = &quot;UcenterMemberå¯¹è±¡&quot;, description = &quot;ä¼šå‘˜è¡¨&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UcenterMemberForOrder</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;ä¼šå‘˜id&quot;)</span></span><br><span class="line">    <span class="meta">@TableId(value = &quot;id&quot;, type = IdType.ID_WORKER_STR)</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;å¾®ä¿¡openid&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String openid;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;æ‰‹æœºå·&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String mobile;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;å¯†ç &quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;æ˜µç§°&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String nickname;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;æ€§åˆ« 1 å¥³ï¼Œ2 ç”·&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer sex;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;å¹´é¾„&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;ç”¨æˆ·å¤´åƒ&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String avatar;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;ç”¨æˆ·ç­¾å&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String sign;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;æ˜¯å¦ç¦ç”¨ 1ï¼ˆtrueï¼‰å·²ç¦ç”¨ï¼Œ  0ï¼ˆfalseï¼‰æœªç¦ç”¨&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Boolean isDisabled;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;é€»è¾‘åˆ é™¤ 1ï¼ˆtrueï¼‰å·²åˆ é™¤ï¼Œ 0ï¼ˆfalseï¼‰æœªåˆ é™¤&quot;)</span></span><br><span class="line">    <span class="meta">@TableLogic</span></span><br><span class="line">    <span class="keyword">private</span> Boolean isDeleted;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;åˆ›å»ºæ—¶é—´&quot;)</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line">    <span class="keyword">private</span> Date gmtCreate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;æ›´æ–°æ—¶é—´&quot;)</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class="line">    <span class="keyword">private</span> Date gmtModified;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¿™ä¸ªå®ä½“ç±»å’ŒUCenterMemberæ— å·®åˆ«ï¼Œä½†æ˜¯æ”¾åœ¨äº†commonæ¨¡å—å½“ä¸­ï¼Œæ‰€ä»¥ä¸åŒæ¨¡å—ä¸­çš„controlleréƒ½å¯ä»¥ä½¿ç”¨è¯¥ç±»</p><p>å¦ä¸€ä¸ªè¯¾ç¨‹ç›¸å…³å®ä½“ç±»ä¸è¿™ä¸ªç±»ä¼¼ï¼Œæ”¾åœ¨commonæ¨¡å—ä¸­å³å¯</p></blockquote><h4 id="UcenterMemberController"><a href="#UcenterMemberController" class="headerlink" title="UcenterMemberController"></a>UcenterMemberController</h4><blockquote><p>ç¼–å†™ä¸€ä¸ªè¢«è¿œç¨‹è°ƒç”¨çš„æ–¹æ³•ï¼Œé€šè¿‡idè·å–ç”¨æˆ·ä¿¡æ¯</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/educenter/member&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UcenterMemberController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UcenterMemberService memberService;</span><br><span class="line">    <span class="comment">// æ ¹æ®ç”¨æˆ·idè·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;getUserInfoOrder/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UcenterMemberForOrder <span class="title">getUserInfoOrder</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ³¨æ„è¿™é‡Œçš„è¿”å›ç±»å‹ä¸è¦Rï¼Œè€Œæ˜¯å¦ä¸€ä¸ªç»Ÿä¸€ç±»å‹</span></span><br><span class="line">        UcenterMember member = memberService.getById(id);</span><br><span class="line">        UcenterMemberForOrder memberForOrder = <span class="keyword">new</span> UcenterMemberForOrder();</span><br><span class="line">        BeanUtils.copyProperties(member, memberForOrder);</span><br><span class="line">        <span class="keyword">return</span> memberForOrder;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="CourseFrontController"><a href="#CourseFrontController" class="headerlink" title="CourseFrontController"></a>CourseFrontController</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/eduservice/coursefront&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CourseController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduCourseService courseService;</span><br><span class="line">    <span class="comment">// æ ¹æ®è¯¾ç¨‹idæŸ¥è¯¢è¯¾ç¨‹ä¿¡æ¯</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;getCourseInfoOrder/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CourseForOrder <span class="title">getCourseInfoOrder</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span> </span>&#123;</span><br><span class="line">        CourseInfoVo course = courseService.getCourseInfoById(id);</span><br><span class="line">        CourseForOrder courseForOrder = <span class="keyword">new</span> CourseForOrder();</span><br><span class="line">        BeanUtils.copyProperties(course, courseForOrder);</span><br><span class="line">        <span class="keyword">return</span> courseForOrder;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è¿œç¨‹è°ƒç”¨é…ç½®æ¥å£"><a href="#è¿œç¨‹è°ƒç”¨é…ç½®æ¥å£" class="headerlink" title="è¿œç¨‹è°ƒç”¨é…ç½®æ¥å£"></a>è¿œç¨‹è°ƒç”¨é…ç½®æ¥å£</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@FeignClient(&quot;service-edu&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">EduClient</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ ¹æ®è¯¾ç¨‹idæŸ¥è¯¢è¯¾ç¨‹ä¿¡æ¯</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/eduservice/coursefront/getCourseInfoOrder/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CourseForOrder <span class="title">getCourseInfoOrder</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> String id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@FeignClient(&quot;service-ucenter&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UcenterClient</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ ¹æ®ç”¨æˆ·idè·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/educenter/member/getUserInfoOrder/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UcenterMemberForOrder <span class="title">getUserInfoOrder</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> String id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="OrderService"><a href="#OrderService" class="headerlink" title="OrderService"></a>OrderService</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">OrderMapper</span>, <span class="title">Order</span>&gt; <span class="keyword">implements</span> <span class="title">OrderService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduClient eduClient;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UcenterClient ucenterClient;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”Ÿæˆè®¢å•</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">createOrder</span><span class="params">(String courseId, String memberId)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è¿œç¨‹è°ƒç”¨è·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        UcenterMemberForOrder userInfoOrder = ucenterClient.getUserInfoOrder(memberId);</span><br><span class="line">        <span class="comment">// è¿œç¨‹è°ƒç”¨è·å–è¯¾ç¨‹ä¿¡æ¯</span></span><br><span class="line">        CourseForOrder courseInfoOrder = eduClient.getCourseInfoOrder(courseId);</span><br><span class="line">        <span class="comment">// æ·»åŠ åˆ°æ•°æ®åº“</span></span><br><span class="line">        Order order = <span class="keyword">new</span> Order();</span><br><span class="line">        order.setOrderNo(OrderNoUtil.getOrderNo());<span class="comment">//è®¢å•å·</span></span><br><span class="line">        order.setCourseId(courseId); <span class="comment">//è¯¾ç¨‹id</span></span><br><span class="line">        order.setCourseTitle(courseInfoOrder.getTitle());</span><br><span class="line">        order.setCourseCover(courseInfoOrder.getCover());</span><br><span class="line">        order.setTeacherName(courseInfoOrder.getTeacherName());</span><br><span class="line">        order.setTotalFee(courseInfoOrder.getPrice());</span><br><span class="line">        order.setMemberId(memberId);</span><br><span class="line">        order.setMobile(userInfoOrder.getMobile());</span><br><span class="line">        order.setNickname(userInfoOrder.getNickname());</span><br><span class="line">        order.setStatus(<span class="number">0</span>);  <span class="comment">//è®¢å•çŠ¶æ€ï¼ˆ0ï¼šæœªæ”¯ä»˜ 1ï¼šå·²æ”¯ä»˜ï¼‰</span></span><br><span class="line">        order.setPayType(<span class="number">1</span>);  <span class="comment">//æ”¯ä»˜ç±»å‹ ï¼Œå¾®ä¿¡1</span></span><br><span class="line">        baseMapper.insert(order);</span><br><span class="line">        <span class="comment">//è¿”å›è®¢å•å·</span></span><br><span class="line">        <span class="keyword">return</span> order.getOrderNo();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æŸ¥è¯¢è®¢å•ï¼ˆåç«¯ï¼‰"><a href="#æŸ¥è¯¢è®¢å•ï¼ˆåç«¯ï¼‰" class="headerlink" title="æŸ¥è¯¢è®¢å•ï¼ˆåç«¯ï¼‰"></a>æŸ¥è¯¢è®¢å•ï¼ˆåç«¯ï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®è®¢å•idæŸ¥è¯¢è®¢å•ä¿¡æ¯</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;getOrderInfo/&#123;orderNo&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">getOrderInfo</span><span class="params">(<span class="meta">@PathVariable</span> String orderNo)</span> </span>&#123;</span><br><span class="line">    QueryWrapper&lt;Order&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    wrapper.eq(<span class="string">&quot;order_no&quot;</span>, orderNo);</span><br><span class="line">    Order order = orderService.getOne(wrapper);</span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">&quot;orderInfo&quot;</span>, order);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆè®¢å•ï¼ˆå‰ç«¯ï¼‰"><a href="#ç”Ÿæˆè®¢å•ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="ç”Ÿæˆè®¢å•ï¼ˆå‰ç«¯ï¼‰"></a>ç”Ÿæˆè®¢å•ï¼ˆå‰ç«¯ï¼‰</h3><h4 id="api-5"><a href="#api-5" class="headerlink" title="api"></a>api</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ç”Ÿæˆè®¢å•</span></span><br><span class="line">  <span class="function"><span class="title">createOrder</span>(<span class="params">courseId</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">`/eduorder/order/createOrder/<span class="subst">$&#123;courseId&#125;</span>`</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// æŸ¥è¯¢è®¢å•ä¿¡æ¯</span></span><br><span class="line">  <span class="function"><span class="title">getOrderInfo</span>(<span class="params">orderNo</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">`/eduorder/order/getOrderInfo/<span class="subst">$&#123;orderNo&#125;</span>`</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è¯¾ç¨‹è¯¦æƒ…é¡µé¢è·³è½¬"><a href="#è¯¾ç¨‹è¯¦æƒ…é¡µé¢è·³è½¬" class="headerlink" title="è¯¾ç¨‹è¯¦æƒ…é¡µé¢è·³è½¬"></a>è¯¾ç¨‹è¯¦æƒ…é¡µé¢è·³è½¬</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  <span class="comment">// åˆ›å»ºè®¢å•</span></span><br><span class="line">  <span class="function"><span class="title">createOrder</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    orderApi.createOrder(<span class="built_in">this</span>.courseId).then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// è¿”å›è®¢å•å·  è·³è½¬é¡µé¢</span></span><br><span class="line">      <span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&#x27;/order/&#x27;</span> + result.data.data.orderNo &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åŠ¨æ€è·¯ç”±é¡µé¢æ¨¡æ¿"><a href="#åŠ¨æ€è·¯ç”±é¡µé¢æ¨¡æ¿" class="headerlink" title="åŠ¨æ€è·¯ç”±é¡µé¢æ¨¡æ¿"></a>åŠ¨æ€è·¯ç”±é¡µé¢æ¨¡æ¿</h4><blockquote><p>åˆ›å»ºä¸€ä¸ªåŠ¨æ€è·¯ç”±é¡µé¢ï¼Œ_ono.vue</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;Page Confirm&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;Title&quot;&gt;</span><br><span class="line">      &lt;h1 class=&quot;fl f18&quot;&gt;è®¢å•ç¡®è®¤&lt;/h1&gt;</span><br><span class="line">      &lt;img src=&quot;~/assets/img/cart_setp2.png&quot; class=&quot;fr&quot; /&gt;</span><br><span class="line">      &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;form name=&quot;flowForm&quot; id=&quot;flowForm&quot; method=&quot;post&quot; action=&quot;&quot;&gt;</span><br><span class="line">      &lt;table class=&quot;GoodList&quot;&gt;</span><br><span class="line">        &lt;tbody&gt;</span><br><span class="line">          &lt;tr&gt;</span><br><span class="line">            &lt;th class=&quot;name&quot;&gt;å•†å“&lt;/th&gt;</span><br><span class="line">            &lt;th class=&quot;price&quot;&gt;åŸä»·&lt;/th&gt;</span><br><span class="line">            &lt;th class=&quot;priceNew&quot;&gt;ä»·æ ¼&lt;/th&gt;</span><br><span class="line">          &lt;/tr&gt;</span><br><span class="line">        &lt;/tbody&gt;</span><br><span class="line">        &lt;tbody&gt;</span><br><span class="line">          &lt;!-- &lt;tr&gt;</span><br><span class="line">          &lt;td colspan=&quot;3&quot; class=&quot;Title red f18 fb&quot;&gt;&lt;p&gt;é™æ—¶æŠ˜æ‰£&lt;/p&gt;&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt; --&gt;</span><br><span class="line">          &lt;tr&gt;</span><br><span class="line">            &lt;td colspan=&quot;3&quot; class=&quot;teacher&quot;&gt;è®²å¸ˆï¼š&#123;&#123; order.teacherName &#125;&#125;&lt;/td&gt;</span><br><span class="line">          &lt;/tr&gt;</span><br><span class="line">          &lt;tr class=&quot;good&quot;&gt;</span><br><span class="line">            &lt;td class=&quot;name First&quot;&gt;</span><br><span class="line">              &lt;a</span><br><span class="line">                target=&quot;_blank&quot;</span><br><span class="line">                :href=&quot;&#x27;https://localhost:3000/course/&#x27; + order.courseId&quot;</span><br><span class="line">              &gt;</span><br><span class="line">                &lt;img :src=&quot;order.courseCover&quot;</span><br><span class="line">              /&gt;&lt;/a&gt;</span><br><span class="line">              &lt;div class=&quot;goodInfo&quot;&gt;</span><br><span class="line">                &lt;input type=&quot;hidden&quot; class=&quot;ids ids_14502&quot; value=&quot;14502&quot; /&gt;</span><br><span class="line">                &lt;a</span><br><span class="line">                  target=&quot;_blank&quot;</span><br><span class="line">                  :href=&quot;&#x27;https://localhost:3000/course/&#x27; + order.courseId&quot;</span><br><span class="line">                  &gt;&#123;&#123; order.courseTitle &#125;&#125;&lt;/a</span><br><span class="line">                &gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">            &lt;td class=&quot;price&quot;&gt;</span><br><span class="line">              &lt;p&gt;</span><br><span class="line">                ï¿¥&lt;strong&gt;&#123;&#123; order.totalFee &#125;&#125;&lt;/strong&gt;</span><br><span class="line">              &lt;/p&gt;</span><br><span class="line">              &lt;!-- &lt;span class=&quot;discName red&quot;&gt;é™æ—¶8æŠ˜&lt;/span&gt; --&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">            &lt;td class=&quot;red priceNew Last&quot;&gt;</span><br><span class="line">              ï¿¥&lt;strong&gt;&#123;&#123; order.totalFee &#125;&#125;&lt;/strong&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">          &lt;/tr&gt;</span><br><span class="line">          &lt;tr&gt;</span><br><span class="line">            &lt;td class=&quot;Billing tr&quot; colspan=&quot;3&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;tr&quot;&gt;</span><br><span class="line">                &lt;p&gt;</span><br><span class="line">                  å…± &lt;strong class=&quot;red&quot;&gt;1&lt;/strong&gt; ä»¶å•†å“ï¼Œåˆè®¡&lt;span</span><br><span class="line">                    class=&quot;red f20&quot;</span><br><span class="line">                    &gt;ï¿¥&lt;strong&gt;&#123;&#123; order.totalFee &#125;&#125;&lt;/strong&gt;&lt;/span</span><br><span class="line">                  &gt;</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">          &lt;/tr&gt;</span><br><span class="line">        &lt;/tbody&gt;</span><br><span class="line">      &lt;/table&gt;</span><br><span class="line">      &lt;div class=&quot;Finish&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;fr&quot; id=&quot;AgreeDiv&quot;&gt;</span><br><span class="line">          &lt;label for=&quot;Agree&quot;</span><br><span class="line">            &gt;&lt;p class=&quot;on&quot;&gt;</span><br><span class="line">              &lt;input type=&quot;checkbox&quot; checked=&quot;checked&quot; /&gt;æˆ‘å·²é˜…è¯»å¹¶åŒæ„&lt;a</span><br><span class="line">                href=&quot;javascript:&quot;</span><br><span class="line">                target=&quot;_blank&quot;</span><br><span class="line">                &gt;ã€Šè°·ç²’å­¦é™¢è´­ä¹°åè®®ã€‹&lt;/a</span><br><span class="line">              &gt;</span><br><span class="line">            &lt;/p&gt;&lt;/label</span><br><span class="line">          &gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;Main fl&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;fl&quot;&gt;</span><br><span class="line">            &lt;a :href=&quot;&#x27;/course/&#x27; + order.courseId&quot;&gt;è¿”å›è¯¾ç¨‹è¯¦æƒ…é¡µ&lt;/a&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;fr&quot;&gt;</span><br><span class="line">            &lt;p&gt;</span><br><span class="line">              å…± &lt;strong class=&quot;red&quot;&gt;1&lt;/strong&gt; ä»¶å•†å“ï¼Œåˆè®¡&lt;span</span><br><span class="line">                class=&quot;red f20&quot;</span><br><span class="line">                &gt;ï¿¥&lt;strong id=&quot;AllPrice&quot;&gt;&#123;&#123; order.totalFee &#125;&#125;&lt;/strong&gt;&lt;/span</span><br><span class="line">              &gt;</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;input name=&quot;score&quot; value=&quot;0&quot; type=&quot;hidden&quot; id=&quot;usedScore&quot; /&gt;</span><br><span class="line">        &lt;button class=&quot;fr redb&quot; type=&quot;button&quot; id=&quot;submitPay&quot; @click=&quot;toPay()&quot;&gt;</span><br><span class="line">          å»æ”¯ä»˜</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">        &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import ordersApi from &#x27;@/api/order&#x27;</span><br><span class="line">  export default &#123;</span><br><span class="line">    methods: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">asyncData</span>(<span class="params">&#123; params, error &#125;</span>)</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> ordersApi.getOrderInfo(params.ono)</span><br><span class="line">        .then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123; </span><br><span class="line">                <span class="attr">orderInfo</span>: response.data.data.orderInfo</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><blockquote><p>è¿™é‡Œä¸€ç›´åœ¨è°ƒè¯•ï¼Œå‘ç°æˆ‘çš„courseInfoå¯¹è±¡ä¸ºnullï¼Œdebugäº†ä¸€ä¼šå‘ç°æ˜¯courseControllerå½“ä¸­çš„è¢«è¿œç¨‹è°ƒç”¨çš„æ–¹æ³•ä¸­ï¼Œè¿”å›çš„å¯¹è±¡voç±»å†…çš„å€¼ä¸ä¸€è‡´ï¼Œå¯¼è‡´BeanUtilsèµ‹å€¼çš„æ—¶å€™èµ‹å€¼ä¸äº†ï¼Œç„¶åæ”¹ä¸€ä¸‹é‡å¯å°±è¡Œ</p></blockquote><h3 id="ç”Ÿæˆæ”¯ä»˜äºŒç»´ç ï¼ˆåç«¯ï¼‰"><a href="#ç”Ÿæˆæ”¯ä»˜äºŒç»´ç ï¼ˆåç«¯ï¼‰" class="headerlink" title="ç”Ÿæˆæ”¯ä»˜äºŒç»´ç ï¼ˆåç«¯ï¼‰"></a>ç”Ÿæˆæ”¯ä»˜äºŒç»´ç ï¼ˆåç«¯ï¼‰</h3><blockquote><p>å¥½å®¶ä¼™åˆè¦ä¼ä¸šè®¤è¯</p></blockquote><h4 id="controller-4"><a href="#controller-4" class="headerlink" title="controller"></a>controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/eduorder/pay-log&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PayLogController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> PayLogService logService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”Ÿæˆå¾®ä¿¡æ”¯ä»˜äºŒç»´ç </span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;createNative/&#123;orderNo&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">createNative</span><span class="params">(<span class="meta">@PathVariable</span> String orderNo)</span> </span>&#123;</span><br><span class="line">        Map&lt;String, Object&gt; map = logService.createNative(orderNo);</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(map);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="serviceä¸»è¦ä¸šåŠ¡é€»è¾‘"><a href="#serviceä¸»è¦ä¸šåŠ¡é€»è¾‘" class="headerlink" title="serviceä¸»è¦ä¸šåŠ¡é€»è¾‘"></a>serviceä¸»è¦ä¸šåŠ¡é€»è¾‘</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PayLogServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">PayLogMapper</span>, <span class="title">PayLog</span>&gt; <span class="keyword">implements</span> <span class="title">PayLogService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OrderService orderService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”Ÿæˆå¾®ä¿¡æ”¯ä»˜äºŒç»´ç </span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">createNative</span><span class="params">(String orderNo)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// æ ¹æ®è®¢å•å·æŸ¥è¯¢è®¢å•ä¿¡æ¯</span></span><br><span class="line">            QueryWrapper&lt;Order&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">            wrapper.eq(<span class="string">&quot;order_no&quot;</span>, orderNo);</span><br><span class="line">            Order order = orderService.getOne(wrapper);</span><br><span class="line">            <span class="comment">// ä½¿ç”¨mapè®¾ç½®ç”ŸæˆäºŒç»´ç æ‰€éœ€çš„å‚æ•°</span></span><br><span class="line">            Map&lt;String, String&gt; m = <span class="keyword">new</span> HashMap();</span><br><span class="line">            m.put(<span class="string">&quot;appid&quot;</span>, <span class="string">&quot;wx74862e0dfcf69954&quot;</span>);</span><br><span class="line">            m.put(<span class="string">&quot;mch_id&quot;</span>, <span class="string">&quot;1558950191&quot;</span>);</span><br><span class="line">            m.put(<span class="string">&quot;nonce_str&quot;</span>, WXPayUtil.generateNonceStr());</span><br><span class="line">            m.put(<span class="string">&quot;body&quot;</span>, order.getCourseTitle()); <span class="comment">//è¯¾ç¨‹æ ‡é¢˜</span></span><br><span class="line">            m.put(<span class="string">&quot;out_trade_no&quot;</span>, orderNo); <span class="comment">//è®¢å•å·</span></span><br><span class="line">            m.put(<span class="string">&quot;total_fee&quot;</span>, order.getTotalFee().multiply(<span class="keyword">new</span> BigDecimal(<span class="string">&quot;100&quot;</span>)).longValue() + <span class="string">&quot;&quot;</span>);</span><br><span class="line">            m.put(<span class="string">&quot;spbill_create_ip&quot;</span>, <span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line">            m.put(<span class="string">&quot;notify_url&quot;</span>, <span class="string">&quot;http://guli.shop/api/order/weixinPay/weixinNotify\n&quot;</span>);</span><br><span class="line">            m.put(<span class="string">&quot;trade_type&quot;</span>, <span class="string">&quot;NATIVE&quot;</span>);</span><br><span class="line">            <span class="comment">// å‘é€httpclientè¯·æ±‚ï¼Œä¼ é€’å‚æ•°xmlæ ¼å¼</span></span><br><span class="line">            HttpClient client = <span class="keyword">new</span> HttpClient(<span class="string">&quot;https://api.mch.weixin.qq.com/pay/unifiedorder&quot;</span>);</span><br><span class="line">            <span class="comment">//è®¾ç½®xmlæ ¼å¼çš„å‚æ•°</span></span><br><span class="line">            client.setXmlParam(WXPayUtil.generateSignedXml(m, <span class="string">&quot;T6m9iK73b0kn9g5v426MKfHQH7X8rKwb&quot;</span>));</span><br><span class="line">            client.setHttps(<span class="keyword">true</span>);</span><br><span class="line">            <span class="comment">//æ‰§è¡Œpostè¯·æ±‚å‘é€</span></span><br><span class="line">            client.post();</span><br><span class="line">            <span class="comment">// å¾—åˆ°è¯·æ±‚è¿”å›ç»“æœ</span></span><br><span class="line">            String xml = client.getContent();</span><br><span class="line">            Map&lt;String, String&gt; resultMap = WXPayUtil.xmlToMap(xml);</span><br><span class="line">            <span class="comment">//æœ€ç»ˆè¿”å›æ•°æ® çš„å°è£…</span></span><br><span class="line">            Map map = <span class="keyword">new</span> HashMap();</span><br><span class="line">            map.put(<span class="string">&quot;out_trade_no&quot;</span>, orderNo);</span><br><span class="line">            map.put(<span class="string">&quot;course_id&quot;</span>, order.getCourseId());</span><br><span class="line">            map.put(<span class="string">&quot;total_fee&quot;</span>, order.getTotalFee());</span><br><span class="line">            map.put(<span class="string">&quot;result_code&quot;</span>, resultMap.get(<span class="string">&quot;result_code&quot;</span>));  <span class="comment">//è¿”å›äºŒç»´ç æ“ä½œçŠ¶æ€ç </span></span><br><span class="line">            map.put(<span class="string">&quot;code_url&quot;</span>, resultMap.get(<span class="string">&quot;code_url&quot;</span>));        <span class="comment">//äºŒç»´ç åœ°å€</span></span><br><span class="line">            <span class="keyword">return</span> map;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;ç”ŸæˆäºŒç»´ç å¤±è´¥&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æŸ¥è¯¢æ”¯ä»˜çŠ¶æ€ï¼ˆåç«¯ï¼‰"><a href="#æŸ¥è¯¢æ”¯ä»˜çŠ¶æ€ï¼ˆåç«¯ï¼‰" class="headerlink" title="æŸ¥è¯¢æ”¯ä»˜çŠ¶æ€ï¼ˆåç«¯ï¼‰"></a>æŸ¥è¯¢æ”¯ä»˜çŠ¶æ€ï¼ˆåç«¯ï¼‰</h3><h4 id="controller-5"><a href="#controller-5" class="headerlink" title="controller"></a>controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŸ¥è¯¢è®¢å•æ”¯ä»˜çŠ¶æ€</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;getPayStatus/&#123;orderNo&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">getPayStatus</span><span class="params">(<span class="meta">@PathVariable</span> String orderNo)</span> </span>&#123;</span><br><span class="line">    Map&lt;String, String&gt; map = logService.getPayStatus(orderNo);</span><br><span class="line">    <span class="keyword">if</span> (map == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> R.error().message(<span class="string">&quot;æ”¯ä»˜å‡ºé”™äº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (map.get(<span class="string">&quot;trade_state&quot;</span>).equals(<span class="string">&quot;SUCCESS&quot;</span>)) &#123;</span><br><span class="line">        logService.updateOrderStatus(map);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ç‰¹å®šè¿”å›ç ï¼Œå‰ç«¯æœ‰æ‹¦æˆªå™¨åˆ¤æ–­</span></span><br><span class="line">    <span class="keyword">return</span> R.ok().code(<span class="number">25000</span>).message(<span class="string">&quot;æ”¯ä»˜ä¸­â€¦â€¦&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="service-3"><a href="#service-3" class="headerlink" title="service"></a>service</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŸ¥è¯¢è®¢å•æ”¯ä»˜çŠ¶æ€</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, String&gt; <span class="title">getPayStatus</span><span class="params">(String orderNo)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//1ã€å°è£…å‚æ•°</span></span><br><span class="line">        Map&lt;String, String&gt; m = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        m.put(<span class="string">&quot;appid&quot;</span>, <span class="string">&quot;wx74862e0dfcf69954&quot;</span>);</span><br><span class="line">        m.put(<span class="string">&quot;mch_id&quot;</span>, <span class="string">&quot;1558950191&quot;</span>);</span><br><span class="line">        m.put(<span class="string">&quot;out_trade_no&quot;</span>, orderNo);</span><br><span class="line">        m.put(<span class="string">&quot;nonce_str&quot;</span>, WXPayUtil.generateNonceStr());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2 å‘é€httpclient</span></span><br><span class="line">        HttpClient client = <span class="keyword">new</span> HttpClient(<span class="string">&quot;https://api.mch.weixin.qq.com/pay/orderquery&quot;</span>);</span><br><span class="line">        client.setXmlParam(WXPayUtil.generateSignedXml(m, <span class="string">&quot;T6m9iK73b0kn9g5v426MKfHQH7X8rKwb&quot;</span>));</span><br><span class="line">        client.setHttps(<span class="keyword">true</span>);</span><br><span class="line">        client.post();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3 å¾—åˆ°è¯·æ±‚è¿”å›å†…å®¹</span></span><br><span class="line">        String xml = client.getContent();</span><br><span class="line">        <span class="comment">//6ã€è½¬æˆMapå†è¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> WXPayUtil.xmlToMap(xml);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ·»åŠ æ”¯ä»˜è®°å½•å’Œæ›´æ–°è®¢å•çŠ¶æ€</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateOrderStatus</span><span class="params">(Map&lt;String, String&gt; map)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ä»mapè·å–è®¢å•å·</span></span><br><span class="line">    String orderNo = map.get(<span class="string">&quot;out_trade_no&quot;</span>);</span><br><span class="line">    <span class="comment">//æ ¹æ®è®¢å•å·æŸ¥è¯¢è®¢å•ä¿¡æ¯</span></span><br><span class="line">    QueryWrapper&lt;Order&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    wrapper.eq(<span class="string">&quot;order_no&quot;</span>, orderNo);</span><br><span class="line">    Order order = orderService.getOne(wrapper);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ›´æ–°è®¢å•è¡¨è®¢å•çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">if</span> (order.getStatus().intValue() == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// å·²ç»æ”¯ä»˜è¿‡äº†</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    order.setStatus(<span class="number">1</span>);<span class="comment">//1ä»£è¡¨å·²ç»æ”¯ä»˜</span></span><br><span class="line">    orderService.updateById(order);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘æ”¯ä»˜è¡¨æ·»åŠ æ”¯ä»˜è®°å½•</span></span><br><span class="line">    PayLog payLog = <span class="keyword">new</span> PayLog();</span><br><span class="line">    payLog.setOrderNo(orderNo);  <span class="comment">//è®¢å•å·</span></span><br><span class="line">    payLog.setPayTime(<span class="keyword">new</span> Date()); <span class="comment">//è®¢å•å®Œæˆæ—¶é—´</span></span><br><span class="line">    payLog.setPayType(<span class="number">1</span>);<span class="comment">//æ”¯ä»˜ç±»å‹ 1å¾®ä¿¡</span></span><br><span class="line">    payLog.setTotalFee(order.getTotalFee());<span class="comment">//æ€»é‡‘é¢(åˆ†)</span></span><br><span class="line"></span><br><span class="line">    payLog.setTradeState(map.get(<span class="string">&quot;trade_state&quot;</span>));<span class="comment">//æ”¯ä»˜çŠ¶æ€</span></span><br><span class="line">    payLog.setTransactionId(map.get(<span class="string">&quot;transaction_id&quot;</span>)); <span class="comment">//æµæ°´å·</span></span><br><span class="line">    payLog.setAttr(JSONObject.toJSONString(map));</span><br><span class="line"></span><br><span class="line">    baseMapper.insert(payLog);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ”¯ä»˜ï¼ˆå‰ç«¯ï¼‰"><a href="#æ”¯ä»˜ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="æ”¯ä»˜ï¼ˆå‰ç«¯ï¼‰"></a>æ”¯ä»˜ï¼ˆå‰ç«¯ï¼‰</h3><h4 id="api-6"><a href="#api-6" class="headerlink" title="api"></a>api</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”ŸæˆäºŒç»´ç </span></span><br><span class="line"> <span class="function"><span class="title">createNative</span>(<span class="params">orderNo</span>)</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> request(&#123;</span><br><span class="line">     <span class="attr">url</span>: <span class="string">`/eduorder/paylog/createNative/<span class="subst">$&#123;orderNo&#125;</span>`</span>,</span><br><span class="line">     <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">   &#125;)</span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="comment">// æŸ¥è¯¢è®¢å•çŠ¶æ€</span></span><br><span class="line"> <span class="function"><span class="title">getPayStatus</span>(<span class="params">orderNo</span>)</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> request(&#123;</span><br><span class="line">     <span class="attr">url</span>: <span class="string">`/eduorder/paylog/getPayStatus/<span class="subst">$&#123;orderNo&#125;</span>`</span>,</span><br><span class="line">     <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">   &#125;)</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure><h4 id="è·³è½¬è‡³é¡µé¢æ–¹æ³•"><a href="#è·³è½¬è‡³é¡µé¢æ–¹æ³•" class="headerlink" title="è·³è½¬è‡³é¡µé¢æ–¹æ³•"></a>è·³è½¬è‡³é¡µé¢æ–¹æ³•</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å»æ”¯ä»˜</span></span><br><span class="line"><span class="function"><span class="title">toPay</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&#x27;/pay/&#x27;</span> + <span class="built_in">this</span>.orderInfo.orderNo &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åŠ¨æ€è·¯ç”±æ¨¡æ¿"><a href="#åŠ¨æ€è·¯ç”±æ¨¡æ¿" class="headerlink" title="åŠ¨æ€è·¯ç”±æ¨¡æ¿"></a>åŠ¨æ€è·¯ç”±æ¨¡æ¿</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;cart py-container&quot;&gt;</span><br><span class="line">    &lt;!--ä¸»å†…å®¹--&gt;</span><br><span class="line">    &lt;div class=&quot;checkout py-container pay&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;checkout-tit&quot;&gt;</span><br><span class="line">        &lt;h4 class=&quot;fl tit-txt&quot;&gt;</span><br><span class="line">          &lt;span class=&quot;success-icon&quot;&gt;&lt;/span</span><br><span class="line">          &gt;&lt;span class=&quot;success-info&quot;</span><br><span class="line">            &gt;è®¢å•æäº¤æˆåŠŸï¼Œè¯·æ‚¨åŠæ—¶ä»˜æ¬¾ï¼è®¢å•å·ï¼š&#123;&#123; payObj.out_trade_no &#125;&#125;&lt;/span</span><br><span class="line">          &gt;</span><br><span class="line">        &lt;/h4&gt;</span><br><span class="line">        &lt;span class=&quot;fr&quot;</span><br><span class="line">          &gt;&lt;em class=&quot;sui-lead&quot;&gt;åº”ä»˜é‡‘é¢ï¼š&lt;/em</span><br><span class="line">          &gt;&lt;em class=&quot;orange money&quot;&gt;ï¿¥&#123;&#123; payObj.total_fee &#125;&#125;&lt;/em&gt;&lt;/span</span><br><span class="line">        &gt;</span><br><span class="line">        &lt;div class=&quot;clearfix&quot;&gt;&lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div class=&quot;checkout-steps&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;fl weixin&quot;&gt;å¾®ä¿¡æ”¯ä»˜&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;fl sao&quot;&gt;</span><br><span class="line">          &lt;p class=&quot;red&quot;&gt;è¯·ä½¿ç”¨å¾®ä¿¡æ‰«ä¸€æ‰«ã€‚&lt;/p&gt;</span><br><span class="line">          &lt;div class=&quot;fl code&quot;&gt;</span><br><span class="line">            &lt;!-- &lt;img id=&quot;qrious&quot; src=&quot;~/assets/img/erweima.png&quot; alt=&quot;&quot;&gt; --&gt;</span><br><span class="line">            &lt;!-- &lt;qriously value=&quot;weixin://wxpay/bizpayurl?pr=R7tnDpZ&quot; :size=&quot;338&quot;/&gt; --&gt;</span><br><span class="line">            &lt;qriously :value=&quot;payObj.code_url&quot; :size=&quot;338&quot; /&gt;</span><br><span class="line">            &lt;div class=&quot;saosao&quot;&gt;</span><br><span class="line">              &lt;p&gt;è¯·ä½¿ç”¨å¾®ä¿¡æ‰«ä¸€æ‰«&lt;/p&gt;</span><br><span class="line">              &lt;p&gt;æ‰«æäºŒç»´ç æ”¯ä»˜&lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;clearfix&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;!-- &lt;p&gt;&lt;a href=&quot;pay.html&quot; target=&quot;_blank&quot;&gt;&gt; å…¶ä»–æ”¯ä»˜æ–¹å¼&lt;/a&gt;&lt;/p&gt; --&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import orderApi from &#x27;@/api/order&#x27;</span><br><span class="line">  export default &#123;</span><br><span class="line">    asyncData(&#123; params, error &#125;) &#123;</span><br><span class="line">      return orderApi.createNatvie(params.pid).then(response =&gt; &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          payObj: response.data.data</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        timer1: &#x27;&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„è¿™é‡Œéœ€è¦å®‰è£…vue-qriouslyç»„ä»¶</p></blockquote><h4 id="responseæ‹¦æˆªå™¨"><a href="#responseæ‹¦æˆªå™¨" class="headerlink" title="responseæ‹¦æˆªå™¨"></a>responseæ‹¦æˆªå™¨</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// http response æ‹¦æˆªå™¨</span></span><br><span class="line">service.interceptors.response.use(</span><br><span class="line">  <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//debugger</span></span><br><span class="line">    <span class="keyword">if</span> (response.data.code == <span class="number">28004</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;response.data.resultCodeæ˜¯28004&quot;</span>)</span><br><span class="line">        <span class="comment">// è¿”å› é”™è¯¯ä»£ç -1 æ¸…é™¤ticketä¿¡æ¯å¹¶è·³è½¬åˆ°ç™»å½•é¡µé¢</span></span><br><span class="line">        <span class="comment">//debugger</span></span><br><span class="line">        <span class="built_in">window</span>.location.href=<span class="string">&quot;/login&quot;</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (response.data.code !== <span class="number">20000</span>) &#123;</span><br><span class="line">        <span class="comment">//25000ï¼šè®¢å•æ”¯ä»˜ä¸­ï¼Œä¸åšä»»ä½•æç¤º</span></span><br><span class="line">        <span class="keyword">if</span>(response.data.code != <span class="number">25000</span>) &#123;</span><br><span class="line">          Message(&#123;</span><br><span class="line">            <span class="attr">message</span>: response.data.message || <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">            <span class="attr">duration</span>: <span class="number">5</span> * <span class="number">1000</span></span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error.response)   <span class="comment">// è¿”å›æ¥å£è¿”å›çš„é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="è°ƒç”¨æ–¹æ³•"><a href="#è°ƒç”¨æ–¹æ³•" class="headerlink" title="è°ƒç”¨æ–¹æ³•"></a>è°ƒç”¨æ–¹æ³•</h4><blockquote><p>è¿™é‡Œéœ€è¦ç”¨åˆ°responseæ‹¦æˆªå™¨ï¼Œåç«¯æ”¯ä»˜ä¸­çš„è¿”å›ç ä¸º25000ï¼Œéœ€è¦æ ¹æ®è¿”å›ç åˆ¤æ–­æ˜¯å¦æ”¯ä»˜æˆåŠŸ</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">timer1</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// æ³¨æ„è¿™é‡Œä¸é€‚ç”¨createdï¼Œå› ä¸ºä½¿ç”¨äº†å¼‚æ­¥åˆå§‹åŒ–æ•°æ®ï¼Œmountedåœ¨é¡µé¢æ¸²æŸ“å®Œæˆåæ‰§è¡Œ</span></span><br><span class="line"><span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.timer1 = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.getPayStatus(<span class="built_in">this</span>.payObj.out_trade_no)</span><br><span class="line">  &#125;, <span class="number">3000</span>)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="comment">// æ¯éš”ä¸€æ®µæ—¶é—´æŸ¥è¯¢è®¢å•çŠ¶æ€</span></span><br><span class="line">  <span class="function"><span class="title">getPayStatus</span>(<span class="params">orderNo</span>)</span> &#123;</span><br><span class="line">    orderApi.getPayStatus(<span class="built_in">this</span>.orderNo).then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (result.data.success) &#123;</span><br><span class="line">        <span class="comment">// æ¸…é™¤å®šæ—¶å™¨</span></span><br><span class="line">        <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.timer1)</span><br><span class="line">        <span class="comment">// æç¤ºä¿¡æ¯</span></span><br><span class="line">        <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">          <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&#x27;æ”¯ä»˜æˆåŠŸ!&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// è·³è½¬è‡³è¯¾ç¨‹è¯¦æƒ…é¡µé¢</span></span><br><span class="line">        <span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&#x27;/course/&#x27;</span> + <span class="built_in">this</span>.payObj.course_id &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•-1"><a href="#æµ‹è¯•-1" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><blockquote><p>æµ‹äº†ä¸€æ¬¡ï¼Œæ²¡è·³è½¬ä½†æ˜¯çŠ¶æ€æ”¹äº†ï¼Œæ‡’å¾—æµ‹äº†ï¼Œä¸æƒ³èŠ±é’±</p><p>debugäº†ä¸€ä¸‹ï¼Œå‘ç°åç«¯æ²¡å•¥é—®é¢˜ï¼Œä¹Ÿæ‰§è¡Œäº†ï¼Œä»˜é’±äº†ä¹‹åä¹Ÿè¿”å›äº†R.okï¼Œä½†æ˜¯å‰ç«¯å°±æ˜¯æ˜¾ç¤ºresultä¸ºundefinedï¼Œä¸ç†è§£</p></blockquote><h3 id="è¯¾ç¨‹ä¿¡æ¯æ˜¾ç¤ºå®Œå–„"><a href="#è¯¾ç¨‹ä¿¡æ¯æ˜¾ç¤ºå®Œå–„" class="headerlink" title="è¯¾ç¨‹ä¿¡æ¯æ˜¾ç¤ºå®Œå–„"></a>è¯¾ç¨‹ä¿¡æ¯æ˜¾ç¤ºå®Œå–„</h3><blockquote><p>å…è´¹å’Œä¸å…è´¹ï¼Œæ˜¯å¦è´­ä¹°ç­‰é¡µé¢æ˜¾ç¤ºéœ€è¦åŒºåˆ«</p></blockquote><h4 id="æŸ¥è¯¢ç”¨æˆ·è´­ä¹°è¯¾ç¨‹ä¿¡æ¯æ–¹æ³•"><a href="#æŸ¥è¯¢ç”¨æˆ·è´­ä¹°è¯¾ç¨‹ä¿¡æ¯æ–¹æ³•" class="headerlink" title="æŸ¥è¯¢ç”¨æˆ·è´­ä¹°è¯¾ç¨‹ä¿¡æ¯æ–¹æ³•"></a>æŸ¥è¯¢ç”¨æˆ·è´­ä¹°è¯¾ç¨‹ä¿¡æ¯æ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹ç»ç”¨æˆ·idå’Œè¯¾ç¨‹idæŸ¥è¯¢ ç”¨æˆ·è¯¾ç¨‹æ”¯ä»˜æƒ…å†µ</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;getUserCourseStatus/&#123;cid&#125;/&#123;uid&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">getUserCourseStatus</span><span class="params">(<span class="meta">@PathVariable</span> String cid, <span class="meta">@PathVariable</span> String uid)</span> </span>&#123;</span><br><span class="line">    QueryWrapper&lt;Order&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    wrapper.eq(<span class="string">&quot;course_id&quot;</span>, cid);</span><br><span class="line">    wrapper.eq(<span class="string">&quot;member_id&quot;</span>, uid);</span><br><span class="line">    wrapper.eq(<span class="string">&quot;status&quot;</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> count = orderService.count(wrapper);</span><br><span class="line">    <span class="comment">// å·²ç»æ”¯ä»˜å®Œæˆ</span></span><br><span class="line">    <span class="keyword">return</span> count &gt; <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>éœ€è¦ä¿®æ”¹è¯¾ç¨‹è¯¦æƒ…æ¥å£çš„è¿”å›å€¼ï¼ŒåŠ ä¸Šè¯¾ç¨‹çš„æ”¯ä»˜çŠ¶æ€ï¼ˆè¿œç¨‹è°ƒç”¨ä¸Šè¿°æ–¹æ³•ï¼‰</p></blockquote><h4 id="é…ç½®æ¥å£"><a href="#é…ç½®æ¥å£" class="headerlink" title="é…ç½®æ¥å£"></a>é…ç½®æ¥å£</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fallback = &quot;å®ç°ç±»çš„class&quot;ï¼Œç†”æ–­å™¨</span></span><br><span class="line"><span class="meta">@FeignClient(name = &quot;service-order&quot;)</span></span><br><span class="line"><span class="comment">// è°ƒç”¨æœåŠ¡ï¼ˆæœåŠ¡åï¼‰ï¼Œè¿™é‡Œçš„æœåŠ¡åè¦å’Œå¯¹åº”æœåŠ¡çš„é…ç½®æ–‡ä»¶ä¸­çš„spring.application.nameå¯¹åº”</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">orderClient</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ ¹ç»ç”¨æˆ·idå’Œè¯¾ç¨‹idæŸ¥è¯¢ ç”¨æˆ·è¯¾ç¨‹æ”¯ä»˜æƒ…å†µ</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/eduorder/order/getUserCourseStatus/&#123;cid&#125;/&#123;uid&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">getUserCourseStatus</span><span class="params">(<span class="meta">@PathVariable(&quot;cid&quot;)</span> String cid, <span class="meta">@PathVariable(&quot;uid&quot;)</span> String uid)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è¿œç¨‹è°ƒç”¨"><a href="#è¿œç¨‹è°ƒç”¨" class="headerlink" title="è¿œç¨‹è°ƒç”¨"></a>è¿œç¨‹è°ƒç”¨</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/eduservice/coursefront&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CourseController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduCourseService courseService;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OrderClient orderClient;</span><br><span class="line">    <span class="comment">// è¯¾ç¨‹è¯¦æƒ…ä¿¡æ¯+è¯¾ç¨‹æ”¯ä»˜çŠ¶æ€ï¼ˆè¿œç¨‹è°ƒç”¨ï¼‰</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;getCourseInfo/&#123;courseId&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">getCourseInfo</span><span class="params">(<span class="meta">@PathVariable</span> String courseId, HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        CourseFrontInfoVo courseInfo = courseService.getBaseCourseInfo(courseId);</span><br><span class="line">        List&lt;ChapterVo&gt; chapterList = chapterService.getChapterVideoByCourseId(courseId);</span><br><span class="line">        <span class="comment">// æ ¹æ®è¯¾ç¨‹ç”¨æˆ·idæŸ¥è¯¢è®¢å•çŠ¶æ€</span></span><br><span class="line">        <span class="keyword">boolean</span> status = orderClient.getUserCourseStatus(courseId, JwtUtils.getMemberIdByJwtToken(request));</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">&quot;courseInfo&quot;</span>, courseInfo).data(<span class="string">&quot;chapterList&quot;</span>, chapterList).data(<span class="string">&quot;isBuy&quot;</span>, status);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å‰ç«¯-1"><a href="#å‰ç«¯-1" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;aCoursesList&quot; class=&quot;bg-fa of&quot;&gt;</span><br><span class="line">            &lt;section</span><br><span class="line">              class=&quot;c-attr-mt&quot;</span><br><span class="line">              v-if=&quot;isBuy || Number(courseInfo.price === 0)&quot;</span><br><span class="line">            &gt;</span><br><span class="line">              &lt;a</span><br><span class="line">                href=&quot;#&quot;</span><br><span class="line">                title=&quot;ç«‹å³è§‚çœ‹&quot;</span><br><span class="line">                class=&quot;comm-btn c-btn-3&quot;</span><br><span class="line">                @click=&quot;createOrder()&quot;</span><br><span class="line">                &gt;ç«‹å³è§‚çœ‹&lt;/a</span><br><span class="line">              &gt;</span><br><span class="line">            &lt;/section&gt;</span><br><span class="line">            &lt;section class=&quot;c-attr-mt&quot; v-else&gt;</span><br><span class="line">              &lt;a</span><br><span class="line">                href=&quot;#&quot;</span><br><span class="line">                title=&quot;ç«‹å³è´­ä¹°&quot;</span><br><span class="line">                class=&quot;comm-btn c-btn-3&quot;</span><br><span class="line">                @click=&quot;createOrder()&quot;</span><br><span class="line">                &gt;ç«‹å³è´­ä¹°&lt;/a</span><br><span class="line">              &gt;</span><br><span class="line">            &lt;/section&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import courseApi from &#x27;@/api/course&#x27;</span><br><span class="line">  import orderApi from &#x27;@/api/order&#x27;</span><br><span class="line">  export default &#123;</span><br><span class="line">    // asyncData(&#123; params, error &#125;) &#123;</span><br><span class="line">    //   return courseApi.getCourseInfo(params.id).then(result =&gt; &#123;</span><br><span class="line">    //     return &#123;</span><br><span class="line">    //       courseInfo: result.data.data.courseInfo,</span><br><span class="line">    //       chapterList: result.data.data.chapterList,</span><br><span class="line">    //       courseId: params.id</span><br><span class="line">    //     &#125;</span><br><span class="line">    //   &#125;)</span><br><span class="line">    // &#125;,</span><br><span class="line">    asyncData(&#123; params, error &#125;) &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        courseId: params.id</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        courseInfo: &#123;&#125;,</span><br><span class="line">        chapterList: [],</span><br><span class="line">        isBuy: false</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line">      // è¿™é‡Œä¸é€‚ç”¨å¼‚æ­¥è°ƒç”¨ï¼Œè€Œæ˜¯created</span><br><span class="line">      this.initCourseInfo()</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      // æŸ¥è¯¢è¯¾ç¨‹è¯¦æƒ…ä¿¡æ¯</span><br><span class="line">      initCourseInfo() &#123;</span><br><span class="line">        courseApi.getCourseInfo(this.courseId).then(result =&gt; &#123;</span><br><span class="line">          (this.courseInfo = result.data.data.courseInfo),</span><br><span class="line">          (this.chapterList = result.data.data.chapterList),</span><br><span class="line">          (this.isBuy = result.data.data.isBuy)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> é¡¹ç›® </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> SpringCloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€é¡¹ç›®ç¬”è®°ã€‘åœ¨çº¿æ•™è‚²é¡¹ç›®å®æˆ˜5</title>
      <link href="/2021/09/28/xiang-mu-bi-ji-zai-xian-jiao-yu-xiang-mu-shi-zhan-5/"/>
      <url>/2021/09/28/xiang-mu-bi-ji-zai-xian-jiao-yu-xiang-mu-shi-zhan-5/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è¿™é‡Œå¼€å§‹æ˜¯å‰å°éƒ¨åˆ†</p></blockquote><h2 id="æ­å»ºé¡¹ç›®å‰å°ç¯å¢ƒ"><a href="#æ­å»ºé¡¹ç›®å‰å°ç¯å¢ƒ" class="headerlink" title="æ­å»ºé¡¹ç›®å‰å°ç¯å¢ƒ"></a>æ­å»ºé¡¹ç›®å‰å°ç¯å¢ƒ</h2><blockquote><p>ä½¿ç”¨æœåŠ¡ç«¯æ¸²æŸ“æŠ€æœ¯NuxtJSæ¡†æ¶</p></blockquote><p>![02 æ­å»ºé¡¹ç›®å‰å°ç¯å¢ƒï¼ˆnuxtï¼‰](<a href="https://gitee.com/ReRia/images/raw/master/img/02">https://gitee.com/ReRia/images/raw/master/img/02</a> æ­å»ºé¡¹ç›®å‰å°ç¯å¢ƒï¼ˆnuxtï¼‰.png)</p><h3 id="æ­å»ºNuxtJS"><a href="#æ­å»ºNuxtJS" class="headerlink" title="æ­å»ºNuxtJS"></a>æ­å»ºNuxtJS</h3><blockquote><ol><li>å…ˆèµ‹å€¼templateè‡³å·¥ä½œåŒº</li><li>ä¿®æ”¹.eslintrc.jsï¼ˆå¤åˆ¶åå°çš„å³å¯ï¼‰</li><li>ä¿®æ”¹package.jsonï¼Œå¿…é¡»ä¿®æ”¹å…¶ä¸­çš„name,version,decription,authorç­‰</li><li>ä¿®æ”¹nuxt.config.js</li><li>å®‰è£…ä¾èµ–npm install</li><li>æµ‹è¯•è¿è¡Œnpm run dev</li></ol></blockquote><h3 id="NUXTç›®å½•ç»“æ„"><a href="#NUXTç›®å½•ç»“æ„" class="headerlink" title="NUXTç›®å½•ç»“æ„"></a>NUXTç›®å½•ç»“æ„</h3><blockquote><ol><li>èµ„æºç›®å½• assets<br>ç”¨äºç»„ç»‡æœªç¼–è¯‘çš„é™æ€èµ„æºå¦‚ LESSã€SASS æˆ– JavaScriptã€‚</li><li>ç»„ä»¶ç›®å½• components<br>ç”¨äºç»„ç»‡åº”ç”¨çš„ Vue.js ç»„ä»¶ã€‚Nuxt.js ä¸ä¼šæ‰©å±•å¢å¼ºè¯¥ç›®å½•ä¸‹ Vue.js ç»„ä»¶ï¼Œå³è¿™äº›ç»„ä»¶ä¸ä¼šåƒé¡µé¢ç»„ä»¶é‚£æ ·æœ‰ asyncData æ–¹æ³•çš„ç‰¹æ€§ã€‚</li><li>å¸ƒå±€ç›®å½• layouts<br>ç”¨äºç»„ç»‡åº”ç”¨çš„å¸ƒå±€ç»„ä»¶ã€‚<ol><li>default.vueï¼šè®¾ç½®å¤´å°¾ä¿¡æ¯</li></ol></li><li>é¡µé¢ç›®å½• pages<br>ç”¨äºç»„ç»‡åº”ç”¨çš„è·¯ç”±åŠè§†å›¾ã€‚Nuxt.js æ¡†æ¶è¯»å–è¯¥ç›®å½•ä¸‹æ‰€æœ‰çš„ .vue æ–‡ä»¶å¹¶è‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„è·¯ç”±é…ç½®ã€‚</li><li>æ’ä»¶ç›®å½• plugins<br>ç”¨äºç»„ç»‡é‚£äº›éœ€è¦åœ¨ æ ¹vue.jsåº”ç”¨ å®ä¾‹åŒ–ä¹‹å‰éœ€è¦è¿è¡Œçš„ Javascript æ’ä»¶ã€‚</li><li>nuxt.config.js æ–‡ä»¶<br>nuxt.config.js æ–‡ä»¶ç”¨äºç»„ç»‡Nuxt.js åº”ç”¨çš„ä¸ªæ€§åŒ–é…ç½®ï¼Œä»¥ä¾¿è¦†ç›–é»˜è®¤é…ç½®ã€‚</li></ol></blockquote><h3 id="å¼•å…¥åŸºç¡€èµ„æºå’Œé»˜è®¤å¤´å°¾è§†å›¾"><a href="#å¼•å…¥åŸºç¡€èµ„æºå’Œé»˜è®¤å¤´å°¾è§†å›¾" class="headerlink" title="å¼•å…¥åŸºç¡€èµ„æºå’Œé»˜è®¤å¤´å°¾è§†å›¾"></a>å¼•å…¥åŸºç¡€èµ„æºå’Œé»˜è®¤å¤´å°¾è§†å›¾</h3><blockquote><p>Nuxtæœ¬èº«åŸºäºvueï¼Œä½†æ˜¯æ²¡æœ‰å¼•å…¥element-uiï¼Œæ‰€ä»¥éœ€è¦å¼•å…¥</p><p>è¿™é‡Œè¿˜å¼•å…¥äº†å…¶ä»–éœ€è¦çš„èµ„æºï¼Œç›´æ¥cvå³å¯</p><ol><li>assets</li><li>layout -&gt; default.vue</li><li>pages -&gt; index.vue</li></ol></blockquote><h4 id="default-vue"><a href="#default-vue" class="headerlink" title="default.vue"></a>default.vue</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;in-wrap&quot;&gt;</span><br><span class="line">    &lt;!-- å…¬å…±å¤´å¼•å…¥ --&gt;</span><br><span class="line">    &lt;header id=&quot;header&quot;&gt;</span><br><span class="line">      &lt;section class=&quot;container&quot;&gt;</span><br><span class="line">        &lt;h1 id=&quot;logo&quot;&gt;</span><br><span class="line">          &lt;a href=&quot;#&quot; title=&quot;è°·ç²’å­¦é™¢&quot;&gt;</span><br><span class="line">            &lt;img src=&quot;~/assets/img/logo.png&quot; width=&quot;100%&quot; alt=&quot;è°·ç²’å­¦é™¢&quot; /&gt;</span><br><span class="line">          &lt;/a&gt;</span><br><span class="line">        &lt;/h1&gt;</span><br><span class="line">        &lt;div class=&quot;h-r-nsl&quot;&gt;</span><br><span class="line">          &lt;ul class=&quot;nav&quot;&gt;</span><br><span class="line">            &lt;!-- å›ºå®šè·¯ç”± --&gt;</span><br><span class="line">            &lt;router-link to=&quot;/&quot; tag=&quot;li&quot; active-class=&quot;current&quot; exact&gt;</span><br><span class="line">              &lt;a&gt;é¦–é¡µ&lt;/a&gt;</span><br><span class="line">            &lt;/router-link&gt;</span><br><span class="line">            &lt;router-link to=&quot;/course&quot; tag=&quot;li&quot; active-class=&quot;current&quot;&gt;</span><br><span class="line">              &lt;a&gt;è¯¾ç¨‹&lt;/a&gt;</span><br><span class="line">            &lt;/router-link&gt;</span><br><span class="line">            &lt;router-link to=&quot;/teacher&quot; tag=&quot;li&quot; active-class=&quot;current&quot;&gt;</span><br><span class="line">              &lt;a&gt;åå¸ˆ&lt;/a&gt;</span><br><span class="line">            &lt;/router-link&gt;</span><br><span class="line">            &lt;router-link to=&quot;/article&quot; tag=&quot;li&quot; active-class=&quot;current&quot;&gt;</span><br><span class="line">              &lt;a&gt;æ–‡ç« &lt;/a&gt;</span><br><span class="line">            &lt;/router-link&gt;</span><br><span class="line">            &lt;router-link to=&quot;/qa&quot; tag=&quot;li&quot; active-class=&quot;current&quot;&gt;</span><br><span class="line">              &lt;a&gt;é—®ç­”&lt;/a&gt;</span><br><span class="line">            &lt;/router-link&gt;</span><br><span class="line">          &lt;/ul&gt;</span><br><span class="line">          &lt;!-- / nav --&gt;</span><br><span class="line">          &lt;ul class=&quot;h-r-login&quot;&gt;</span><br><span class="line">            &lt;li v-if=&quot;!loginInfo.id&quot; id=&quot;no-login&quot;&gt;</span><br><span class="line">              &lt;a href=&quot;/login&quot; title=&quot;ç™»å½•&quot;&gt;</span><br><span class="line">                &lt;em class=&quot;icon18 login-icon&quot;&gt;&amp;nbsp;&lt;/em&gt;</span><br><span class="line">                &lt;span class=&quot;vam ml5&quot;&gt;ç™»å½•&lt;/span&gt;</span><br><span class="line">              &lt;/a&gt;</span><br><span class="line">              |</span><br><span class="line">              &lt;a href=&quot;/register&quot; title=&quot;æ³¨å†Œ&quot;&gt;</span><br><span class="line">                &lt;span class=&quot;vam ml5&quot;&gt;æ³¨å†Œ&lt;/span&gt;</span><br><span class="line">              &lt;/a&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">            &lt;li v-if=&quot;loginInfo.id&quot; id=&quot;is-login-one&quot; class=&quot;mr10&quot;&gt;</span><br><span class="line">              &lt;a id=&quot;headerMsgCountId&quot; href=&quot;#&quot; title=&quot;æ¶ˆæ¯&quot;&gt;</span><br><span class="line">                &lt;em class=&quot;icon18 news-icon&quot;&gt;&amp;nbsp;&lt;/em&gt;</span><br><span class="line">              &lt;/a&gt;</span><br><span class="line">              &lt;q class=&quot;red-point&quot; style=&quot;display: none&quot;&gt;&amp;nbsp;&lt;/q&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">            &lt;li v-if=&quot;loginInfo.id&quot; id=&quot;is-login-two&quot; class=&quot;h-r-user&quot;&gt;</span><br><span class="line">              &lt;a href=&quot;/ucenter&quot; title&gt;</span><br><span class="line">                &lt;img</span><br><span class="line">                  :src=&quot;loginInfo.avatar&quot;</span><br><span class="line">                  width=&quot;30&quot;</span><br><span class="line">                  height=&quot;30&quot;</span><br><span class="line">                  class=&quot;vam picImg&quot;</span><br><span class="line">                  alt</span><br><span class="line">                /&gt;</span><br><span class="line">                &lt;span id=&quot;userName&quot; class=&quot;vam disIb&quot;&gt;&#123;&#123;</span><br><span class="line">                  loginInfo.nickname</span><br><span class="line">                &#125;&#125;&lt;/span&gt;</span><br><span class="line">              &lt;/a&gt;</span><br><span class="line">              &lt;a</span><br><span class="line">                href=&quot;javascript:void(0);&quot;</span><br><span class="line">                title=&quot;é€€å‡º&quot;</span><br><span class="line">                @click=&quot;logout()&quot;</span><br><span class="line">                class=&quot;ml5&quot;</span><br><span class="line">                &gt;é€€å‡º&lt;/a</span><br><span class="line">              &gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">            &lt;!-- /æœªç™»å½•æ˜¾ç¤ºç¬¬1 liï¼›ç™»å½•åæ˜¾ç¤ºç¬¬2ï¼Œ3 li --&gt;</span><br><span class="line">          &lt;/ul&gt;</span><br><span class="line">          &lt;aside class=&quot;h-r-search&quot;&gt;</span><br><span class="line">            &lt;form action=&quot;#&quot; method=&quot;post&quot;&gt;</span><br><span class="line">              &lt;label class=&quot;h-r-s-box&quot;&gt;</span><br><span class="line">                &lt;input</span><br><span class="line">                  type=&quot;text&quot;</span><br><span class="line">                  placeholder=&quot;è¾“å…¥ä½ æƒ³å­¦çš„è¯¾ç¨‹&quot;</span><br><span class="line">                  name=&quot;queryCourse.courseName&quot;</span><br><span class="line">                  value</span><br><span class="line">                /&gt;</span><br><span class="line">                &lt;button type=&quot;submit&quot; class=&quot;s-btn&quot;&gt;</span><br><span class="line">                  &lt;em class=&quot;icon18&quot;&gt;&amp;nbsp;&lt;/em&gt;</span><br><span class="line">                &lt;/button&gt;</span><br><span class="line">              &lt;/label&gt;</span><br><span class="line">            &lt;/form&gt;</span><br><span class="line">          &lt;/aside&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;aside class=&quot;mw-nav-btn&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;mw-nav-icon&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;/aside&gt;</span><br><span class="line">        &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br><span class="line">      &lt;/section&gt;</span><br><span class="line">    &lt;/header&gt;</span><br><span class="line">    &lt;!-- /å…¬å…±å¤´å¼•å…¥ --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;nuxt /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- å…¬å…±åº•å¼•å…¥ --&gt;</span><br><span class="line">    &lt;footer id=&quot;footer&quot;&gt;</span><br><span class="line">      &lt;section class=&quot;container&quot;&gt;</span><br><span class="line">        &lt;div class&gt;</span><br><span class="line">          &lt;h4 class=&quot;hLh30&quot;&gt;</span><br><span class="line">            &lt;span class=&quot;fsize18 f-fM c-999&quot;&gt;å‹æƒ…é“¾æ¥&lt;/span&gt;</span><br><span class="line">          &lt;/h4&gt;</span><br><span class="line">          &lt;ul class=&quot;of flink-list&quot;&gt;</span><br><span class="line">            &lt;li&gt;</span><br><span class="line">              &lt;a href=&quot;http://www.atguigu.com/&quot; title=&quot;å°šç¡…è°·&quot; target=&quot;_blank&quot;</span><br><span class="line">                &gt;å°šç¡…è°·&lt;/a</span><br><span class="line">              &gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">          &lt;/ul&gt;</span><br><span class="line">          &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;b-foot&quot;&gt;</span><br><span class="line">          &lt;section class=&quot;fl col-7&quot;&gt;</span><br><span class="line">            &lt;section class=&quot;mr20&quot;&gt;</span><br><span class="line">              &lt;section class=&quot;b-f-link&quot;&gt;</span><br><span class="line">                &lt;a href=&quot;#&quot; title=&quot;å…³äºæˆ‘ä»¬&quot; target=&quot;_blank&quot;&gt;å…³äºæˆ‘ä»¬&lt;/a&gt;|</span><br><span class="line">                &lt;a href=&quot;#&quot; title=&quot;è”ç³»æˆ‘ä»¬&quot; target=&quot;_blank&quot;&gt;è”ç³»æˆ‘ä»¬&lt;/a&gt;|</span><br><span class="line">                &lt;a href=&quot;#&quot; title=&quot;å¸®åŠ©ä¸­å¿ƒ&quot; target=&quot;_blank&quot;&gt;å¸®åŠ©ä¸­å¿ƒ&lt;/a&gt;|</span><br><span class="line">                &lt;a href=&quot;#&quot; title=&quot;èµ„æºä¸‹è½½&quot; target=&quot;_blank&quot;&gt;èµ„æºä¸‹è½½&lt;/a&gt;|</span><br><span class="line">                &lt;span&gt;æœåŠ¡çƒ­çº¿ï¼š010-56253825(åŒ—äº¬) 0755-85293825(æ·±åœ³)&lt;/span&gt;</span><br><span class="line">                &lt;span&gt;Emailï¼šinfo@atguigu.com&lt;/span&gt;</span><br><span class="line">              &lt;/section&gt;</span><br><span class="line">              &lt;section class=&quot;b-f-link mt10&quot;&gt;</span><br><span class="line">                &lt;span&gt;Â©2018è¯¾ç¨‹ç‰ˆæƒå‡å½’è°·ç²’å­¦é™¢æ‰€æœ‰ äº¬ICPå¤‡17055252å·&lt;/span&gt;</span><br><span class="line">              &lt;/section&gt;</span><br><span class="line">            &lt;/section&gt;</span><br><span class="line">          &lt;/section&gt;</span><br><span class="line">          &lt;aside class=&quot;fl col-3 tac mt15&quot;&gt;</span><br><span class="line">            &lt;section class=&quot;gf-tx&quot;&gt;</span><br><span class="line">              &lt;span&gt;</span><br><span class="line">                &lt;img src=&quot;~/assets/img/wx-icon.png&quot; alt /&gt;</span><br><span class="line">              &lt;/span&gt;</span><br><span class="line">            &lt;/section&gt;</span><br><span class="line">            &lt;section class=&quot;gf-tx&quot;&gt;</span><br><span class="line">              &lt;span&gt;</span><br><span class="line">                &lt;img src=&quot;~/assets/img/wb-icon.png&quot; alt /&gt;</span><br><span class="line">              &lt;/span&gt;</span><br><span class="line">            &lt;/section&gt;</span><br><span class="line">          &lt;/aside&gt;</span><br><span class="line">          &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/section&gt;</span><br><span class="line">    &lt;/footer&gt;</span><br><span class="line">    &lt;!-- /å…¬å…±åº•å¼•å…¥ --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import &#x27;~/assets/css/reset.css&#x27;</span><br><span class="line">  import &#x27;~/assets/css/theme.css&#x27;</span><br><span class="line">  import &#x27;~/assets/css/global.css&#x27;</span><br><span class="line">  import &#x27;~/assets/css/web.css&#x27;</span><br><span class="line">  export default &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="index-vue"><a href="#index-vue" class="headerlink" title="index.vue"></a>index.vue</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- å¹»ç¯ç‰‡ å¼€å§‹ --&gt;</span><br><span class="line">    &lt;div v-swiper:mySwiper=&quot;swiperOption&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;swiper-wrapper&quot;&gt;</span><br><span class="line">        &lt;div</span><br><span class="line">          v-for=&quot;banner in bannerList&quot;</span><br><span class="line">          :key=&quot;banner.id&quot;</span><br><span class="line">          class=&quot;swiper-slide&quot;</span><br><span class="line">          style=&quot;background: #040b1b&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;a target=&quot;_blank&quot; :href=&quot;banner.linkUrl&quot;&gt;</span><br><span class="line">            &lt;img :src=&quot;banner.imageUrl&quot; :alt=&quot;banner.title&quot; /&gt;</span><br><span class="line">          &lt;/a&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div class=&quot;swiper-pagination swiper-pagination-white&quot;&gt;&lt;/div&gt;</span><br><span class="line">      &lt;div</span><br><span class="line">        class=&quot;swiper-button-prev swiper-button-white&quot;</span><br><span class="line">        slot=&quot;button-prev&quot;</span><br><span class="line">      &gt;&lt;/div&gt;</span><br><span class="line">      &lt;div</span><br><span class="line">        class=&quot;swiper-button-next swiper-button-white&quot;</span><br><span class="line">        slot=&quot;button-next&quot;</span><br><span class="line">      &gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- å¹»ç¯ç‰‡ ç»“æŸ --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div id=&quot;aCoursesList&quot;&gt;</span><br><span class="line">      &lt;!-- ç½‘æ ¡è¯¾ç¨‹ å¼€å§‹ --&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;section class=&quot;container&quot;&gt;</span><br><span class="line">          &lt;header class=&quot;comm-title&quot;&gt;</span><br><span class="line">            &lt;h2 class=&quot;tac&quot;&gt;</span><br><span class="line">              &lt;span class=&quot;c-333&quot;&gt;çƒ­é—¨è¯¾ç¨‹&lt;/span&gt;</span><br><span class="line">            &lt;/h2&gt;</span><br><span class="line">          &lt;/header&gt;</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">            &lt;article class=&quot;comm-course-list&quot;&gt;</span><br><span class="line">              &lt;ul class=&quot;of&quot; id=&quot;bna&quot;&gt;</span><br><span class="line">                &lt;li v-for=&quot;course in courseList&quot; :key=&quot;course.id&quot;&gt;</span><br><span class="line">                  &lt;div class=&quot;cc-l-wrap&quot;&gt;</span><br><span class="line">                    &lt;section class=&quot;course-img&quot;&gt;</span><br><span class="line">                      &lt;img</span><br><span class="line">                        :src=&quot;course.cover&quot;</span><br><span class="line">                        class=&quot;img-responsive&quot;</span><br><span class="line">                        :alt=&quot;course.title&quot;</span><br><span class="line">                      /&gt;</span><br><span class="line">                      &lt;div class=&quot;cc-mask&quot;&gt;</span><br><span class="line">                        &lt;a href=&quot;#&quot; title=&quot;å¼€å§‹å­¦ä¹ &quot; class=&quot;comm-btn c-btn-1&quot;</span><br><span class="line">                          &gt;å¼€å§‹å­¦ä¹ &lt;/a</span><br><span class="line">                        &gt;</span><br><span class="line">                      &lt;/div&gt;</span><br><span class="line">                    &lt;/section&gt;</span><br><span class="line">                    &lt;h3 class=&quot;hLh30 txtOf mt10&quot;&gt;</span><br><span class="line">                      &lt;a</span><br><span class="line">                        href=&quot;#&quot;</span><br><span class="line">                        :title=&quot;course.title&quot;</span><br><span class="line">                        class=&quot;course-title fsize18 c-333&quot;</span><br><span class="line">                        &gt;&#123;&#123; course.title &#125;&#125;&lt;/a</span><br><span class="line">                      &gt;</span><br><span class="line">                    &lt;/h3&gt;</span><br><span class="line">                    &lt;section class=&quot;mt10 hLh20 of&quot;&gt;</span><br><span class="line">                      &lt;span</span><br><span class="line">                        class=&quot;fr jgTag bg-green&quot;</span><br><span class="line">                        v-if=&quot;Number(course.price) === 0&quot;</span><br><span class="line">                      &gt;</span><br><span class="line">                        &lt;i class=&quot;c-fff fsize12 f-fA&quot;&gt;å…è´¹&lt;/i&gt;</span><br><span class="line">                      &lt;/span&gt;</span><br><span class="line">                      &lt;span class=&quot;fl jgAttr c-ccc f-fA&quot;&gt;</span><br><span class="line">                        &lt;i class=&quot;c-999 f-fA&quot;&gt;9634äººå­¦ä¹ &lt;/i&gt;</span><br><span class="line">                        |</span><br><span class="line">                        &lt;i class=&quot;c-999 f-fA&quot;&gt;9634è¯„è®º&lt;/i&gt;</span><br><span class="line">                      &lt;/span&gt;</span><br><span class="line">                    &lt;/section&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/li&gt;</span><br><span class="line">              &lt;/ul&gt;</span><br><span class="line">              &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br><span class="line">            &lt;/article&gt;</span><br><span class="line">            &lt;section class=&quot;tac pt20&quot;&gt;</span><br><span class="line">              &lt;a href=&quot;#&quot; title=&quot;å…¨éƒ¨è¯¾ç¨‹&quot; class=&quot;comm-btn c-btn-2&quot;&gt;å…¨éƒ¨è¯¾ç¨‹&lt;/a&gt;</span><br><span class="line">            &lt;/section&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/section&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- /ç½‘æ ¡è¯¾ç¨‹ ç»“æŸ --&gt;</span><br><span class="line">      &lt;!-- ç½‘æ ¡åå¸ˆ å¼€å§‹ --&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;section class=&quot;container&quot;&gt;</span><br><span class="line">          &lt;header class=&quot;comm-title&quot;&gt;</span><br><span class="line">            &lt;h2 class=&quot;tac&quot;&gt;</span><br><span class="line">              &lt;span class=&quot;c-333&quot;&gt;åå¸ˆå¤§å’–&lt;/span&gt;</span><br><span class="line">            &lt;/h2&gt;</span><br><span class="line">          &lt;/header&gt;</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">            &lt;article class=&quot;i-teacher-list&quot;&gt;</span><br><span class="line">              &lt;ul class=&quot;of&quot;&gt;</span><br><span class="line">                &lt;li v-for=&quot;teacher in teacherList&quot; :key=&quot;teacher.id&quot;&gt;</span><br><span class="line">                  &lt;section class=&quot;i-teach-wrap&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;i-teach-pic&quot;&gt;</span><br><span class="line">                      &lt;a href=&quot;/teacher/1&quot; :title=&quot;teacher.name&quot;&gt;</span><br><span class="line">                        &lt;img :alt=&quot;teacher.name&quot; :src=&quot;teacher.avatar&quot; /&gt;</span><br><span class="line">                      &lt;/a&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;mt10 hLh30 txtOf tac&quot;&gt;</span><br><span class="line">                      &lt;a</span><br><span class="line">                        href=&quot;/teacher/1&quot;</span><br><span class="line">                        :title=&quot;teacher.name&quot;</span><br><span class="line">                        class=&quot;fsize18 c-666&quot;</span><br><span class="line">                        &gt;&#123;&#123; teacher.name &#125;&#125;</span><br><span class="line">                      &lt;/a&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;hLh30 txtOf tac&quot;&gt;</span><br><span class="line">                      &lt;span class=&quot;fsize14 c-999&quot;&gt;&#123;&#123; teacher.career &#125;&#125;&lt;/span&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;mt15 i-q-txt&quot;&gt;</span><br><span class="line">                      &lt;p class=&quot;c-999 f-fA&quot;&gt;</span><br><span class="line">                        &#123;&#123; teacher.intro &#125;&#125;</span><br><span class="line">                      &lt;/p&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                  &lt;/section&gt;</span><br><span class="line">                &lt;/li&gt;</span><br><span class="line">              &lt;/ul&gt;</span><br><span class="line">              &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br><span class="line">            &lt;/article&gt;</span><br><span class="line">            &lt;section class=&quot;tac pt20&quot;&gt;</span><br><span class="line">              &lt;a href=&quot;#&quot; title=&quot;å…¨éƒ¨è®²å¸ˆ&quot; class=&quot;comm-btn c-btn-2&quot;&gt;å…¨éƒ¨è®²å¸ˆ&lt;/a&gt;</span><br><span class="line">            &lt;/section&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/section&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- /ç½‘æ ¡åå¸ˆ ç»“æŸ --&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="è½®æ’­å›¾ç»„ä»¶"><a href="#è½®æ’­å›¾ç»„ä»¶" class="headerlink" title="è½®æ’­å›¾ç»„ä»¶"></a>è½®æ’­å›¾ç»„ä»¶</h3><blockquote><p>æœ¬é¡¹ç›®éœ€è¦ç”¨åˆ°ä¸€ä¸ªè½®æ’­å›¾ç»„ä»¶awesome-swiperï¼ˆè¿™é‡Œä½¿ç”¨3.1.3ç‰ˆæœ¬ï¼‰</p></blockquote><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><p> <code>npm install vue-awesome-swiper@3.1.3</code></p><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><blockquote><p>åœ¨ plugins æ–‡ä»¶å¤¹ä¸‹æ–°å»ºæ–‡ä»¶ nuxt-swiper-plugin.js</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> VueAwesomeSwiper <span class="keyword">from</span> <span class="string">&#x27;vue-awesome-swiper/dist/ssr&#x27;</span></span><br><span class="line">Vue.use(VueAwesomeSwiper)</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨ nuxt.config.js æ–‡ä»¶ä¸­é…ç½®æ’ä»¶</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// some nuxt config...</span></span><br><span class="line">  <span class="comment">// awesome-swiperæ’ä»¶é…ç½®å¼•å…¥</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    &#123; <span class="attr">src</span>: <span class="string">&#x27;~/plugins/nuxt-swiper-plugin.js&#x27;</span>, <span class="attr">ssr</span>: <span class="literal">false</span> &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">css</span>: [</span><br><span class="line">    <span class="string">&#x27;swiper/dist/css/swiper.css&#x27;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="axiosä¾èµ–ä¸å°è£…"><a href="#axiosä¾èµ–ä¸å°è£…" class="headerlink" title="axiosä¾èµ–ä¸å°è£…"></a>axiosä¾èµ–ä¸å°è£…</h3><blockquote><p>npm install axios</p></blockquote><blockquote><p>åˆ›å»ºutils -&gt; request.js</p><p>æ³¨æ„è¿™é‡Œçš„baseURLè¦ä¸nginxå¯¹åº”</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="comment">// åˆ›å»ºaxioså®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> service = axios.create(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&#x27;http://localhost:9001&#x27;</span>, <span class="comment">// apiçš„base_url</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">20000</span> <span class="comment">// è¯·æ±‚è¶…æ—¶æ—¶é—´</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service</span><br></pre></td></tr></table></figure><h3 id="element-ui"><a href="#element-ui" class="headerlink" title="element-ui"></a>element-ui</h3><h4 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><blockquote><p>npm install element-ui</p></blockquote><h4 id="é…ç½®-1"><a href="#é…ç½®-1" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><blockquote><p>plugins -&gt; nuxt-swiper-plugin.js</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> VueAwesomeSwiper <span class="keyword">from</span> <span class="string">&#x27;vue-awesome-swiper/dist/ssr&#x27;</span></span><br><span class="line"><span class="keyword">import</span> VueQriously <span class="keyword">from</span> <span class="string">&#x27;vue-qriously&#x27;</span></span><br><span class="line"><span class="keyword">import</span> ElementUI <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span> <span class="comment">//element-uiçš„å…¨éƒ¨ç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span><span class="comment">//element-uiçš„css</span></span><br><span class="line">Vue.use(ElementUI) <span class="comment">//ä½¿ç”¨elementUI</span></span><br><span class="line">Vue.use(VueQriously)</span><br><span class="line">Vue.use(VueAwesomeSwiper)</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><blockquote><p>å¿…çœ‹æ³¨æ„ï¼Œç›´æ¥å¯åŠ¨çš„è¯eslintè¯­æ³•æ£€æŸ¥ååˆ†ä¸¥æ ¼ï¼Œç±»ä¼¼äºç©ºæ ¼æ˜¯2ä¸ªå°±ä¸èƒ½æ˜¯4ä¸ªï¼Œæ‰€ä»¥è¦æŠŠä¸¥æ ¼æ£€æŸ¥å…³é—­</p><p><a href="http://t.zoukankan.com/IwishIcould-p-11879386.html">è§£å†³vue/cli3.0 è¯­æ³•éªŒè¯è§„åˆ™ ESLint: Expected indentation of 2 spaces but found 4. (indent) - èµ°çœ‹çœ‹ (zoukankan.com)</a></p><p>ä»”ç»†å‚è€ƒä¸Šè¿°æ–‡ç« å†…å®¹ï¼Œæ³¨æ„ä¸¤ä¸ªæ­¥éª¤éƒ½è¦æ‰§è¡Œæ‰è¡Œï¼ˆå¼„äº†æˆ‘åå‡ åˆ†é’Ÿæœ‰ç‚¹çƒ¦èºï¼Œå¥½åœ¨è§£å†³äº†ï¼‰</p></blockquote><h2 id="é¦–é¡µåŸºç¡€æ­å»º"><a href="#é¦–é¡µåŸºç¡€æ­å»º" class="headerlink" title="é¦–é¡µåŸºç¡€æ­å»º"></a>é¦–é¡µåŸºç¡€æ­å»º</h2><h3 id="è®²å¸ˆå’Œè¯¾ç¨‹è§†å›¾æ¨¡æ¿æ­å»º"><a href="#è®²å¸ˆå’Œè¯¾ç¨‹è§†å›¾æ¨¡æ¿æ­å»º" class="headerlink" title="è®²å¸ˆå’Œè¯¾ç¨‹è§†å›¾æ¨¡æ¿æ­å»º"></a>è®²å¸ˆå’Œè¯¾ç¨‹è§†å›¾æ¨¡æ¿æ­å»º</h3><h4 id="å›ºå®šè·¯ç”±"><a href="#å›ºå®šè·¯ç”±" class="headerlink" title="å›ºå®šè·¯ç”±"></a>å›ºå®šè·¯ç”±</h4><blockquote><p>æ³¨æ„default.jsä¸­è®¾ç½®äº†å¤´å¯¼èˆªçš„å›ºå®šè·¯ç”±ï¼Œæ‰€ä»¥éœ€è¦åœ¨pagesæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºå¯¹åº”çš„è§†å›¾</p><p>æ³¨æ„å…¶ä¸­çš„router-linkï¼ˆå³è·¯ç”±å¯¼èˆªï¼‰ï¼Œå…¶ä¸­çš„toå¯¹åº”çš„åœ°å€å°±æ˜¯è§†å›¾çš„åœ°å€ï¼Œå€¼ä¸ºæ–‡ä»¶å¤¹çš„è·¯å¾„ï¼Œtoä¼šè‡ªåŠ¨æ‰¾åˆ°pagesæ–‡ä»¶å¤¹ä¸‹å¯¹åº”åå­—çš„æ–‡ä»¶å¤¹ä¸­çš„index.vue</p><p>æŒ‰ç…§è¿™ä¸ªæ€è·¯åˆ›å»ºå¯¹åº”è§†å›¾å³å¯ï¼Œç„¶åå¤åˆ¶èµ„æ–™ä¸­å·²ç»æœ‰çš„è§†å›¾æ¨¡æ¿</p></blockquote><h4 id="åŠ¨æ€è·¯ç”±"><a href="#åŠ¨æ€è·¯ç”±" class="headerlink" title="åŠ¨æ€è·¯ç”±"></a>åŠ¨æ€è·¯ç”±</h4><blockquote><p>åŠ¨æ€è·¯ç”±ç¼–å†™æœ‰ä¸€å®šçš„è§„èŒƒ</p><p>ä¾‹å¦‚éœ€è¦æ ¹æ®idæŸ¥è¯¢ä¸€æ¡è®°å½•ï¼Œéœ€è¦åœ¨å¯¹åº”pagesçš„æ–‡ä»¶å¤¹ä¸‹åˆ›å»º_id.vueæ–‡ä»¶ï¼Œï¼ˆå¿…é¡»æ˜¯ä»¥ä¸‹åˆ’çº¿å¼€å¤´ï¼Œå‚æ•°åä¸ºä¸‹åˆ’çº¿åé¢çš„æ–‡ä»¶åï¼‰</p></blockquote><h4 id="åˆ›å»ºè§†å›¾"><a href="#åˆ›å»ºè§†å›¾" class="headerlink" title="åˆ›å»ºè§†å›¾"></a>åˆ›å»ºè§†å›¾</h4><blockquote><p>æ ¹æ®ä¸Šè¿°æ¡ä»¶åˆ›å»ºå³å¯ï¼Œç„¶åå†…å®¹æ¨¡æ¿cvå³å¯</p></blockquote><h4 id="å½“å‰é¡¹ç›®ç»“æ„"><a href="#å½“å‰é¡¹ç›®ç»“æ„" class="headerlink" title="å½“å‰é¡¹ç›®ç»“æ„"></a>å½“å‰é¡¹ç›®ç»“æ„</h4><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210928194240441.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210928194240441.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210928194240441"></p><h3 id="åç«¯ç¯å¢ƒæ­å»º"><a href="#åç«¯ç¯å¢ƒæ­å»º" class="headerlink" title="åç«¯ç¯å¢ƒæ­å»º"></a>åç«¯ç¯å¢ƒæ­å»º</h3><h4 id="åˆ›å»ºå­æ¨¡å—"><a href="#åˆ›å»ºå­æ¨¡å—" class="headerlink" title="åˆ›å»ºå­æ¨¡å—"></a>åˆ›å»ºå­æ¨¡å—</h4><blockquote><p>service_cms</p></blockquote><h4 id="åˆ›å»ºå¹¶ç¼–å†™é…ç½®æ–‡ä»¶application-properties"><a href="#åˆ›å»ºå¹¶ç¼–å†™é…ç½®æ–‡ä»¶application-properties" class="headerlink" title="åˆ›å»ºå¹¶ç¼–å†™é…ç½®æ–‡ä»¶application.properties"></a>åˆ›å»ºå¹¶ç¼–å†™é…ç½®æ–‡ä»¶application.properties</h4><blockquote><p>æ³¨æ„è¿™é‡Œçš„DataSourceé…ç½®ï¼Œå¦‚æœä¸å¯¹å¯èƒ½ä¼šæŠ¥springbootæ‰¾ä¸åˆ°beançš„é”™è¯¯</p></blockquote><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœåŠ¡ç«¯å£</span></span><br><span class="line"><span class="meta">server.port</span>=<span class="string">8004</span></span><br><span class="line"><span class="comment"># æœåŠ¡å</span></span><br><span class="line"><span class="meta">spring.application.name</span>=<span class="string">service-cms</span></span><br><span class="line"><span class="comment"># mysqlæ•°æ®åº“è¿æ¥</span></span><br><span class="line"><span class="meta">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/guli?serverTimezone=GMT%2B8</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">123456789</span></span><br><span class="line"><span class="comment">#è¿”å›jsonçš„å…¨å±€æ—¶é—´æ ¼å¼</span></span><br><span class="line"><span class="meta">spring.jackson.date-format</span>=<span class="string">yyyy-MM-dd HH:mm:ss</span></span><br><span class="line"><span class="meta">spring.jackson.time-zone</span>=<span class="string">GMT+8</span></span><br><span class="line"><span class="comment">#é…ç½®mapper xmlæ–‡ä»¶çš„è·¯å¾„</span></span><br><span class="line"><span class="meta">mybatis-plus.mapper-locations</span>=<span class="string">classpath:com/atguigu/educms/mapper/xml/*.xml</span></span><br><span class="line"><span class="meta">spring.redis.host</span>=<span class="string">192.168.44.132</span></span><br><span class="line"><span class="meta">spring.redis.port</span>=<span class="string">6379</span></span><br><span class="line"><span class="meta">spring.redis.database</span>=<span class="string">0</span></span><br><span class="line"><span class="meta">spring.redis.timeout</span>=<span class="string">1800000</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-active</span>=<span class="string">20</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-wait</span>=<span class="string">-1</span></span><br><span class="line"><span class="comment">#æœ€å¤§é˜»å¡ç­‰å¾…æ—¶é—´(è´Ÿæ•°è¡¨ç¤ºæ²¡é™åˆ¶)</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-idle</span>=<span class="string">5</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.min-idle</span>=<span class="string">0</span></span><br><span class="line"><span class="comment">#mybatisæ—¥å¿—</span></span><br><span class="line"><span class="meta">mybatis-plus.configuration.log-impl</span>=<span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line"><span class="comment"># nacosæœåŠ¡åœ°å€</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.discovery.server-addr</span>=<span class="string">127.0.0.1:8848</span></span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œè®°å¾—å»nginx.confé‡Œé…ç½®ä¸€ä¸‹</p></blockquote><h4 id="åˆ›å»ºæ•°æ®åº“è¡¨"><a href="#åˆ›å»ºæ•°æ®åº“è¡¨" class="headerlink" title="åˆ›å»ºæ•°æ®åº“è¡¨"></a>åˆ›å»ºæ•°æ®åº“è¡¨</h4><blockquote><p>å¯¼å…¥èµ„æ–™çš„sqlæ–‡ä»¶å³å¯</p></blockquote><h4 id="ç¼–å†™å¯åŠ¨ç±»"><a href="#ç¼–å†™å¯åŠ¨ç±»" class="headerlink" title="ç¼–å†™å¯åŠ¨ç±»"></a>ç¼–å†™å¯åŠ¨ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &#123;&quot;com.atguigu&quot;&#125;)</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.atguigu.educms.mapper&quot;)</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span>  <span class="comment">// nacosæ³¨å†Œ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CmsApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(CmsApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä»£ç ç”Ÿæˆå™¨"><a href="#ä»£ç ç”Ÿæˆå™¨" class="headerlink" title="ä»£ç ç”Ÿæˆå™¨"></a>ä»£ç ç”Ÿæˆå™¨</h4><blockquote><p>è€æ ·å­æ”¹ä¸€ä¸‹å°±è¡Œ</p><p>ç”Ÿæˆä¹‹åè·¨åŸŸæ³¨é‡ŠåŠ ä¸€ä¸‹ã€mapperscanåŠ ä¸€ä¸‹ã€é…ç½®æ–‡ä»¶ä¸­æ‰«æmapper.xmlè·¯å¾„åŠ ä¸€ä¸‹</p><p>ä¸€äº›å®ä½“ç±»å­—æ®µçš„æ³¨é‡Šä¹Ÿè¦åŠ ä¸€ä¸‹ï¼Œæ¯”å¦‚è¯´è‡ªåŠ¨æ·»åŠ å’Œé€»è¾‘åˆ é™¤</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MapperScan(&quot;com.atguigu.educms.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CmsApplication</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CrmBannerController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é…ç½®mapper xmlæ–‡ä»¶çš„è·¯å¾„</span></span><br><span class="line"><span class="meta">mybatis-plus.mapper-locations</span>=<span class="string">classpath:com/atguigu/educms/mapper/xml/*.xml</span></span><br></pre></td></tr></table></figure><h4 id="å½“å‰é¡¹ç›®ç»“æ„-1"><a href="#å½“å‰é¡¹ç›®ç»“æ„-1" class="headerlink" title="å½“å‰é¡¹ç›®ç»“æ„"></a>å½“å‰é¡¹ç›®ç»“æ„</h4><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210928200432351.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210928200432351.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210928200432351"></p><h2 id="é¦–é¡µè½®æ’­å›¾ï¼ˆåç«¯ï¼‰"><a href="#é¦–é¡µè½®æ’­å›¾ï¼ˆåç«¯ï¼‰" class="headerlink" title="é¦–é¡µè½®æ’­å›¾ï¼ˆåç«¯ï¼‰"></a>é¦–é¡µè½®æ’­å›¾ï¼ˆåç«¯ï¼‰</h2><blockquote><p>åå°åº”è¯¥ä¹Ÿæœ‰è½®æ’­å›¾çš„ç®¡ç†æ¨¡å—ï¼Œæ‰€ä»¥éœ€è¦ä¸¤ä¸ªbannerController</p></blockquote><h3 id="ç¼–å†™BannerAdminController"><a href="#ç¼–å†™BannerAdminController" class="headerlink" title="ç¼–å†™BannerAdminController"></a>ç¼–å†™BannerAdminController</h3><blockquote><p>ç”¨äºåå°çš„bannerç®¡ç†æ¥å£ï¼ŒTODOï¼šå‰ç«¯é¡µé¢è‡ªå·±å†™ï¼ˆæˆ‘é€‰æ‹©ä¸å†™ä½¿ç”¨swaggeræµ‹è¯•å˜¿å˜¿ğŸ˜™ï¼‰</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/educms/banneradmin&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BannerAdminController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CrmBannerService bannerService;</span><br><span class="line">    <span class="comment">// åˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;pageBanner/&#123;pageNo&#125;/&#123;limit&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">pageBanner</span><span class="params">(<span class="meta">@PathVariable</span> Long limit, <span class="meta">@PathVariable</span> Long pageNo)</span> </span>&#123;</span><br><span class="line">        Page&lt;CrmBanner&gt; pageBanner = <span class="keyword">new</span> Page&lt;&gt;(pageNo, limit);</span><br><span class="line">        bannerService.page(pageBanner, <span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">&quot;records&quot;</span>, pageBanner.getRecords()).data(<span class="string">&quot;total&quot;</span>, pageBanner.getTotal());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2 æ·»åŠ banner</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;addBanner&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">addBanner</span><span class="params">(<span class="meta">@RequestBody</span> CrmBanner crmBanner)</span> </span>&#123;</span><br><span class="line">        bannerService.save(crmBanner);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;è·å–Banner&quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;get/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">get</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span> </span>&#123;</span><br><span class="line">        CrmBanner banner = bannerService.getById(id);</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">&quot;item&quot;</span>, banner);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;ä¿®æ”¹Banner&quot;)</span></span><br><span class="line">    <span class="meta">@PutMapping(&quot;update&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">updateById</span><span class="params">(<span class="meta">@RequestBody</span> CrmBanner banner)</span> </span>&#123;</span><br><span class="line">        bannerService.updateById(banner);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;åˆ é™¤Banner&quot;)</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;remove/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">remove</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span> </span>&#123;</span><br><span class="line">        bannerService.removeById(id);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™BannerFrontController"><a href="#ç¼–å†™BannerFrontController" class="headerlink" title="ç¼–å†™BannerFrontController"></a>ç¼–å†™BannerFrontController</h3><blockquote><p>ç”¨äºå‰å°çš„banneræ¥å£ï¼Œä¸»è¦ç”¨äºæ˜¾ç¤ºbanner</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/educms/bannerfront&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BannerFrontController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CrmBannerService bannerService;</span><br><span class="line">  <span class="comment">//æŸ¥è¯¢bannerä¿¡æ¯</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;getBannerList&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">getBannerList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;CrmBanner&gt; list = bannerService.selectAllBanner();</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">&quot;list&quot;</span>, list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™Service"><a href="#ç¼–å†™Service" class="headerlink" title="ç¼–å†™Service"></a>ç¼–å†™Service</h3><blockquote><p>è¿™é‡Œè‡ªå·±å†™äº†ä¸ªserviceï¼Œç»“æœå•¥ä¹Ÿæ²¡å®ç°ï¼Œçº¯å±è„±è£¤å­æ”¾å±ï¼Œæˆ‘æ”¹äº†</p><p>æˆ‘å‘ç°æˆ‘é”™äº†ï¼Œæˆ‘åº”è¯¥çœ‹å®Œæ•´ä¸ªè§†é¢‘æ‰è¯´è¯ï¼Œè¿™ä¸ªæ˜¯ä¸ºäº†åé¢çš„Redisåšå‡†å¤‡çš„</p><p>å†™Mapperé‡Œæœ€å¥½ï¼ˆå¼¹å¹•ï¼šæ„Ÿè°¢è¿™æ®µä»£ç ï¼Œæ˜¨å¤©å†™äº†ï¼Œä»Šå¤©è€æ¿è®©æˆ‘èµ°ï¼‰</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CrmBannerServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">CrmBannerMapper</span>, <span class="title">CrmBanner</span>&gt; <span class="keyword">implements</span> <span class="title">CrmBannerService</span> </span>&#123;</span><br><span class="line"> <span class="comment">// æŸ¥è¯¢æ‰€æœ‰banner</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;CrmBanner&gt; <span class="title">selectAllBanner</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ ¹æ®idé™åºæ’åºï¼Œæ˜¾ç¤ºæ’åºåçš„å‰ä¸¤æ¡è®°å½•</span></span><br><span class="line">        QueryWrapper&lt;CrmBanner&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">        <span class="comment">// è®¾ç½®æ’åºæ¡ä»¶</span></span><br><span class="line">        wrapper.orderByDesc(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        <span class="comment">// è®¾ç½®æ˜¾ç¤ºæ•°é‡ï¼Œlastæ‹¼æ¥sqlè¯­å¥</span></span><br><span class="line">        wrapper.last(<span class="string">&quot;limit 2&quot;</span>);</span><br><span class="line">        List&lt;CrmBanner&gt; crmBanners = baseMapper.selectList(wrapper);</span><br><span class="line">        <span class="keyword">return</span> crmBanners;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é¦–é¡µçƒ­é—¨è¯¾ç¨‹å’Œåå¸ˆï¼ˆåç«¯ï¼‰"><a href="#é¦–é¡µçƒ­é—¨è¯¾ç¨‹å’Œåå¸ˆï¼ˆåç«¯ï¼‰" class="headerlink" title="é¦–é¡µçƒ­é—¨è¯¾ç¨‹å’Œåå¸ˆï¼ˆåç«¯ï¼‰"></a>é¦–é¡µçƒ­é—¨è¯¾ç¨‹å’Œåå¸ˆï¼ˆåç«¯ï¼‰</h2><blockquote><p>æ³¨æ„è¿™é‡Œï¼Œcontrollerè¿™äº›åˆå†™åˆ°service_eduæ¨¡å—ä¸­äº†</p></blockquote><h3 id="ç¼–å†™Mapper"><a href="#ç¼–å†™Mapper" class="headerlink" title="ç¼–å†™Mapper"></a>ç¼–å†™Mapper</h3><blockquote><p>éœ€æ±‚ï¼šæ ¹æ®idè¿›è¡Œé™åºæ’åºï¼ˆæˆ–è€…æ ¹æ®è¡¨ä¸­ä¸“é—¨çš„çƒ­åº¦æ’åºï¼‰ï¼Œæ˜¾ç¤ºæ’åºä¹‹åçš„å‰8æ¡æ•°æ®</p></blockquote><h4 id="EduTeacherMapper"><a href="#EduTeacherMapper" class="headerlink" title="EduTeacherMapper"></a>EduTeacherMapper</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectIndexList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.eduservice.entity.EduTeacher&quot;</span>&gt;</span></span><br><span class="line">    select *</span><br><span class="line">    from edu_teacher</span><br><span class="line">    order by id desc</span><br><span class="line">    limit 4</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="EduCourseMapper"><a href="#EduCourseMapper" class="headerlink" title="EduCourseMapper"></a>EduCourseMapper</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectIndexList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.eduservice.entity.EduCourse&quot;</span>&gt;</span></span><br><span class="line">    select *</span><br><span class="line">    from edu_course</span><br><span class="line">    order by id desc</span><br><span class="line">    limit 8</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™service"><a href="#ç¼–å†™service" class="headerlink" title="ç¼–å†™service"></a>ç¼–å†™service</h3><blockquote><p>å°±ç›´æ¥è°ƒç”¨baseMapperä¸­çš„æ¥å£å³å¯</p></blockquote><h3 id="ç¼–å†™controller"><a href="#ç¼–å†™controller" class="headerlink" title="ç¼–å†™controller"></a>ç¼–å†™controller</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/eduservice/index&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduCourseService courseService;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduTeacherService teacherService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥è¯¢çƒ­é—¨è¯¾ç¨‹å’Œè®²å¸ˆ</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;index&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">getIndex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;EduCourse&gt; courseList = courseService.getIndexList();</span><br><span class="line">        List&lt;EduTeacher&gt; teacherList = teacherService.getIndexList();</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">&quot;courseList&quot;</span>, courseList).data(<span class="string">&quot;teacherList&quot;</span>, teacherList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é¦–é¡µè½®æ’­å›¾å’Œçƒ­é—¨è®²å¸ˆè¯¾ç¨‹ï¼ˆå‰ç«¯ï¼‰"><a href="#é¦–é¡µè½®æ’­å›¾å’Œçƒ­é—¨è®²å¸ˆè¯¾ç¨‹ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="é¦–é¡µè½®æ’­å›¾å’Œçƒ­é—¨è®²å¸ˆè¯¾ç¨‹ï¼ˆå‰ç«¯ï¼‰"></a>é¦–é¡µè½®æ’­å›¾å’Œçƒ­é—¨è®²å¸ˆè¯¾ç¨‹ï¼ˆå‰ç«¯ï¼‰</h2><h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><blockquote><ol><li>api -&gt; banner.js</li><li>api -&gt; index.js</li></ol></blockquote><h4 id="banner-js"><a href="#banner-js" class="headerlink" title="banner.js"></a>banner.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">//æŸ¥è¯¢å‰ä¸¤æ¡banneræ•°æ®</span></span><br><span class="line">  <span class="function"><span class="title">getBannerList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/educms/bannerfront/getBannerList&#x27;</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">//æŸ¥è¯¢çƒ­é—¨è¯¾ç¨‹å’Œåå¸ˆ</span></span><br><span class="line">  <span class="function"><span class="title">getIndexList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/eduservice/index/getIndexList&#x27;</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è°ƒç”¨æ¥å£"><a href="#è°ƒç”¨æ¥å£" class="headerlink" title="è°ƒç”¨æ¥å£"></a>è°ƒç”¨æ¥å£</h3><blockquote><p>æ³¨æ„è¿™é‡Œçš„responseéœ€è¦ä¸¤ä¸ªdataï¼Œåº”ä¸ºè¿™ä¸ªæ¨¡æ¿æ²¡æœ‰å¸®å¿™å°è£…responseçš„ä¸€äº›ä¸œè¥¿ï¼Œä¹‹å‰çš„ç›´æ¥è·å¾—çš„æ˜¯response.data</p></blockquote><h4 id="è½®æ’­å›¾"><a href="#è½®æ’­å›¾" class="headerlink" title="è½®æ’­å›¾"></a>è½®æ’­å›¾</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;!-- å¹»ç¯ç‰‡ å¼€å§‹ --&gt;</span><br><span class="line">        &lt;div v-swiper:mySwiper=&quot;swiperOption&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;swiper-wrapper&quot;&gt;</span><br><span class="line">                &lt;div</span><br><span class="line">                    v-for=&quot;banner in bannerList&quot;</span><br><span class="line">                    :key=&quot;banner.id&quot;</span><br><span class="line">                    class=&quot;swiper-slide&quot;</span><br><span class="line">                    style=&quot;background: #040b1b&quot;</span><br><span class="line">                &gt;</span><br><span class="line">                    &lt;a target=&quot;_blank&quot; :href=&quot;banner.linkUrl&quot;&gt;</span><br><span class="line">                        &lt;img :src=&quot;banner.imageUrl&quot; :alt=&quot;banner.title&quot; /&gt;</span><br><span class="line">                    &lt;/a&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;swiper-pagination swiper-pagination-white&quot;&gt;&lt;/div&gt;</span><br><span class="line">            &lt;div</span><br><span class="line">                class=&quot;swiper-button-prev swiper-button-white&quot;</span><br><span class="line">                slot=&quot;button-prev&quot;</span><br><span class="line">            &gt;&lt;/div&gt;</span><br><span class="line">            &lt;div</span><br><span class="line">                class=&quot;swiper-button-next swiper-button-white&quot;</span><br><span class="line">                slot=&quot;button-next&quot;</span><br><span class="line">            &gt;&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- å¹»ç¯ç‰‡ ç»“æŸ --&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import bannerApi from &#x27;@/api/banner&#x27;</span><br><span class="line">    export default &#123;</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          swiperOption: &#123;</span><br><span class="line">            // é…ç½®åˆ†é¡µ</span><br><span class="line">            pagination: &#123;</span><br><span class="line">              el: &#x27;.swiper-pagination&#x27; // åˆ†é¡µçš„domèŠ‚ç‚¹</span><br><span class="line">            &#125;,</span><br><span class="line">            // é…ç½®å¯¼èˆª</span><br><span class="line">            navigation: &#123;</span><br><span class="line">              nextEl: &#x27;.swiper-button-next&#x27;, // ä¸‹ä¸€é¡µdomèŠ‚ç‚¹</span><br><span class="line">              prevEl: &#x27;.swiper-button-prev&#x27; // å‰ä¸€é¡µdomèŠ‚ç‚¹</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          // æ•°ç»„</span><br><span class="line">          bannerList: [],</span><br><span class="line">          courseList: [],</span><br><span class="line">          teacherList: []</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      created() &#123;</span><br><span class="line">        // åˆå§‹åŒ–æ•°æ®</span><br><span class="line">        this.getBannerList()</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">        // åˆå§‹åŒ–é¦–é¡µè½®æ’­å›¾è¯¾ç¨‹è®²å¸ˆåˆ—è¡¨</span><br><span class="line">        getBannerList() &#123;</span><br><span class="line">          bannerApi.getBannerList().then(result =&gt; &#123;</span><br><span class="line">            this.bannerList = result.data.data.list</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="çƒ­é—¨è¯¾ç¨‹è®²å¸ˆ"><a href="#çƒ­é—¨è¯¾ç¨‹è®²å¸ˆ" class="headerlink" title="çƒ­é—¨è¯¾ç¨‹è®²å¸ˆ"></a>çƒ­é—¨è¯¾ç¨‹è®²å¸ˆ</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;div id=&quot;aCoursesList&quot;&gt;</span><br><span class="line">            &lt;!-- ç½‘æ ¡è¯¾ç¨‹ å¼€å§‹ --&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;section class=&quot;container&quot;&gt;</span><br><span class="line">                    &lt;header class=&quot;comm-title&quot;&gt;</span><br><span class="line">                        &lt;h2 class=&quot;tac&quot;&gt;</span><br><span class="line">                            &lt;span class=&quot;c-333&quot;&gt;çƒ­é—¨è¯¾ç¨‹&lt;/span&gt;</span><br><span class="line">                        &lt;/h2&gt;</span><br><span class="line">                    &lt;/header&gt;</span><br><span class="line">                    &lt;div&gt;</span><br><span class="line">                        &lt;article class=&quot;comm-course-list&quot;&gt;</span><br><span class="line">                            &lt;ul class=&quot;of&quot; id=&quot;bna&quot;&gt;</span><br><span class="line">                                &lt;li</span><br><span class="line">                                    v-for=&quot;course in courseList&quot;</span><br><span class="line">                                    :key=&quot;course.id&quot;</span><br><span class="line">                                &gt;</span><br><span class="line">                                    &lt;div class=&quot;cc-l-wrap&quot;&gt;</span><br><span class="line">                                        &lt;section class=&quot;course-img&quot;&gt;</span><br><span class="line">                                            &lt;img</span><br><span class="line">                                                :src=&quot;course.cover&quot;</span><br><span class="line">                                                class=&quot;img-responsive&quot;</span><br><span class="line">                                                :alt=&quot;course.title&quot;</span><br><span class="line">                                            /&gt;</span><br><span class="line">                                            &lt;div class=&quot;cc-mask&quot;&gt;</span><br><span class="line">                                                &lt;a</span><br><span class="line">                                                    href=&quot;#&quot;</span><br><span class="line">                                                    title=&quot;å¼€å§‹å­¦ä¹ &quot;</span><br><span class="line">                                                    class=&quot;comm-btn c-btn-1&quot;</span><br><span class="line">                                                    &gt;å¼€å§‹å­¦ä¹ &lt;/a</span><br><span class="line">                                                &gt;</span><br><span class="line">                                            &lt;/div&gt;</span><br><span class="line">                                        &lt;/section&gt;</span><br><span class="line">                                        &lt;h3 class=&quot;hLh30 txtOf mt10&quot;&gt;</span><br><span class="line">                                            &lt;a</span><br><span class="line">                                                href=&quot;#&quot;</span><br><span class="line">                                                :title=&quot;course.title&quot;</span><br><span class="line">                                                class=&quot;</span><br><span class="line">                                                    course-title</span><br><span class="line">                                                    fsize18</span><br><span class="line">                                                    c-333</span><br><span class="line">                                                &quot;</span><br><span class="line">                                                &gt;&#123;&#123; course.title &#125;&#125;&lt;/a</span><br><span class="line">                                            &gt;</span><br><span class="line">                                        &lt;/h3&gt;</span><br><span class="line">                                        &lt;section class=&quot;mt10 hLh20 of&quot;&gt;</span><br><span class="line">                                            &lt;span</span><br><span class="line">                                                class=&quot;fr jgTag bg-green&quot;</span><br><span class="line">                                                v-if=&quot;</span><br><span class="line">                                                    Number(course.price) === 0</span><br><span class="line">                                                &quot;</span><br><span class="line">                                            &gt;</span><br><span class="line">                                                &lt;i class=&quot;c-fff fsize12 f-fA&quot;</span><br><span class="line">                                                    &gt;å…è´¹&lt;/i</span><br><span class="line">                                                &gt;</span><br><span class="line">                                            &lt;/span&gt;</span><br><span class="line">                                            &lt;span class=&quot;fl jgAttr c-ccc f-fA&quot;&gt;</span><br><span class="line">                                                &lt;i class=&quot;c-999 f-fA&quot;</span><br><span class="line">                                                    &gt;9634äººå­¦ä¹ &lt;/i</span><br><span class="line">                                                &gt;</span><br><span class="line">                                                |</span><br><span class="line">                                                &lt;i class=&quot;c-999 f-fA&quot;</span><br><span class="line">                                                    &gt;9634è¯„è®º&lt;/i</span><br><span class="line">                                                &gt;</span><br><span class="line">                                            &lt;/span&gt;</span><br><span class="line">                                        &lt;/section&gt;</span><br><span class="line">                                    &lt;/div&gt;</span><br><span class="line">                                &lt;/li&gt;</span><br><span class="line">                            &lt;/ul&gt;</span><br><span class="line">                            &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;/article&gt;</span><br><span class="line">                        &lt;section class=&quot;tac pt20&quot;&gt;</span><br><span class="line">                            &lt;a</span><br><span class="line">                                href=&quot;#&quot;</span><br><span class="line">                                title=&quot;å…¨éƒ¨è¯¾ç¨‹&quot;</span><br><span class="line">                                class=&quot;comm-btn c-btn-2&quot;</span><br><span class="line">                                &gt;å…¨éƒ¨è¯¾ç¨‹&lt;/a</span><br><span class="line">                            &gt;</span><br><span class="line">                        &lt;/section&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/section&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;!-- /ç½‘æ ¡è¯¾ç¨‹ ç»“æŸ --&gt;</span><br><span class="line">            &lt;!-- ç½‘æ ¡åå¸ˆ å¼€å§‹ --&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;section class=&quot;container&quot;&gt;</span><br><span class="line">                    &lt;header class=&quot;comm-title&quot;&gt;</span><br><span class="line">                        &lt;h2 class=&quot;tac&quot;&gt;</span><br><span class="line">                            &lt;span class=&quot;c-333&quot;&gt;åå¸ˆå¤§å’–&lt;/span&gt;</span><br><span class="line">                        &lt;/h2&gt;</span><br><span class="line">                    &lt;/header&gt;</span><br><span class="line">                    &lt;div&gt;</span><br><span class="line">                        &lt;article class=&quot;i-teacher-list&quot;&gt;</span><br><span class="line">                            &lt;ul class=&quot;of&quot;&gt;</span><br><span class="line">                                &lt;li</span><br><span class="line">                                    v-for=&quot;teacher in teacherList&quot;</span><br><span class="line">                                    :key=&quot;teacher.id&quot;</span><br><span class="line">                                &gt;</span><br><span class="line">                                    &lt;section class=&quot;i-teach-wrap&quot;&gt;</span><br><span class="line">                                        &lt;div class=&quot;i-teach-pic&quot;&gt;</span><br><span class="line">                                            &lt;a</span><br><span class="line">                                                href=&quot;/teacher/1&quot;</span><br><span class="line">                                                :title=&quot;teacher.name&quot;</span><br><span class="line">                                            &gt;</span><br><span class="line">                                                &lt;img</span><br><span class="line">                                                    :alt=&quot;teacher.name&quot;</span><br><span class="line">                                                    :src=&quot;teacher.avatar&quot;</span><br><span class="line">                                                /&gt;</span><br><span class="line">                                            &lt;/a&gt;</span><br><span class="line">                                        &lt;/div&gt;</span><br><span class="line">                                        &lt;div class=&quot;mt10 hLh30 txtOf tac&quot;&gt;</span><br><span class="line">                                            &lt;a</span><br><span class="line">                                                href=&quot;/teacher/1&quot;</span><br><span class="line">                                                :title=&quot;teacher.name&quot;</span><br><span class="line">                                                class=&quot;fsize18 c-666&quot;</span><br><span class="line">                                                &gt;&#123;&#123; teacher.name &#125;&#125;&lt;/a</span><br><span class="line">                                            &gt;</span><br><span class="line">                                        &lt;/div&gt;</span><br><span class="line">                                        &lt;div class=&quot;hLh30 txtOf tac&quot;&gt;</span><br><span class="line">                                            &lt;span class=&quot;fsize14 c-999&quot;&gt;&#123;&#123;</span><br><span class="line">                                                teacher.career</span><br><span class="line">                                            &#125;&#125;&lt;/span&gt;</span><br><span class="line">                                        &lt;/div&gt;</span><br><span class="line">                                        &lt;div class=&quot;mt15 i-q-txt&quot;&gt;</span><br><span class="line">                                            &lt;p class=&quot;c-999 f-fA&quot;&gt;</span><br><span class="line">                                                &#123;&#123; teacher.intro &#125;&#125;</span><br><span class="line">                                            &lt;/p&gt;</span><br><span class="line">                                        &lt;/div&gt;</span><br><span class="line">                                    &lt;/section&gt;</span><br><span class="line">                                &lt;/li&gt;</span><br><span class="line">                            &lt;/ul&gt;</span><br><span class="line">                            &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;/article&gt;</span><br><span class="line">                        &lt;section class=&quot;tac pt20&quot;&gt;</span><br><span class="line">                            &lt;a</span><br><span class="line">                                href=&quot;#&quot;</span><br><span class="line">                                title=&quot;å…¨éƒ¨è®²å¸ˆ&quot;</span><br><span class="line">                                class=&quot;comm-btn c-btn-2&quot;</span><br><span class="line">                                &gt;å…¨éƒ¨è®²å¸ˆ&lt;/a</span><br><span class="line">                            &gt;</span><br><span class="line">                        &lt;/section&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/section&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;!-- /ç½‘æ ¡åå¸ˆ ç»“æŸ --&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import bannerApi from &#x27;@/api/banner&#x27;</span><br><span class="line">    import indexApi from &#x27;@/api/index&#x27;</span><br><span class="line">    export default &#123;</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          swiperOption: &#123;</span><br><span class="line">            // é…ç½®åˆ†é¡µ</span><br><span class="line">            pagination: &#123;</span><br><span class="line">              el: &#x27;.swiper-pagination&#x27; // åˆ†é¡µçš„domèŠ‚ç‚¹</span><br><span class="line">            &#125;,</span><br><span class="line">            // é…ç½®å¯¼èˆª</span><br><span class="line">            navigation: &#123;</span><br><span class="line">              nextEl: &#x27;.swiper-button-next&#x27;, // ä¸‹ä¸€é¡µdomèŠ‚ç‚¹</span><br><span class="line">              prevEl: &#x27;.swiper-button-prev&#x27; // å‰ä¸€é¡µdomèŠ‚ç‚¹</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          // æ•°ç»„</span><br><span class="line">          bannerList: [],</span><br><span class="line">          courseList: [],</span><br><span class="line">          teacherList: []</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      created() &#123;</span><br><span class="line">        // åˆå§‹åŒ–æ•°æ®</span><br><span class="line">        this.getBannerList()</span><br><span class="line">        this.getCourseTeacher()</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">        // åˆå§‹åŒ–é¦–é¡µè¯¾ç¨‹è®²å¸ˆåˆ—è¡¨</span><br><span class="line">        getCourseTeacher() &#123;</span><br><span class="line">          indexApi.getIndexList().then(result =&gt; &#123;</span><br><span class="line">            this.courseList = result.data.data.courseList</span><br><span class="line">            this.teacherList = result.data.data.teacherList</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•-1"><a href="#æµ‹è¯•-1" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><blockquote><p>è¿™é‡Œæˆ‘æ²¡æœ‰æŠŠurlå¯¹åº”èµ·æ¥ï¼Œæ‰€ä»¥æŠ¥äº†<code>Access to XMLHttpRequest at &#39;http://localhost:9001/educms/bannerfront/getBannerList&#39; from origin &#39;http://localhost:3000&#39; has been blocked by CORS policy: No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource.</code>çš„é”™è¯¯</p><p>è¿™ä¸ªé”™è¯¯è¿˜æœ‰å¯èƒ½æ˜¯nginxæ²¡æœ‰é…ç½®ï¼Œæˆ–è€…è·¨åŸŸæ³¨è§£æ²¡æœ‰åŠ </p></blockquote><h2 id="å•ç‚¹ç™»å½•SSO"><a href="#å•ç‚¹ç™»å½•SSO" class="headerlink" title="å•ç‚¹ç™»å½•SSO"></a>å•ç‚¹ç™»å½•SSO</h2><p>![02 å•ç‚¹ç™»å½•ä¸‰ç§æ–¹å¼ä»‹ç»](<a href="https://gitee.com/ReRia/images/raw/master/img/02">https://gitee.com/ReRia/images/raw/master/img/02</a> å•ç‚¹ç™»å½•ä¸‰ç§æ–¹å¼ä»‹ç».png)</p><h2 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h2><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210929131659223.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210929131659223.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210929131659223"></p><h3 id="æ•´åˆ"><a href="#æ•´åˆ" class="headerlink" title="æ•´åˆ"></a>æ•´åˆ</h3><blockquote><p>è¯¥é¡¹ç›®åœ¨commonæ¨¡å—ä¸­é…ç½®</p></blockquote><h4 id="ä¾èµ–"><a href="#ä¾èµ–" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- redis --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- spring2.Xé›†æˆredisæ‰€éœ€common-pool2--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-pool2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºé…ç½®ç±»"><a href="#åˆ›å»ºé…ç½®ç±»" class="headerlink" title="åˆ›å»ºé…ç½®ç±»"></a>åˆ›å»ºé…ç½®ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>  <span class="comment">// é…ç½®ç±»</span></span><br><span class="line"><span class="meta">@EnableCaching</span>  <span class="comment">// å¼€å¯casheç¼“å­˜</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisConfig</span> <span class="keyword">extends</span> <span class="title">CachingConfigurerSupport</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="title">redisTemplate</span><span class="params">(RedisConnectionFactory factory)</span> </span>&#123;</span><br><span class="line">        RedisTemplate&lt;String, Object&gt; template = <span class="keyword">new</span> RedisTemplate&lt;&gt;();</span><br><span class="line">        RedisSerializer&lt;String&gt; redisSerializer = <span class="keyword">new</span> StringRedisSerializer();</span><br><span class="line">        Jackson2JsonRedisSerializer jackson2JsonRedisSerializer = <span class="keyword">new</span> Jackson2JsonRedisSerializer(Object.class);</span><br><span class="line">        ObjectMapper om = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">        om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);</span><br><span class="line">        om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);</span><br><span class="line">        jackson2JsonRedisSerializer.setObjectMapper(om);</span><br><span class="line">        template.setConnectionFactory(factory);</span><br><span class="line">        <span class="comment">//keyåºåˆ—åŒ–æ–¹å¼</span></span><br><span class="line">        template.setKeySerializer(redisSerializer);</span><br><span class="line">        <span class="comment">//valueåºåˆ—åŒ–</span></span><br><span class="line">        template.setValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        <span class="comment">//value hashmapåºåˆ—åŒ–</span></span><br><span class="line">        template.setHashValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CacheManager <span class="title">cacheManager</span><span class="params">(RedisConnectionFactory factory)</span> </span>&#123;</span><br><span class="line">        RedisSerializer&lt;String&gt; redisSerializer = <span class="keyword">new</span> StringRedisSerializer();</span><br><span class="line">        Jackson2JsonRedisSerializer jackson2JsonRedisSerializer = <span class="keyword">new</span> Jackson2JsonRedisSerializer(Object.class);</span><br><span class="line">        <span class="comment">//è§£å†³æŸ¥è¯¢ç¼“å­˜è½¬æ¢å¼‚å¸¸çš„é—®é¢˜</span></span><br><span class="line">        ObjectMapper om = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">        om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);</span><br><span class="line">        om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);</span><br><span class="line">        jackson2JsonRedisSerializer.setObjectMapper(om);</span><br><span class="line">        <span class="comment">// é…ç½®åºåˆ—åŒ–ï¼ˆè§£å†³ä¹±ç çš„é—®é¢˜ï¼‰,è¿‡æœŸæ—¶é—´600ç§’</span></span><br><span class="line">        RedisCacheConfiguration config = RedisCacheConfiguration.defaultCacheConfig()</span><br><span class="line">                .entryTtl(Duration.ofSeconds(<span class="number">600</span>))</span><br><span class="line">                .serializeKeysWith(RedisSerializationContext.SerializationPair.fromSerializer(redisSerializer))</span><br><span class="line">                .serializeValuesWith(RedisSerializationContext.SerializationPair.fromSerializer(jackson2JsonRedisSerializer))</span><br><span class="line">                .disableCachingNullValues();</span><br><span class="line">        RedisCacheManager cacheManager = RedisCacheManager.builder(factory)</span><br><span class="line">                .cacheDefaults(config)</span><br><span class="line">                .build();</span><br><span class="line">        <span class="keyword">return</span> cacheManager;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="springbootç¼“å­˜æ³¨è§£"><a href="#springbootç¼“å­˜æ³¨è§£" class="headerlink" title="springbootç¼“å­˜æ³¨è§£"></a>springbootç¼“å­˜æ³¨è§£</h4><blockquote><p>åœ¨ç›¸å¯¹åº”æ¥å£ä¸­æ·»åŠ Redisç¼“å­˜ä½¿ç”¨æ³¨è§£å³å¯ä½¿ç”¨Redisç¼“å­˜</p><ol><li>@Cacheableï¼šä¸€èˆ¬ç”¨åœ¨æŸ¥è¯¢æ–¹æ³•ä¸Šï¼Œæ ¹æ®æ–¹æ³•å¯¹å…¶è¿”å›ç»“æœè¿›è¡Œç¼“å­˜ï¼Œä¸‹æ¬¡è¯·æ±‚æ—¶å¦‚æœç¼“å­˜å­˜åœ¨ï¼Œnameç›´æ¥è¯»å–ç¼“å­˜æ•°æ®è¿”å›</li><li>@CachePutï¼šä¸€èˆ¬ç”¨åœ¨æ–°å¢æ–¹æ³•ä¸Šï¼Œä½¿ç”¨è¯¥æ³¨è§£çš„æ–¹æ³•æ¯æ¬¡éƒ½ä¼šæ‰§è¡Œï¼Œå¹¶å°†ç»“æœå­˜å…¥æŒ‡å®šçš„ç¼“å­˜ä¸­</li><li>@CacheEvictï¼šä¸€èˆ¬ç”¨åœ¨æ›´æ–°æˆ–è€…åˆ é™¤æ–¹æ³•ä¸Šï¼Œä¼šæ¸…ç©ºæŒ‡å®šçš„ç¼“å­˜</li></ol></blockquote><h3 id="ä½¿ç”¨RedisæœåŠ¡"><a href="#ä½¿ç”¨RedisæœåŠ¡" class="headerlink" title="ä½¿ç”¨RedisæœåŠ¡"></a>ä½¿ç”¨RedisæœåŠ¡</h3><h4 id="å®‰è£…Rediså¹¶å¯åŠ¨"><a href="#å®‰è£…Rediså¹¶å¯åŠ¨" class="headerlink" title="å®‰è£…Rediså¹¶å¯åŠ¨"></a>å®‰è£…Rediså¹¶å¯åŠ¨</h4><blockquote><p>è¿™é‡Œæˆ‘å»è°·ç²’å•†åŸçœ‹äº†</p></blockquote><h4 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h4><blockquote><p>åœ¨éœ€è¦ä½¿ç”¨redisçš„æ¨¡å—çš„é…ç½®æ–‡ä»¶application.propertiesä¸­æ·»åŠ é…ç½®</p></blockquote><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#redisé…ç½®</span></span><br><span class="line"><span class="comment">#æ³¨æ„è¿™é‡Œçš„hostå’Œportè¦å’Œè™šæ‹Ÿæœºçš„å¯¹åº”</span></span><br><span class="line"><span class="meta">spring.redis.host</span>=<span class="string">192.168.128.129</span></span><br><span class="line"><span class="meta">spring.redis.port</span>=<span class="string">6379</span></span><br><span class="line"><span class="meta">spring.redis.database</span>=<span class="string">0</span></span><br><span class="line"><span class="meta">spring.redis.timeout</span>=<span class="string">1800000</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-active</span>=<span class="string">20</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-wait</span>=<span class="string">-1</span></span><br></pre></td></tr></table></figure><h4 id="é¦–é¡µç¼“å­˜"><a href="#é¦–é¡µç¼“å­˜" class="headerlink" title="é¦–é¡µç¼“å­˜"></a>é¦–é¡µç¼“å­˜</h4><blockquote><p>åœ¨ç›¸å…³çš„serviceæ–¹æ³•ä¸Šæ·»åŠ æ³¨é‡Šï¼ˆæ³¨æ„è¿™é‡Œä¸ºä»€ä¹ˆè¦åœ¨serviceä¸­åŠ ï¼Œå› ä¸ºæ³¨é‡Šè‡ªåŠ¨æ·»åŠ åˆ°redisçš„è¯ï¼Œæ˜¯ä»è¿”å›å€¼è·å–çš„ï¼Œcontrollerä¸­å®šä¹‰äº†ç»Ÿä¸€è¿”å›æ ¼å¼ï¼Œä¸é€‚ç”¨ï¼‰</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CrmBannerServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">CrmBannerMapper</span>, <span class="title">CrmBanner</span>&gt; <span class="keyword">implements</span> <span class="title">CrmBannerService</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢æ‰€æœ‰banner</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Cacheable(key = &quot;&#x27;selectIndexList&#x27;&quot;, value = &quot;banner&quot;)</span><span class="comment">// Redisç¼“å­˜,æ³¨æ„è¿™é‡Œkeyä¸­è¦åŠ å•å¼•å·</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;CrmBanner&gt; <span class="title">selectAllBanner</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="redisç›¸å…³å‘½ä»¤"><a href="#redisç›¸å…³å‘½ä»¤" class="headerlink" title="redisç›¸å…³å‘½ä»¤"></a>redisç›¸å…³å‘½ä»¤</h4><blockquote><ol><li>ä½¿ç”¨rootæƒé™ï¼šsu root</li><li>æŸ¥çœ‹VMwarehostï¼šifconfig</li><li>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼švi /mydata/redis/conf/redis.conf</li><li>å¯åŠ¨redisï¼šdocker start redis</li><li>è¿›å…¥redisï¼šdocker exec -it redis redis-cli</li><li>æŸ¥çœ‹æ‰€æœ‰keyvalueï¼škeys *</li><li>è®¾ç½®æŸ¥çœ‹ï¼šset/get xxx</li></ol></blockquote><h2 id="JWT-Json-Web-Token"><a href="#JWT-Json-Web-Token" class="headerlink" title="JWT(Json Web Token)"></a>JWT(Json Web Token)</h2><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210929144700746.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210929144700746.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210929144700746"></p><h4 id="ä¾èµ–-1"><a href="#ä¾èµ–-1" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h4><blockquote><p>å…ˆå¼•å…¥ä¾èµ–ï¼Œcommon_utilsæ¨¡å—å³å¯ </p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- JWT--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="utilsç±»"><a href="#utilsç±»" class="headerlink" title="utilsç±»"></a>utilsç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.jsonwebtoken.Claims;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.Jws;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.Jwts;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.SignatureAlgorithm;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.StringUtils;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JwtUtils</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> EXPIRE = <span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String APP_SECRET = <span class="string">&quot;ukc8BDbRigUDaY6pZFfWus2jZWLPHO&quot;</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getJwtToken</span><span class="params">(String id, String nickname)</span> </span>&#123;</span><br><span class="line">        String JwtToken = Jwts.builder()</span><br><span class="line">                .setHeaderParam(<span class="string">&quot;typ&quot;</span>, <span class="string">&quot;JWT&quot;</span>)</span><br><span class="line">                .setHeaderParam(<span class="string">&quot;alg&quot;</span>, <span class="string">&quot;HS256&quot;</span>)</span><br><span class="line">                .setSubject(<span class="string">&quot;guli-user&quot;</span>)</span><br><span class="line">                .setIssuedAt(<span class="keyword">new</span> Date())</span><br><span class="line">                .setExpiration(<span class="keyword">new</span> Date(System.currentTimeMillis() + EXPIRE))</span><br><span class="line">                .claim(<span class="string">&quot;id&quot;</span>, id)</span><br><span class="line">                .claim(<span class="string">&quot;nickname&quot;</span>, nickname)</span><br><span class="line">                .signWith(SignatureAlgorithm.HS256, APP_SECRET)</span><br><span class="line">                .compact();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> JwtToken;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­tokenæ˜¯å¦å­˜åœ¨ä¸æœ‰æ•ˆ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> jwtToken</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">checkToken</span><span class="params">(String jwtToken)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(jwtToken)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Jwts.parser().setSigningKey(APP_SECRET).parseClaimsJws(jwtToken);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­tokenæ˜¯å¦å­˜åœ¨ä¸æœ‰æ•ˆ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">checkToken</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String jwtToken = request.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.isEmpty(jwtToken)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            Jwts.parser().setSigningKey(APP_SECRET).parseClaimsJws(jwtToken);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®tokenè·å–ä¼šå‘˜id</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getMemberIdByJwtToken</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        String jwtToken = request.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(jwtToken)) <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        Jws&lt;Claims&gt; claimsJws = Jwts.parser().setSigningKey(APP_SECRET).parseClaimsJws(jwtToken);</span><br><span class="line">        Claims claims = claimsJws.getBody();</span><br><span class="line">        <span class="keyword">return</span> (String) claims.get(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="çŸ­ä¿¡å¾®æœåŠ¡"><a href="#çŸ­ä¿¡å¾®æœåŠ¡" class="headerlink" title="çŸ­ä¿¡å¾®æœåŠ¡"></a>çŸ­ä¿¡å¾®æœåŠ¡</h2><h4 id="é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡"><a href="#é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡" class="headerlink" title="é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡"></a>é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡</h4><blockquote><p>å¼€å¯ä¹‹åï¼Œç”³è¯·ç­¾åç®¡ç†å’Œæ¨¡æ¿ç®¡ç†</p><p>ï¼Ÿï¼Ÿï¼Ÿå¿…é¡»è¦å¤‡æ¡ˆç½‘ç«™å¥½å®¶ä¼™muaçš„</p><p>TODOï¼Œæ²¡æœ‰åŸŸåä¸‹æ¬¡å†è¯´å§</p></blockquote><h4 id="åˆ›å»ºå­æ¨¡å—-1"><a href="#åˆ›å»ºå­æ¨¡å—-1" class="headerlink" title="åˆ›å»ºå­æ¨¡å—"></a>åˆ›å»ºå­æ¨¡å—</h4><blockquote><p>service_msmæ¨¡å—</p></blockquote><h4 id="é…ç½®æ–‡ä»¶application-properties"><a href="#é…ç½®æ–‡ä»¶application-properties" class="headerlink" title="é…ç½®æ–‡ä»¶application.properties"></a>é…ç½®æ–‡ä»¶application.properties</h4><blockquote><p>åŸºæœ¬ä¸Šéƒ½æ˜¯ä¸€æ ·çš„å†™æ³•</p></blockquote><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœåŠ¡ç«¯å£</span></span><br><span class="line"><span class="meta">server.port</span>=<span class="string">8005</span></span><br><span class="line"><span class="comment"># æœåŠ¡å</span></span><br><span class="line"><span class="meta">spring.application.name</span>=<span class="string">service-msm</span></span><br><span class="line"><span class="comment"># mysqlæ•°æ®åº“è¿æ¥</span></span><br><span class="line"><span class="meta">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/guli?serverTimezone=GMT%2B8</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">123456789</span></span><br><span class="line"><span class="comment">#redisé…ç½®</span></span><br><span class="line"><span class="meta">spring.redis.host</span>=<span class="string">192.168.128.129</span></span><br><span class="line"><span class="meta">spring.redis.port</span>=<span class="string">6379</span></span><br><span class="line"><span class="meta">spring.redis.database</span>=<span class="string">0</span></span><br><span class="line"><span class="meta">spring.redis.timeout</span>=<span class="string">1800000</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-active</span>=<span class="string">20</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-wait</span>=<span class="string">-1</span></span><br><span class="line"><span class="comment">#æœ€å¤§é˜»å¡ç­‰å¾…æ—¶é—´(è´Ÿæ•°è¡¨ç¤ºæ²¡é™åˆ¶)</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-idle</span>=<span class="string">5</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.min-idle</span>=<span class="string">0</span></span><br><span class="line"><span class="comment">#æœ€å°ç©ºé—²</span></span><br><span class="line"><span class="comment">#è¿”å›jsonçš„å…¨å±€æ—¶é—´æ ¼å¼</span></span><br><span class="line"><span class="meta">spring.jackson.date-format</span>=<span class="string">yyyy-MM-dd HH:mm:ss</span></span><br><span class="line"><span class="meta">spring.jackson.time-zone</span>=<span class="string">GMT+8</span></span><br><span class="line"><span class="comment">#mybatisæ—¥å¿—</span></span><br><span class="line"><span class="meta">mybatis-plus.configuration.log-impl</span>=<span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line"><span class="comment"># nacosæœåŠ¡åœ°å€</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.discovery.server-addr</span>=<span class="string">127.0.0.1:8848</span></span><br><span class="line"><span class="comment">#é…ç½®mapper xmlæ–‡ä»¶çš„è·¯å¾„</span></span><br><span class="line"><span class="meta">mybatis-plus.mapper-locations</span>=<span class="string">classpath:com/atguigu/educms/mapper/xml/*.xml</span></span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨ç±»"><a href="#å¯åŠ¨ç±»" class="headerlink" title="å¯åŠ¨ç±»"></a>å¯åŠ¨ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication(exclude = DataSourceAutoConfiguration.class)</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &#123;&quot;com.atguigu&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MsmApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(MsmApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="controller"><a href="#controller" class="headerlink" title="controller"></a>controller</h4><blockquote><p>TODO</p></blockquote><h4 id="service"><a href="#service" class="headerlink" title="service"></a>service</h4><blockquote><p>TODO</p></blockquote><h2 id="ç™»å½•æ³¨å†Œï¼ˆåç«¯ï¼‰"><a href="#ç™»å½•æ³¨å†Œï¼ˆåç«¯ï¼‰" class="headerlink" title="ç™»å½•æ³¨å†Œï¼ˆåç«¯ï¼‰"></a>ç™»å½•æ³¨å†Œï¼ˆåç«¯ï¼‰</h2><h3 id="åŸºç¡€å·¥ä½œ"><a href="#åŸºç¡€å·¥ä½œ" class="headerlink" title="åŸºç¡€å·¥ä½œ"></a>åŸºç¡€å·¥ä½œ</h3><h4 id="åˆ›å»ºæ¨¡å—"><a href="#åˆ›å»ºæ¨¡å—" class="headerlink" title="åˆ›å»ºæ¨¡å—"></a>åˆ›å»ºæ¨¡å—</h4><blockquote><p>service_ucenter</p></blockquote><h4 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h4><blockquote><p>ucenter_member</p></blockquote><h4 id="ä»£ç ç”Ÿæˆå™¨-1"><a href="#ä»£ç ç”Ÿæˆå™¨-1" class="headerlink" title="ä»£ç ç”Ÿæˆå™¨"></a>ä»£ç ç”Ÿæˆå™¨</h4><blockquote><p>è€æ ·å­</p></blockquote><h4 id="é…ç½®æ–‡ä»¶-1"><a href="#é…ç½®æ–‡ä»¶-1" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h4><blockquote><p>è€æ ·å­</p></blockquote><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœåŠ¡ç«¯å£</span></span><br><span class="line"><span class="meta">server.port</span>=<span class="string">8006</span></span><br><span class="line"><span class="comment"># æœåŠ¡å</span></span><br><span class="line"><span class="meta">spring.application.name</span>=<span class="string">service-ucenter</span></span><br><span class="line"><span class="comment"># mysqlæ•°æ®åº“è¿æ¥</span></span><br><span class="line"><span class="meta">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/guli?serverTimezone=GMT%2B8</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">123456789</span></span><br><span class="line"><span class="comment">#redisé…ç½®</span></span><br><span class="line"><span class="meta">spring.redis.host</span>=<span class="string">192.168.128.129</span></span><br><span class="line"><span class="meta">spring.redis.port</span>=<span class="string">6379</span></span><br><span class="line"><span class="meta">spring.redis.database</span>=<span class="string">0</span></span><br><span class="line"><span class="meta">spring.redis.timeout</span>=<span class="string">1800000</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-active</span>=<span class="string">20</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-wait</span>=<span class="string">-1</span></span><br><span class="line"><span class="comment">#æœ€å¤§é˜»å¡ç­‰å¾…æ—¶é—´(è´Ÿæ•°è¡¨ç¤ºæ²¡é™åˆ¶)</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-idle</span>=<span class="string">5</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.min-idle</span>=<span class="string">0</span></span><br><span class="line"><span class="comment">#æœ€å°ç©ºé—²</span></span><br><span class="line"><span class="comment">#è¿”å›jsonçš„å…¨å±€æ—¶é—´æ ¼å¼</span></span><br><span class="line"><span class="meta">spring.jackson.date-format</span>=<span class="string">yyyy-MM-dd HH:mm:ss</span></span><br><span class="line"><span class="meta">spring.jackson.time-zone</span>=<span class="string">GMT+8</span></span><br><span class="line"><span class="comment">#mybatisæ—¥å¿—</span></span><br><span class="line"><span class="meta">mybatis-plus.configuration.log-impl</span>=<span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line"><span class="comment"># nacosæœåŠ¡åœ°å€</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.discovery.server-addr</span>=<span class="string">127.0.0.1:8848</span></span><br><span class="line"><span class="comment">#é…ç½®mapper xmlæ–‡ä»¶çš„è·¯å¾„</span></span><br><span class="line"><span class="meta">mybatis-plus.mapper-locations</span>=<span class="string">classpath:com/atguigu/educenter/mapper/xml/*.xml</span></span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨ç±»-1"><a href="#å¯åŠ¨ç±»-1" class="headerlink" title="å¯åŠ¨ç±»"></a>å¯åŠ¨ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;com.atguigu&quot;&#125;)</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.atguigu.educenter.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UcenterApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(UcenterApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¿˜æœ‰nginxé…ç½®ï¼Œè·¨åŸŸé…ç½®ç­‰</p></blockquote><h3 id="ç™»å½•"><a href="#ç™»å½•" class="headerlink" title="ç™»å½•"></a>ç™»å½•</h3><h4 id="MD5Utils"><a href="#MD5Utils" class="headerlink" title="MD5Utils"></a>MD5Utils</h4><blockquote><p>åŠ å¯†å·¥å…·</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.educenter.utils;</span><br><span class="line"><span class="keyword">import</span> java.security.MessageDigest;</span><br><span class="line"><span class="keyword">import</span> java.security.NoSuchAlgorithmException;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">MD5</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">encrypt</span><span class="params">(String strSrc)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">char</span> hexChars[] = &#123; <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;8&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span> &#125;;</span><br><span class="line">            <span class="keyword">byte</span>[] bytes = strSrc.getBytes();</span><br><span class="line">            MessageDigest md = MessageDigest.getInstance(<span class="string">&quot;MD5&quot;</span>);</span><br><span class="line">            md.update(bytes);</span><br><span class="line">            bytes = md.digest();</span><br><span class="line">            <span class="keyword">int</span> j = bytes.length;</span><br><span class="line">            <span class="keyword">char</span>[] chars = <span class="keyword">new</span> <span class="keyword">char</span>[j * <span class="number">2</span>];</span><br><span class="line">            <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; bytes.length; i++) &#123;</span><br><span class="line">                <span class="keyword">byte</span> b = bytes[i];</span><br><span class="line">                chars[k++] = hexChars[b &gt;&gt;&gt; <span class="number">4</span> &amp; <span class="number">0xf</span>];</span><br><span class="line">                chars[k++] = hexChars[b &amp; <span class="number">0xf</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> String(chars);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;MD5åŠ å¯†å‡ºé”™ï¼ï¼+&quot;</span> + e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(MD5.encrypt(<span class="string">&quot;111111&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="controller-1"><a href="#controller-1" class="headerlink" title="controller"></a>controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/educenter/member&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UcenterMemberController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UcenterMemberService memberService;</span><br><span class="line">    <span class="comment">// ç™»å½•</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;login&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">loginUser</span><span class="params">(<span class="meta">@RequestBody</span> UcenterMember member)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨serviceæ–¹æ³•,å¹¶ä¸”è¿”å›token</span></span><br><span class="line">        String token = memberService.login(member);</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">&quot;token&quot;</span>, token);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="service-1"><a href="#service-1" class="headerlink" title="service"></a>service</h4><blockquote><p>æ³¨æ„ä½¿ç”¨MD5å·¥å…·åŠ å¯†å†æ¯”è¾ƒå¯†ç </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UcenterMemberServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">UcenterMemberMapper</span>, <span class="title">UcenterMember</span>&gt; <span class="keyword">implements</span> <span class="title">UcenterMemberService</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ç™»å½•</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">(UcenterMember member)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è·å¾—æ‰‹æœºå·å’Œå¯†ç </span></span><br><span class="line">        String mobile = member.getMobile();</span><br><span class="line">        String password = member.getPassword();</span><br><span class="line">        <span class="comment">// éç©ºåˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(mobile) || StringUtils.isEmpty(password)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;æ‰‹æœºæˆ–å¯†ç ä¸ºç©º&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æŸ¥è¯¢æ•°æ®åº“</span></span><br><span class="line">        QueryWrapper&lt;UcenterMember&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">        wrapper.eq(<span class="string">&quot;mobile&quot;</span>, mobile);</span><br><span class="line">        UcenterMember mmember = baseMapper.selectOne(wrapper);</span><br><span class="line">        <span class="keyword">if</span> (mmember == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;è¯¥è´¦å·ä¸å­˜åœ¨&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­å¯†ç æ˜¯å¦æ­£ç¡®</span></span><br><span class="line">        <span class="comment">// æ•°æ®åº“å¯†ç ä¸ºåŠ å¯†åçš„å¯†ç ï¼Œæ‰€ä»¥éœ€è¦è½¬æ¢</span></span><br><span class="line">        <span class="comment">// ä½¿ç”¨åŠ å¯†æ–¹å¼MD5ï¼ˆåªèƒ½åŠ å¯†ï¼‰</span></span><br><span class="line">        <span class="keyword">if</span> (!mmember.getPassword().equals(MD5.encrypt(password))) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;å¯†ç é”™è¯¯&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­æ˜¯å¦ç¦ç”¨</span></span><br><span class="line">        <span class="keyword">if</span> (mmember.getIsDisabled()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;è´¦å·ç¦ç”¨&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ç”Ÿæˆtokenå­—ç¬¦ä¸²</span></span><br><span class="line">        String token = JwtUtils.getJwtToken(mmember.getId(), mmember.getNickname());</span><br><span class="line">        <span class="keyword">return</span> token;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="swaggeræµ‹è¯•"><a href="#swaggeræµ‹è¯•" class="headerlink" title="swaggeræµ‹è¯•"></a>swaggeræµ‹è¯•</h4><blockquote><p>åˆå§‹å€¼éšä¾¿å¤åˆ¶ä¸€ä¸ªmobileï¼Œå¯†ç ç»Ÿä¸€ä¸º111111</p></blockquote><h3 id="æ³¨å†Œ"><a href="#æ³¨å†Œ" class="headerlink" title="æ³¨å†Œ"></a>æ³¨å†Œ</h3><h4 id="voå®ä½“ç±»"><a href="#voå®ä½“ç±»" class="headerlink" title="voå®ä½“ç±»"></a>voå®ä½“ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegisterVo</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;æ˜µç§°&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String nickname;</span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;æ‰‹æœºå·&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String mobile;</span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;å¯†ç &quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="comment">//@ApiModelProperty(value = &quot;éªŒè¯ç &quot;)</span></span><br><span class="line">    <span class="comment">//private String code;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="controller-2"><a href="#controller-2" class="headerlink" title="controller"></a>controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨å†Œ</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;register&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">registerUser</span><span class="params">(<span class="meta">@RequestBody</span> RegisterVo registerVo)</span> </span>&#123;</span><br><span class="line">    memberService.register(registerVo);</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="service-2"><a href="#service-2" class="headerlink" title="service"></a>service</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨å†Œ</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">register</span><span class="params">(RegisterVo registerVo)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// TODO éªŒè¯ç åˆ¤æ–­ï¼ˆæš‚æ—¶ä¸å†™ï¼‰</span></span><br><span class="line">    <span class="comment">//è·å–æ³¨å†Œçš„æ•°æ®</span></span><br><span class="line">    String mobile = registerVo.getMobile(); <span class="comment">//æ‰‹æœºå·</span></span><br><span class="line">    String nickname = registerVo.getNickname(); <span class="comment">//æ˜µç§°</span></span><br><span class="line">    String password = registerVo.getPassword(); <span class="comment">//å¯†ç </span></span><br><span class="line">    <span class="comment">//éç©ºåˆ¤æ–­</span></span><br><span class="line">    <span class="keyword">if</span> (StringUtils.isEmpty(mobile) || StringUtils.isEmpty(password) || StringUtils.isEmpty(nickname)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;è¾“å…¥ä¸ºç©º&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­æ‰‹æœºå·æ˜¯å¦é‡å¤ï¼Œè¡¨é‡Œé¢å­˜åœ¨ç›¸åŒæ‰‹æœºå·ä¸è¿›è¡Œæ·»åŠ </span></span><br><span class="line">    QueryWrapper&lt;UcenterMember&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    wrapper.eq(<span class="string">&quot;mobile&quot;</span>, mobile);</span><br><span class="line">    Integer count = baseMapper.selectCount(wrapper);</span><br><span class="line">    <span class="keyword">if</span> (count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;æ‰‹æœºå·é‡å¤&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ•°æ®æ·»åŠ æ•°æ®åº“ä¸­</span></span><br><span class="line">    UcenterMember member = <span class="keyword">new</span> UcenterMember();</span><br><span class="line">    member.setMobile(mobile);</span><br><span class="line">    member.setNickname(nickname);</span><br><span class="line">    member.setPassword(MD5.encrypt(password));<span class="comment">//å¯†ç éœ€è¦åŠ å¯†çš„</span></span><br><span class="line">    member.setIsDisabled(<span class="keyword">false</span>);<span class="comment">//ç”¨æˆ·ä¸ç¦ç”¨</span></span><br><span class="line">  member.setAvatar(<span class="string">&quot;http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoj0hHXhgJNOTSOFsS4uZs8x1ConecaVOB8eIl115xmJZcT4oCicvia7wMEufibKtTLqiaJeanU2Lpg3w/132&quot;</span>);</span><br><span class="line">    baseMapper.insert(member);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å›æ˜¾æ•°æ®"><a href="#å›æ˜¾æ•°æ®" class="headerlink" title="å›æ˜¾æ•°æ®"></a>å›æ˜¾æ•°æ®</h3><blockquote><p>æ ¹æ®tokenè·å¾—ç”¨æˆ·ä¿¡æ¯</p></blockquote><h4 id="controller-3"><a href="#controller-3" class="headerlink" title="controller"></a>controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®tokenè·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;getMemberInfo&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">getMemberInfo</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è°ƒç”¨jwtå·¥å…·ç±»æ–¹æ³•è·å–requestå¯¹è±¡çš„å¤´ä¿¡æ¯ï¼Œè·å¾—id</span></span><br><span class="line">    String memberId = JwtUtils.getMemberIdByJwtToken(request);</span><br><span class="line">    <span class="comment">// è·å¾—ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    UcenterMember member = memberService.getById(memberId);</span><br><span class="line">    <span class="comment">// è¿™é‡Œæœ€å¥½é¢å¤–ä½¿ç”¨voå®ä½“ç±»</span></span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">&quot;member&quot;</span>, member);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç™»å½•æ³¨å†Œï¼ˆå‰ç«¯ï¼‰"><a href="#ç™»å½•æ³¨å†Œï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="ç™»å½•æ³¨å†Œï¼ˆå‰ç«¯ï¼‰"></a>ç™»å½•æ³¨å†Œï¼ˆå‰ç«¯ï¼‰</h2><h3 id="æ³¨å†Œ-1"><a href="#æ³¨å†Œ-1" class="headerlink" title="æ³¨å†Œ"></a>æ³¨å†Œ</h3><h4 id="layout"><a href="#layout" class="headerlink" title="layout"></a>layout</h4><blockquote><p>åˆ›å»ºsign.vueç„¶åcv</p><p>è¿™ä¸ªæ˜¯ä¸“é—¨çš„æ³¨å†Œç™»å½•é¡µé¢çš„å¸ƒå±€</p></blockquote><h4 id="api"><a href="#api" class="headerlink" title="api"></a>api</h4><blockquote><p>apiä¸­åˆ›å»ºå¯¹åº”jså³å¯</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// æ³¨å†Œ</span></span><br><span class="line">  <span class="function"><span class="title">register</span>(<span class="params">registerVo</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/educenter/member/register&#x27;</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: registerVo</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="vueé¡µé¢"><a href="#vueé¡µé¢" class="headerlink" title="vueé¡µé¢"></a>vueé¡µé¢</h4><blockquote><p>å…ˆå»layout -&gt; default.vueä¸­çš„åœ°å€è¯¥ä¸ºç™»å½•æ³¨å†Œé¡µé¢çš„åœ°å€</p><p>ç„¶ååœ¨pagesé‡Œåˆ›å»ºvueè§†å›¾</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;main&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;title&quot;&gt;</span><br><span class="line">      &lt;a href=&quot;/login&quot;&gt;ç™»å½•&lt;/a&gt;</span><br><span class="line">      &lt;span&gt;Â·&lt;/span&gt;</span><br><span class="line">      &lt;a class=&quot;active&quot; href=&quot;/register&quot;&gt;æ³¨å†Œ&lt;/a&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;sign-up-container&quot;&gt;</span><br><span class="line">      &lt;el-form ref=&quot;userForm&quot; :model=&quot;params&quot;&gt;</span><br><span class="line">        &lt;el-form-item</span><br><span class="line">          class=&quot;input-prepend restyle&quot;</span><br><span class="line">          prop=&quot;nickname&quot;</span><br><span class="line">          :rules=&quot;[</span><br><span class="line">            &#123; required: true, message: &#x27;è¯·è¾“å…¥ä½ çš„æ˜µç§°&#x27;, trigger: &#x27;blur&#x27; &#125;,</span><br><span class="line">          ]&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">            &lt;el-input</span><br><span class="line">              type=&quot;text&quot;</span><br><span class="line">              placeholder=&quot;ä½ çš„æ˜µç§°&quot;</span><br><span class="line">              v-model=&quot;params.nickname&quot;</span><br><span class="line">            /&gt;</span><br><span class="line">            &lt;i class=&quot;iconfont icon-user&quot; /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item</span><br><span class="line">          class=&quot;input-prepend restyle no-radius&quot;</span><br><span class="line">          prop=&quot;mobile&quot;</span><br><span class="line">          :rules=&quot;[</span><br><span class="line">            &#123; required: true, message: &#x27;è¯·è¾“å…¥æ‰‹æœºå·ç &#x27;, trigger: &#x27;blur&#x27; &#125;,</span><br><span class="line">            &#123; validator: checkPhone, trigger: &#x27;blur&#x27; &#125;,</span><br><span class="line">          ]&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">            &lt;el-input</span><br><span class="line">              type=&quot;text&quot;</span><br><span class="line">              placeholder=&quot;æ‰‹æœºå·&quot;</span><br><span class="line">              v-model=&quot;params.mobile&quot;</span><br><span class="line">            /&gt;</span><br><span class="line">            &lt;i class=&quot;iconfont icon-phone&quot; /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-form-item</span><br><span class="line">          class=&quot;input-prepend restyle no-radius&quot;</span><br><span class="line">          prop=&quot;code&quot;</span><br><span class="line">          :rules=&quot;[</span><br><span class="line">            &#123; required: true, message: &#x27;è¯·è¾“å…¥éªŒè¯ç &#x27;, trigger: &#x27;blur&#x27; &#125;,</span><br><span class="line">          ]&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;div</span><br><span class="line">            style=&quot;width: 100%; display: block; float: left; position: relative&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            &lt;el-input type=&quot;text&quot; placeholder=&quot;éªŒè¯ç &quot; v-model=&quot;params.code&quot; /&gt;</span><br><span class="line">            &lt;i class=&quot;iconfont icon-phone&quot; /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div</span><br><span class="line">            class=&quot;btn&quot;</span><br><span class="line">            style=&quot;position: absolute; right: 0; top: 6px; width: 40%&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            &lt;a</span><br><span class="line">              href=&quot;javascript:&quot;</span><br><span class="line">              type=&quot;button&quot;</span><br><span class="line">              @click=&quot;getCodeFun()&quot;</span><br><span class="line">              :value=&quot;codeTest&quot;</span><br><span class="line">              style=&quot;border: none; background-color: none&quot;</span><br><span class="line">              &gt;&#123;&#123; codeTest &#125;&#125;&lt;/a</span><br><span class="line">            &gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-form-item</span><br><span class="line">          class=&quot;input-prepend&quot;</span><br><span class="line">          prop=&quot;password&quot;</span><br><span class="line">          :rules=&quot;[&#123; required: true, message: &#x27;è¯·è¾“å…¥å¯†ç &#x27;, trigger: &#x27;blur&#x27; &#125;]&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">            &lt;el-input</span><br><span class="line">              type=&quot;password&quot;</span><br><span class="line">              placeholder=&quot;è®¾ç½®å¯†ç &quot;</span><br><span class="line">              v-model=&quot;params.password&quot;</span><br><span class="line">            /&gt;</span><br><span class="line">            &lt;i class=&quot;iconfont icon-password&quot; /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div class=&quot;btn&quot;&gt;</span><br><span class="line">          &lt;input</span><br><span class="line">            type=&quot;button&quot;</span><br><span class="line">            class=&quot;sign-up-button&quot;</span><br><span class="line">            value=&quot;æ³¨å†Œ&quot;</span><br><span class="line">            @click=&quot;submitRegister()&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;p class=&quot;sign-up-msg&quot;&gt;</span><br><span class="line">          ç‚¹å‡» â€œæ³¨å†Œâ€ å³è¡¨ç¤ºæ‚¨åŒæ„å¹¶æ„¿æ„éµå®ˆç®€ä¹¦</span><br><span class="line">          &lt;br /&gt;</span><br><span class="line">          &lt;a target=&quot;_blank&quot; href=&quot;http://www.jianshu.com/p/c44d171298ce&quot;</span><br><span class="line">            &gt;ç”¨æˆ·åè®®&lt;/a</span><br><span class="line">          &gt;</span><br><span class="line">          å’Œ</span><br><span class="line">          &lt;a target=&quot;_blank&quot; href=&quot;http://www.jianshu.com/p/2ov8x3&quot;&gt;éšç§æ”¿ç­–&lt;/a&gt;</span><br><span class="line">          ã€‚</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">      &lt;/el-form&gt;</span><br><span class="line">      &lt;!-- æ›´å¤šæ³¨å†Œæ–¹å¼ --&gt;</span><br><span class="line">      &lt;div class=&quot;more-sign&quot;&gt;</span><br><span class="line">        &lt;h6&gt;ç¤¾äº¤å¸å·ç›´æ¥æ³¨å†Œ&lt;/h6&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;a</span><br><span class="line">              id=&quot;weixin&quot;</span><br><span class="line">              class=&quot;weixin&quot;</span><br><span class="line">              target=&quot;_blank&quot;</span><br><span class="line">              href=&quot;http://huaan.free.idcfengye.com/api/ucenter/wx/login&quot;</span><br><span class="line">              &gt;&lt;i class=&quot;iconfont icon-weixin&quot;</span><br><span class="line">            /&gt;&lt;/a&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;a id=&quot;qq&quot; class=&quot;qq&quot; target=&quot;_blank&quot; href=&quot;#&quot;</span><br><span class="line">              &gt;&lt;i class=&quot;iconfont icon-qq&quot;</span><br><span class="line">            /&gt;&lt;/a&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import &#x27;~/assets/css/sign.css&#x27;</span><br><span class="line">  import &#x27;~/assets/css/iconfont.css&#x27;</span><br><span class="line">  export default &#123;</span><br><span class="line">    layout: &#x27;sign&#x27;,</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        params: &#123;</span><br><span class="line">          // å°è£…æ³¨å†Œè¾“å…¥æ•°æ®</span><br><span class="line">          mobile: &#x27;&#x27;,</span><br><span class="line">          code: &#x27;&#x27;, // éªŒè¯ç </span><br><span class="line">          nickname: &#x27;&#x27;,</span><br><span class="line">          password: &#x27;&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        sending: true, // æ˜¯å¦å‘é€éªŒè¯ç </span><br><span class="line">        second: 60, // å€’è®¡æ—¶é—´</span><br><span class="line">        codeTest: &#x27;è·å–éªŒè¯ç &#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="vueæ–¹æ³•"><a href="#vueæ–¹æ³•" class="headerlink" title="vueæ–¹æ³•"></a>vueæ–¹æ³•</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨å†Œæäº¤</span></span><br><span class="line"><span class="function"><span class="title">submitRegister</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  registerApi.register(<span class="built_in">this</span>.params).then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æç¤ºæ³¨å†ŒæˆåŠŸ</span></span><br><span class="line">    <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;æ³¨å†ŒæˆåŠŸ&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// è·³è½¬ç™»å½•é¡µé¢</span></span><br><span class="line">    <span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span> &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// å‘é€éªŒè¯ç </span></span><br><span class="line"><span class="function"><span class="title">getCodeFun</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> ((<span class="built_in">this</span>.sending = <span class="literal">false</span>)) &#123;</span><br><span class="line">    <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;è¯·å‹¿é¢‘ç¹ç‚¹å‡»&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ç”±äºé˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡ä¸èƒ½ç”¨ï¼Œæ‰€ä»¥è¿™é‡Œå†™å‡éªŒè¯</span></span><br><span class="line">  <span class="built_in">this</span>.sending = <span class="literal">false</span></span><br><span class="line">  <span class="comment">// è°ƒç”¨å€’è®¡æ—¶çš„æ–¹æ³•</span></span><br><span class="line">  <span class="built_in">this</span>.timeDown()</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// éªŒè¯æ‰‹æœºå·æ ¼å¼</span></span><br><span class="line"><span class="function"><span class="title">checkPhone</span>(<span class="params">rule, value, callback</span>)</span> &#123;</span><br><span class="line">  <span class="comment">// debugger</span></span><br><span class="line">  <span class="keyword">if</span> (!<span class="regexp">/^1[34578]\d&#123;9&#125;$/</span>.test(value)) &#123;</span><br><span class="line">    <span class="keyword">return</span> callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;æ‰‹æœºå·ç æ ¼å¼ä¸æ­£ç¡®&#x27;</span>))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> callback()</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// å€’è®¡æ—¶</span></span><br><span class="line"><span class="function"><span class="title">timeDown</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    --<span class="built_in">this</span>.second</span><br><span class="line">    <span class="built_in">this</span>.codeTest = <span class="built_in">this</span>.second</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.second &lt; <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="built_in">clearInterval</span>(result)</span><br><span class="line">      <span class="built_in">this</span>.sending = <span class="literal">true</span></span><br><span class="line">      <span class="built_in">this</span>.second = <span class="number">60</span></span><br><span class="line">      <span class="built_in">this</span>.codeTest = <span class="string">&#x27;è·å–éªŒè¯ç &#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>TODOï¼šè¿™é‡Œæœ‰å¾ˆå¤šåœ°æ–¹éœ€è¦å®Œå–„ï¼šæ¯”å¦‚ç‚¹å‡»éªŒè¯ç ä¹‹åå†æ¬¡ç‚¹å‡»æ•°å­—éœ€è¦å¼¹çª—è­¦å‘Šï¼Œä½†æ˜¯ç°åœ¨ä¸ä¼šè€Œä¸”è¿˜ä¼šåŠ é€Ÿè®¡æ—¶å™¨</p></blockquote><h3 id="ç™»å½•-1"><a href="#ç™»å½•-1" class="headerlink" title="ç™»å½•"></a>ç™»å½•</h3><h4 id="cookieæ’ä»¶"><a href="#cookieæ’ä»¶" class="headerlink" title="cookieæ’ä»¶"></a>cookieæ’ä»¶</h4><blockquote><p>è¿™é‡Œéœ€è¦ç”¨åˆ°cookieï¼Œéœ€è¦ä¸‹è½½</p><p>npm install js-cookie</p></blockquote><h4 id="api-1"><a href="#api-1" class="headerlink" title="api"></a>api</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ç™»å½•</span></span><br><span class="line">  <span class="function"><span class="title">login</span>(<span class="params">member</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/educenter/member/login&#x27;</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: member</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// æ ¹æ®tokenè·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">  <span class="function"><span class="title">getLoginMemberInfo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/educenter/member/getMemberInfo&#x27;</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="vueè§†å›¾"><a href="#vueè§†å›¾" class="headerlink" title="vueè§†å›¾"></a>vueè§†å›¾</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;main&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;title&quot;&gt;</span><br><span class="line">      &lt;a class=&quot;active&quot; href=&quot;/login&quot;&gt;ç™»å½•&lt;/a&gt;</span><br><span class="line">      &lt;span&gt;Â·&lt;/span&gt;</span><br><span class="line">      &lt;a href=&quot;/register&quot;&gt;æ³¨å†Œ&lt;/a&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;sign-up-container&quot;&gt;</span><br><span class="line">      &lt;el-form ref=&quot;userForm&quot; :model=&quot;user&quot;&gt;</span><br><span class="line">        &lt;el-form-item</span><br><span class="line">          class=&quot;input-prepend restyle&quot;</span><br><span class="line">          prop=&quot;mobile&quot;</span><br><span class="line">          :rules=&quot;[</span><br><span class="line">            &#123; required: true, message: &#x27;è¯·è¾“å…¥æ‰‹æœºå·ç &#x27;, trigger: &#x27;blur&#x27; &#125;,</span><br><span class="line">            &#123; validator: checkPhone, trigger: &#x27;blur&#x27; &#125;,</span><br><span class="line">          ]&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">            &lt;el-input type=&quot;text&quot; placeholder=&quot;æ‰‹æœºå·&quot; v-model=&quot;user.mobile&quot; /&gt;</span><br><span class="line">            &lt;i class=&quot;iconfont icon-phone&quot; /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-form-item</span><br><span class="line">          class=&quot;input-prepend&quot;</span><br><span class="line">          prop=&quot;password&quot;</span><br><span class="line">          :rules=&quot;[&#123; required: true, message: &#x27;è¯·è¾“å…¥å¯†ç &#x27;, trigger: &#x27;blur&#x27; &#125;]&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">            &lt;el-input</span><br><span class="line">              type=&quot;password&quot;</span><br><span class="line">              placeholder=&quot;å¯†ç &quot;</span><br><span class="line">              v-model=&quot;user.password&quot;</span><br><span class="line">            /&gt;</span><br><span class="line">            &lt;i class=&quot;iconfont icon-password&quot; /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div class=&quot;btn&quot;&gt;</span><br><span class="line">          &lt;input</span><br><span class="line">            type=&quot;button&quot;</span><br><span class="line">            class=&quot;sign-in-button&quot;</span><br><span class="line">            value=&quot;ç™»å½•&quot;</span><br><span class="line">            @click=&quot;submitLogin()&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-form&gt;</span><br><span class="line">      &lt;!-- æ›´å¤šç™»å½•æ–¹å¼ --&gt;</span><br><span class="line">      &lt;div class=&quot;more-sign&quot;&gt;</span><br><span class="line">        &lt;h6&gt;ç¤¾äº¤å¸å·ç™»å½•&lt;/h6&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;a</span><br><span class="line">              id=&quot;weixin&quot;</span><br><span class="line">              class=&quot;weixin&quot;</span><br><span class="line">              target=&quot;_blank&quot;</span><br><span class="line">              href=&quot;http://qy.free.idcfengye.com/api/ucenter/weixinLogin/login&quot;</span><br><span class="line">              &gt;&lt;i class=&quot;iconfont icon-weixin&quot;</span><br><span class="line">            /&gt;&lt;/a&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;a id=&quot;qq&quot; class=&quot;qq&quot; target=&quot;_blank&quot; href=&quot;#&quot;</span><br><span class="line">              &gt;&lt;i class=&quot;iconfont icon-qq&quot;</span><br><span class="line">            /&gt;&lt;/a&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import &#x27;~/assets/css/sign.css&#x27;</span><br><span class="line">  import &#x27;~/assets/css/iconfont.css&#x27;</span><br><span class="line">  export default &#123;</span><br><span class="line">    layout: &#x27;sign&#x27;,</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        user: &#123;</span><br><span class="line">          mobile: &#x27;&#x27;,</span><br><span class="line">          password: &#x27;&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        loginInfo: &#123;&#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">  .el-form-item__error &#123;</span><br><span class="line">    z-index: 9999999;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h4 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" class="headerlink" title="æ‹¦æˆªå™¨"></a>æ‹¦æˆªå™¨</h4><blockquote><p>åœ¨ä¸‹é¢çš„æ–¹æ³•ä¸­æœ‰è¯´æ˜ç™»å½•tokençš„æ­¥éª¤ï¼Œå…¶ä¸­éœ€è¦ç”¨åˆ°æ‹¦æˆªå™¨</p><p>æ‹¦æˆªå™¨å†™åœ¨utilsæ–‡ä»¶å¤¹ä¸‹çš„request.jsæ–‡ä»¶ä¸­</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cookie <span class="keyword">from</span> <span class="string">&#x27;js-cookie&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¯æ¬¡è¯·æ±‚ä¸­ä½¿ç”¨æ‹¦æˆªå™¨</span></span><br><span class="line">service.interceptors.request.use(</span><br><span class="line">  <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (cookie.get(<span class="string">&#x27;guli_token&#x27;</span>)) &#123;</span><br><span class="line">      <span class="comment">// ä»cookieä¸­è·å¾—tokenå¹¶ä¸”æ”¾å…¥headerä¸­</span></span><br><span class="line">      config.headers[<span class="string">&#x27;token&#x27;</span>] = cookie.get(<span class="string">&#x27;guli_token&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(err)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h4 id="vueæ–¹æ³•-1"><a href="#vueæ–¹æ³•-1" class="headerlink" title="vueæ–¹æ³•"></a>vueæ–¹æ³•</h4><blockquote><ol><li>è°ƒç”¨æ¥å£ç™»å½•è·å–token</li><li>å°†tokenæ”¾å…¥cookie</li><li>å‰ç«¯æ‹¦æˆªå™¨ï¼šåˆ¤æ–­cookieé‡Œæ˜¯å¦æœ‰tokenï¼Œå¦‚æœæœ‰åˆ™æ”¾åˆ°headerä¸­</li><li>æ ¹æ®headerä¸­çš„tokenè°ƒç”¨æ¥å£è·å–ç”¨æˆ·ä¿¡æ¯</li><li>æŠŠè·å–çš„ç”¨æˆ·ä¿¡æ¯æ”¾å…¥cookie</li></ol></blockquote><blockquote><p>login.vueä¸­</p><p>æ³¨æ„è¿™é‡ŒæŠŠå¯¹è±¡æ”¾å…¥cookieä¸­æ˜¯è¦ä½¿ç”¨JSON.stringifyè½¬æ¢ä¸ºå­—ç¬¦ä¸²æ‰è¡Œï¼Œè¦ä¸ç„¶å°±æ˜¯objectï¼Œå›æŠ¥é”™ï¼ˆcookieè·å¾—çš„jsonå¯¹è±¡ä¸ºundefinedï¼‰</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç™»å½•çš„æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="title">submitLogin</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="comment">// 1ã€è°ƒç”¨æ¥å£è¿›è¡Œç™»å½•ï¼Œè¿”å›tokenå­—ç¬¦ä¸²</span></span><br><span class="line">  loginApi.login(<span class="built_in">this</span>.user).then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 2ã€è·å¾—token,å¹¶æ”¾å…¥cookie</span></span><br><span class="line">    <span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°cookieåç§°ï¼Œç¬¬äºŒä¸ªå‚æ•°å€¼ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä½œç”¨èŒƒå›´</span></span><br><span class="line">    cookieApi.set(<span class="string">&#x27;guli_token&#x27;</span>, result.data.data.token, &#123;</span><br><span class="line">      <span class="attr">domain</span>: <span class="string">&#x27;localhost&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 4ã€è°ƒç”¨æ¥å£è·å–headerä¸­çš„token</span></span><br><span class="line">    loginApi.getLoginMemberInfo().then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 5ã€æ ¹æ®tokenè·å–ç”¨æˆ·ä¿¡æ¯æ”¾å…¥cookieä¸­</span></span><br><span class="line">      <span class="built_in">console</span>.log(response.data.data.member)</span><br><span class="line">      cookieApi.set(<span class="string">&#x27;guli_ucenter&#x27;</span>, <span class="built_in">JSON</span>.stringify(result.data.data.member), &#123;</span><br><span class="line">        <span class="attr">domain</span>: <span class="string">&#x27;localhost&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// è·³è½¬é¡µé¢</span></span><br><span class="line">    <span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span> &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// éªŒè¯æ‰‹æœºå·æ ¼å¼</span></span><br><span class="line"><span class="function"><span class="title">checkPhone</span>(<span class="params">rule, value, callback</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="regexp">/^1[34578]\d&#123;9&#125;$/</span>.test(value)) &#123;</span><br><span class="line">    <span class="keyword">return</span> callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;æ‰‹æœºå·ç æ ¼å¼ä¸æ­£ç¡®&#x27;</span>))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> callback()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>default.vueä¸­ç¼–å†™æ ¹æ®tokenè·å¾—ç”¨æˆ·ä¿¡æ¯</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.showInfo()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">      <span class="comment">// ä»cookieä¸­è·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">      <span class="function"><span class="title">showInfo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// æ³¨æ„è¿™é‡Œéœ€è¦è½¬æ¢</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;ä»cookieä¸­è·å¾—ç”¨æˆ·ä¿¡æ¯ï¼š&#x27;</span> + cookieApi.get(<span class="string">&#x27;guli_ucenter&#x27;</span>))</span><br><span class="line">        <span class="keyword">var</span> loginInfoStr = cookieApi.get(<span class="string">&#x27;guli_ucenter&#x27;</span>)</span><br><span class="line">        <span class="built_in">console</span>.log(cookieApi.get(<span class="string">&#x27;guli_ucenter&#x27;</span>))</span><br><span class="line">        <span class="comment">// æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºJSONæ ¼å¼</span></span><br><span class="line">        <span class="keyword">if</span> (loginInfoStr) &#123;</span><br><span class="line">          <span class="built_in">this</span>.loginInfo = <span class="built_in">JSON</span>.parse(loginInfoStr)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// é€€å‡ºç™»å½•</span></span><br><span class="line">      <span class="function"><span class="title">logout</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// æ¸…é™¤cookie</span></span><br><span class="line">        cookieApi.set(<span class="string">&#x27;guli_token&#x27;</span>, <span class="string">&#x27;&#x27;</span>, &#123; <span class="attr">domain</span>: <span class="string">&#x27;localhost&#x27;</span> &#125;)</span><br><span class="line">        cookieApi.set(<span class="string">&#x27;guli_ucenter&#x27;</span>, <span class="string">&#x27;&#x27;</span>, &#123; <span class="attr">domain</span>: <span class="string">&#x27;localhost&#x27;</span> &#125;)</span><br><span class="line">        <span class="comment">// æ¸…é™¤æ•°æ®</span></span><br><span class="line">        <span class="built_in">this</span>.token = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="built_in">this</span>.loginInfo = &#123;&#125;</span><br><span class="line">        <span class="comment">// è·³è½¬è‡³é¦–é¡µ</span></span><br><span class="line">        <span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span> &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><blockquote><p>TODOï¼šè¿™é‡Œéœ€è¦å®Œå–„çš„åœ°æ–¹æœ‰å¾ˆå¤šï¼Œç™»å½•æ ¡éªŒï¼ˆJWT strings must contain exactly 2 period characters. Found: 0ï¼‰å¦‚æœè¾“å…¥é”™è¯¯é¡µé¢ç«Ÿç„¶æ˜¾ç¤ºcookie undefinedï¼Œè€Œä¸”é‡æ–°ç™»å½•ä¹Ÿä¸è¡Œï¼Œè¿˜æœ‰å‰ç«¯çš„ä¿¡æ¯æç¤º</p></blockquote><h2 id="å¾®ä¿¡æ‰«ç ç™»å½•ï¼ˆåç«¯-å‰ç«¯ï¼‰"><a href="#å¾®ä¿¡æ‰«ç ç™»å½•ï¼ˆåç«¯-å‰ç«¯ï¼‰" class="headerlink" title="å¾®ä¿¡æ‰«ç ç™»å½•ï¼ˆåç«¯+å‰ç«¯ï¼‰"></a>å¾®ä¿¡æ‰«ç ç™»å½•ï¼ˆåç«¯+å‰ç«¯ï¼‰</h2><h3 id="OAuth2"><a href="#OAuth2" class="headerlink" title="OAuth2"></a>OAuth2</h3><blockquote><p>ä¸€ç§æ–¹æ¡ˆï¼Œè§£å†³ä¸¤ä¸ªé—®é¢˜ï¼š</p><ol><li>å¼€æ”¾ç³»ç»Ÿé—´æˆæƒ</li><li>åˆ†å¸ƒå¼è®¿é—®é—®é¢˜</li></ol></blockquote><p>![03 OAuth2ä»‹ç»](<a href="https://gitee.com/ReRia/images/raw/master/img/03">https://gitee.com/ReRia/images/raw/master/img/03</a> OAuth2ä»‹ç».png)</p><h3 id="å¾®ä¿¡ç™»å½•å‡†å¤‡å·¥ä½œ"><a href="#å¾®ä¿¡ç™»å½•å‡†å¤‡å·¥ä½œ" class="headerlink" title="å¾®ä¿¡ç™»å½•å‡†å¤‡å·¥ä½œ"></a>å¾®ä¿¡ç™»å½•å‡†å¤‡å·¥ä½œ</h3><blockquote><p>æ²¡äº‹äº†è¦ä»˜é’±ï¼Œé¹…è‚ çœŸæœ‰ä½ çš„</p><p>æ²¡äº‹äº†è€å¸ˆå…±äº«è´¦å·ï¼Œå¥½è€¶ï¼</p></blockquote><h4 id="é…ç½®æ–‡ä»¶-2"><a href="#é…ç½®æ–‡ä»¶-2" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h4><blockquote><p>service_ucenteræ¨¡å—çš„é…ç½®æ–‡ä»¶å³å¯ï¼ˆåªç”¨äºç™»å½•æ³¨å†Œï¼‰</p></blockquote><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¾®ä¿¡å¼€æ”¾å¹³å° appid</span></span><br><span class="line"><span class="meta">wx.open.app_id</span>=<span class="string">wxed9954c01bb89b47</span></span><br><span class="line"><span class="comment"># å¾®ä¿¡å¼€æ”¾å¹³å° appsecret</span></span><br><span class="line"><span class="meta">wx.open.app_secret</span>=<span class="string">a7482517235173ddb4083788de60b90e</span></span><br><span class="line"><span class="comment"># å¾®ä¿¡å¼€æ”¾å¹³å° é‡å®šå‘url</span></span><br><span class="line"><span class="meta">wx.open.redirect_url</span>=<span class="string">http://localhost:8160/api/ucenter/wx/callback</span></span><br></pre></td></tr></table></figure><h4 id="å¸¸é‡ç±»"><a href="#å¸¸é‡ç±»" class="headerlink" title="å¸¸é‡ç±»"></a>å¸¸é‡ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.educenter.utils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.InitializingBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConstantWxUtils</span> <span class="keyword">implements</span> <span class="title">InitializingBean</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;wx.open.app_id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String appId;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;wx.open.app_secret&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String appSecret;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;wx.open.redirect_url&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String redirectUrl;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String WX_OPEN_APP_ID;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String WX_OPEN_APP_SECRET;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String WX_OPEN_REDIRECT_URL;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        WX_OPEN_APP_ID = appId;</span><br><span class="line">        WX_OPEN_APP_SECRET = appSecret;</span><br><span class="line">        WX_OPEN_REDIRECT_URL = redirectUrl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç”ŸæˆäºŒç»´ç "><a href="#ç”ŸæˆäºŒç»´ç " class="headerlink" title="ç”ŸæˆäºŒç»´ç "></a>ç”ŸæˆäºŒç»´ç </h3><h4 id="controller-4"><a href="#controller-4" class="headerlink" title="controller"></a>controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/api/ucenter/wx&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WxApiController</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ç”Ÿæˆæ‰«æäºŒç»´ç </span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;login&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getWxCode</span><span class="params">()</span> <span class="keyword">throws</span> UnsupportedEncodingException </span>&#123;</span><br><span class="line">        <span class="comment">// å‚æ•°ä½ç½®éƒ½æ˜¯ç”¨%sæ¥ä»£æ›¿ï¼Œç„¶åä½¿ç”¨String.format</span></span><br><span class="line">        String baseUrl = <span class="string">&quot;https://open.weixin.qq.com/connect/qrconnect&quot;</span> +</span><br><span class="line">                <span class="string">&quot;?appid=%s&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&amp;redirect_uri=%s&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&amp;response_type=code&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&amp;scope=snsapi_login&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&amp;state=%s&quot;</span> +</span><br><span class="line">                <span class="string">&quot;#wechat_redirect&quot;</span>;</span><br><span class="line">        <span class="comment">// éœ€è¦è¿›è¡Œurlç¼–ç </span></span><br><span class="line">        String redirectUrl = URLEncoder.encode(ConstantWxUtils.WX_OPEN_REDIRECT_URL, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="comment">// ä¼ å…¥urlä¸­çš„å‚æ•°è·å¾—æœ€ç»ˆçš„url</span></span><br><span class="line">        String url = String.format(baseUrl, ConstantWxUtils.WX_OPEN_APP_ID, redirectUrl, <span class="string">&quot;atguigu&quot;</span>);</span><br><span class="line">        <span class="comment">// é‡å®šå‘åˆ°å¾®ä¿¡åœ°å€</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:&quot;</span> + url;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„è¿™é‡Œéœ€è¦ä¿®æ”¹ç«¯å£å·ï¼Œå› ä¸ºç”¨çš„æ˜¯è€å¸ˆçš„urlï¼Œæ‰€ä»¥è¦å¯¹åº”ï¼Œnginxé‡Œä¹Ÿè¦æ”¹</p><p>è¿™é‡Œæˆ‘æ˜ç™½äº†ä¸€ç‚¹nginxçš„ä½œç”¨ï¼Œå‰ç«¯åªéœ€è¦è®¿é—®nginxæä¾›çš„9001ç«¯å£å·ï¼Œè€Œ9001èƒ½å¤Ÿè½¬å‘åˆ°8001ç­‰å…¶ä»–ç«¯å£å·ï¼Œæ‰€ä»¥åç«¯ç«¯å£å·æ”¹äº†åªè¦è¯¥nginxå°±è¡Œï¼Œç¥å¥‡ï¼</p></blockquote><h3 id="è·å–æ‰«æäººä¿¡æ¯"><a href="#è·å–æ‰«æäººä¿¡æ¯" class="headerlink" title="è·å–æ‰«æäººä¿¡æ¯"></a>è·å–æ‰«æäººä¿¡æ¯</h3><h4 id="ä¾èµ–-2"><a href="#ä¾èµ–-2" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--httpclient--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>httpclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--commons-io--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--gson--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.code.gson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="HttpClientUtils"><a href="#HttpClientUtils" class="headerlink" title="HttpClientUtils"></a>HttpClientUtils</h4><blockquote><p>å¤ªé•¿ä¸å¤åˆ¶äº†</p></blockquote><h4 id="controller-5"><a href="#controller-5" class="headerlink" title="controller"></a>controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> UcenterMemberService memberService;</span><br><span class="line"><span class="comment">// è·å–æ‰«æäººçš„ä¿¡æ¯ï¼Œæ·»åŠ æ•°æ®</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;callback&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">callback</span><span class="params">(String code, String status)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">// 1ã€è·å–codeï¼Œç±»ä¼¼äºéªŒè¯ç </span></span><br><span class="line">    <span class="comment">// 2ã€è¯·æ±‚å¾®ä¿¡apiå¾—åˆ°access_tokenå’Œopenid</span></span><br><span class="line">    String baseAccessTokenUrl = <span class="string">&quot;https://api.weixin.qq.com/sns/oauth2/access_token&quot;</span> +</span><br><span class="line">            <span class="string">&quot;?appid=%s&quot;</span> +</span><br><span class="line">            <span class="string">&quot;&amp;secret=%s&quot;</span> +</span><br><span class="line">            <span class="string">&quot;&amp;code=%s&quot;</span> +</span><br><span class="line">            <span class="string">&quot;&amp;grant_type=authorization_code&quot;</span>;</span><br><span class="line">    <span class="comment">// æ‹¼æ¥å‚æ•°ï¼Œå‘é€è¯·æ±‚</span></span><br><span class="line">    String accessTokenUrl = String.format(baseAccessTokenUrl, ConstantWxUtils.WX_OPEN_APP_ID, ConstantWxUtils.WX_OPEN_APP_SECRET, code);</span><br><span class="line">    String accessTokenInfo = HttpClientUtils.get(accessTokenUrl);</span><br><span class="line">    <span class="comment">// è½¬æ¢json-&gt;mapé›†åˆ,è·å–å…¶ä¸­çš„ä¸¤ä¸ªå‚æ•°,ä½¿ç”¨jsonè½¬æ¢å·¥å…· Gson</span></span><br><span class="line">    Gson gson = <span class="keyword">new</span> Gson();</span><br><span class="line">    HashMap accessTokenMap = gson.fromJson(accessTokenInfo, HashMap.class);</span><br><span class="line">    String access_token = (String) accessTokenMap.get(<span class="string">&quot;access_token&quot;</span>);</span><br><span class="line">    String openid = (String) accessTokenMap.get(<span class="string">&quot;openid&quot;</span>);</span><br><span class="line">    <span class="comment">// æŠŠæ‰«æäººä¿¡æ¯æ·»åŠ æ•°æ®åº“é‡Œé¢</span></span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ•°æ®è¡¨é‡Œé¢æ˜¯å¦å­˜åœ¨ç›¸åŒå¾®ä¿¡ä¿¡æ¯ï¼Œæ ¹æ®openidåˆ¤æ–­</span></span><br><span class="line">    UcenterMember member = memberService.getOpenIdMember(openid);</span><br><span class="line">    <span class="keyword">if</span> (member == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">// 3ã€æ‹¿ç€å¾—åˆ°accsess_token å’Œ openidï¼Œå†å»è¯·æ±‚å¾®ä¿¡æä¾›å›ºå®šçš„åœ°å€ï¼Œè·å–åˆ°æ‰«æäººä¿¡æ¯</span></span><br><span class="line">        <span class="comment">// è®¿é—®å¾®ä¿¡çš„èµ„æºæœåŠ¡å™¨ï¼Œè·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        String baseUserInfoUrl = <span class="string">&quot;https://api.weixin.qq.com/sns/userinfo&quot;</span> +</span><br><span class="line">                <span class="string">&quot;?access_token=%s&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&amp;openid=%s&quot;</span>;</span><br><span class="line">        <span class="comment">// æ‹¼æ¥å‚æ•°ï¼Œå‘é€è¯·æ±‚</span></span><br><span class="line">        String userInfoUrl = String.format(baseUserInfoUrl, access_token, openid);</span><br><span class="line">        String userInfo = HttpClientUtils.get(userInfoUrl);</span><br><span class="line">        <span class="comment">//è½¬æ¢å¹¶è·å–è¿”å›userinfoå­—ç¬¦ä¸²æ‰«æäººä¿¡æ¯</span></span><br><span class="line">        HashMap userInfoMap = gson.fromJson(userInfo, HashMap.class);</span><br><span class="line">        String nickname = (String) userInfoMap.get(<span class="string">&quot;nickname&quot;</span>);<span class="comment">//æ˜µç§°</span></span><br><span class="line">        String headimgurl = (String) userInfoMap.get(<span class="string">&quot;headimgurl&quot;</span>);<span class="comment">//å¤´åƒ</span></span><br><span class="line">        <span class="comment">// åˆ›å»ºæ‰«æmemberå¯¹è±¡</span></span><br><span class="line">        member = <span class="keyword">new</span> UcenterMember();</span><br><span class="line">        member.setOpenid(openid);</span><br><span class="line">        member.setNickname(nickname);</span><br><span class="line">        member.setAvatar(headimgurl);</span><br><span class="line">        memberService.save(member);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 4ã€ä½¿ç”¨jwtæ ¹æ®memberå¯¹è±¡ç”Ÿæˆtokenå­—ç¬¦ä¸²</span></span><br><span class="line">    String jwtToken = JwtUtils.getJwtToken(member.getId(), member.getNickname());</span><br><span class="line">    <span class="comment">// 5ã€æœ€åï¼šè¿”å›é¦–é¡µé¢ï¼Œé€šè¿‡è·¯å¾„ä¼ é€’tokenå­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:http://localhost:3000?token=&quot;</span> + jwtToken;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="service-3"><a href="#service-3" class="headerlink" title="service"></a>service</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®openidæŸ¥è¯¢</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> UcenterMember <span class="title">getOpenIdMember</span><span class="params">(String openid)</span> </span>&#123;</span><br><span class="line">    QueryWrapper&lt;UcenterMember&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    wrapper.eq(<span class="string">&quot;openid&quot;</span>, openid);</span><br><span class="line">    UcenterMember member = baseMapper.selectOne(wrapper);</span><br><span class="line">    <span class="keyword">return</span> member;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‰ç«¯"><a href="#å‰ç«¯" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h3><blockquote><p>å–åœ°å€æ ä¸­çš„å¸¦åç§°çš„å‚æ•°å€¼ï¼ˆè€Œä¸æ˜¯xx/xx/xxè¿™ç§ä½¿ç”¨this.$route.params.xxï¼‰ä½¿ç”¨this.$route.query.xxx</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="comment">// è·å–urlä¸­çš„token</span></span><br><span class="line">  <span class="built_in">this</span>.token = <span class="built_in">this</span>.$route.query.token</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">this</span>.token) &#123;</span><br><span class="line">    <span class="built_in">this</span>.wxLogin()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">this</span>.showInfo()</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="comment">// å¾®ä¿¡ç™»å½•åæ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">  <span class="function"><span class="title">wxLogin</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// æŠŠtokenæ”¾å…¥cookie</span></span><br><span class="line">    cookieApi.set(<span class="string">&#x27;guli_token&#x27;</span>, <span class="built_in">this</span>.token, &#123; <span class="attr">domain</span>: <span class="string">&#x27;localhost&#x27;</span> &#125;)</span><br><span class="line">    <span class="comment">// è°ƒç”¨æ¥å£è·å–headerä¸­çš„token</span></span><br><span class="line">    loginApi.getLoginMemberInfo().then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 5ã€æ ¹æ®tokenè·å–ç”¨æˆ·ä¿¡æ¯æ”¾å…¥cookieä¸­</span></span><br><span class="line">      cookieApi.set(<span class="string">&#x27;guli_ucenter&#x27;</span>, <span class="built_in">JSON</span>.stringify(result.data.data.member), &#123;</span><br><span class="line">        <span class="attr">domain</span>: <span class="string">&#x27;localhost&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// è·³è½¬é¡µé¢</span></span><br><span class="line">    <span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span> &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ä»cookieä¸­è·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">  <span class="function"><span class="title">showInfo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> loginInfoStr = cookieApi.get(<span class="string">&#x27;guli_ucenter&#x27;</span>)</span><br><span class="line">    <span class="comment">// æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºJSONæ ¼å¼</span></span><br><span class="line">    <span class="keyword">if</span> (loginInfoStr) &#123;</span><br><span class="line">      <span class="built_in">this</span>.loginInfo = <span class="built_in">JSON</span>.parse(loginInfoStr)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„æŠŠè¿›å…¥å¾®ä¿¡æ‰«ç çš„hrefæ”¹ä¸º<a href="http://localhost:8160/api/ucenter/wx/login%E5%8D%B3%E5%8F%AF">http://localhost:8160/api/ucenter/wx/loginå³å¯</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> é¡¹ç›® </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> SpringCloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€é¡¹ç›®ç¬”è®°ã€‘åœ¨çº¿æ•™è‚²é¡¹ç›®å®æˆ˜4</title>
      <link href="/2021/09/25/xiang-mu-bi-ji-zai-xian-jiao-yu-xiang-mu-shi-zhan-4/"/>
      <url>/2021/09/25/xiang-mu-bi-ji-zai-xian-jiao-yu-xiang-mu-shi-zhan-4/</url>
      
        <content type="html"><![CDATA[<h2 id="å¤šè¡¨è¿æ¥æŸ¥è¯¢"><a href="#å¤šè¡¨è¿æ¥æŸ¥è¯¢" class="headerlink" title="å¤šè¡¨è¿æ¥æŸ¥è¯¢"></a>å¤šè¡¨è¿æ¥æŸ¥è¯¢</h2><blockquote><p>æ–¹å¼å¦‚ä¸‹</p><ol><li>å†…è¿æ¥</li><li>å·¦å¤–è¿æ¥</li><li>å³å¤–è¿æ¥</li></ol></blockquote><h3 id="è¯¾ç¨‹å…¨éƒ¨ä¿¡æ¯æŸ¥è¯¢ï¼ˆåç«¯ï¼‰"><a href="#è¯¾ç¨‹å…¨éƒ¨ä¿¡æ¯æŸ¥è¯¢ï¼ˆåç«¯ï¼‰" class="headerlink" title="è¯¾ç¨‹å…¨éƒ¨ä¿¡æ¯æŸ¥è¯¢ï¼ˆåç«¯ï¼‰"></a>è¯¾ç¨‹å…¨éƒ¨ä¿¡æ¯æŸ¥è¯¢ï¼ˆåç«¯ï¼‰</h3><h4 id="åˆ›å»ºå€¼å°è£…å¯¹è±¡ç±»"><a href="#åˆ›å»ºå€¼å°è£…å¯¹è±¡ç±»" class="headerlink" title="åˆ›å»ºå€¼å°è£…å¯¹è±¡ç±»"></a>åˆ›å»ºå€¼å°è£…å¯¹è±¡ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CoursePublishVo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">    <span class="keyword">private</span> String cover;</span><br><span class="line">    <span class="keyword">private</span> Integer lessonNum;</span><br><span class="line">    <span class="keyword">private</span> String subjectLevelOne;</span><br><span class="line">    <span class="keyword">private</span> String subjectLevelTwo;</span><br><span class="line">    <span class="keyword">private</span> String teacherName;</span><br><span class="line">    <span class="keyword">private</span> String price;<span class="comment">//åªç”¨äºæ˜¾ç¤º</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™å¯¹åº”mapperæ¥å£"><a href="#ç¼–å†™å¯¹åº”mapperæ¥å£" class="headerlink" title="ç¼–å†™å¯¹åº”mapperæ¥å£"></a>ç¼–å†™å¯¹åº”mapperæ¥å£</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">EduCourseMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">EduCourse</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function">CoursePublishVo <span class="title">getCoursePublishInfo</span><span class="params">(String courseId)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™å¯¹åº”mapperä¸­sqlè¯­å¥"><a href="#ç¼–å†™å¯¹åº”mapperä¸­sqlè¯­å¥" class="headerlink" title="ç¼–å†™å¯¹åº”mapperä¸­sqlè¯­å¥"></a>ç¼–å†™å¯¹åº”mapperä¸­sqlè¯­å¥</h4><blockquote><p>å…ˆæŸ¥è¯¢å®Œäº†ä¹‹åå†è´´ä¸Šæ¥ï¼Œå‡ºé”™ç‡å¾ˆé«˜</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.atguigu.eduservice.mapper.EduCourseMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getCoursePublishInfo&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.eduservice.entity.vo.CoursePublishVo&quot;</span>&gt;</span></span><br><span class="line">        select ec.id,</span><br><span class="line">               ec.title,</span><br><span class="line">               ec.price,</span><br><span class="line">               ec.lesson_num AS lessonNum,</span><br><span class="line">               ec.cover,</span><br><span class="line">               et.name       AS teacherName,</span><br><span class="line">               es1.title     AS subjectLevelOne,</span><br><span class="line">               es2.title     AS subjectLevelTwo</span><br><span class="line">        from edu_course ec</span><br><span class="line">                 left join edu_course_description ecd on ec.id = ecd.id</span><br><span class="line">                 left join edu_teacher et on ec.teacher_id = et.id</span><br><span class="line">                 left join edu_subject es1 on ec.subject_parent_id = es1.id</span><br><span class="line">                 left join edu_subject es2 on ec.subject_id = es2.id</span><br><span class="line">        where ec.id = #&#123;courseId&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™controller"><a href="#ç¼–å†™controller" class="headerlink" title="ç¼–å†™controller"></a>ç¼–å†™controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®idæŸ¥è¯¢è¯¾ç¨‹å…¨éƒ¨ä¿¡æ¯</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;getCoursePublishInfo/&#123;courseId&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">getCoursePublishInfo</span><span class="params">(<span class="meta">@PathVariable</span> String courseId)</span> </span>&#123;</span><br><span class="line">    CoursePublishVo coursePublishInfo = courseService.getCoursePublishInfo(courseId);</span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">&quot;coursePublishInfo&quot;</span>, coursePublishInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™service"><a href="#ç¼–å†™service" class="headerlink" title="ç¼–å†™service"></a>ç¼–å†™service</h4><blockquote><p>åŒç†ï¼Œç›´æ¥å¿«æ·é”®å°±è¡Œ</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®idæŸ¥è¯¢è¯¾ç¨‹å…¨éƒ¨ä¿¡æ¯</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> CoursePublishVo <span class="title">getCoursePublishInfo</span><span class="params">(String courseId)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> baseMapper.getCoursePublishInfo(courseId);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è°ƒè¯•"><a href="#è°ƒè¯•" class="headerlink" title="è°ƒè¯•"></a>è°ƒè¯•</h4><blockquote><p> <code>Invalid bound statement (not found): com.atguigu.eduservice.mapper.EduCourseMapper.getCoursePublishInfo</code></p><p>æŠ¥é”™å¦‚ä¸Šï¼Œè§£å†³å¦‚ä¸‹ï¼ˆè¯¦è§p130ï¼‰</p><ol><li>mapperæœ‰æ²¡æœ‰å†™é”™</li><li>åœ¨targetæ–‡ä»¶å¤¹ä¸­xmlé…ç½®æ–‡ä»¶æœ‰æ²¡æœ‰è¢«å¼•å…¥<ul><li>å¯ä»¥æŠŠmapper.xmlæ”¾åœ¨resourceä¸‹</li><li>é…ç½®pom.xmlå’Œapplication.propertiesï¼ˆå­æ¨¡å—çš„pom.xmlï¼‰</li></ul></li></ol></blockquote><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">mybatis-plus.mapper-locations</span>=<span class="string">classpath:com/atguigu/eduservice/mapper/xml/*.xml</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è§£å†³mavenæ²¡æœ‰å¯¼å…¥xmlæ–‡ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="è¯¾ç¨‹å…¨éƒ¨ä¿¡æ¯æŸ¥è¯¢ï¼ˆå‰ç«¯ï¼‰"><a href="#è¯¾ç¨‹å…¨éƒ¨ä¿¡æ¯æŸ¥è¯¢ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="è¯¾ç¨‹å…¨éƒ¨ä¿¡æ¯æŸ¥è¯¢ï¼ˆå‰ç«¯ï¼‰"></a>è¯¾ç¨‹å…¨éƒ¨ä¿¡æ¯æŸ¥è¯¢ï¼ˆå‰ç«¯ï¼‰</h3><h4 id="api"><a href="#api" class="headerlink" title="api"></a>api</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯¾ç¨‹å…¨éƒ¨ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="title">getCoursePublishInfo</span>(<span class="params">courseId</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> request(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">`/eduservice/course/getCoursePublishInfo/`</span> + courseId,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="vueæ¨¡æ¿å’Œæ–¹æ³•"><a href="#vueæ¨¡æ¿å’Œæ–¹æ³•" class="headerlink" title="vueæ¨¡æ¿å’Œæ–¹æ³•"></a>vueæ¨¡æ¿å’Œæ–¹æ³•</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">        &lt;h2 style=&quot;text-align: center&quot;&gt;å‘å¸ƒæ–°è¯¾ç¨‹&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-steps</span><br><span class="line">            :active=&quot;3&quot;</span><br><span class="line">            process-status=&quot;wait&quot;</span><br><span class="line">            align-center</span><br><span class="line">            style=&quot;margin-bottom: 40px&quot;</span><br><span class="line">        &gt;</span><br><span class="line">            &lt;el-step title=&quot;å¡«å†™è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯&quot; /&gt;</span><br><span class="line">            &lt;el-step title=&quot;åˆ›å»ºè¯¾ç¨‹å¤§çº²&quot; /&gt;</span><br><span class="line">            &lt;el-step title=&quot;æœ€ç»ˆå‘å¸ƒ&quot; /&gt;</span><br><span class="line">        &lt;/el-steps&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div class=&quot;ccInfo&quot;&gt;</span><br><span class="line">            &lt;img :src=&quot;coursePublishInfo.cover&quot; /&gt;</span><br><span class="line">            &lt;div class=&quot;main&quot;&gt;</span><br><span class="line">                &lt;h2&gt;&#123;&#123; coursePublishInfo.title &#125;&#125;&lt;/h2&gt;</span><br><span class="line">                &lt;p class=&quot;gray&quot;&gt;</span><br><span class="line">                    &lt;span&gt;å…±&#123;&#123; coursePublishInfo.lessonNum &#125;&#125;è¯¾æ—¶&lt;/span&gt;</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">                &lt;p&gt;</span><br><span class="line">                    &lt;span</span><br><span class="line">                        &gt;æ‰€å±åˆ†ç±»ï¼š&#123;&#123; coursePublishInfo.subjectLevelOne &#125;&#125; â€”</span><br><span class="line">                        &#123;&#123; coursePublishInfo.subjectLevelTwo &#125;&#125;&lt;/span</span><br><span class="line">                    &gt;</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">                &lt;p&gt;è¯¾ç¨‹è®²å¸ˆï¼š&#123;&#123; coursePublishInfo.teacherName &#125;&#125;&lt;/p&gt;</span><br><span class="line">                &lt;h3 class=&quot;red&quot;&gt;ï¿¥&#123;&#123; coursePublishInfo.price &#125;&#125;&lt;/h3&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;el-button @click=&quot;previous&quot;&gt;è¿”å›ä¿®æ”¹&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button</span><br><span class="line">                :disabled=&quot;saveBtnDisabled&quot;</span><br><span class="line">                type=&quot;primary&quot;</span><br><span class="line">                @click=&quot;publish&quot;</span><br><span class="line">                &gt;å‘å¸ƒè¯¾ç¨‹&lt;/el-button</span><br><span class="line">            &gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import courseApi from &#x27;@/api/edu/course.js&#x27;</span><br><span class="line">    export default &#123;</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          saveBtnDisabled: false, // ä¿å­˜æŒ‰é’®æ˜¯å¦ç¦ç”¨</span><br><span class="line">          courseId: &#x27;&#x27;, // è¯¾ç¨‹id</span><br><span class="line">          coursePublishInfo: &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      created() &#123;</span><br><span class="line">        // è·å–åˆ°è·¯ç”±ä¸­çš„idå€¼</span><br><span class="line">        if (this.$route.params &amp;&amp; this.$route.params.id) &#123;</span><br><span class="line">          this.courseId = this.$route.params.id</span><br><span class="line">          this.getCoursePublishInfo(this.courseId)</span><br><span class="line">        &#125;</span><br><span class="line">        console.log(this.coursePublishInfo)</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      methods: &#123;</span><br><span class="line">        getCoursePublishInfo(id) &#123;</span><br><span class="line">          // è°ƒç”¨api</span><br><span class="line">          courseApi.getCoursePublishInfo(id).then(result =&gt; &#123;</span><br><span class="line">            console.log</span><br><span class="line">            this.coursePublishInfo = result.data.coursePublishInfo</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        previous() &#123;</span><br><span class="line">          console.log(&#x27;previous&#x27;)</span><br><span class="line">          this.$router.push(&#123; path: &#x27;/course/chapter/&#x27; + this.courseId &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        publish() &#123;</span><br><span class="line">          console.log(&#x27;publish&#x27;)</span><br><span class="line">          this.$router.push(&#123; path: &#x27;/course/list&#x27; &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="è¯¾ç¨‹å‘å¸ƒï¼ˆåç«¯-å‰ç«¯ï¼‰"><a href="#è¯¾ç¨‹å‘å¸ƒï¼ˆåç«¯-å‰ç«¯ï¼‰" class="headerlink" title="è¯¾ç¨‹å‘å¸ƒï¼ˆåç«¯+å‰ç«¯ï¼‰"></a>è¯¾ç¨‹å‘å¸ƒï¼ˆåç«¯+å‰ç«¯ï¼‰</h2><h3 id="åç«¯"><a href="#åç«¯" class="headerlink" title="åç«¯"></a>åç«¯</h3><blockquote><p>å‘å¸ƒå°±æ˜¯ä¿®æ”¹è¡¨ä¸­ä¸€ä¸ªå­—æ®µå€¼å°±è¡Œ</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‘å¸ƒè¯¾ç¨‹ï¼ˆä¿®æ”¹statuså­—æ®µå€¼ï¼‰</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;publishCourse/&#123;courseId&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">publishCourse</span><span class="params">(<span class="meta">@PathVariable</span> String courseId)</span> </span>&#123;</span><br><span class="line">    EduCourse eduCourse = courseService.getById(courseId);</span><br><span class="line">    eduCourse.setStatus(<span class="string">&quot;Normal&quot;</span>);</span><br><span class="line">    courseService.updateById(eduCourse);</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‰ç«¯"><a href="#å‰ç«¯" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h3><blockquote><p>api</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// å‘å¸ƒè¯¾ç¨‹</span></span><br><span class="line"><span class="function"><span class="title">publishCourse</span>(<span class="params">courseId</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">`/eduservice/course/publishCourse/`</span> + courseId,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>method</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="title">publish</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  courseApi.publishCourse(<span class="built_in">this</span>.courseId).then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&#x27;/course/list&#x27;</span> &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è¯¾ç¨‹åˆ—è¡¨ï¼ˆåç«¯-å‰ç«¯ï¼‰"><a href="#è¯¾ç¨‹åˆ—è¡¨ï¼ˆåç«¯-å‰ç«¯ï¼‰" class="headerlink" title="è¯¾ç¨‹åˆ—è¡¨ï¼ˆåç«¯+å‰ç«¯ï¼‰"></a>è¯¾ç¨‹åˆ—è¡¨ï¼ˆåç«¯+å‰ç«¯ï¼‰</h2><h3 id="åç«¯ï¼ˆå¾…å®Œå–„ï¼‰"><a href="#åç«¯ï¼ˆå¾…å®Œå–„ï¼‰" class="headerlink" title="åç«¯ï¼ˆå¾…å®Œå–„ï¼‰"></a>åç«¯ï¼ˆå¾…å®Œå–„ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TODO å®Œå–„æ¡ä»¶æŸ¥è¯¢å¸¦åˆ†é¡µ</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;getCourseList&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">getCourseList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;EduCourse&gt; list = courseService.list(<span class="keyword">null</span>);</span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">&quot;courseList&quot;</span>, list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‰ç«¯-1"><a href="#å‰ç«¯-1" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h3><h4 id="api-1"><a href="#api-1" class="headerlink" title="api"></a>api</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å¾—è¯¾ç¨‹åˆ—è¡¨</span></span><br><span class="line">   <span class="function"><span class="title">getCourseList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> request(&#123;</span><br><span class="line">           <span class="attr">url</span>: <span class="string">`/eduservice/course/getCourseList`</span>,</span><br><span class="line">           <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h4 id="vue"><a href="#vue" class="headerlink" title="vue"></a>vue</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">        è¯¾ç¨‹åˆ—è¡¨</span><br><span class="line"></span><br><span class="line">        &lt;!--æŸ¥è¯¢è¡¨å•--&gt;</span><br><span class="line">        &lt;el-form :inline=&quot;true&quot; class=&quot;demo-form-inline&quot;&gt;</span><br><span class="line">            &lt;el-form-item&gt;</span><br><span class="line">                &lt;el-input v-model=&quot;courseQuery.title&quot; placeholder=&quot;è¯¾ç¨‹åç§°&quot; /&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-form-item&gt;</span><br><span class="line">                &lt;el-select</span><br><span class="line">                    v-model=&quot;courseQuery.status&quot;</span><br><span class="line">                    clearable</span><br><span class="line">                    placeholder=&quot;è¯¾ç¨‹çŠ¶æ€&quot;</span><br><span class="line">                &gt;</span><br><span class="line">                    &lt;el-option value=&quot;Normal&quot; label=&quot;å·²å‘å¸ƒ&quot; /&gt;</span><br><span class="line">                    &lt;el-option value=&quot;Draft&quot; label=&quot;æœªå‘å¸ƒ&quot; /&gt;</span><br><span class="line">                &lt;/el-select&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-button type=&quot;primary&quot; icon=&quot;el-icon-search&quot; @click=&quot;getList()&quot;</span><br><span class="line">                &gt;æŸ¥è¯¢&lt;/el-button</span><br><span class="line">            &gt;</span><br><span class="line">            &lt;el-button type=&quot;default&quot; @click=&quot;resetData()&quot;&gt;æ¸…ç©º&lt;/el-button&gt;</span><br><span class="line">        &lt;/el-form&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- è¡¨æ ¼ --&gt;</span><br><span class="line">        &lt;el-table :data=&quot;list&quot; border fit highlight-current-row&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;åºå·&quot; width=&quot;70&quot; align=&quot;center&quot;&gt;</span><br><span class="line">                &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">                    &#123;&#123; (page - 1) * limit + scope.$index + 1 &#125;&#125;</span><br><span class="line">                &lt;/template&gt;</span><br><span class="line">            &lt;/el-table-column&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-table-column prop=&quot;title&quot; label=&quot;è¯¾ç¨‹åç§°&quot; width=&quot;80&quot; /&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-table-column label=&quot;è¯¾ç¨‹çŠ¶æ€&quot; width=&quot;80&quot;&gt;</span><br><span class="line">                &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">                    &#123;&#123; scope.row.status === &quot;Normal&quot; ? &quot;å·²å‘å¸ƒ&quot; : &quot;æœªå‘å¸ƒ&quot; &#125;&#125;</span><br><span class="line">                &lt;/template&gt;</span><br><span class="line">            &lt;/el-table-column&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-table-column prop=&quot;lessonNum&quot; label=&quot;è¯¾æ—¶æ•°&quot; /&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-table-column prop=&quot;gmtCreate&quot; label=&quot;æ·»åŠ æ—¶é—´&quot; width=&quot;160&quot; /&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-table-column prop=&quot;viewCount&quot; label=&quot;æµè§ˆæ•°é‡&quot; width=&quot;60&quot; /&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-table-column label=&quot;æ“ä½œ&quot; width=&quot;200&quot; align=&quot;center&quot;&gt;</span><br><span class="line">                &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">                    &lt;router-link :to=&quot;&#x27;/teacher/edit/&#x27; + scope.row.id&quot;&gt;</span><br><span class="line">                        &lt;el-button</span><br><span class="line">                            type=&quot;primary&quot;</span><br><span class="line">                            size=&quot;mini&quot;</span><br><span class="line">                            icon=&quot;el-icon-edit&quot;</span><br><span class="line">                            &gt;ç¼–è¾‘è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯&lt;/el-button</span><br><span class="line">                        &gt;</span><br><span class="line">                    &lt;/router-link&gt;</span><br><span class="line">                    &lt;router-link :to=&quot;&#x27;/teacher/edit/&#x27; + scope.row.id&quot;&gt;</span><br><span class="line">                        &lt;el-button</span><br><span class="line">                            type=&quot;primary&quot;</span><br><span class="line">                            size=&quot;mini&quot;</span><br><span class="line">                            icon=&quot;el-icon-edit&quot;</span><br><span class="line">                            &gt;ç¼–è¾‘è¯¾ç¨‹å¤§çº²æ¯&lt;/el-button</span><br><span class="line">                        &gt;</span><br><span class="line">                    &lt;/router-link&gt;</span><br><span class="line">                    &lt;el-button</span><br><span class="line">                        type=&quot;danger&quot;</span><br><span class="line">                        size=&quot;mini&quot;</span><br><span class="line">                        icon=&quot;el-icon-delete&quot;</span><br><span class="line">                        @click=&quot;removeDataById(scope.row.id)&quot;</span><br><span class="line">                        &gt;åˆ é™¤è¯¾ç¨‹ä¿¡æ¯&lt;/el-button</span><br><span class="line">                    &gt;</span><br><span class="line">                &lt;/template&gt;</span><br><span class="line">            &lt;/el-table-column&gt;</span><br><span class="line">        &lt;/el-table&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- åˆ†é¡µ --&gt;</span><br><span class="line">        &lt;el-pagination</span><br><span class="line">            :current-page=&quot;page&quot;</span><br><span class="line">            :page-size=&quot;limit&quot;</span><br><span class="line">            :total=&quot;total&quot;</span><br><span class="line">            style=&quot;padding: 30px 0; text-align: center&quot;</span><br><span class="line">            layout=&quot;total, prev, pager, next, jumper&quot;</span><br><span class="line">            @current-change=&quot;getList&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    // å¼•å…¥è°ƒç”¨teacher.jsæ–‡ä»¶</span><br><span class="line">    import courseApi from &#x27;@/api/edu/course&#x27;</span><br><span class="line"></span><br><span class="line">    export default &#123;</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          list: null, // æŸ¥è¯¢ä¹‹åæ¥å£è¿”å›é›†åˆ(æ³¨æ„è¿™é‡Œæ˜¯æ•°ç»„ç”¨null)</span><br><span class="line">          page: 1, // å½“å‰é¡µ</span><br><span class="line">          limit: 10, // æ¯é¡µè®°å½•æ•°</span><br><span class="line">          total: 0, // æ€»è®°å½•æ•°</span><br><span class="line">          courseQuery: &#123;&#125; // æ¡ä»¶å°è£…å¯¹è±¡</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      created() &#123;</span><br><span class="line">        // é¡µé¢æ¸²æŸ“ä¹‹å‰æ‰§è¡Œï¼Œä¸€èˆ¬è°ƒç”¨methodså®šä¹‰çš„æ–¹æ³•</span><br><span class="line">        // è°ƒç”¨</span><br><span class="line">        this.getList()</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">        getList() &#123;</span><br><span class="line">          courseApi.getCourseList().then(response =&gt; &#123;</span><br><span class="line">            // è¯·æ±‚æˆåŠŸ</span><br><span class="line">            // responseæ¥å£è¿”å›çš„æ•°æ®</span><br><span class="line">            this.list = response.data.courseList</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        resetData() &#123;</span><br><span class="line">          // è¡¨å•è¾“å…¥é¡¹æ•°æ®æ¸…ç©º</span><br><span class="line">          this.courseQuery = &#123;&#125;</span><br><span class="line">          this.getList()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="è¯¾ç¨‹åˆ é™¤ï¼ˆåç«¯-å‰ç«¯ï¼‰"><a href="#è¯¾ç¨‹åˆ é™¤ï¼ˆåç«¯-å‰ç«¯ï¼‰" class="headerlink" title="è¯¾ç¨‹åˆ é™¤ï¼ˆåç«¯+å‰ç«¯ï¼‰"></a>è¯¾ç¨‹åˆ é™¤ï¼ˆåç«¯+å‰ç«¯ï¼‰</h2><blockquote><p>åˆ é™¤è¯¾ç¨‹ï¼šæ‰€æœ‰ç« èŠ‚ä¹Ÿä¼šè¢«åˆ é™¤</p></blockquote><h3 id="åç«¯-1"><a href="#åç«¯-1" class="headerlink" title="åç«¯"></a>åç«¯</h3><h4 id="controller"><a href="#controller" class="headerlink" title="controller"></a>controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ é™¤è¯¾ç¨‹</span></span><br><span class="line"><span class="meta">@DeleteMapping(&quot;&#123;courseId&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">deleteCourse</span><span class="params">(<span class="meta">@PathVariable</span> String courseId)</span> </span>&#123;</span><br><span class="line">    courseService.deleteCourse(courseId);</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="service"><a href="#service" class="headerlink" title="service"></a>service</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®è¯¾ç¨‹idåˆ é™¤è¯¾ç¨‹åŠå…¶æè¿°å’Œç« èŠ‚</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteCourse</span><span class="params">(String courseId)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1ã€åˆ é™¤å°èŠ‚</span></span><br><span class="line">    videoService.removeByCourseId(courseId);</span><br><span class="line">    <span class="comment">// 2ã€åˆ é™¤ç« èŠ‚</span></span><br><span class="line">    chapterService.removeByCourseId(courseId);</span><br><span class="line">    <span class="comment">// 3ã€åˆ é™¤æè¿°</span></span><br><span class="line">    descriptionService.removeById(courseId);</span><br><span class="line">    <span class="comment">// 4ã€åˆ é™¤è¯¾ç¨‹</span></span><br><span class="line">    <span class="keyword">int</span> row = baseMapper.deleteById(courseId);</span><br><span class="line">    <span class="keyword">if</span> (row == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;åˆ é™¤è¯¾ç¨‹å¤±è´¥&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®è¯¾ç¨‹idåˆ é™¤ç« èŠ‚</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeByCourseId</span><span class="params">(String courseId)</span> </span>&#123;</span><br><span class="line">    QueryWrapper&lt;EduChapter&gt; queryWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    queryWrapper.eq(<span class="string">&quot;course_id&quot;</span>, courseId);</span><br><span class="line">    baseMapper.delete(queryWrapper);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‰ç«¯-2"><a href="#å‰ç«¯-2" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h3><h4 id="api-2"><a href="#api-2" class="headerlink" title="api"></a>api</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ é™¤è¯¾ç¨‹</span></span><br><span class="line">    <span class="function"><span class="title">deleteCourse</span>(<span class="params">courseId</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> request(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">`/eduservice/course/`</span> + courseId,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;delete&#x27;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure><h4 id="vue-1"><a href="#vue-1" class="headerlink" title="vue"></a>vue</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ é™¤è¯¾ç¨‹</span></span><br><span class="line"><span class="function"><span class="title">deleteCourse</span>(<span class="params">courseId</span>)</span> &#123;</span><br><span class="line">  courseApi</span><br><span class="line">    .deleteCourse(courseId)</span><br><span class="line">    .then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// æ˜¾ç¤ºæç¤ºä¿¡æ¯</span></span><br><span class="line">      <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&#x27;åˆ é™¤æˆåŠŸ!&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="comment">// åˆ·æ–°é¡µé¢</span></span><br><span class="line">      <span class="built_in">this</span>.getList()</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// æ˜¾ç¤ºæç¤ºä¿¡æ¯</span></span><br><span class="line">      <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&#x27;åˆ é™¤å¤±è´¥!&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é˜¿é‡Œäº‘è§†é¢‘ç‚¹æ’­"><a href="#é˜¿é‡Œäº‘è§†é¢‘ç‚¹æ’­" class="headerlink" title="é˜¿é‡Œäº‘è§†é¢‘ç‚¹æ’­"></a>é˜¿é‡Œäº‘è§†é¢‘ç‚¹æ’­</h2><blockquote><p><a href="https://www.aliyun.com/product/vod?spm=5176.10695662.5694434980.1.448751effMGKWo">è§†é¢‘ç‚¹æ’­_éŸ³è§†é¢‘ç‚¹æ’­è§£å†³æ–¹æ¡ˆ_è§†é¢‘è½¬ç _åª’ä½“èµ„æºç®¡ç†ç³»ç»Ÿ-é˜¿é‡Œäº‘ (aliyun.com)</a></p><p><a href="https://help.aliyun.com/product/29932.html?spm=5176.8413026.J_3895079540.5.72081029auUneg">è§†é¢‘ç‚¹æ’­ (aliyun.com)</a></p></blockquote><h3 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h3><blockquote><p>ä¾èµ–è§å®˜ç½‘ï¼ˆé¡¹ç›®ç¯å¢ƒæ­å»ºçš„æ—¶å€™å·²ç»å¼•å…¥äº†ï¼‰</p></blockquote><h4 id="åˆ›å»ºæ¨¡å—"><a href="#åˆ›å»ºæ¨¡å—" class="headerlink" title="åˆ›å»ºæ¨¡å—"></a>åˆ›å»ºæ¨¡å—</h4><blockquote><p>å­å­æ¨¡å—<code>service_vod</code></p></blockquote><h4 id="å¼•å…¥ä¾èµ–"><a href="#å¼•å…¥ä¾èµ–" class="headerlink" title="å¼•å…¥ä¾èµ–"></a>å¼•å…¥ä¾èµ–</h4><blockquote><p>æ³¨æ„è¿™ä¸ªaliyun-java-vod-upload.versionä¾èµ–æœªå¼€æºï¼Œéœ€è¦æ‰‹åŠ¨ä¸‹è½½jaråŒ…ï¼Œç„¶åä½¿ç”¨å‘½ä»¤è¡Œå®‰è£…</p><p>mvn install:install-file -DgroupId=com.aliyun -DartifactId=aliyun-java-vod-upload -Dversion=1.4.11 -Dpackaging=jar -Dfile=aliyun-java-vod-upload-1.4.14.jar</p><p>æ³¨æ„è¿™é‡Œçš„ç‰ˆæœ¬è¦å’Œä¸‹è½½çš„jaråŒ…å¯¹åº”ï¼Œè¿˜æœ‰åŒ…åaliyun-java-vod-upload</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é˜¿é‡Œäº‘è§†é¢‘ç‚¹æ’­æ‰€éœ€ä¾èµ– --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-java-sdk-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-sdk-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-java-sdk-vod<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-java-vod-upload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.json<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>json<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.code.gson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>joda-time<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>joda-time<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><h4 id="æ ¹æ®è§†é¢‘idè·å–è§†é¢‘æ’­æ”¾åœ°å€"><a href="#æ ¹æ®è§†é¢‘idè·å–è§†é¢‘æ’­æ”¾åœ°å€" class="headerlink" title="æ ¹æ®è§†é¢‘idè·å–è§†é¢‘æ’­æ”¾åœ°å€"></a>æ ¹æ®è§†é¢‘idè·å–è§†é¢‘æ’­æ”¾åœ°å€</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestVod</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClientException </span>&#123;</span><br><span class="line">        <span class="comment">// 1ã€æ ¹æ®è§†é¢‘idè·å–è§†é¢‘æ’­æ”¾åœ°å€</span></span><br><span class="line">        <span class="comment">// åˆ›å»ºåˆå§‹åŒ–å¯¹è±¡(ä¼ å…¥ossçš„idå’Œç§˜é’¥)</span></span><br><span class="line">        DefaultAcsClient client = InitObject.initVodClient(<span class="string">&quot;&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="comment">// åˆ›å»ºè·å–è§†é¢‘åœ°å€çš„request</span></span><br><span class="line">        GetPlayInfoRequest request = <span class="keyword">new</span> GetPlayInfoRequest();</span><br><span class="line">        <span class="comment">// å‘requestä¸­è®¾ç½®id</span></span><br><span class="line">        request.setVideoId(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="comment">// è°ƒç”¨åˆå§‹åŒ–å¯¹è±¡çš„æ–¹æ³•ï¼Œä¼ é€’requestï¼Œè·å–response</span></span><br><span class="line">        GetPlayInfoResponse acsResponse = client.getAcsResponse(request);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–responseä¸­çš„ä¿¡æ¯</span></span><br><span class="line">        List&lt;GetPlayInfoResponse.PlayInfo&gt; playInfoList = acsResponse.getPlayInfoList();</span><br><span class="line">        <span class="comment">//æ’­æ”¾åœ°å€</span></span><br><span class="line">        <span class="keyword">for</span> (GetPlayInfoResponse.PlayInfo playInfo : playInfoList) &#123;</span><br><span class="line">            System.out.print(<span class="string">&quot;PlayInfo.PlayURL = &quot;</span> + playInfo.getPlayURL() + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//Baseä¿¡æ¯</span></span><br><span class="line">        System.out.print(<span class="string">&quot;VideoBase.Title = &quot;</span> + acsResponse.getVideoBase().getTitle() + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        System.out.println(acsResponse);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ ¹æ®è§†é¢‘idè·å–è§†é¢‘æ’­æ”¾å‡­è¯"><a href="#æ ¹æ®è§†é¢‘idè·å–è§†é¢‘æ’­æ”¾å‡­è¯" class="headerlink" title="æ ¹æ®è§†é¢‘idè·å–è§†é¢‘æ’­æ”¾å‡­è¯"></a>æ ¹æ®è§†é¢‘idè·å–è§†é¢‘æ’­æ”¾å‡­è¯</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClientException </span>&#123;</span><br><span class="line">    <span class="comment">// æ ¹æ®è§†é¢‘idè·å¾—è§†é¢‘å‡­è¯</span></span><br><span class="line">    <span class="comment">// åˆ›å»ºåˆå§‹åŒ–å¯¹è±¡(ä¼ å…¥ossçš„idå’Œç§˜é’¥)</span></span><br><span class="line">    DefaultAcsClient client = InitObject.initVodClient(<span class="string">&quot;&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="comment">// åˆ›å»ºè·å–è§†é¢‘åœ°å€çš„request</span></span><br><span class="line">    GetVideoPlayAuthRequest request = <span class="keyword">new</span> GetVideoPlayAuthRequest();</span><br><span class="line">    <span class="comment">// å‘requestä¸­è®¾ç½®id</span></span><br><span class="line">    request.setVideoId(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="comment">// è°ƒç”¨åˆå§‹åŒ–å¯¹è±¡çš„æ–¹æ³•ï¼Œä¼ é€’requestï¼Œè·å–response</span></span><br><span class="line">    GetVideoPlayAuthResponse acsResponse = client.getAcsResponse(request);</span><br><span class="line">    System.out.println(<span class="string">&quot;è§†é¢‘å‡­è¯: &quot;</span> + acsResponse.getPlayAuth());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¸Šä¼ è§†é¢‘"><a href="#ä¸Šä¼ è§†é¢‘" class="headerlink" title="ä¸Šä¼ è§†é¢‘"></a>ä¸Šä¼ è§†é¢‘</h4><blockquote><p>è¿™é‡Œæ³¨æ„ï¼Œå¦‚æœä½¿ç”¨uploadçš„ç‰ˆæœ¬ä¸º1.4.14ï¼Œé‚£ä¹ˆæ ¹æ®å®˜æ–¹æ–‡æ¡£è¯´æ˜ï¼Œoss-sdkçš„ç‰ˆæœ¬å¿…é¡»ä¸º3.9åŠä»¥ä¸Šï¼Œå¦åˆ™ä¼šæ˜¾ç¤ºä¸€ç›´ä¸Šä¼ ä¸­</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClientException </span>&#123;</span><br><span class="line">    String accessKeyId = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    String accessKeySecret = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    String title = <span class="string">&quot;6 - What If I Want to Move Faster - upload by sdk&quot;</span>;   <span class="comment">//ä¸Šä¼ ä¹‹åæ–‡ä»¶åç§°</span></span><br><span class="line">    String fileName = <span class="string">&quot;D:/MyProject/6 - What If I Want to Move Faster.mp4&quot;</span>;  <span class="comment">//æœ¬åœ°æ–‡ä»¶è·¯å¾„å’Œåç§°</span></span><br><span class="line">    <span class="comment">//ä¸Šä¼ è§†é¢‘çš„æ–¹æ³•</span></span><br><span class="line">    UploadVideoRequest request = <span class="keyword">new</span> UploadVideoRequest(accessKeyId, accessKeySecret, title, fileName);</span><br><span class="line">    <span class="comment">/* å¯æŒ‡å®šåˆ†ç‰‡ä¸Šä¼ æ—¶æ¯ä¸ªåˆ†ç‰‡çš„å¤§å°ï¼Œé»˜è®¤ä¸º2Må­—èŠ‚ */</span></span><br><span class="line">    request.setPartSize(<span class="number">2</span> * <span class="number">1024</span> * <span class="number">1024L</span>);</span><br><span class="line">    <span class="comment">/* å¯æŒ‡å®šåˆ†ç‰‡ä¸Šä¼ æ—¶çš„å¹¶å‘çº¿ç¨‹æ•°ï¼Œé»˜è®¤ä¸º1ï¼Œ(æ³¨ï¼šè¯¥é…ç½®ä¼šå ç”¨æœåŠ¡å™¨CPUèµ„æºï¼Œéœ€æ ¹æ®æœåŠ¡å™¨æƒ…å†µæŒ‡å®šï¼‰*/</span></span><br><span class="line">    request.setTaskNum(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    UploadVideoImpl uploader = <span class="keyword">new</span> UploadVideoImpl();</span><br><span class="line">    UploadVideoResponse response = uploader.uploadVideo(request);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (response.isSuccess()) &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;VideoId=&quot;</span> + response.getVideoId() + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">/* å¦‚æœè®¾ç½®å›è°ƒURLæ— æ•ˆï¼Œä¸å½±å“è§†é¢‘ä¸Šä¼ ï¼Œå¯ä»¥è¿”å›VideoIdåŒæ—¶ä¼šè¿”å›é”™è¯¯ç ã€‚å…¶ä»–æƒ…å†µä¸Šä¼ å¤±è´¥æ—¶ï¼ŒVideoIdä¸ºç©ºï¼Œæ­¤æ—¶éœ€è¦æ ¹æ®è¿”å›é”™è¯¯ç åˆ†æå…·ä½“é”™è¯¯åŸå›  */</span></span><br><span class="line">        System.out.print(<span class="string">&quot;VideoId=&quot;</span> + response.getVideoId() + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        System.out.print(<span class="string">&quot;ErrorCode=&quot;</span> + response.getCode() + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        System.out.print(<span class="string">&quot;ErrorMessage=&quot;</span> + response.getMessage() + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è¯¾ç¨‹å¢åŠ ã€åˆ é™¤å°èŠ‚ï¼ˆè§†é¢‘ï¼‰åŠŸèƒ½ï¼ˆå®Œå–„ï¼‰"><a href="#è¯¾ç¨‹å¢åŠ ã€åˆ é™¤å°èŠ‚ï¼ˆè§†é¢‘ï¼‰åŠŸèƒ½ï¼ˆå®Œå–„ï¼‰" class="headerlink" title="è¯¾ç¨‹å¢åŠ ã€åˆ é™¤å°èŠ‚ï¼ˆè§†é¢‘ï¼‰åŠŸèƒ½ï¼ˆå®Œå–„ï¼‰"></a>è¯¾ç¨‹å¢åŠ ã€åˆ é™¤å°èŠ‚ï¼ˆè§†é¢‘ï¼‰åŠŸèƒ½ï¼ˆå®Œå–„ï¼‰</h2><h3 id="åç«¯-2"><a href="#åç«¯-2" class="headerlink" title="åç«¯"></a>åç«¯</h3><h4 id="é…ç½®æ–‡ä»¶application-properties"><a href="#é…ç½®æ–‡ä»¶application-properties" class="headerlink" title="é…ç½®æ–‡ä»¶application.properties"></a>é…ç½®æ–‡ä»¶application.properties</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœåŠ¡ç«¯å£</span></span><br><span class="line"><span class="meta">server.port</span>=<span class="string">8003</span></span><br><span class="line"><span class="comment"># æœåŠ¡å</span></span><br><span class="line"><span class="meta">spring.application.name</span>=<span class="string">service-vod</span></span><br><span class="line"><span class="comment"># ç¯å¢ƒè®¾ç½®ï¼šdevã€testã€prod</span></span><br><span class="line"><span class="meta">spring.profiles.active</span>=<span class="string">dev</span></span><br><span class="line"><span class="comment">#é˜¿é‡Œäº‘ vod</span></span><br><span class="line"><span class="comment">#ä¸åŒçš„æœåŠ¡å™¨ï¼Œåœ°å€ä¸åŒ</span></span><br><span class="line"><span class="meta">aliyun.vod.file.keyid</span>=<span class="string"></span></span><br><span class="line"><span class="meta">aliyun.vod.file.keysecret</span>=<span class="string"></span></span><br><span class="line"><span class="comment"># æœ€å¤§ä¸Šä¼ å•ä¸ªæ–‡ä»¶å¤§å°ï¼šé»˜è®¤1M</span></span><br><span class="line"><span class="meta">spring.servlet.multipart.max-file-size</span>=<span class="string">1024MB</span></span><br><span class="line"><span class="comment"># æœ€å¤§ç½®æ€»ä¸Šä¼ çš„æ•°æ®å¤§å° ï¼šé»˜è®¤10M</span></span><br><span class="line"><span class="meta">spring.servlet.multipart.max-request-size</span>=<span class="string">1024MB</span></span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™å¸¸é‡ç±»"><a href="#ç¼–å†™å¸¸é‡ç±»" class="headerlink" title="ç¼–å†™å¸¸é‡ç±»"></a>ç¼–å†™å¸¸é‡ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç±»å­˜å‚¨é…ç½®æ–‡ä»¶ä¸­çš„æ•°æ®ä»¥ä¾¿è°ƒç”¨</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConstantVodUtils</span> <span class="keyword">implements</span> <span class="title">InitializingBean</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;aliyun.vod.file.keyid&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String keyid;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;aliyun.vod.file.keysecret&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String keysecret;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String ACCESS_KEY_SECRET;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String ACCESS_KEY_ID;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        ACCESS_KEY_ID = keyid;</span><br><span class="line">        ACCESS_KEY_SECRET = keysecret;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™åˆå§‹åŒ–VodClient"><a href="#ç¼–å†™åˆå§‹åŒ–VodClient" class="headerlink" title="ç¼–å†™åˆå§‹åŒ–VodClient"></a>ç¼–å†™åˆå§‹åŒ–VodClient</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InitVodClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DefaultAcsClient <span class="title">initVodClient</span><span class="params">(String accessKeyId, String accessKeySecret)</span> <span class="keyword">throws</span> ClientException </span>&#123;</span><br><span class="line">        String regionId = <span class="string">&quot;cn-shanghai&quot;</span>;  <span class="comment">// ç‚¹æ’­æœåŠ¡æ¥å…¥åŒºåŸŸ</span></span><br><span class="line">        DefaultProfile profile = DefaultProfile.getProfile(regionId, accessKeyId, accessKeySecret);</span><br><span class="line">        DefaultAcsClient client = <span class="keyword">new</span> DefaultAcsClient(profile);</span><br><span class="line">        <span class="keyword">return</span> client;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºå¯åŠ¨ç±»"><a href="#åˆ›å»ºå¯åŠ¨ç±»" class="headerlink" title="åˆ›å»ºå¯åŠ¨ç±»"></a>åˆ›å»ºå¯åŠ¨ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication(exclude = DataSourceAutoConfiguration.class)</span> <span class="comment">// ä¸éœ€è¦å¼•å…¥æ•°æ®åº“çš„é…ç½®</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &#123;&quot;com.atguigu&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VodApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(VodApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™controller-1"><a href="#ç¼–å†™controller-1" class="headerlink" title="ç¼–å†™controller"></a>ç¼–å†™controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/eduvod/video&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VodController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> VodService vodService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸Šä¼ è§†é¢‘è‡³é˜¿é‡Œäº‘</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;uploadVideo&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">uploadVideo</span><span class="params">(MultipartFile file)</span> </span>&#123;</span><br><span class="line">        String videoId = vodService.uploadVideo(file);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ ¹æ®idåˆ é™¤è§†é¢‘</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;removeVideo/&#123;videoId&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">removeVideo</span><span class="params">(<span class="meta">@PathVariable</span> String videoId)</span> </span>&#123;</span><br><span class="line">        vodService.removeVideo(videoId);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™service-1"><a href="#ç¼–å†™service-1" class="headerlink" title="ç¼–å†™service"></a>ç¼–å†™service</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VodServiceImpl</span> <span class="keyword">implements</span> <span class="title">VodService</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä¸Šä¼ è§†é¢‘è‡³é˜¿é‡Œäº‘</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">uploadVideo</span><span class="params">(MultipartFile file)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//fileNameï¼šä¸Šä¼ æ–‡ä»¶åŸå§‹åç§°</span></span><br><span class="line">            String fileName = file.getOriginalFilename();</span><br><span class="line">            <span class="comment">//titleï¼šä¸Šä¼ ä¹‹åæ˜¾ç¤ºåç§°</span></span><br><span class="line">            String title = fileName.substring(<span class="number">0</span>, fileName.lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line">            <span class="comment">//inputStreamï¼šä¸Šä¼ æ–‡ä»¶è¾“å…¥æµ</span></span><br><span class="line">            InputStream inputStream = file.getInputStream();</span><br><span class="line">            <span class="comment">//accessKeyId, accessKeySecret</span></span><br><span class="line">            UploadStreamRequest request = <span class="keyword">new</span> UploadStreamRequest(ConstantVodUtils.ACCESS_KEY_ID, ConstantVodUtils.ACCESS_KEY_SECRET, title, fileName, inputStream);</span><br><span class="line"></span><br><span class="line">            UploadVideoImpl uploader = <span class="keyword">new</span> UploadVideoImpl();</span><br><span class="line">            UploadStreamResponse response = uploader.uploadStream(request);</span><br><span class="line"></span><br><span class="line">            String videoId = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">if</span> (response.isSuccess()) &#123;</span><br><span class="line">                videoId = response.getVideoId();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">//å¦‚æœè®¾ç½®å›è°ƒURLæ— æ•ˆï¼Œä¸å½±å“è§†é¢‘ä¸Šä¼ ï¼Œå¯ä»¥è¿”å›VideoIdåŒæ—¶ä¼šè¿”å›é”™è¯¯ç ã€‚å…¶ä»–æƒ…å†µä¸Šä¼ å¤±è´¥æ—¶ï¼ŒVideoIdä¸ºç©ºï¼Œæ­¤æ—¶éœ€è¦æ ¹æ®è¿”å›é”™è¯¯ç åˆ†æå…·ä½“é”™è¯¯åŸå› </span></span><br><span class="line">                System.out.print(<span class="string">&quot;VideoId=&quot;</span> + response.getVideoId() + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">                System.out.print(<span class="string">&quot;ErrorCode=&quot;</span> + response.getCode() + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">                System.out.print(<span class="string">&quot;ErrorMessage=&quot;</span> + response.getMessage() + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> videoId;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ ¹æ®idåˆ é™¤è§†é¢‘</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeVideo</span><span class="params">(String videoId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// åˆå§‹åŒ–å¯¹è±¡</span></span><br><span class="line">            DefaultAcsClient client = InitVodClient.initVodClient(ConstantVodUtils.ACCESS_KEY_ID, ConstantVodUtils.ACCESS_KEY_SECRET);</span><br><span class="line">            <span class="comment">// åˆ›å»ºåˆ é™¤videoçš„requestå¯¹è±¡,å¹¶è®¾ç½®id</span></span><br><span class="line">            DeleteVideoRequest request = <span class="keyword">new</span> DeleteVideoRequest();</span><br><span class="line">            request.setVideoIds(videoId);</span><br><span class="line">            <span class="comment">// è°ƒç”¨åˆå§‹åŒ–å¯¹è±¡æ–¹æ³•</span></span><br><span class="line">            DeleteVideoResponse acsResponse = client.getAcsResponse(request);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;åˆ é™¤è§†é¢‘å¤±è´¥&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‰ç«¯-3"><a href="#å‰ç«¯-3" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h3><h4 id="api-3"><a href="#api-3" class="headerlink" title="api"></a>api</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ é™¤å°èŠ‚è§†é¢‘</span></span><br><span class="line">    deleteVideoAli(videoId) &#123;</span><br><span class="line">        <span class="keyword">return</span> request(&#123;</span><br><span class="line">            url: `/eduvod/video/removeVideo/` + videoId,</span><br><span class="line">            method: <span class="string">&#x27;delete&#x27;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="vueæ¨¡æ¿"><a href="#vueæ¨¡æ¿" class="headerlink" title="vueæ¨¡æ¿"></a>vueæ¨¡æ¿</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:on-success</span>=<span class="string">&quot;handleVodUploadSuccess&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:on-remove</span>=<span class="string">&quot;handleVodRemove&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:before-remove</span>=<span class="string">&quot;beforeVodRemove&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:on-exceed</span>=<span class="string">&quot;handleUploadExceed&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:file-list</span>=<span class="string">&quot;fileList&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:action</span>=<span class="string">&quot;BASE_API+&#x27;/eduvod/video/uploadVideo&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:limit</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;upload-demo&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;small&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>ä¸Šä¼ è§†é¢‘<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-tooltip</span> <span class="attr">placement</span>=<span class="string">&quot;right-end&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;content&quot;</span>&gt;</span>æœ€å¤§æ”¯æŒ1Gï¼Œ<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        æ”¯æŒ3GPã€ASFã€AVIã€DATã€DVã€FLVã€F4Vã€<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        GIFã€M2Tã€M4Vã€MJ2ã€MJPEGã€MKVã€MOVã€MP4ã€<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        MPEã€MPGã€MPEGã€MTSã€OGGã€QTã€RMã€RMVBã€<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        SWFã€TSã€VOBã€WMVã€WEBM ç­‰è§†é¢‘æ ¼å¼ä¸Šä¼ <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-question&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-tooltip</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="è°ƒç”¨æ–¹æ³•"><a href="#è°ƒç”¨æ–¹æ³•" class="headerlink" title="è°ƒç”¨æ–¹æ³•"></a>è°ƒç”¨æ–¹æ³•</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ é™¤ä¹‹å‰</span></span><br><span class="line"><span class="function"><span class="title">beforeVodRemove</span>(<span class="params">file, fileList</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.$confirm(<span class="string">`ç¡®å®šç§»é™¤<span class="subst">$&#123;file.name&#125;</span>?`</span>)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// åˆ é™¤ä¸Šä¼ è§†é¢‘</span></span><br><span class="line"><span class="function"><span class="title">handleVodRemove</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="comment">// è°ƒç”¨æ¥å£</span></span><br><span class="line">  videoApi.deleteVideoAli(<span class="built_in">this</span>.video.videoSourceId).then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æç¤º</span></span><br><span class="line">    <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;åˆ é™¤æˆåŠŸ!&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// åˆ·æ–°fileList å’Œ resourceId</span></span><br><span class="line">    <span class="built_in">this</span>.fileList = []</span><br><span class="line">    <span class="built_in">this</span>.video.videoSourceId = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// ä¸Šä¼ vodæˆåŠŸ</span></span><br><span class="line"><span class="function"><span class="title">handleVodUploadSuccess</span>(<span class="params">response, file, fileList</span>)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.video.videoSourceId = response.data.videoId</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// é‡æ–°ä¸Šä¼ æç¤º</span></span><br><span class="line"><span class="function"><span class="title">handleUploadExceed</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.$message.warning(<span class="string">&#x27;æƒ³è¦é‡æ–°ä¸Šä¼ è§†é¢‘ï¼Œè¯·å…ˆåˆ é™¤å·²ä¸Šä¼ çš„è§†é¢‘&#x27;</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•-1"><a href="#æµ‹è¯•-1" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><blockquote><p>æ³¨æ„è¿™é‡Œï¼Œè¦ä¿®æ”¹nginxçš„ä¸Šä¼ æ–‡ä»¶å¤§å°</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line">    client_max_body_size 1024m;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><ol><li>ç”±äºcontrollerä¸­è¿”å›dataåªæœ‰videoIdï¼Œæ‰€ä»¥ä»åç«¯æ‹¿ä¸åˆ°åŸå§‹æ–‡ä»¶å—ï¼Œæ‰€ä»¥ä»å‰ç«¯èµ‹å€¼å³å¯</li><li>åˆ é™¤è§†é¢‘åè¦æ¸…ç©ºsourceIdï¼Œè¦ä¸ç„¶ä¸ä¸Šä¼ è§†é¢‘ä¹Ÿæœ‰idå­˜ç•™</li></ol></blockquote><h2 id="springcloudå¾®æœåŠ¡ï¼ˆåˆ é™¤å°èŠ‚åŠŸèƒ½å®Œå–„ï¼‰"><a href="#springcloudå¾®æœåŠ¡ï¼ˆåˆ é™¤å°èŠ‚åŠŸèƒ½å®Œå–„ï¼‰" class="headerlink" title="springcloudå¾®æœåŠ¡ï¼ˆåˆ é™¤å°èŠ‚åŠŸèƒ½å®Œå–„ï¼‰"></a>springcloudå¾®æœåŠ¡ï¼ˆåˆ é™¤å°èŠ‚åŠŸèƒ½å®Œå–„ï¼‰</h2><h3 id="springcloud"><a href="#springcloud" class="headerlink" title="springcloud"></a>springcloud</h3><blockquote><p>æœåŠ¡é›†åˆï¼ŒTODO</p></blockquote><h4 id="springcloudè°ƒç”¨æ¥å£è¿‡ç¨‹"><a href="#springcloudè°ƒç”¨æ¥å£è¿‡ç¨‹" class="headerlink" title="springcloudè°ƒç”¨æ¥å£è¿‡ç¨‹"></a>springcloudè°ƒç”¨æ¥å£è¿‡ç¨‹</h4><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210927131506299.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210927131506299.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210927131506299"></p><h3 id="NacosæœåŠ¡æ³¨å†Œ"><a href="#NacosæœåŠ¡æ³¨å†Œ" class="headerlink" title="NacosæœåŠ¡æ³¨å†Œ"></a>NacosæœåŠ¡æ³¨å†Œ</h3><blockquote><p>æ³¨å†Œä¸­å¿ƒ</p><p><a href="https://nacos.io/zh-cn/">home (nacos.io)</a></p></blockquote><h4 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h4><blockquote><p>ä¸‹è½½å¹¶è§£å‹ï¼Œç„¶åå¯åŠ¨startup.cmdå³å¯ï¼Œå¯èƒ½ä¼šå¯åŠ¨å¤±è´¥ï¼Œéœ€è¦ä¿®æ”¹MODEä¸ºstandalone</p><p><a href="https://blog.csdn.net/CC1014524900/article/details/109073654">Nacos å¯åŠ¨å¤±è´¥_RookieMZL çš„åšå®¢-CSDNåšå®¢_nacoså¯åŠ¨å¤±è´¥</a></p></blockquote><h4 id="ä¾èµ–"><a href="#ä¾èµ–" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h4><blockquote><p>å…ˆå¼•å…¥ä¾èµ–</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æœåŠ¡æ³¨å†Œ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><blockquote><p>åœ¨è¦æ³¨å†Œçš„æœåŠ¡çš„é…ç½®æ–‡ä»¶application.propertiesä¸­é…ç½®</p></blockquote><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># nacosæœåŠ¡åœ°å€</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.discovery.server-addr</span>=<span class="string">127.0.0.1:8848</span></span><br></pre></td></tr></table></figure><h4 id="æ³¨è§£"><a href="#æ³¨è§£" class="headerlink" title="æ³¨è§£"></a>æ³¨è§£</h4><blockquote><p>åœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ æ³¨è§£</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableDiscoveryClient</span>  <span class="comment">// nacosæ³¨å†Œ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(EduApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•-2"><a href="#æµ‹è¯•-2" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><blockquote><p>è‡´å‘½bugï¼Œspringbootçš„ç‰ˆæœ¬è¦2.2.xæ‰è¡Œï¼Œè¦ä¸ç„¶applicationå¯åŠ¨ä¸èµ·æ¥</p><p><a href="http://localhost:8848/nacos">http://localhost:8848/nacos</a></p></blockquote><h3 id="FeignæœåŠ¡è°ƒç”¨"><a href="#FeignæœåŠ¡è°ƒç”¨" class="headerlink" title="FeignæœåŠ¡è°ƒç”¨"></a>FeignæœåŠ¡è°ƒç”¨</h3><blockquote><p>å‰ææ¡ä»¶ï¼šå°†äº’ç›¸è°ƒç”¨çš„æœåŠ¡åœ¨nacosæ³¨å†Œå®Œæ¯•</p></blockquote><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210927094513074.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210927094513074.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210927094513074"></p><h4 id="ä¾èµ–-1"><a href="#ä¾èµ–-1" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æœåŠ¡è°ƒç”¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ·»åŠ æ³¨è§£"><a href="#æ·»åŠ æ³¨è§£" class="headerlink" title="æ·»åŠ æ³¨è§£"></a>æ·»åŠ æ³¨è§£</h4><blockquote><p>åœ¨éœ€è¦è°ƒç”¨æœåŠ¡çš„å¯åŠ¨ç±»ä¸Šæ·»åŠ æ³¨è§£å¦‚ä¸‹</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &#123;&quot;com.atguigu&quot;&#125;)</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span>  <span class="comment">// nacosæ³¨å†Œ</span></span><br><span class="line"><span class="meta">@EnableFeignClients</span>     <span class="comment">// ä½¿ç”¨Feign</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(EduApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºæ¥å£"><a href="#åˆ›å»ºæ¥å£" class="headerlink" title="åˆ›å»ºæ¥å£"></a>åˆ›å»ºæ¥å£</h4><blockquote><p>åœ¨è°ƒç”¨ç«¯åˆ›å»ºæ¥å£ï¼Œä½¿ç”¨æ³¨è§£æŒ‡å®šéœ€è¦è°ƒç”¨å“ªä¸€ä¸ªæœåŠ¡ï¼Œå¹¶å®šä¹‰è°ƒç”¨çš„æ–¹æ³•å’Œè·¯å¾„</p><p>æ³¨æ„ç»“æ„ï¼ˆservice_eduè¦è°ƒç”¨service_vodçš„åŠŸèƒ½ï¼‰</p><p>@ Feignclientæ³¨è§£ç”¨äºæŒ‡å®šä»å“ªä¸ªæœåŠ¡ä¸­è°ƒç”¨åŠŸèƒ½,åç§°ä¸è¢«è°ƒç”¨çš„æœåŠ¡åä¿æŒè‡´ã€‚<br>@ GetMappingæ³¨è§£ç”¨äºå¯¹è¢«è°ƒç”¨çš„å¾®æœåŠ¡è¿›è¡Œåœ°å€æ˜ å°„<br>@ PathVariableæ³¨è§£å®šè¦æŒ‡å®šå‚æ•°åç§°,å¦åˆ™å‡ºé”™<br>@ Componentæ³¨è§£é˜²æ­¢,åœ¨å…¶ä»–ä½ç½®æ³¨å…¥ Codclientæ—¶ideaæŠ¥é”™</p></blockquote><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210927095233245.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210927095233245.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210927095233245"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient(&quot;service-vod&quot;)</span> <span class="comment">// è°ƒç”¨æœåŠ¡ï¼ˆæœåŠ¡åï¼‰ï¼Œè¿™é‡Œçš„æœåŠ¡åè¦å’Œå¯¹åº”æœåŠ¡çš„é…ç½®æ–‡ä»¶ä¸­çš„spring.application.nameå¯¹åº”</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">VodClient</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰è¦è°ƒç”¨çš„æ–¹æ³•çš„è·¯å¾„ï¼ˆæ³¨æ„è¦å®Œå…¨è·¯å¾„ï¼‰</span></span><br><span class="line">    <span class="comment">// æ ¹æ®idåˆ é™¤è§†é¢‘</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/eduvod/video/removeVideo/&#123;videoId&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">removeVideo</span><span class="params">(<span class="meta">@PathVariable(&quot;videoId&quot;)</span> String videoId)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„è¿™é‡Œçš„@FeignClient(â€œservice-vodâ€)ï¼ŒæœåŠ¡åä¸èƒ½ä½¿ç”¨ä¸‹åˆ’çº¿</p></blockquote><h4 id="å®ç°è°ƒç”¨ï¼ˆåˆ é™¤å°èŠ‚ï¼‰"><a href="#å®ç°è°ƒç”¨ï¼ˆåˆ é™¤å°èŠ‚ï¼‰" class="headerlink" title="å®ç°è°ƒç”¨ï¼ˆåˆ é™¤å°èŠ‚ï¼‰"></a>å®ç°è°ƒç”¨ï¼ˆåˆ é™¤å°èŠ‚ï¼‰</h4><blockquote><p>æ³¨å…¥æ¥å£ï¼Œè°ƒç”¨æ¥å£æ–¹æ³•å³å¯</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/eduservice/video&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span>    <span class="comment">// è·¨åŸŸ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduVideoController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> VodClient vodClient;    <span class="comment">// æ³¨å…¥æ¥å£è°ƒç”¨å…¶ä»–æœåŠ¡</span></span><br><span class="line">    <span class="comment">// TODO åˆ é™¤å°èŠ‚</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;&#123;videoId&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">deleteVideo</span><span class="params">(<span class="meta">@PathVariable(&quot;videoId&quot;)</span> String videoId)</span> </span>&#123;</span><br><span class="line">       <span class="comment">// å®ç°è°ƒç”¨åˆ é™¤é˜¿é‡Œäº‘è§†é¢‘ï¼Œè¿™é‡Œéœ€è¦çš„æ˜¯sourceID</span></span><br><span class="line">        EduVideo eduVideo = videoService.getById(videoId);</span><br><span class="line">        String videoSourceId = eduVideo.getVideoSourceId();</span><br><span class="line">        vodClient.removeVideo(videoSourceId);</span><br><span class="line">        <span class="comment">// åˆ é™¤æ•°æ®åº“è§†é¢‘</span></span><br><span class="line">        videoService.removeById(videoId);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœä¸æˆåŠŸrerunä¸€ä¸‹å°±è¡Œäº†</p></blockquote><h3 id="Hystrixç†”æ–­å™¨"><a href="#Hystrixç†”æ–­å™¨" class="headerlink" title="Hystrixç†”æ–­å™¨"></a>Hystrixç†”æ–­å™¨</h3><blockquote><p>æä¾›å»¶è¿Ÿä¸å®¹é”™åŠŸèƒ½</p></blockquote><h4 id="æ·»åŠ ä¾èµ–"><a href="#æ·»åŠ ä¾èµ–" class="headerlink" title="æ·»åŠ ä¾èµ–"></a>æ·»åŠ ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ribbnè´Ÿè½½å‡è¡¡ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-ribbon<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--hystrixä¾èµ–ï¼Œä¸»è¦æ˜¯ç”¨  @HystrixCommand --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="è°ƒç”¨ç«¯é…ç½®"><a href="#è°ƒç”¨ç«¯é…ç½®" class="headerlink" title="è°ƒç”¨ç«¯é…ç½®"></a>è°ƒç”¨ç«¯é…ç½®</h4><blockquote><p>æ³¨æ„æ˜¯åœ¨è°ƒç”¨ç«¯ï¼Œå¼€å¯ç†”æ–­å™¨é…ç½®ï¼Œä¹Ÿå¯ä½¿è®¾ç½®è¶…æ—¶æ—¶é—´</p></blockquote><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hytrixå¼€å¯ç†”æ–­æœºåˆ¶</span></span><br><span class="line"><span class="meta">feign.hystrix.enabled</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºæ¥å£å¯¹åº”å®ç°ç±»"><a href="#åˆ›å»ºæ¥å£å¯¹åº”å®ç°ç±»" class="headerlink" title="åˆ›å»ºæ¥å£å¯¹åº”å®ç°ç±»"></a>åˆ›å»ºæ¥å£å¯¹åº”å®ç°ç±»</h4><blockquote><p>ç¼–å†™å‡ºé”™æ—¶çš„è¾“å‡ºä¿¡æ¯ï¼Œå®ç°FeignClientæ¥å£</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VodFileDegradeFeignClient</span> <span class="keyword">implements</span> <span class="title">VodClient</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">removeVideo</span><span class="params">(String videoId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> R.error().message(<span class="string">&quot;å‡ºé”™äº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">deleteVideoBatch</span><span class="params">(List&lt;String&gt; videoIdList)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> R.error().message(<span class="string">&quot;å‡ºé”™äº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ¥å£æ·»åŠ å±æ€§"><a href="#æ¥å£æ·»åŠ å±æ€§" class="headerlink" title="æ¥å£æ·»åŠ å±æ€§"></a>æ¥å£æ·»åŠ å±æ€§</h4><blockquote><p>feignClientæ·»åŠ æ³¨è§£å’Œå±æ€§</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fallback = &quot;å®ç°ç±»çš„class&quot;ï¼Œç†”æ–­å™¨</span></span><br><span class="line"><span class="meta">@FeignClient(name = &quot;service-vod&quot;, fallback = VodFileDegradeFeignClient.class)</span></span><br><span class="line"><span class="comment">// è°ƒç”¨æœåŠ¡ï¼ˆæœåŠ¡åï¼‰ï¼Œè¿™é‡Œçš„æœåŠ¡åè¦å’Œå¯¹åº”æœåŠ¡çš„é…ç½®æ–‡ä»¶ä¸­çš„spring.application.nameå¯¹åº”</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">VodClient</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤è¯¾ç¨‹ï¼ˆåŠŸèƒ½å®Œå–„ï¼‰"><a href="#åˆ é™¤è¯¾ç¨‹ï¼ˆåŠŸèƒ½å®Œå–„ï¼‰" class="headerlink" title="åˆ é™¤è¯¾ç¨‹ï¼ˆåŠŸèƒ½å®Œå–„ï¼‰"></a>åˆ é™¤è¯¾ç¨‹ï¼ˆåŠŸèƒ½å®Œå–„ï¼‰</h2><blockquote><p>åˆ é™¤è§†é¢‘ï¼Œåˆ é™¤è§†é¢‘ä¸‹çš„ç« èŠ‚å’Œå°èŠ‚</p></blockquote><h3 id="åç«¯-3"><a href="#åç«¯-3" class="headerlink" title="åç«¯"></a>åç«¯</h3><blockquote><p>videoä¸­çš„åˆ é™¤å°èŠ‚åŠŸèƒ½éœ€è¦è°ƒç”¨vodä¸­çš„åˆ é™¤</p></blockquote><h4 id="VodController"><a href="#VodController" class="headerlink" title="VodController"></a>VodController</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ é™¤å¤šä¸ªé˜¿é‡Œäº‘è§†é¢‘</span></span><br><span class="line"><span class="meta">@DeleteMapping(&quot;deleteVideoBatch&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">deleteVideoBatch</span><span class="params">(<span class="meta">@RequestParam(&quot;videoIdList&quot;)</span> List&lt;String&gt; videoIdList)</span> </span>&#123;</span><br><span class="line">    vodService.removeBatch(videoIdList);</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="VodService"><a href="#VodService" class="headerlink" title="VodService"></a>VodService</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ é™¤å¤šä¸ªé˜¿é‡Œäº‘è§†é¢‘</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeVideoBatch</span><span class="params">(List&lt;String&gt; videoIdList)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–å¯¹è±¡</span></span><br><span class="line">        DefaultAcsClient client = InitVodClient.initVodClient(ConstantVodUtils.ACCESS_KEY_ID, ConstantVodUtils.ACCESS_KEY_SECRET);</span><br><span class="line">        <span class="comment">// åˆ›å»ºåˆ é™¤videoçš„requestå¯¹è±¡,å¹¶è®¾ç½®id</span></span><br><span class="line">        DeleteVideoRequest request = <span class="keyword">new</span> DeleteVideoRequest();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°†listè½¬åŒ–æˆ1,2,3çš„æ ¼å¼</span></span><br><span class="line">        String list = StringUtils.join(videoIdList.toArray(), <span class="string">&quot;,&quot;</span>);</span><br><span class="line"></span><br><span class="line">        request.setVideoIds(list);</span><br><span class="line">        <span class="comment">// è°ƒç”¨åˆå§‹åŒ–å¯¹è±¡æ–¹æ³•</span></span><br><span class="line">        DeleteVideoResponse acsResponse = client.getAcsResponse(request);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;åˆ é™¤è§†é¢‘å¤±è´¥&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Feignè°ƒç”¨æ¥å£"><a href="#Feignè°ƒç”¨æ¥å£" class="headerlink" title="Feignè°ƒç”¨æ¥å£"></a>Feignè°ƒç”¨æ¥å£</h4><blockquote><p>è¿™æ˜¯service_eduä¸­çš„</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient(&quot;service-vod&quot;)</span> <span class="comment">// è°ƒç”¨æœåŠ¡ï¼ˆæœåŠ¡åï¼‰ï¼Œè¿™é‡Œçš„æœåŠ¡åè¦å’Œå¯¹åº”æœåŠ¡çš„é…ç½®æ–‡ä»¶ä¸­çš„spring.application.nameå¯¹åº”</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">VodClient</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰è¦è°ƒç”¨çš„æ–¹æ³•çš„è·¯å¾„ï¼ˆæ³¨æ„è¦å®Œå…¨è·¯å¾„ï¼‰</span></span><br><span class="line">    <span class="comment">// æ ¹æ®idåˆ é™¤è§†é¢‘</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/eduvod/video/removeVideo/&#123;videoId&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">removeVideo</span><span class="params">(<span class="meta">@PathVariable(&quot;videoId&quot;)</span> String videoId)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤å¤šä¸ªé˜¿é‡Œäº‘è§†é¢‘</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/eduvod/video/deleteVideoBatch&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">deleteVideoBatch</span><span class="params">(<span class="meta">@RequestParam(&quot;videoIdList&quot;)</span> List&lt;String&gt; videoIdList)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="videoMapper"><a href="#videoMapper" class="headerlink" title="videoMapper"></a>videoMapper</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.atguigu.eduservice.mapper.EduVideoMapper&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getVideoIdListByCourse&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;java.lang.String&quot;</span>&gt;</span></span><br><span class="line">        SELECT video_source_id</span><br><span class="line">        FROM `edu_video`</span><br><span class="line">        WHERE course_id = #&#123;courseId&#125;</span><br><span class="line">          AND video_source_id IS NOT NULL</span><br><span class="line">          AND video_source_id != &#x27;&#x27;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="videoService"><a href="#videoService" class="headerlink" title="videoService"></a>videoService</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduVideoServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">EduVideoMapper</span>, <span class="title">EduVideo</span>&gt; <span class="keyword">implements</span> <span class="title">EduVideoService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> VodClient vodClient;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ¹æ®è¯¾ç¨‹idåˆ é™¤å°èŠ‚</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeByCourseId</span><span class="params">(String courseId)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ é™¤è¯¥è¯¾ç¨‹ä¸‹çš„æ‰€æœ‰è§†é¢‘ï¼ˆé˜¿é‡Œäº‘ï¼‰</span></span><br><span class="line">        List&lt;String&gt; idList = baseMapper.getVideoIdListByCourse(courseId);</span><br><span class="line">        vodClient.deleteVideoBatch(idList);</span><br><span class="line">        <span class="comment">// åˆ é™¤å°èŠ‚ï¼ˆæ•°æ®åº“ï¼‰</span></span><br><span class="line">        QueryWrapper wrapper = <span class="keyword">new</span> QueryWrapper();</span><br><span class="line">        wrapper.eq(<span class="string">&quot;course_id&quot;</span>, courseId);</span><br><span class="line">        baseMapper.delete(wrapper);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•-3"><a href="#æµ‹è¯•-3" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><blockquote><p>OK</p></blockquote><h3 id="å‰ç«¯-4"><a href="#å‰ç«¯-4" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h3><blockquote><p>TODO</p></blockquote><blockquote><p>æ³¨æ„è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œç”±äºæˆ‘ç¡®å®šæŒ‰é’®æ²¡æœ‰ç»‘å®šæ˜¯å¦èƒ½å¤ŸæŒ‰ä¸‹çš„booleanå€¼ï¼Œæ‰€æœ‰åœ¨æ–‡ä»¶ä¸Šä¼ å®Œæˆä¹‹å‰æŒ‰ä¸‹ä¼šæ²¡æœ‰sourceIdï¼Œä¹‹åå†æ”¹</p></blockquote><h2 id="å¾…ç»­"><a href="#å¾…ç»­" class="headerlink" title="å¾…ç»­"></a>å¾…ç»­</h2><blockquote><p>åå°è¿˜æœ‰å¥½å¤šTODOå’Œå®Œå–„ï¼Œç«Ÿç„¶å°±ç›´æ¥è¿›å…¥å‰å°äº†ï¼Œå¥½å§è¿˜å¾—é è‡ªå·±</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> é¡¹ç›® </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> SpringCloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€é¡¹ç›®ç¬”è®°ã€‘åœ¨çº¿æ•™è‚²é¡¹ç›®å®æˆ˜3</title>
      <link href="/2021/09/24/xiang-mu-bi-ji-zai-xian-jiao-yu-xiang-mu-shi-zhan-3/"/>
      <url>/2021/09/24/xiang-mu-bi-ji-zai-xian-jiao-yu-xiang-mu-shi-zhan-3/</url>
      
        <content type="html"><![CDATA[<blockquote><h2 id="è¯¾ç¨‹ç®¡ç†æ¨¡å—"><a href="#è¯¾ç¨‹ç®¡ç†æ¨¡å—" class="headerlink" title="è¯¾ç¨‹ç®¡ç†æ¨¡å—"></a>è¯¾ç¨‹ç®¡ç†æ¨¡å—</h2></blockquote><h2 id="æ•°æ®åº“è¡¨å…³ç³»"><a href="#æ•°æ®åº“è¡¨å…³ç³»" class="headerlink" title="æ•°æ®åº“è¡¨å…³ç³»"></a>æ•°æ®åº“è¡¨å…³ç³»</h2><blockquote><p>courseç›¸å…³è¡¨ã€chapterã€videoã€teacherã€subjectâ€¦â€¦è¿™äº›è¡¨éƒ½éœ€è¦</p></blockquote><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210924111116027.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210924111116027.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210924111116027"></p><h2 id="ä»£ç ç”Ÿæˆå™¨"><a href="#ä»£ç ç”Ÿæˆå™¨" class="headerlink" title="ä»£ç ç”Ÿæˆå™¨"></a>ä»£ç ç”Ÿæˆå™¨</h2><blockquote><p>ç†Ÿæ‚‰çš„æ“ä½œï¼Œrunå°±å®Œäº‹äº†</p><p>è´´ä¸€ä¸‹é¡¹ç›®ç»“æ„</p></blockquote><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210924112051971.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210924112051971.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210924112051971"></p><blockquote><p>controllerè®°å¾—åŠ ä¸‹è·¨åŸŸæ³¨é‡Šï¼Œentityè®°å¾—åŠ ä¸‹è‡ªåŠ¨å¡«å……æ³¨é‡Šâ€¦â€¦</p></blockquote><h2 id="æ·»åŠ è¯¾ç¨‹ä¿¡æ¯ï¼ˆåç«¯ï¼‰"><a href="#æ·»åŠ è¯¾ç¨‹ä¿¡æ¯ï¼ˆåç«¯ï¼‰" class="headerlink" title="æ·»åŠ è¯¾ç¨‹ä¿¡æ¯ï¼ˆåç«¯ï¼‰"></a>æ·»åŠ è¯¾ç¨‹ä¿¡æ¯ï¼ˆåç«¯ï¼‰</h2><h3 id="voè¡¨å•æ•°æ®å°è£…ç±»"><a href="#voè¡¨å•æ•°æ®å°è£…ç±»" class="headerlink" title="voè¡¨å•æ•°æ®å°è£…ç±»"></a>voè¡¨å•æ•°æ®å°è£…ç±»</h3><blockquote><p>éœ€è¦ç”¨åˆ°è¡¨å•æäº¤æ•°æ®ï¼Œæ‰€ä»¥å†™ä¸€ä¸ªvoç±»å°è£…</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.eduservice.entity.vo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¡¨å•æäº¤æ•°æ®å°è£…å¯¹è±¡</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CourseInfoVo</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;è¯¾ç¨‹ID&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;è¯¾ç¨‹è®²å¸ˆID&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String teacherId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;è¯¾ç¨‹ä¸“ä¸šID&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String subjectId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;è¯¾ç¨‹æ ‡é¢˜&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;è¯¾ç¨‹é”€å”®ä»·æ ¼ï¼Œè®¾ç½®ä¸º0åˆ™å¯å…è´¹è§‚çœ‹&quot;)</span></span><br><span class="line">    <span class="comment">// 0.01</span></span><br><span class="line">    <span class="keyword">private</span> BigDecimal price;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;æ€»è¯¾æ—¶&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer lessonNum;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;è¯¾ç¨‹å°é¢å›¾ç‰‡è·¯å¾„&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String cover;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;è¯¾ç¨‹ç®€ä»‹&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™controller"><a href="#ç¼–å†™controller" class="headerlink" title="ç¼–å†™controller"></a>ç¼–å†™controller</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/eduservice/course&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span>    <span class="comment">// è·¨åŸŸ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduCourseController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduCourseService courseService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ·»åŠ è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;addCourseInfo&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">addCourseInfo</span><span class="params">(<span class="meta">@RequestBody</span> CourseInfoVo courseInfoVo)</span> </span>&#123;</span><br><span class="line">        courseService.saveCourseInfo(courseInfoVo);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™service"><a href="#ç¼–å†™service" class="headerlink" title="ç¼–å†™service"></a>ç¼–å†™service</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduCourseServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">EduCourseMapper</span>, <span class="title">EduCourse</span>&gt; <span class="keyword">implements</span> <span class="title">EduCourseService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduCourseDescriptionService courseDescriptionService;</span><br><span class="line"></span><br><span class="line">     <span class="comment">// æ·»åŠ è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveCourseInfo</span><span class="params">(CourseInfoVo courseInfoVo)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å‘è¯¾ç¨‹è¡¨ä¸­æ·»åŠ è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">        EduCourse eduCourse = <span class="keyword">new</span> EduCourse();</span><br><span class="line">        BeanUtils.copyProperties(courseInfoVo, eduCourse);</span><br><span class="line">        <span class="keyword">int</span> affectRow = baseMapper.insert(eduCourse);</span><br><span class="line">        <span class="keyword">if</span> (affectRow &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;æ·»åŠ è¯¾ç¨‹å¤±è´¥&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å‘è¯¾ç¨‹ç®€ä»‹è¡¨ä¸­æ·»åŠ è¯¾ç¨‹ç®€ä»‹ä¿¡æ¯</span></span><br><span class="line">        <span class="comment">// æ³¨æ„baseMapperæ·»åŠ çš„æ˜¯å½“å‰serviceå¯¹åº”çš„è¡¨,ä½¿ç”¨å¯¹åº”çš„serviceå³å¯</span></span><br><span class="line">        EduCourseDescription courseDescription = <span class="keyword">new</span> EduCourseDescription();</span><br><span class="line">        courseDescription.setId(eduCourse.getId()); <span class="comment">// è¿™é‡Œè¦ä¿è¯ä¸¤å¼ è¡¨idç›¸åŒï¼ˆ1-1å…³ç³»ï¼‰</span></span><br><span class="line">        courseDescription.setDescription(courseInfoVo.getDescription());</span><br><span class="line">        courseDescriptionService.save(courseDescription);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åŒæ—¶éœ€è¦å®ä½“ç±»ä¸­çš„idå±æ€§ä¸ºæ‰‹åŠ¨è¾“å…¥ï¼Œè€Œä¸æ˜¯è‡ªåŠ¨ç”Ÿæˆ</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduCourseDescription</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;è¯¾ç¨‹ID&quot;)</span></span><br><span class="line">    <span class="meta">@TableId(value = &quot;id&quot;, type = IdType.INPUT)</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><blockquote><p>courseå’Œdescriptionè¡¨ä¸­idä¸€æ ·</p></blockquote><h2 id="æ·»åŠ è¯¾ç¨‹ä¿¡æ¯ï¼ˆå‰ç«¯ï¼‰"><a href="#æ·»åŠ è¯¾ç¨‹ä¿¡æ¯ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="æ·»åŠ è¯¾ç¨‹ä¿¡æ¯ï¼ˆå‰ç«¯ï¼‰"></a>æ·»åŠ è¯¾ç¨‹ä¿¡æ¯ï¼ˆå‰ç«¯ï¼‰</h2><h3 id="æ·»åŠ router"><a href="#æ·»åŠ router" class="headerlink" title="æ·»åŠ router"></a>æ·»åŠ router</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯¾ç¨‹ä¿¡æ¯ç®¡ç†æ¨¡å—è·¯ç”±</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/course&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: Layout,</span><br><span class="line">  <span class="attr">redirect</span>: <span class="string">&#x27;/course/list&#x27;</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;è¯¾ç¨‹ç®¡ç†&#x27;</span>,</span><br><span class="line">  <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;è¯¾ç¨‹ç®¡ç†&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;example&#x27;</span> &#125;,</span><br><span class="line">  <span class="attr">children</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;list&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;è¯¾ç¨‹åˆ—è¡¨&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/edu/course/list&#x27;</span>),</span><br><span class="line">      <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;è¯¾ç¨‹åˆ†ç±»åˆ—è¡¨&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;tree&#x27;</span> &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;info&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;æ·»åŠ è¯¾ç¨‹&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/edu/course/info&#x27;</span>),</span><br><span class="line">      <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;æ·»åŠ è¯¾ç¨‹&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;table&#x27;</span> &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;info/:id&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;EduCourseInfoEdit&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/edu/course/info&#x27;</span>),</span><br><span class="line">      <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;ç¼–è¾‘è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;table&#x27;</span> &#125;,</span><br><span class="line">      <span class="comment">// ä¸æ˜¾ç¤ºè¯¥è·¯ç”±(éšè—è·¯ç”±)</span></span><br><span class="line">      <span class="attr">hidden</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;chapter/:id&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;EduCourseChapterEdit&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/edu/course/chapter&#x27;</span>),</span><br><span class="line">      <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;ç¼–è¾‘è¯¾ç¨‹å¤§çº²&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;table&#x27;</span> &#125;,</span><br><span class="line">      <span class="comment">// ä¸æ˜¾ç¤ºè¯¥è·¯ç”±(éšè—è·¯ç”±)</span></span><br><span class="line">      <span class="attr">hidden</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;publish/:id&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;EduCoursePublishEdit&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/edu/course/publish&#x27;</span>),</span><br><span class="line">      <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;å‘å¸ƒè¯¾ç¨‹&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;table&#x27;</span> &#125;,</span><br><span class="line">      <span class="comment">// ä¸æ˜¾ç¤ºè¯¥è·¯ç”±(éšè—è·¯ç”±)</span></span><br><span class="line">      <span class="attr">hidden</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºvueè§†å›¾æ¨¡æ¿"><a href="#åˆ›å»ºvueè§†å›¾æ¨¡æ¿" class="headerlink" title="åˆ›å»ºvueè§†å›¾æ¨¡æ¿"></a>åˆ›å»ºvueè§†å›¾æ¨¡æ¿</h3><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210924121256036.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210924121256036.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210924121256036"></p><blockquote><p> ä½¿ç”¨element-uiçš„æ­¥éª¤æ¡å’Œè¡¨å•å³å¯</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">        &lt;h2 style=&quot;text-align: center&quot;&gt;å‘å¸ƒæ–°è¯¾ç¨‹&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-steps</span><br><span class="line">            :active=&quot;1&quot;</span><br><span class="line">            process-status=&quot;wait&quot;</span><br><span class="line">            align-center</span><br><span class="line">            style=&quot;margin-bottom: 40px&quot;</span><br><span class="line">        &gt;</span><br><span class="line">            &lt;el-step title=&quot;å¡«å†™è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯&quot; /&gt;</span><br><span class="line">            &lt;el-step title=&quot;åˆ›å»ºè¯¾ç¨‹å¤§çº²&quot; /&gt;</span><br><span class="line">            &lt;el-step title=&quot;æœ€ç»ˆå‘å¸ƒ&quot; /&gt;</span><br><span class="line">        &lt;/el-steps&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-form label-width=&quot;120px&quot;&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;è¯¾ç¨‹æ ‡é¢˜&quot;&gt;</span><br><span class="line">                &lt;el-input</span><br><span class="line">                    v-model=&quot;courseInfo.title&quot;</span><br><span class="line">                    placeholder=&quot; ç¤ºä¾‹ï¼šæœºå™¨å­¦ä¹ é¡¹ç›®è¯¾ï¼šä»åŸºç¡€åˆ°æ­å»ºé¡¹ç›®è§†é¢‘è¯¾ç¨‹ã€‚ä¸“ä¸šåç§°æ³¨æ„å¤§å°å†™&quot;</span><br><span class="line">                /&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- æ‰€å±åˆ†ç±» TODO --&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;è¯¾ç¨‹åˆ†ç±»&quot;&gt;</span><br><span class="line">                &lt;el-select</span><br><span class="line">                    v-model=&quot;courseInfo.subjectParentId&quot;</span><br><span class="line">                    placeholder=&quot;ä¸€çº§åˆ†ç±»&quot;</span><br><span class="line">                    @change=&quot;subjectLevelOneChanged&quot;</span><br><span class="line">                &gt;</span><br><span class="line">                    &lt;el-option</span><br><span class="line">                        v-for=&quot;subject in subjectOneList&quot;</span><br><span class="line">                        :key=&quot;subject.id&quot;</span><br><span class="line">                        :label=&quot;subject.title&quot;</span><br><span class="line">                        :value=&quot;subject.id&quot;</span><br><span class="line">                    /&gt;</span><br><span class="line">                &lt;/el-select&gt;</span><br><span class="line"></span><br><span class="line">                &lt;!-- äºŒçº§åˆ†ç±» --&gt;</span><br><span class="line">                &lt;el-select</span><br><span class="line">                    v-model=&quot;courseInfo.subjectId&quot;</span><br><span class="line">                    placeholder=&quot;äºŒçº§åˆ†ç±»&quot;</span><br><span class="line">                &gt;</span><br><span class="line">                    &lt;el-option</span><br><span class="line">                        v-for=&quot;subject in subjectTwoList&quot;</span><br><span class="line">                        :key=&quot;subject.id&quot;</span><br><span class="line">                        :label=&quot;subject.title&quot;</span><br><span class="line">                        :value=&quot;subject.id&quot;</span><br><span class="line">                    /&gt;</span><br><span class="line">                &lt;/el-select&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- è¯¾ç¨‹è®²å¸ˆ TODO --&gt;</span><br><span class="line">            &lt;!-- è¯¾ç¨‹è®²å¸ˆ --&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;è¯¾ç¨‹è®²å¸ˆ&quot;&gt;</span><br><span class="line">                &lt;el-select v-model=&quot;courseInfo.teacherId&quot; placeholder=&quot;è¯·é€‰æ‹©&quot;&gt;</span><br><span class="line">                    &lt;el-option</span><br><span class="line">                        v-for=&quot;teacher in teacherList&quot;</span><br><span class="line">                        :key=&quot;teacher.id&quot;</span><br><span class="line">                        :label=&quot;teacher.name&quot;</span><br><span class="line">                        :value=&quot;teacher.id&quot;</span><br><span class="line">                    /&gt;</span><br><span class="line">                &lt;/el-select&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-form-item label=&quot;æ€»è¯¾æ—¶&quot;&gt;</span><br><span class="line">                &lt;el-input-number</span><br><span class="line">                    :min=&quot;0&quot;</span><br><span class="line">                    v-model=&quot;courseInfo.lessonNum&quot;</span><br><span class="line">                    controls-position=&quot;right&quot;</span><br><span class="line">                    placeholder=&quot;è¯·å¡«å†™è¯¾ç¨‹çš„æ€»è¯¾æ—¶æ•°&quot;</span><br><span class="line">                /&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- è¯¾ç¨‹ç®€ä»‹ TODO --&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;è¯¾ç¨‹ç®€ä»‹&quot;&gt;</span><br><span class="line">                &lt;el-input v-model=&quot;courseInfo.description&quot; placeholder=&quot; &quot; /&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- è¯¾ç¨‹å°é¢ TODO --&gt;</span><br><span class="line">            &lt;!-- è¯¾ç¨‹å°é¢--&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;è¯¾ç¨‹å°é¢&quot;&gt;</span><br><span class="line">                &lt;el-upload</span><br><span class="line">                    :show-file-list=&quot;false&quot;</span><br><span class="line">                    :on-success=&quot;handleAvatarSuccess&quot;</span><br><span class="line">                    :before-upload=&quot;beforeAvatarUpload&quot;</span><br><span class="line">                    :action=&quot;BASE_API + &#x27;/eduoss/fileoss&#x27;&quot;</span><br><span class="line">                    class=&quot;avatar-uploader&quot;</span><br><span class="line">                &gt;</span><br><span class="line">                    &lt;img :src=&quot;courseInfo.cover&quot; /&gt;</span><br><span class="line">                &lt;/el-upload&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-form-item label=&quot;è¯¾ç¨‹ä»·æ ¼&quot;&gt;</span><br><span class="line">                &lt;el-input-number</span><br><span class="line">                    :min=&quot;0&quot;</span><br><span class="line">                    v-model=&quot;courseInfo.price&quot;</span><br><span class="line">                    controls-position=&quot;right&quot;</span><br><span class="line">                    placeholder=&quot;å…è´¹è¯¾ç¨‹è¯·è®¾ç½®ä¸º0å…ƒ&quot;</span><br><span class="line">                /&gt;</span><br><span class="line">                å…ƒ</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-form-item&gt;</span><br><span class="line">                &lt;el-button</span><br><span class="line">                    :disabled=&quot;saveBtnDisabled&quot;</span><br><span class="line">                    type=&quot;primary&quot;</span><br><span class="line">                    @click=&quot;saveOrUpdate&quot;</span><br><span class="line">                    &gt;ä¿å­˜å¹¶ä¸‹ä¸€æ­¥&lt;/el-button</span><br><span class="line">                &gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">        &lt;/el-form&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    // import course from &#x27;@/api/edu/course&#x27;</span><br><span class="line">    import subject from &#x27;@/api/edu/subject&#x27;</span><br><span class="line">    export default &#123;</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          saveBtnDisabled: false,</span><br><span class="line">          courseInfo: &#123;</span><br><span class="line">            title: &#x27;&#x27;,</span><br><span class="line">            subjectId: &#x27;&#x27;, // äºŒçº§åˆ†ç±»id</span><br><span class="line">            subjectParentId: &#x27;&#x27;, // ä¸€çº§åˆ†ç±»id</span><br><span class="line">            teacherId: &#x27;&#x27;,</span><br><span class="line">            lessonNum: 0,</span><br><span class="line">            description: &#x27;&#x27;,</span><br><span class="line">            cover: &#x27;/static/01.jpg&#x27;,</span><br><span class="line">            price: 0</span><br><span class="line">          &#125;,</span><br><span class="line">          BASE_API: process.env.BASE_API, // æ¥å£APIåœ°å€</span><br><span class="line">          teacherList: [], // å°è£…æ‰€æœ‰çš„è®²å¸ˆ</span><br><span class="line">          subjectOneList: [], // ä¸€çº§åˆ†ç±»</span><br><span class="line">          subjectTwoList: [] // äºŒçº§åˆ†ç±»</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      created() &#123;&#125;,</span><br><span class="line">      methods: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"></span><br><span class="line">  &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h2 style=&quot;text-align: center;&quot;&gt;å‘å¸ƒæ–°è¯¾ç¨‹&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">    &lt;el-steps :active=&quot;2&quot; process-status=&quot;wait&quot; align-center style=&quot;margin-bottom: 40px;&quot;&gt;</span><br><span class="line">      &lt;el-step title=&quot;å¡«å†™è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯&quot;/&gt;</span><br><span class="line">      &lt;el-step title=&quot;åˆ›å»ºè¯¾ç¨‹å¤§çº²&quot;/&gt;</span><br><span class="line">      &lt;el-step title=&quot;æœ€ç»ˆå‘å¸ƒ&quot;/&gt;</span><br><span class="line">    &lt;/el-steps&gt;</span><br><span class="line"></span><br><span class="line">    &lt;el-form label-width=&quot;120px&quot;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-form-item&gt;</span><br><span class="line">        &lt;el-button @click=&quot;previous&quot;&gt;ä¸Šä¸€æ­¥&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button :disabled=&quot;saveBtnDisabled&quot; type=&quot;primary&quot; @click=&quot;next&quot;&gt;ä¸‹ä¸€æ­¥&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            saveBtnDisabled:false</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">        previous() &#123;</span><br><span class="line">            this.$router.push(&#123;path:&#x27;/course/info/1&#x27;&#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        next() &#123;</span><br><span class="line">            //è·³è½¬åˆ°ç¬¬äºŒæ­¥</span><br><span class="line">            this.$router.push(&#123;path:&#x27;/course/publish/1&#x27;&#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">        &lt;h2 style=&quot;text-align: center&quot;&gt;å‘å¸ƒæ–°è¯¾ç¨‹&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-steps</span><br><span class="line">            :active=&quot;3&quot;</span><br><span class="line">            process-status=&quot;wait&quot;</span><br><span class="line">            align-center</span><br><span class="line">            style=&quot;margin-bottom: 40px&quot;</span><br><span class="line">        &gt;</span><br><span class="line">            &lt;el-step title=&quot;å¡«å†™è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯&quot; /&gt;</span><br><span class="line">            &lt;el-step title=&quot;åˆ›å»ºè¯¾ç¨‹å¤§çº²&quot; /&gt;</span><br><span class="line">            &lt;el-step title=&quot;æœ€ç»ˆå‘å¸ƒ&quot; /&gt;</span><br><span class="line">        &lt;/el-steps&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-form label-width=&quot;120px&quot;&gt;</span><br><span class="line">            &lt;el-form-item&gt;</span><br><span class="line">                &lt;el-button @click=&quot;previous&quot;&gt;è¿”å›ä¿®æ”¹&lt;/el-button&gt;</span><br><span class="line">                &lt;el-button</span><br><span class="line">                    :disabled=&quot;saveBtnDisabled&quot;</span><br><span class="line">                    type=&quot;primary&quot;</span><br><span class="line">                    @click=&quot;publish&quot;</span><br><span class="line">                    &gt;å‘å¸ƒè¯¾ç¨‹&lt;/el-button</span><br><span class="line">                &gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">        &lt;/el-form&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          saveBtnDisabled: false // ä¿å­˜æŒ‰é’®æ˜¯å¦ç¦ç”¨</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      created() &#123;</span><br><span class="line">        console.log(&#x27;publish created&#x27;)</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      methods: &#123;</span><br><span class="line">        previous() &#123;</span><br><span class="line">          console.log(&#x27;previous&#x27;)</span><br><span class="line">          this.$router.push(&#123; path: &#x27;/course/chapter/1&#x27; &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        publish() &#123;</span><br><span class="line">          console.log(&#x27;publish&#x27;)</span><br><span class="line">          this.$router.push(&#123; path: &#x27;/course/list&#x27; &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºè¯¾ç¨‹ç›¸å…³æ¥å£"><a href="#åˆ›å»ºè¯¾ç¨‹ç›¸å…³æ¥å£" class="headerlink" title="åˆ›å»ºè¯¾ç¨‹ç›¸å…³æ¥å£"></a>åˆ›å»ºè¯¾ç¨‹ç›¸å…³æ¥å£</h3><blockquote><p>api -&gt; edu -&gt; course.js</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// æ–°å¢è¯¾ç¨‹ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="title">addCourseInfo</span>(<span class="params">courseInfo</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> request(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">`/eduservice/course/addCourseInfo`</span>,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>: courseInfo</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„è¿™é‡Œåœ¨åç«¯æŠŠä¹‹å‰çš„ä»£ç ä¿®æ”¹ä¸€ä¸‹ï¼Œè¿”å›æ–°å¢è¯¾ç¨‹çš„idï¼Œç„¶åé‡å¯</p></blockquote><h3 id="ç¼–å†™æŒ‰é’®æ–¹æ³•ï¼ˆç®€å•ç¼–å†™æœªå®ç°åŠŸèƒ½ï¼‰"><a href="#ç¼–å†™æŒ‰é’®æ–¹æ³•ï¼ˆç®€å•ç¼–å†™æœªå®ç°åŠŸèƒ½ï¼‰" class="headerlink" title="ç¼–å†™æŒ‰é’®æ–¹æ³•ï¼ˆç®€å•ç¼–å†™æœªå®ç°åŠŸèƒ½ï¼‰"></a>ç¼–å†™æŒ‰é’®æ–¹æ³•ï¼ˆç®€å•ç¼–å†™æœªå®ç°åŠŸèƒ½ï¼‰</h3><blockquote><p>ç”±äºè¡¨å•ä¸­æ˜¾ç¤ºè¯¾ç¨‹åˆ†ç±»å’Œè®²å¸ˆè¿˜æ²¡æœ‰å†™ï¼Œæ‰€ä»¥å…ˆç®€å•å†™ä¸€ä¸‹æ–¹æ³•</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">next</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="comment">// è°ƒç”¨åç«¯æ¥å£ä¼ å…¥æ•°æ®</span></span><br><span class="line">  courseApi.addCourseInfo(<span class="built_in">this</span>.courseInfo).then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ˜¾ç¤ºæç¤ºä¿¡æ¯</span></span><br><span class="line">    <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;æ·»åŠ æˆåŠŸ!&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// è·³è½¬åˆ°ç¬¬äºŒæ­¥ï¼ŒåŒæ—¶ä¼ é€’idå€¼</span></span><br><span class="line">    <span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&#x27;/course/chapter/&#x27;</span> + result.data.courseId &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ·»åŠ è¯¾ç¨‹ä¿¡æ¯ï¼ˆæ›´å¤šå®Œå–„ï¼‰"><a href="#æ·»åŠ è¯¾ç¨‹ä¿¡æ¯ï¼ˆæ›´å¤šå®Œå–„ï¼‰" class="headerlink" title="æ·»åŠ è¯¾ç¨‹ä¿¡æ¯ï¼ˆæ›´å¤šå®Œå–„ï¼‰"></a>æ·»åŠ è¯¾ç¨‹ä¿¡æ¯ï¼ˆæ›´å¤šå®Œå–„ï¼‰</h2><h3 id="æ˜¾ç¤ºè®²å¸ˆä¸‹æ‹‰åˆ—è¡¨ï¼ˆåç«¯ï¼‰"><a href="#æ˜¾ç¤ºè®²å¸ˆä¸‹æ‹‰åˆ—è¡¨ï¼ˆåç«¯ï¼‰" class="headerlink" title="æ˜¾ç¤ºè®²å¸ˆä¸‹æ‹‰åˆ—è¡¨ï¼ˆåç«¯ï¼‰"></a>æ˜¾ç¤ºè®²å¸ˆä¸‹æ‹‰åˆ—è¡¨ï¼ˆåç«¯ï¼‰</h3><blockquote><p>è®²å¸ˆæ¨¡å—å†™è¿‡äº†ï¼Œä¸å¸¦åˆ†é¡µæŸ¥è¯¢æ‰€æœ‰è®²å¸ˆ</p></blockquote><h3 id="æ˜¾ç¤ºè®²å¸ˆä¸‹æ‹‰åˆ—è¡¨ï¼ˆå‰ç«¯ï¼‰"><a href="#æ˜¾ç¤ºè®²å¸ˆä¸‹æ‹‰åˆ—è¡¨ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="æ˜¾ç¤ºè®²å¸ˆä¸‹æ‹‰åˆ—è¡¨ï¼ˆå‰ç«¯ï¼‰"></a>æ˜¾ç¤ºè®²å¸ˆä¸‹æ‹‰åˆ—è¡¨ï¼ˆå‰ç«¯ï¼‰</h3><blockquote><p>æ³¨æ„è¿™é‡Œè¦ç°åœ¨apiä¸­åˆ›å»ºæ‰€å¾—æ‰€æœ‰è®²å¸ˆçš„æ¥å£ï¼ˆå¦‚æœä¹‹å‰è®²å¸ˆæ¨¡å—æ²¡å†™çš„è¯ï¼‰</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŸ¥è¯¢æ‰€æœ‰è®²å¸ˆï¼ˆä¸å¸¦åˆ†é¡µï¼‰</span></span><br><span class="line">  <span class="function"><span class="title">getTeacherList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">`/eduservice/teacher/findAll`</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><blockquote><p>ä¸‹æ‹‰åˆ—è¡¨æ¨¡æ¿ï¼Œä½¿ç”¨å¾ªç¯çš„æ–¹æ³•</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è¯¾ç¨‹è®²å¸ˆ TODO --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è¯¾ç¨‹è®²å¸ˆ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;è¯¾ç¨‹è®²å¸ˆ&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-select</span> <span class="attr">v-model</span>=<span class="string">&quot;courseInfo.teacherId&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·é€‰æ‹©&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-option</span></span></span><br><span class="line"><span class="tag">            <span class="attr">v-for</span>=<span class="string">&quot;teacher in teacherList&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:key</span>=<span class="string">&quot;teacher.id&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:label</span>=<span class="string">&quot;teacher.name&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:value</span>=<span class="string">&quot;teacher.id&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p> ç„¶åç¼–å†™vueä¸­å¯¹åº”æ–¹æ³•å³å¯</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">getListTeacher</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  teacherApi.getTeacherList().then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.teacherList = result.data.teacherList</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="æ˜¾ç¤ºäºŒçº§è”åŠ¨ä¸‹æ‹‰åˆ—è¡¨ï¼ˆå‰ç«¯ï¼‰"><a href="#æ˜¾ç¤ºäºŒçº§è”åŠ¨ä¸‹æ‹‰åˆ—è¡¨ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="æ˜¾ç¤ºäºŒçº§è”åŠ¨ä¸‹æ‹‰åˆ—è¡¨ï¼ˆå‰ç«¯ï¼‰"></a>æ˜¾ç¤ºäºŒçº§è”åŠ¨ä¸‹æ‹‰åˆ—è¡¨ï¼ˆå‰ç«¯ï¼‰</h3><blockquote><p>åç«¯è¯¾ç¨‹åˆ†ç±»æ¨¡å—å†™å¥½äº†ï¼Œä½¿ç”¨ä¹‹å‰çš„å³å¯</p></blockquote><blockquote><p>å…ˆè·å¾—å¹¶ä¿å­˜å¹¶åˆå§‹åŒ–æ˜¾ç¤ºæ‰€æœ‰ä¸€çº§åˆ†ç±»</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">getOneSubject</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  subjectApi.getSubjectList().then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.subjectOneList = result.data.list</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><blockquote><p>å®ç°äºŒçº§è”åŠ¨ï¼Œä¸ºä¸€çº§åˆ†ç±»ä¸‹æ‹‰åˆ—è¡¨æ·»åŠ @changeå¯¹åº”æ–¹æ³•</p></blockquote><blockquote><p>æ³¨æ„æ­¤å¤„el-optionç»‘å®šäº†valueå€¼èµ‹å€¼ä¸ºidï¼Œæ‰€ä»¥ç›´æ¥è·å–å³å¯</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// äºŒçº§è”åŠ¨,valueä¸ºç»‘å®šçš„æ•°æ®ï¼ˆ:value=&quot;subject.id&quot;ï¼‰</span></span><br><span class="line"><span class="function"><span class="title">subjectLevelOneChanged</span>(<span class="params">value</span>)</span> &#123;</span><br><span class="line">  <span class="comment">// æ ¹æ®idä¾¿åˆ©subjectOneListè·å¾—å…¶childrenèµ‹å€¼ç»™äºŒçº§åˆ†ç±»</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.subjectOneList.length; i++) &#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­ï¼šæ‰€æœ‰ä¸€çº§åˆ†ç±»id å’Œ ç‚¹å‡»ä¸€çº§åˆ†ç±»idæ˜¯å¦ä¸€æ ·</span></span><br><span class="line">    <span class="keyword">if</span> (value === <span class="built_in">this</span>.subjectOneList[i].id) &#123;</span><br><span class="line">      <span class="comment">// ä»ä¸€çº§åˆ†ç±»è·å–é‡Œé¢æ‰€æœ‰çš„äºŒçº§åˆ†ç±»</span></span><br><span class="line">      <span class="built_in">this</span>.subjectTwoList = <span class="built_in">this</span>.subjectOneList[i].children</span><br><span class="line">      <span class="comment">// æŠŠäºŒçº§åˆ†ç±»idå€¼æ¸…ç©º</span></span><br><span class="line">      <span class="built_in">this</span>.courseInfo.subjectId = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><blockquote><p>æµ‹è¯•æ˜¯æœ‰ä¸€ä¸ªé”™è¯¯ï¼Œcourseè¡¨ä¸Šæ·»åŠ çš„æ•°æ®æ²¡æœ‰çˆ¶åˆ†ç±»idï¼Œçœ‹äº†ä¸‹æ˜¯æˆ‘åœ¨voå¯¹è±¡æŠŠè¿™ä¸ªå±æ€§æ³¨é‡Šäº†ï¼ˆå› ä¸ºä¹‹å‰æœ‰nullé”™è¯¯ï¼‰ï¼Œè®°å¾—é‡å¯</p></blockquote><h2 id="å¯Œæ–‡æœ¬ç¼–è¾‘å™¨"><a href="#å¯Œæ–‡æœ¬ç¼–è¾‘å™¨" class="headerlink" title="å¯Œæ–‡æœ¬ç¼–è¾‘å™¨"></a>å¯Œæ–‡æœ¬ç¼–è¾‘å™¨</h2><blockquote><p>ç›´æ¥æ•´åˆï¼ŒæŒ‡cv</p></blockquote><h3 id="å¤åˆ¶ç»„ä»¶å’Œé™æ€èµ„æº"><a href="#å¤åˆ¶ç»„ä»¶å’Œé™æ€èµ„æº" class="headerlink" title="å¤åˆ¶ç»„ä»¶å’Œé™æ€èµ„æº"></a>å¤åˆ¶ç»„ä»¶å’Œé™æ€èµ„æº</h3><blockquote><p>å­—é¢æ„æ€</p></blockquote><h3 id="é…ç½®å˜é‡"><a href="#é…ç½®å˜é‡" class="headerlink" title="é…ç½®å˜é‡"></a>é…ç½®å˜é‡</h3><blockquote><p>å†é…ç½®htmlå˜é‡ï¼Œbuild -&gt; webpack.dev.conf.js ä¸­å¦‚ä¸‹æ·»åŠ ï¼ˆæ³¨æ„æ‰€åœ¨ä½ç½®ï¼Œå…¶ä»–ä¸è¦å˜ï¼‰</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> webpack.DefinePlugin(&#123;</span><br><span class="line">      <span class="string">&#x27;process.env&#x27;</span>: <span class="built_in">require</span>(<span class="string">&#x27;../config/dev.env&#x27;</span>)</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> webpack.HotModuleReplacementPlugin(),</span><br><span class="line">    <span class="comment">// https://github.com/ampedandwired/html-webpack-plugin</span></span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&#x27;index.html&#x27;</span>,</span><br><span class="line">      <span class="attr">template</span>: <span class="string">&#x27;index.html&#x27;</span>,</span><br><span class="line">      <span class="attr">inject</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">favicon</span>: resolve(<span class="string">&#x27;favicon.ico&#x27;</span>),</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;vue-admin-template&#x27;</span>,</span><br><span class="line">      <span class="comment">// ä¿®æ”¹é…ç½®</span></span><br><span class="line">      <span class="attr">templateParameters</span>: &#123;</span><br><span class="line">        <span class="attr">BASE_URL</span>: config.dev.assetsPublicPath + config.dev.assetsSubDirectory</span><br><span class="line">     &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="å¼•å…¥è„šæœ¬æ–‡ä»¶"><a href="#å¼•å…¥è„šæœ¬æ–‡ä»¶" class="headerlink" title="å¼•å…¥è„šæœ¬æ–‡ä»¶"></a>å¼•å…¥è„šæœ¬æ–‡ä»¶</h3><blockquote><p>åœ¨index.htmlå¼•å…¥è„šæœ¬æ–‡ä»¶ï¼ŒæŠ¥é”™æ˜¯æ‰¾ä¸åˆ°BASE_URLï¼Œä¹‹å‰æ”¹äº†é…ç½®é‡å¯å°±è¡Œ</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=&lt;%=<span class="string">BASE_URL</span> %&gt;</span>/tinymce4.7.5/tinymce.min.js &gt;<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=&lt;%=<span class="string">BASE_URL</span> %&gt;</span>/tinymce4.7.5/langs/zh_CN.js &gt;<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å¼•å…¥å£°æ˜ç»„ä»¶"><a href="#å¼•å…¥å£°æ˜ç»„ä»¶" class="headerlink" title="å¼•å…¥å£°æ˜ç»„ä»¶"></a>å¼•å…¥å£°æ˜ç»„ä»¶</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Tinymce <span class="keyword">from</span> <span class="string">&#x27;@/components/Tinymce&#x27;</span> <span class="comment">//å¼•å…¥ç»„ä»¶</span></span><br><span class="line"> <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">        <span class="comment">// å£°æ˜ç»„ä»¶</span></span><br><span class="line">        <span class="attr">components</span>: &#123; Tinymce &#125;,</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨ç»„ä»¶"><a href="#ä½¿ç”¨ç»„ä»¶" class="headerlink" title="ä½¿ç”¨ç»„ä»¶"></a>ä½¿ç”¨ç»„ä»¶</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tinymce</span> <span class="attr">:height</span>=<span class="string">&quot;300&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;courseInfo.description&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>æµ‹è¯•äº†ä¸€ä¸‹ï¼Œæ³¨æ„æ•°æ®åº“ä¸­çš„å­—æ®µå±æ€§æ”¹ä¸ºlongtextï¼Œè¦ä¸ç„¶å›¾ç‰‡ä¼ ä¸Šå»åç«¯æŠ¥é”™<code>Data truncation: Data too long for column &#39;description&#39;</code> </p></blockquote><h2 id="æ˜¾ç¤ºè¯¾ç¨‹ç« èŠ‚ï¼ˆåç«¯ï¼‰"><a href="#æ˜¾ç¤ºè¯¾ç¨‹ç« èŠ‚ï¼ˆåç«¯ï¼‰" class="headerlink" title="æ˜¾ç¤ºè¯¾ç¨‹ç« èŠ‚ï¼ˆåç«¯ï¼‰"></a>æ˜¾ç¤ºè¯¾ç¨‹ç« èŠ‚ï¼ˆåç«¯ï¼‰</h2><h3 id="åˆ›å»ºç« èŠ‚å®ä½“ç±»"><a href="#åˆ›å»ºç« èŠ‚å®ä½“ç±»" class="headerlink" title="åˆ›å»ºç« èŠ‚å®ä½“ç±»"></a>åˆ›å»ºç« èŠ‚å®ä½“ç±»</h3><blockquote><p>ç±»ä¼¼äºä¸€çº§äºŒçº§åˆ†ç±»å³å¯</p></blockquote><h3 id="ç¼–å†™controller-1"><a href="#ç¼–å†™controller-1" class="headerlink" title="ç¼–å†™controller"></a>ç¼–å†™controller</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/eduservice/chapter&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span>    <span class="comment">// è·¨åŸŸ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduChapterController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduChapterService chapterService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å¾—è¯¾ç¨‹å¤§çº²åˆ—è¡¨(æ ¹æ®id</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;getChapterVideo/&#123;courseId&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">getChapterVideo</span><span class="params">(<span class="meta">@PathVariable(&quot;courseId&quot;)</span> String courseId)</span> </span>&#123;</span><br><span class="line">        List&lt;ChapterVo&gt; list = chapterService.getChapterVideoByCourseId(courseId);</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">&quot;chapterVideoList&quot;</span>, list);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™service-1"><a href="#ç¼–å†™service-1" class="headerlink" title="ç¼–å†™service"></a>ç¼–å†™service</h3><blockquote><p>ä¸ä¼˜é›…</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduChapterServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">EduChapterMapper</span>, <span class="title">EduChapter</span>&gt; <span class="keyword">implements</span> <span class="title">EduChapterService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduVideoService videoService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;ChapterVo&gt; <span class="title">getChapterVideoByCourseId</span><span class="params">(String courseId)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è·å¾—å¯¹åº”idè¯¾ç¨‹çš„æ‰€æœ‰ç« èŠ‚</span></span><br><span class="line">        QueryWrapper&lt;EduChapter&gt; chapterWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">        chapterWrapper.eq(<span class="string">&quot;course_id&quot;</span>, courseId);</span><br><span class="line">        List&lt;EduChapter&gt; chapterList = baseMapper.selectList(chapterWrapper);</span><br><span class="line">        <span class="comment">// è·å¾—å¯¹åº”idè¯¾ç¨‹çš„æ‰€æœ‰å°èŠ‚</span></span><br><span class="line">        QueryWrapper&lt;EduVideo&gt; videoWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">        videoWrapper.eq(<span class="string">&quot;course_id&quot;</span>, courseId);</span><br><span class="line">        List&lt;EduVideo&gt; videoList = videoService.list(videoWrapper);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°è£…</span></span><br><span class="line">        List&lt;ChapterVo&gt; finalList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; chapterList.size(); i++) &#123;</span><br><span class="line">            EduChapter eduChapter = chapterList.get(i);</span><br><span class="line">            ChapterVo chapterVo = <span class="keyword">new</span> ChapterVo();</span><br><span class="line">            BeanUtils.copyProperties(eduChapter, chapterVo);</span><br><span class="line"></span><br><span class="line">            List&lt;VideoVo&gt; children = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; videoList.size(); j++) &#123;</span><br><span class="line">                EduVideo eduVideo = videoList.get(j);</span><br><span class="line">                <span class="keyword">if</span> (eduVideo.getChapterId().equals(chapterVo.getId())) &#123;</span><br><span class="line">                    VideoVo videoVo = <span class="keyword">new</span> VideoVo();</span><br><span class="line">                    BeanUtils.copyProperties(eduVideo, videoVo);</span><br><span class="line">                    children.add(videoVo);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            chapterVo.setChildren(children);</span><br><span class="line">            finalList.add(chapterVo);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> finalList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ˜¾ç¤ºè¯¾ç¨‹ç« èŠ‚ï¼ˆå‰ç«¯ï¼‰"><a href="#æ˜¾ç¤ºè¯¾ç¨‹ç« èŠ‚ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="æ˜¾ç¤ºè¯¾ç¨‹ç« èŠ‚ï¼ˆå‰ç«¯ï¼‰"></a>æ˜¾ç¤ºè¯¾ç¨‹ç« èŠ‚ï¼ˆå‰ç«¯ï¼‰</h2><h3 id="api"><a href="#api" class="headerlink" title="api"></a>api</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">//  è·å¾—æ‰€æœ‰ä»¥åŠåˆ†ç±»</span></span><br><span class="line">    <span class="function"><span class="title">getChapterVideo</span>(<span class="params">courseId</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> request(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">`/eduservice/chapter/getChapterVideo/<span class="subst">$&#123;courseId&#125;</span>`</span>,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="vueè§†å›¾æ¨¡æ¿å’Œåˆå§‹åŒ–"><a href="#vueè§†å›¾æ¨¡æ¿å’Œåˆå§‹åŒ–" class="headerlink" title="vueè§†å›¾æ¨¡æ¿å’Œåˆå§‹åŒ–"></a>vueè§†å›¾æ¨¡æ¿å’Œåˆå§‹åŒ–</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">        &lt;h2 style=&quot;text-align: center&quot;&gt;å‘å¸ƒæ–°è¯¾ç¨‹&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- æ­¥éª¤æ¡ --&gt;</span><br><span class="line">        &lt;el-steps</span><br><span class="line">            :active=&quot;2&quot;</span><br><span class="line">            process-status=&quot;wait&quot;</span><br><span class="line">            align-center</span><br><span class="line">            style=&quot;margin-bottom: 40px&quot;</span><br><span class="line">        &gt;</span><br><span class="line">            &lt;el-step title=&quot;å¡«å†™è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯&quot; /&gt;</span><br><span class="line">            &lt;el-step title=&quot;åˆ›å»ºè¯¾ç¨‹å¤§çº²&quot; /&gt;</span><br><span class="line">            &lt;el-step title=&quot;æœ€ç»ˆå‘å¸ƒ&quot; /&gt;</span><br><span class="line">        &lt;/el-steps&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-button type=&quot;text&quot; @click=&quot;openChapterDialog()&quot;&gt;æ·»åŠ ç« èŠ‚&lt;/el-button&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!--  ç« èŠ‚åˆ—è¡¨ --&gt;</span><br><span class="line">        &lt;ul class=&quot;chapterList&quot;&gt;</span><br><span class="line">            &lt;li v-for=&quot;chapter in chapterVideoList&quot; :key=&quot;chapter.id&quot;&gt;</span><br><span class="line">                &lt;p&gt;</span><br><span class="line">                    &#123;&#123; chapter.title &#125;&#125;</span><br><span class="line"></span><br><span class="line">                    &lt;span class=&quot;acts&quot;&gt;</span><br><span class="line">                        &lt;el-button</span><br><span class="line">                            style=&quot;&quot;</span><br><span class="line">                            type=&quot;text&quot;</span><br><span class="line">                            @click=&quot;openVideo(chapter.id)&quot;</span><br><span class="line">                            &gt;æ·»åŠ å°èŠ‚&lt;/el-button</span><br><span class="line">                        &gt;</span><br><span class="line">                        &lt;el-button</span><br><span class="line">                            style=&quot;&quot;</span><br><span class="line">                            type=&quot;text&quot;</span><br><span class="line">                            @click=&quot;openEditChatper(chapter.id)&quot;</span><br><span class="line">                            &gt;ç¼–è¾‘&lt;/el-button</span><br><span class="line">                        &gt;</span><br><span class="line">                        &lt;el-button</span><br><span class="line">                            type=&quot;text&quot;</span><br><span class="line">                            @click=&quot;removeChapter(chapter.id)&quot;</span><br><span class="line">                            &gt;åˆ é™¤&lt;/el-button</span><br><span class="line">                        &gt;</span><br><span class="line">                    &lt;/span&gt;</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line"></span><br><span class="line">                &lt;!-- è§†é¢‘ --&gt;</span><br><span class="line">                &lt;ul class=&quot;chapterList videoList&quot;&gt;</span><br><span class="line">                    &lt;li v-for=&quot;video in chapter.children&quot; :key=&quot;video.id&quot;&gt;</span><br><span class="line">                        &lt;p&gt;</span><br><span class="line">                            &#123;&#123; video.title &#125;&#125;</span><br><span class="line"></span><br><span class="line">                            &lt;span class=&quot;acts&quot;&gt;</span><br><span class="line">                                &lt;el-button style=&quot;&quot; type=&quot;text&quot;&gt;ç¼–è¾‘&lt;/el-button&gt;</span><br><span class="line">                                &lt;el-button</span><br><span class="line">                                    type=&quot;text&quot;</span><br><span class="line">                                    @click=&quot;removeVideo(video.id)&quot;</span><br><span class="line">                                    &gt;åˆ é™¤&lt;/el-button</span><br><span class="line">                                &gt;</span><br><span class="line">                            &lt;/span&gt;</span><br><span class="line">                        &lt;/p&gt;</span><br><span class="line">                    &lt;/li&gt;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">        &lt;!-- æ“ä½œ --&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;el-button @click=&quot;previous&quot;&gt;ä¸Šä¸€æ­¥&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button :disabled=&quot;saveBtnDisabled&quot; type=&quot;primary&quot; @click=&quot;next&quot;</span><br><span class="line">                &gt;ä¸‹ä¸€æ­¥&lt;/el-button</span><br><span class="line">            &gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import chapterApi from &#x27;@/api/edu/chapter&#x27;</span><br><span class="line">    export default &#123;</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          saveBtnDisabled: false,</span><br><span class="line">          courseId: &#x27;&#x27;, // è¯¾ç¨‹id</span><br><span class="line">          chapterVideoList: []</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      created() &#123;</span><br><span class="line">        // è·å–åˆ°è·¯ç”±ä¸­çš„idå€¼</span><br><span class="line">        if (this.$route.params &amp;&amp; this.$route.params.id) &#123;</span><br><span class="line">          this.courseId = this.$route.params.id</span><br><span class="line">          this.getChapterVideo()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">        // æ ¹æ®idæŸ¥è¯¢ç« èŠ‚å’Œå°èŠ‚</span><br><span class="line">        getChapterVideo() &#123;</span><br><span class="line">          chapterApi.getChapterVideo(this.courseId).then(result =&gt; &#123;</span><br><span class="line">            this.chapterVideoList = result.data.chapterVideoList</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        previous() &#123;</span><br><span class="line">          this.$router.push(&#123; path: &#x27;/course/info/&#x27; + this.courseId &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        next() &#123;</span><br><span class="line">          // è·³è½¬åˆ°ç¬¬äºŒæ­¥</span><br><span class="line">          this.$router.push(&#123; path: &#x27;/course/publish/&#x27; + this.courseId &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">    .chapterList &#123;</span><br><span class="line">        position: relative;</span><br><span class="line">        list-style: none;</span><br><span class="line">        margin: 0;</span><br><span class="line">        padding: 0;</span><br><span class="line">    &#125;</span><br><span class="line">    .chapterList li &#123;</span><br><span class="line">        position: relative;</span><br><span class="line">    &#125;</span><br><span class="line">    .chapterList p &#123;</span><br><span class="line">        float: left;</span><br><span class="line">        font-size: 20px;</span><br><span class="line">        margin: 10px 0;</span><br><span class="line">        padding: 10px;</span><br><span class="line">        height: 70px;</span><br><span class="line">        line-height: 50px;</span><br><span class="line">        width: 100%;</span><br><span class="line">        border: 1px solid #ddd;</span><br><span class="line">    &#125;</span><br><span class="line">    .chapterList .acts &#123;</span><br><span class="line">        float: right;</span><br><span class="line">        font-size: 14px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .videoList &#123;</span><br><span class="line">        padding-left: 50px;</span><br><span class="line">    &#125;</span><br><span class="line">    .videoList p &#123;</span><br><span class="line">        float: left;</span><br><span class="line">        font-size: 14px;</span><br><span class="line">        margin: 10px 0;</span><br><span class="line">        padding: 10px;</span><br><span class="line">        height: 50px;</span><br><span class="line">        line-height: 30px;</span><br><span class="line">        width: 100%;</span><br><span class="line">        border: 1px dotted #ddd;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹è¯¾ç¨‹ä¿¡æ¯ï¼ˆåç«¯ï¼‰"><a href="#ä¿®æ”¹è¯¾ç¨‹ä¿¡æ¯ï¼ˆåç«¯ï¼‰" class="headerlink" title="ä¿®æ”¹è¯¾ç¨‹ä¿¡æ¯ï¼ˆåç«¯ï¼‰"></a>ä¿®æ”¹è¯¾ç¨‹ä¿¡æ¯ï¼ˆåç«¯ï¼‰</h2><blockquote><ol><li>â€œä¸Šä¸€æ­¥â€å›æ˜¾æ–¹æ³•ï¼šæ ¹æ®idæŸ¥è¯¢è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯</li><li>ä¿®æ”¹è¯¾ç¨‹ä¿¡æ¯</li></ol></blockquote><h3 id="å›æ˜¾è¯¾ç¨‹ä¿¡æ¯"><a href="#å›æ˜¾è¯¾ç¨‹ä¿¡æ¯" class="headerlink" title="å›æ˜¾è¯¾ç¨‹ä¿¡æ¯"></a>å›æ˜¾è¯¾ç¨‹ä¿¡æ¯</h3><h4 id="ç¼–å†™controller-2"><a href="#ç¼–å†™controller-2" class="headerlink" title="ç¼–å†™controller"></a>ç¼–å†™controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®idæŸ¥è¯¢åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;getCourseInfo/&#123;courseId&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">getCourseInfo</span><span class="params">(<span class="meta">@PathVariable</span> String courseId)</span> </span>&#123;</span><br><span class="line">    CourseInfoVo courseInfoVo = courseService.getCourseInfoById(courseId);</span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">&quot;courseInfo&quot;</span>, courseInfoVo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™service-2"><a href="#ç¼–å†™service-2" class="headerlink" title="ç¼–å†™service"></a>ç¼–å†™service</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®idè·å¾—è¯¾ç¨‹Vo</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> CourseInfoVo <span class="title">getCourseInfoById</span><span class="params">(String courseId)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å…ˆæŸ¥è¯¾ç¨‹è¡¨</span></span><br><span class="line">    EduCourse eduCourse = baseMapper.selectById(courseId);</span><br><span class="line">    <span class="comment">// å†æŸ¥è¯¾ç¨‹æè¿°è¡¨</span></span><br><span class="line">    EduCourseDescription courseDescription = courseDescriptionService.getById(courseId);</span><br><span class="line">    <span class="comment">// å°è£…</span></span><br><span class="line">    CourseInfoVo courseInfoVo = <span class="keyword">new</span> CourseInfoVo();</span><br><span class="line">    BeanUtils.copyProperties(eduCourse, courseInfoVo);</span><br><span class="line">    courseInfoVo.setDescription(courseDescription.getDescription());</span><br><span class="line">    <span class="keyword">return</span> courseInfoVo;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹è¯¾ç¨‹ä¿¡æ¯"><a href="#ä¿®æ”¹è¯¾ç¨‹ä¿¡æ¯" class="headerlink" title="ä¿®æ”¹è¯¾ç¨‹ä¿¡æ¯"></a>ä¿®æ”¹è¯¾ç¨‹ä¿¡æ¯</h3><h4 id="ç¼–å†™controller-3"><a href="#ç¼–å†™controller-3" class="headerlink" title="ç¼–å†™controller"></a>ç¼–å†™controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¿®æ”¹è¯¾ç¨‹ä¿¡æ¯</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;updateCourseInfo&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">updateCourseInfo</span><span class="params">(<span class="meta">@RequestBody</span> CourseInfoVo courseInfoVo)</span> </span>&#123;</span><br><span class="line">    courseService.updateCourseInfo(courseInfoVo);</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™service-3"><a href="#ç¼–å†™service-3" class="headerlink" title="ç¼–å†™service"></a>ç¼–å†™service</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¿®æ”¹è¯¾ç¨‹ä¿¡æ¯</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateCourseInfo</span><span class="params">(CourseInfoVo courseInfoVo)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä¿®æ”¹è¯¾ç¨‹è¡¨</span></span><br><span class="line">    EduCourse eduCourse = <span class="keyword">new</span> EduCourse();</span><br><span class="line">    BeanUtils.copyProperties(courseInfoVo, eduCourse);</span><br><span class="line">    <span class="keyword">int</span> affectRow = baseMapper.updateById(eduCourse);</span><br><span class="line">    <span class="keyword">if</span> (affectRow &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;ä¿®æ”¹è¯¾ç¨‹å¤±è´¥&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ä¿®æ”¹è¯¾ç¨‹æè¿°è¡¨</span></span><br><span class="line">    EduCourseDescription courseDescription = <span class="keyword">new</span> EduCourseDescription();</span><br><span class="line">    BeanUtils.copyProperties(courseInfoVo, courseDescription);</span><br><span class="line">    courseDescriptionService.updateById(courseDescription);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹è¯¾ç¨‹ä¿¡æ¯ï¼ˆå‰ç«¯ï¼‰"><a href="#ä¿®æ”¹è¯¾ç¨‹ä¿¡æ¯ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="ä¿®æ”¹è¯¾ç¨‹ä¿¡æ¯ï¼ˆå‰ç«¯ï¼‰"></a>ä¿®æ”¹è¯¾ç¨‹ä¿¡æ¯ï¼ˆå‰ç«¯ï¼‰</h2><h3 id="api-1"><a href="#api-1" class="headerlink" title="api"></a>api</h3><blockquote><p>src -&gt; api -&gt; edu -&gt; course.js</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®idè·å¾—è¯¾ç¨‹ä¿¡æ¯</span></span><br><span class="line">   <span class="function"><span class="title">getCourseInfoById</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> request(&#123;</span><br><span class="line">           <span class="attr">url</span>: <span class="string">`/eduservice/course/getCourseInfo/`</span> + id,</span><br><span class="line">           <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="comment">// ä¿®æ”¹è¯¾ç¨‹ä¿¡æ¯</span></span><br><span class="line">   <span class="function"><span class="title">updateCourseInfo</span>(<span class="params">courseInfo</span>)</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> request(&#123;</span><br><span class="line">           <span class="attr">url</span>: <span class="string">`/eduservice/course/updateCourseInfo`</span>,</span><br><span class="line">           <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">           <span class="attr">data</span>: courseInfo</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure><h3 id="å›æ˜¾vueè§†å›¾å’Œæ–¹æ³•"><a href="#å›æ˜¾vueè§†å›¾å’Œæ–¹æ³•" class="headerlink" title="å›æ˜¾vueè§†å›¾å’Œæ–¹æ³•"></a>å›æ˜¾vueè§†å›¾å’Œæ–¹æ³•</h3><h4 id="è¡¨å•å›æ˜¾æ•°æ®"><a href="#è¡¨å•å›æ˜¾æ•°æ®" class="headerlink" title="è¡¨å•å›æ˜¾æ•°æ®"></a>è¡¨å•å›æ˜¾æ•°æ®</h4><blockquote><p>è®°å¾—åœ¨è·³è½¬åˆ°infoé¡µé¢çš„æŒ‰é’®ä¸Šæ·»åŠ idçš„å€¼</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    import courseApi from &#x27;@/api/edu/course&#x27;</span><br><span class="line">    export default &#123;</span><br><span class="line">      data() &#123;</span><br><span class="line">      &#125;,</span><br><span class="line">      created() &#123;</span><br><span class="line">        // åˆ¤æ–­æ˜¯å¦éœ€è¦æ•°æ®å›æ˜¾</span><br><span class="line">        if (this.$route.params &amp;&amp; this.$route.params.id) &#123;</span><br><span class="line">          this.courseId = this.$route.params.id</span><br><span class="line">          this.getCourseInfo()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">        // æ ¹æ®idè·å¾—è¯¾ç¨‹ä¿¡æ¯</span><br><span class="line">        getCourseInfo() &#123;</span><br><span class="line">          courseApi.getCourseInfoById(this.courseId).then(result =&gt; &#123;</span><br><span class="line">            this.courseInfo = result.data.courseInfo</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œè¿”å›è¯¥é¡µé¢å›æ˜¾æ•°æ®ä¸­ï¼ŒcourseInfoçš„äºŒçº§åˆ†ç±»åˆ—è¡¨subjectTwoListåªæœ‰åœ¨ä¸€çº§åˆ†ç±»changeçš„æ—¶å€™æ‰ä¼šé‡æ–°æ˜¾ç¤ºï¼Œå¦åˆ™è¯¥åˆ—è¡¨ä¼šæ˜¾ç¤ºç»‘å®šçš„courseInfo.subjectIdï¼Œæ‰€ä»¥éœ€è¦å®Œå–„</p></blockquote><h4 id="ä¸‹æ‹‰åˆ—è¡¨æ•°æ®å›æ˜¾"><a href="#ä¸‹æ‹‰åˆ—è¡¨æ•°æ®å›æ˜¾" class="headerlink" title="ä¸‹æ‹‰åˆ—è¡¨æ•°æ®å›æ˜¾"></a>ä¸‹æ‹‰åˆ—è¡¨æ•°æ®å›æ˜¾</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">      watch: &#123;</span><br><span class="line">        // ç›‘å¬è·¯ç”±æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ï¼Œå¦‚æœæ˜¯åˆ™æ¸…é™¤å½“å‰é¡µé¢çš„æ•°æ®</span><br><span class="line">        $route(to, from) &#123;</span><br><span class="line">          if (!this.$route.params || !this.$route.params.id) &#123;</span><br><span class="line">            this.courseInfo = &#123;&#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      created() &#123;</span><br><span class="line">        // è·å–è·¯ç”±idå€¼</span><br><span class="line">        if (this.$route.params &amp;&amp; this.$route.params.id) &#123;</span><br><span class="line">          this.courseId = this.$route.params.id</span><br><span class="line">          // è°ƒç”¨æ ¹æ®idæŸ¥è¯¢è¯¾ç¨‹çš„æ–¹æ³•</span><br><span class="line">          this.getCourseInfo()</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          // åˆå§‹åŒ–æ‰€æœ‰è®²å¸ˆ</span><br><span class="line">          this.getListTeacher()</span><br><span class="line">          // åˆå§‹åŒ–ä¸€çº§åˆ†ç±»</span><br><span class="line">          this.getOneSubject()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">        // æ ¹æ®idè·å¾—è¯¾ç¨‹ä¿¡æ¯</span><br><span class="line">        getCourseInfo() &#123;</span><br><span class="line">          courseApi.getCourseInfoById(this.courseId).then(response =&gt; &#123;</span><br><span class="line">            // åœ¨courseInfoè¯¾ç¨‹åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…å« ä¸€çº§åˆ†ç±»id å’Œ äºŒçº§åˆ†ç±»id</span><br><span class="line">            this.courseInfo = response.data.courseInfo</span><br><span class="line">            // 1 æŸ¥è¯¢æ‰€æœ‰çš„åˆ†ç±»ï¼ŒåŒ…å«ä¸€çº§å’ŒäºŒçº§</span><br><span class="line">            subjectApi.getSubjectList().then(response =&gt; &#123;</span><br><span class="line">              // 2 è·å–æ‰€æœ‰ä¸€çº§åˆ†ç±»</span><br><span class="line">              this.subjectOneList = response.data.list</span><br><span class="line">              // 3 æŠŠæ‰€æœ‰çš„ä¸€çº§åˆ†ç±»æ•°ç»„è¿›è¡Œéå†ï¼Œ</span><br><span class="line">              for (var i = 0; i &lt; this.subjectOneList.length; i++) &#123;</span><br><span class="line">                // è·å–æ¯ä¸ªä¸€çº§åˆ†ç±»</span><br><span class="line">                var oneSubject = this.subjectOneList[i]</span><br><span class="line">                // æ¯”è¾ƒå½“å‰courseInfoé‡Œé¢ä¸€çº§åˆ†ç±»idå’Œæ‰€æœ‰çš„ä¸€çº§åˆ†ç±»id</span><br><span class="line">                if (this.courseInfo.subjectParentId == oneSubject.id) &#123;</span><br><span class="line">                  // è·å–ä¸€çº§åˆ†ç±»æ‰€æœ‰çš„äºŒçº§åˆ†ç±»</span><br><span class="line">                  this.subjectTwoList = oneSubject.children</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            // åˆå§‹åŒ–æ‰€æœ‰è®²å¸ˆ</span><br><span class="line">            this.getListTeacher()</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><blockquote><p>æµ‹è¯•ï¼Œè¿™é‡Œå¾ˆå¥‡æ€ªï¼Œæˆ‘æŠŠè·å¾—äºŒçº§åˆ—è¡¨æ–¹æ³•å°è£…äº†å‡ºæ¥ï¼Œç»“æ„é¡ºåºéƒ½ä¸€æ ·çš„ä½†æ˜¯æµ‹è¯•çš„æ—¶å€™ä¸€å¼€å§‹èƒ½æ˜¾ç¤ºï¼Œåé¢åˆä¸è¡Œäº†ï¼Œæˆ‘ä¸ç†è§£</p></blockquote><h3 id="ä¿®æ”¹vueè§†å›¾å’Œæ–¹æ³•"><a href="#ä¿®æ”¹vueè§†å›¾å’Œæ–¹æ³•" class="headerlink" title="ä¿®æ”¹vueè§†å›¾å’Œæ–¹æ³•"></a>ä¿®æ”¹vueè§†å›¾å’Œæ–¹æ³•</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å‡»ä¸‹ä¸€æ­¥</span></span><br><span class="line"><span class="function"><span class="title">next</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ˜¯æ·»åŠ è¿˜æ˜¯ä¿®æ”¹</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">this</span>.courseInfo.id) &#123;</span><br><span class="line">    <span class="built_in">this</span>.updateCourse()</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.addCourse()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// æ·»åŠ course</span></span><br><span class="line"><span class="function"><span class="title">addCourse</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="comment">// è°ƒç”¨åç«¯æ¥å£ä¼ å…¥æ•°æ®</span></span><br><span class="line">  courseApi.addCourseInfo(<span class="built_in">this</span>.courseInfo).then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ˜¾ç¤ºæç¤ºä¿¡æ¯</span></span><br><span class="line">    <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;æ·»åŠ æˆåŠŸ!&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// è·³è½¬åˆ°ç¬¬äºŒæ­¥ï¼ŒåŒæ—¶ä¼ é€’idå€¼</span></span><br><span class="line">    <span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&#x27;/course/chapter/&#x27;</span> + result.data.courseId &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// ä¿®æ”¹course</span></span><br><span class="line"><span class="function"><span class="title">updateCourse</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  courseApi.updateCourseInfo(<span class="built_in">this</span>.courseInfo).then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ˜¾ç¤ºæç¤ºä¿¡æ¯</span></span><br><span class="line">    <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,s</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;ä¿®æ”¹æˆåŠŸ!&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// è·³è½¬åˆ°ç¬¬äºŒæ­¥ï¼ŒåŒæ—¶ä¼ é€’idå€¼</span></span><br><span class="line">    <span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&#x27;/course/chapter/&#x27;</span> + <span class="built_in">this</span>.courseId &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¢ã€åˆ ã€æ”¹è¯¾ç¨‹ç« èŠ‚ï¼ˆåç«¯ï¼‰"><a href="#å¢ã€åˆ ã€æ”¹è¯¾ç¨‹ç« èŠ‚ï¼ˆåç«¯ï¼‰" class="headerlink" title="å¢ã€åˆ ã€æ”¹è¯¾ç¨‹ç« èŠ‚ï¼ˆåç«¯ï¼‰"></a>å¢ã€åˆ ã€æ”¹è¯¾ç¨‹ç« èŠ‚ï¼ˆåç«¯ï¼‰</h2><h3 id="ç¼–å†™controller-4"><a href="#ç¼–å†™controller-4" class="headerlink" title="ç¼–å†™controller"></a>ç¼–å†™controller</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/eduservice/chapter&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span>    <span class="comment">// è·¨åŸŸ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduChapterController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduChapterService chapterService;</span><br><span class="line">    <span class="comment">// æ ¹æ®ç« èŠ‚idæŸ¥è¯¢ç« èŠ‚</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;getChapterInfo/&#123;chapterId&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">getChapterInfo</span><span class="params">(<span class="meta">@PathVariable(&quot;chapterId&quot;)</span> String chapterId)</span> </span>&#123;</span><br><span class="line">        EduChapter chapter = chapterService.getById(chapterId);</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">&quot;chapterInfo&quot;</span>, chapter);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ·»åŠ ç« èŠ‚</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;addChapter&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">addChapter</span><span class="params">(<span class="meta">@RequestBody</span> EduChapter eduChapter)</span> </span>&#123;</span><br><span class="line">        chapterService.save(eduChapter);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ä¿®æ”¹ç« èŠ‚</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;updateChapter&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">updateChapter</span><span class="params">(<span class="meta">@RequestBody</span> EduChapter eduChapter)</span> </span>&#123;</span><br><span class="line">        chapterService.updateById(eduChapter);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ é™¤ç« èŠ‚</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;&#123;chapterId&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">deleteChapter</span><span class="params">(<span class="meta">@PathVariable(&quot;chapterId&quot;)</span> String chapterId)</span> </span>&#123;</span><br><span class="line">       <span class="comment">// è‡ªå®šä¹‰æ–¹æ³•ï¼Œå¦‚æœæœ‰å°èŠ‚åˆ™ä¸è®©åˆ </span></span><br><span class="line">        Boolean b = chapterService.deleteChapter(chapterId);</span><br><span class="line">        <span class="keyword">return</span> b ? R.ok() : R.error();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™service-4"><a href="#ç¼–å†™service-4" class="headerlink" title="ç¼–å†™service"></a>ç¼–å†™service</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ é™¤ç« èŠ‚</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Boolean <span class="title">deleteChapter</span><span class="params">(String chapterId)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ ¹æ®idåˆ¤æ–­æ˜¯å¦æœ‰å°èŠ‚</span></span><br><span class="line">    QueryWrapper&lt;EduVideo&gt; queryWrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    queryWrapper.eq(<span class="string">&quot;chapter_id&quot;</span>, chapterId);</span><br><span class="line">    <span class="comment">// è·å¾—å°èŠ‚æ•°</span></span><br><span class="line">    <span class="keyword">int</span> count = videoService.count(queryWrapper);</span><br><span class="line">    <span class="keyword">if</span> (count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;å«æœ‰å°èŠ‚æ— æ³•åˆ é™¤&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">int</span> row = baseMapper.deleteById(chapterId);</span><br><span class="line">        <span class="keyword">return</span> row &gt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¢ã€åˆ ã€æ”¹è¯¾ç¨‹ç« èŠ‚ï¼ˆå‰ç«¯ï¼‰"><a href="#å¢ã€åˆ ã€æ”¹è¯¾ç¨‹ç« èŠ‚ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="å¢ã€åˆ ã€æ”¹è¯¾ç¨‹ç« èŠ‚ï¼ˆå‰ç«¯ï¼‰"></a>å¢ã€åˆ ã€æ”¹è¯¾ç¨‹ç« èŠ‚ï¼ˆå‰ç«¯ï¼‰</h2><h3 id="api-2"><a href="#api-2" class="headerlink" title="api"></a>api</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// æ·»åŠ ç« èŠ‚</span></span><br><span class="line">    <span class="function"><span class="title">addChapter</span>(<span class="params">chapter</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> request(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">`/eduservice/chapter/addChapter`</span>,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>: chapter</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// æ ¹æ®idæŸ¥è¯¢ç« èŠ‚</span></span><br><span class="line">    <span class="function"><span class="title">getChapterInfo</span>(<span class="params">chapterId</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> request(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">`/eduservice/chapter/getChapterInfo/`</span> + chapterId,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ä¿®æ”¹ç« èŠ‚</span></span><br><span class="line">    <span class="function"><span class="title">updateChapter</span>(<span class="params">chapter</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> request(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">`/eduservice/chapter/updateChapter`</span>,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>: chapter</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// åˆ é™¤ç« èŠ‚</span></span><br><span class="line">    <span class="function"><span class="title">deleteChapter</span>(<span class="params">chapterId</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> request(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">`/eduservice/chapter/`</span> + chapterId,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;delete&#x27;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="vueè§†å›¾æ¨¡æ¿"><a href="#vueè§†å›¾æ¨¡æ¿" class="headerlink" title="vueè§†å›¾æ¨¡æ¿"></a>vueè§†å›¾æ¨¡æ¿</h3><blockquote><p>element-ui dialog cvå°±å®Œäº‹äº†</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">        &lt;!-- æ·»åŠ ç« èŠ‚æŒ‰é’® --&gt;</span><br><span class="line">        &lt;el-button type=&quot;text&quot; @click=&quot;dialogChapterFormVisible = true&quot;</span><br><span class="line">            &gt;æ·»åŠ ç« èŠ‚&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">        &lt;!-- æ·»åŠ å’Œä¿®æ”¹ç« èŠ‚è¡¨å• --&gt;</span><br><span class="line">        &lt;el-dialog :visible.sync=&quot;dialogChapterFormVisible&quot; title=&quot;æ·»åŠ ç« èŠ‚&quot;&gt;</span><br><span class="line">            &lt;el-form :model=&quot;chapter&quot; label-width=&quot;120px&quot;&gt;</span><br><span class="line">                &lt;el-form-item label=&quot;ç« èŠ‚æ ‡é¢˜&quot;&gt;</span><br><span class="line">                    &lt;el-input v-model=&quot;chapter.title&quot; /&gt;</span><br><span class="line">                &lt;/el-form-item&gt;</span><br><span class="line">                &lt;el-form-item label=&quot;ç« èŠ‚æ’åº&quot;&gt;</span><br><span class="line">                    &lt;el-input-number</span><br><span class="line">                        v-model=&quot;chapter.sort&quot;</span><br><span class="line">                        :min=&quot;0&quot;</span><br><span class="line">                        controls-position=&quot;right&quot;</span><br><span class="line">                    /&gt;</span><br><span class="line">                &lt;/el-form-item&gt;</span><br><span class="line">            &lt;/el-form&gt;</span><br><span class="line">            &lt;div slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">                &lt;el-button @click=&quot;dialogChapterFormVisible = false&quot;</span><br><span class="line">                    &gt;å– æ¶ˆ&lt;/el-button</span><br><span class="line">                &gt;</span><br><span class="line">                &lt;el-button type=&quot;primary&quot; @click=&quot;saveOrUpdate&quot;</span><br><span class="line">                    &gt;ç¡® å®š&lt;/el-button</span><br><span class="line">                &gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/el-dialog&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import chapterApi from &#x27;@/api/edu/chapter&#x27;</span><br><span class="line">    export default &#123;</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          saveBtnDisabled: false,</span><br><span class="line">          courseId: &#x27;&#x27;, // è¯¾ç¨‹id</span><br><span class="line">          chapterVideoList: [],</span><br><span class="line">          chapter: &#123;</span><br><span class="line">            // å°è£…ç« èŠ‚æ•°æ®</span><br><span class="line">            title: &#x27;&#x27;,</span><br><span class="line">            sort: 0</span><br><span class="line">          &#125;,</span><br><span class="line">          video: &#123;</span><br><span class="line">            title: &#x27;&#x27;,</span><br><span class="line">            sort: 0,</span><br><span class="line">            free: 0,</span><br><span class="line">            videoSourceId: &#x27;&#x27;</span><br><span class="line">          &#125;,</span><br><span class="line">          dialogChapterFormVisible: false, // ç« èŠ‚å¼¹æ¡†</span><br><span class="line">          dialogVideoFormVisible: false // å°èŠ‚å¼¹æ¡†</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="vueæ–¹æ³•"><a href="#vueæ–¹æ³•" class="headerlink" title="vueæ–¹æ³•"></a>vueæ–¹æ³•</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">saveOrUpdate</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.chapter.id) &#123;</span><br><span class="line">    <span class="built_in">this</span>.updateChapter()</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.addChapter()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// æ·»åŠ ç« èŠ‚</span></span><br><span class="line"><span class="function"><span class="title">addChapter</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="comment">// è®°å¾—æ·»åŠ id</span></span><br><span class="line">  <span class="built_in">this</span>.chapter.courseId = <span class="built_in">this</span>.courseId</span><br><span class="line">  <span class="comment">// è°ƒç”¨api</span></span><br><span class="line">  chapterApi.addChapter(<span class="built_in">this</span>.chapter).then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// å…³é—­å¼¹æ¡†</span></span><br><span class="line">    <span class="built_in">this</span>.dialogChapterFormVisible = <span class="literal">false</span></span><br><span class="line">    <span class="comment">// æ˜¾ç¤ºæç¤ºä¿¡æ¯</span></span><br><span class="line">    <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;æ·»åŠ ç« èŠ‚æˆåŠŸ!&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// åˆ·æ–°é¡µé¢</span></span><br><span class="line">    <span class="built_in">this</span>.getChapterVideo()</span><br><span class="line">    <span class="comment">// æ¸…ç©ºå¼¹æ¡†è¡¨å•å†…å®¹</span></span><br><span class="line">    <span class="built_in">this</span>.chapter = &#123; <span class="attr">title</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">sort</span>: <span class="number">0</span> &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// ä¿®æ”¹ç« èŠ‚,æ˜¾ç¤ºå¼¹æ¡†ï¼Œæ•°æ®å›æ˜¾</span></span><br><span class="line"><span class="function"><span class="title">openEditChatper</span>(<span class="params">chapterId</span>)</span> &#123;</span><br><span class="line">  <span class="comment">// å¼¹æ¡†</span></span><br><span class="line">  <span class="built_in">this</span>.openChapterDialog()</span><br><span class="line">  <span class="comment">// api</span></span><br><span class="line">  chapterApi.getChapterInfo(chapterId).then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.chapter = result.data.chapterInfo</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// ä¿®æ”¹ç« èŠ‚</span></span><br><span class="line"><span class="function"><span class="title">updateChapter</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="comment">// è°ƒç”¨api</span></span><br><span class="line">  chapterApi.updateChapter(<span class="built_in">this</span>.chapter).then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// å…³é—­å¼¹æ¡†</span></span><br><span class="line">    <span class="built_in">this</span>.dialogChapterFormVisible = <span class="literal">false</span></span><br><span class="line">    <span class="comment">// æ˜¾ç¤ºæç¤ºä¿¡æ¯</span></span><br><span class="line">    <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;ä¿®æ”¹ç« èŠ‚æˆåŠŸ!&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// åˆ·æ–°é¡µé¢</span></span><br><span class="line">    <span class="built_in">this</span>.getChapterVideo()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// åˆ é™¤ç« èŠ‚</span></span><br><span class="line"><span class="function"><span class="title">removeChapter</span>(<span class="params">chapterId</span>)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.$confirm(<span class="string">&#x27;æ­¤æ“ä½œå°†æ°¸ä¹…åˆ é™¤è¯¥ç« èŠ‚è®°å½•, æ˜¯å¦ç»§ç»­?&#x27;</span>, <span class="string">&#x27;æç¤º&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">confirmButtonText</span>: <span class="string">&#x27;ç¡®å®š&#x27;</span>,</span><br><span class="line">    <span class="attr">cancelButtonText</span>: <span class="string">&#x27;å–æ¶ˆ&#x27;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span></span><br><span class="line">  &#125;).then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    chapterApi</span><br><span class="line">      .deleteChapter(chapterId)</span><br><span class="line">      .then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// æ˜¾ç¤ºæç¤ºä¿¡æ¯</span></span><br><span class="line">        <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">          <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&#x27;åˆ é™¤æˆåŠŸ!&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// åˆ·æ–°é¡µé¢</span></span><br><span class="line">        <span class="built_in">this</span>.getChapterVideo()</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// æ˜¾ç¤ºæç¤ºä¿¡æ¯</span></span><br><span class="line">        <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">          <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&#x27;åˆ é™¤å¤±è´¥!&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// å¼¹å‡ºç« èŠ‚å¼¹æ¡†</span></span><br><span class="line"><span class="function"><span class="title">openChapterDialog</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="comment">// å¼¹æ¡†</span></span><br><span class="line">  <span class="built_in">this</span>.dialogChapterFormVisible = <span class="literal">true</span></span><br><span class="line">  <span class="comment">// æ¸…ç©ºå¼¹æ¡†è¡¨å•å†…å®¹</span></span><br><span class="line">  <span class="built_in">this</span>.chapter = &#123; <span class="attr">title</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">sort</span>: <span class="number">0</span> &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// æ ¹æ®idæŸ¥è¯¢ç« èŠ‚å’Œå°èŠ‚</span></span><br><span class="line"><span class="function"><span class="title">getChapterVideo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  chapterApi.getChapterVideo(<span class="built_in">this</span>.courseId).then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.chapterVideoList = result.data.chapterVideoList</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="å¢ã€åˆ ã€æ”¹å°èŠ‚ï¼ˆåç«¯ï¼‰ï¼ˆå¾…å®Œå–„ï¼‰"><a href="#å¢ã€åˆ ã€æ”¹å°èŠ‚ï¼ˆåç«¯ï¼‰ï¼ˆå¾…å®Œå–„ï¼‰" class="headerlink" title="å¢ã€åˆ ã€æ”¹å°èŠ‚ï¼ˆåç«¯ï¼‰ï¼ˆå¾…å®Œå–„ï¼‰"></a>å¢ã€åˆ ã€æ”¹å°èŠ‚ï¼ˆåç«¯ï¼‰ï¼ˆå¾…å®Œå–„ï¼‰</h2><blockquote><p>å·²å®Œå–„ï¼Œè¯¦è§é¡¹ç›®ç¬”è®°4</p></blockquote><h3 id="controller"><a href="#controller" class="headerlink" title="controller"></a>controller</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/eduservice/video&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span>    <span class="comment">// è·¨åŸŸ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduVideoController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduVideoService videoService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ·»åŠ å°èŠ‚</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;addVideo&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">addVideo</span><span class="params">(<span class="meta">@RequestBody</span> EduVideo eduVideo)</span> </span>&#123;</span><br><span class="line">        videoService.save(eduVideo);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤å°èŠ‚</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;&#123;videoId&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">deleteVideo</span><span class="params">(<span class="meta">@PathVariable(&quot;videoId&quot;)</span> String videoId)</span> </span>&#123;</span><br><span class="line">        videoService.removeById(videoId);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¿®æ”¹å°èŠ‚</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;updateVideo&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">updateVideo</span><span class="params">(<span class="meta">@RequestBody</span> EduVideo eduVideo)</span> </span>&#123;</span><br><span class="line">        videoService.updateById(eduVideo);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ ¹æ®å°èŠ‚idæŸ¥è¯¢å°èŠ‚</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;getVideoInfo/&#123;videoId&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">getVideoInfo</span><span class="params">(<span class="meta">@PathVariable(&quot;videoId&quot;)</span> String videoId)</span> </span>&#123;</span><br><span class="line">        EduVideo video = videoService.getById(videoId);</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">&quot;videoInfo&quot;</span>, video);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¢ã€åˆ ã€æ”¹å°èŠ‚ï¼ˆå‰ç«¯ï¼‰ï¼ˆå¾…å®Œå–„ï¼‰"><a href="#å¢ã€åˆ ã€æ”¹å°èŠ‚ï¼ˆå‰ç«¯ï¼‰ï¼ˆå¾…å®Œå–„ï¼‰" class="headerlink" title="å¢ã€åˆ ã€æ”¹å°èŠ‚ï¼ˆå‰ç«¯ï¼‰ï¼ˆå¾…å®Œå–„ï¼‰"></a>å¢ã€åˆ ã€æ”¹å°èŠ‚ï¼ˆå‰ç«¯ï¼‰ï¼ˆå¾…å®Œå–„ï¼‰</h2><h3 id="api-3"><a href="#api-3" class="headerlink" title="api"></a>api</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// æ·»åŠ å°èŠ‚</span></span><br><span class="line">    <span class="function"><span class="title">addVideo</span>(<span class="params">video</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> request(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">`/eduservice/video/addVideo`</span>,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>: video</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// åˆ é™¤å°èŠ‚</span></span><br><span class="line">    <span class="function"><span class="title">deleteVideo</span>(<span class="params">videoId</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> request(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">`/eduservice/video/`</span> + videoId,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;delete&#x27;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ä¿®æ”¹å°èŠ‚</span></span><br><span class="line">    <span class="function"><span class="title">updateVideo</span>(<span class="params">video</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> request(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">`/eduservice/video/updateVideo`</span>,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>: video</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// æ ¹æ®idè·å¾—å°èŠ‚ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="title">getVideoInfo</span>(<span class="params">videoId</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> request(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">`/eduservice/video/getVideoInfo/`</span> + videoId,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="vueæ¨¡æ¿"><a href="#vueæ¨¡æ¿" class="headerlink" title="vueæ¨¡æ¿"></a>vueæ¨¡æ¿</h3><blockquote><p>å’Œç« èŠ‚ç±»ä¼¼ï¼Œæœ‰ä¸€ä¸ªæ·»åŠ æˆ–è€…åˆ é™¤çš„å¼¹çª—</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ·»åŠ å’Œä¿®æ”¹å°èŠ‚è¡¨å• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;dialogVideoFormVisible&quot;</span> <span class="attr">title</span>=<span class="string">&quot;æ·»åŠ è¯¾æ—¶&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;video&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;120px&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;è¯¾æ—¶æ ‡é¢˜&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;video.title&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;è¯¾æ—¶æ’åº&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input-number</span></span></span><br><span class="line"><span class="tag">                <span class="attr">v-model</span>=<span class="string">&quot;video.sort&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:min</span>=<span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">controls-position</span>=<span class="string">&quot;right&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;æ˜¯å¦å…è´¹&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-radio-group</span> <span class="attr">v-model</span>=<span class="string">&quot;video.free&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">:label</span>=<span class="string">&quot;true&quot;</span>&gt;</span>å…è´¹<span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">:label</span>=<span class="string">&quot;false&quot;</span>&gt;</span>é»˜è®¤<span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-radio-group</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;ä¸Šä¼ è§†é¢‘&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- TODO --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;dialogVideoFormVisible = false&quot;</span></span></span><br><span class="line"><span class="tag">            &gt;</span>å– æ¶ˆ&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:disabled</span>=<span class="string">&quot;saveVideoBtnDisabled&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">click</span>=<span class="string">&quot;saveOrUpdateVideo&quot;</span></span></span><br><span class="line"><span class="tag">            &gt;</span>ç¡® å®š&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="vueæ–¹æ³•-1"><a href="#vueæ–¹æ³•-1" class="headerlink" title="vueæ–¹æ³•"></a>vueæ–¹æ³•</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line"><span class="comment">// ++++++++++++++++++å°èŠ‚æ“ä½œ+++++++++++++++++++++</span></span><br><span class="line"><span class="comment">// æ‰“å¼€å°èŠ‚ç¼–è¾‘å¼¹æ¡†</span></span><br><span class="line"><span class="function"><span class="title">openEditVideo</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">  <span class="comment">// å¼¹æ¡†</span></span><br><span class="line">  <span class="built_in">this</span>.dialogVideoFormVisible = <span class="literal">true</span></span><br><span class="line">  <span class="comment">// è®¾ç½®ç« èŠ‚id</span></span><br><span class="line">  <span class="built_in">this</span>.video.chapterId = id</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// æ·»åŠ å°èŠ‚</span></span><br><span class="line"><span class="function"><span class="title">addVideo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="comment">// è®¾ç½®è¯¾ç¨‹id</span></span><br><span class="line">  <span class="built_in">this</span>.video.courseId = <span class="built_in">this</span>.courseId</span><br><span class="line">  videoApi.addVideo(<span class="built_in">this</span>.video).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// å…³é—­å¼¹æ¡†</span></span><br><span class="line">    <span class="built_in">this</span>.dialogVideoFormVisible = <span class="literal">false</span></span><br><span class="line">    <span class="comment">// æç¤º</span></span><br><span class="line">    <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;æ·»åŠ å°èŠ‚æˆåŠŸ!&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// åˆ·æ–°é¡µé¢</span></span><br><span class="line">    <span class="built_in">this</span>.getChapterVideo()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// ä¿®æ”¹å°èŠ‚</span></span><br><span class="line"><span class="function"><span class="title">updateVideo</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line"><span class="comment">// åˆ é™¤å°èŠ‚</span></span><br><span class="line"><span class="function"><span class="title">removeVideo</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.$confirm(<span class="string">&#x27;æ­¤æ“ä½œå°†åˆ é™¤å°èŠ‚, æ˜¯å¦ç»§ç»­?&#x27;</span>, <span class="string">&#x27;æç¤º&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">confirmButtonText</span>: <span class="string">&#x27;ç¡®å®š&#x27;</span>,</span><br><span class="line">    <span class="attr">cancelButtonText</span>: <span class="string">&#x27;å–æ¶ˆ&#x27;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span></span><br><span class="line">  &#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ç‚¹å‡»ç¡®å®šï¼Œæ‰§è¡Œthenæ–¹æ³•</span></span><br><span class="line">    <span class="comment">// è°ƒç”¨åˆ é™¤çš„æ–¹æ³•</span></span><br><span class="line">    videoApi.deleteVideo(id).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// åˆ é™¤æˆåŠŸ</span></span><br><span class="line">      <span class="comment">// æç¤ºä¿¡æ¯</span></span><br><span class="line">      <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&#x27;åˆ é™¤å°èŠ‚æˆåŠŸ!&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="comment">// åˆ·æ–°é¡µé¢</span></span><br><span class="line">      <span class="built_in">this</span>.getChapterVideo()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;) <span class="comment">// ç‚¹å‡»å–æ¶ˆï¼Œæ‰§è¡Œcatchæ–¹æ³•</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="title">saveOrUpdateVideo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="comment">// å…ˆå†™addï¼Œå­¦äº†è§†é¢‘ä¸Šä¼ åœ¨ä¿®æ”¹</span></span><br><span class="line">  <span class="built_in">this</span>.addVideo()</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// ++++++++++++++++++å°èŠ‚æ“ä½œ+++++++++++++++++++++</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> é¡¹ç›® </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> SpringCloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€é¡¹ç›®ç¬”è®°ã€‘åœ¨çº¿æ•™è‚²é¡¹ç›®å®æˆ˜2</title>
      <link href="/2021/09/21/xiang-mu-bi-ji-zai-xian-jiao-yu-xiang-mu-shi-zhan-2/"/>
      <url>/2021/09/21/xiang-mu-bi-ji-zai-xian-jiao-yu-xiang-mu-shi-zhan-2/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰ç«¯æŠ€æœ¯ç‚¹ç®€å•ä»‹ç»"><a href="#å‰ç«¯æŠ€æœ¯ç‚¹ç®€å•ä»‹ç»" class="headerlink" title="å‰ç«¯æŠ€æœ¯ç‚¹ç®€å•ä»‹ç»"></a>å‰ç«¯æŠ€æœ¯ç‚¹ç®€å•ä»‹ç»</h2><blockquote><p>ä¸€ä¸‹æŠ€æœ¯ç‚¹è¯¦è§å…¶å®˜æ–¹æ–‡æ¡£æˆ–è€…è¯¾ä»¶ï¼Œæˆ‘å°±ç„äº†å‡ çœ¼ï¼Œä¹‹å‰å¤šå¤šå°‘å°‘ä¹Ÿå­¦è¿‡äº† </p><ol><li>ES6</li><li>Vue</li><li>axios</li><li>node.js</li><li>babel</li><li>æ¨¡å—åŒ–</li><li>webpack</li></ol></blockquote><h2 id="æ­å»ºå‰ç«¯ç¯å¢ƒä¸æ¡†æ¶å¼€å‘è¿‡ç¨‹"><a href="#æ­å»ºå‰ç«¯ç¯å¢ƒä¸æ¡†æ¶å¼€å‘è¿‡ç¨‹" class="headerlink" title="æ­å»ºå‰ç«¯ç¯å¢ƒä¸æ¡†æ¶å¼€å‘è¿‡ç¨‹"></a>æ­å»ºå‰ç«¯ç¯å¢ƒä¸æ¡†æ¶å¼€å‘è¿‡ç¨‹</h2><h3 id="vscodeåˆ›å»ºå·¥ä½œåŒº"><a href="#vscodeåˆ›å»ºå·¥ä½œåŒº" class="headerlink" title="vscodeåˆ›å»ºå·¥ä½œåŒº"></a>vscodeåˆ›å»ºå·¥ä½œåŒº</h3><blockquote><ol><li>æ–°å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹</li><li>ç”¨VSCodeæ‰“å¼€è¯¥æ–‡ä»¶å¤¹</li><li>é€‰æ‹©èœå•æ  <code>æ–‡ä»¶ -&gt; å°†æ–‡ä»¶å¤¹å¦å­˜ä¸ºå·¥ä½œåŒº</code> å³å¯</li></ol></blockquote><h3 id="æµ‹è¯•è¿è¡Œnpm"><a href="#æµ‹è¯•è¿è¡Œnpm" class="headerlink" title="æµ‹è¯•è¿è¡Œnpm"></a>æµ‹è¯•è¿è¡Œnpm</h3><blockquote><ol><li>å¤åˆ¶templateæ–‡ä»¶å¤¹è‡³å·¥ä½œåŒº</li><li>å®‰è£…ä¾èµ–<code>npm install</code></li><li><code>npm run dev</code>æµ‹è¯•</li><li><code>config -&gt; index.js -&gt; useEslint = false</code>å…³é—­ä»£ç æ£€æŸ¥</li></ol></blockquote><h3 id="vueé¡¹ç›®å®ç°"><a href="#vueé¡¹ç›®å®ç°" class="headerlink" title="vueé¡¹ç›®å®ç°"></a>vueé¡¹ç›®å®ç°</h3><blockquote><ol><li>src -&gt; router -&gt; index.js æ·»åŠ è·¯ç”±</li><li>views -&gt; xxx -&gt; xxx.vue åˆ›å»ºvueé¡µé¢</li><li>api -&gt; xxx.js å®šä¹‰æ¥å£åœ°å€å’Œå‚æ•°</li><li>åœ¨vueé¡µé¢å¼•å…¥jsæ–‡ä»¶ï¼Œè°ƒç”¨æ–¹æ³•å®ç°åŠŸèƒ½</li></ol></blockquote><h2 id="ç”¨æˆ·ç™»å½•å’Œè·¨åŸŸï¼ˆåç«¯-å‰ç«¯ï¼‰"><a href="#ç”¨æˆ·ç™»å½•å’Œè·¨åŸŸï¼ˆåç«¯-å‰ç«¯ï¼‰" class="headerlink" title="ç”¨æˆ·ç™»å½•å’Œè·¨åŸŸï¼ˆåç«¯+å‰ç«¯ï¼‰"></a>ç”¨æˆ·ç™»å½•å’Œè·¨åŸŸï¼ˆåç«¯+å‰ç«¯ï¼‰</h2><h3 id="ä¿®æ”¹BASE-APIï¼ˆè¯·æ±‚è·¯å¾„å‰ç¼€ï¼‰"><a href="#ä¿®æ”¹BASE-APIï¼ˆè¯·æ±‚è·¯å¾„å‰ç¼€ï¼‰" class="headerlink" title="ä¿®æ”¹BASE_APIï¼ˆè¯·æ±‚è·¯å¾„å‰ç¼€ï¼‰"></a>ä¿®æ”¹BASE_APIï¼ˆè¯·æ±‚è·¯å¾„å‰ç¼€ï¼‰</h3><blockquote><p>config -&gt; dev.env.jsæ–‡ä»¶</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = merge(prodEnv, &#123;</span><br><span class="line">  <span class="attr">NODE_ENV</span>: <span class="string">&#x27;&quot;development&quot;&#x27;</span>,</span><br><span class="line">  <span class="comment">// BASE_API: &#x27;&quot;https://easy-mock.com/mock/5950a2419adc231f356a6636/vue-admin&quot;&#x27;,</span></span><br><span class="line">  <span class="comment">// æ³¨æ„è¿™é‡Œè¦ä½¿ç”¨http</span></span><br><span class="line">  <span class="attr">BASE_API</span>: <span class="string">&#x27;&quot;http://localhost:8001&quot;&#x27;</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™loginController"><a href="#ç¼–å†™loginController" class="headerlink" title="ç¼–å†™loginController"></a>ç¼–å†™loginController</h3><blockquote><p>å…ˆè·³è¿‡æ•°æ®åº“éªŒè¯</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.eduservice.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.commonutils.R;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.Api;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Api(&quot;åå°ç™»å½•&quot;)</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/eduservice/user&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span>    <span class="comment">// è§£å†³è·¨åŸŸé—®é¢˜</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduLoginController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç™»å½•</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;login&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">login</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å…ˆè·³è¿‡éªŒè¯</span></span><br><span class="line">        <span class="comment">// æ­¤å¤„tokenéœ€è¦ä¸å‰ç«¯å¯¹åº”</span></span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">&quot;token&quot;</span>, <span class="string">&quot;admin&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å¾—ç”¨æˆ·æ•°æ®</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;info&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">info</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">&quot;roles&quot;</span>, <span class="string">&quot;[admin]&quot;</span>).data(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;admin&quot;</span>).data(<span class="string">&quot;avatar&quot;</span>, <span class="string">&quot;https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹å‰ç«¯è®¿é—®è·¯å¾„"><a href="#ä¿®æ”¹å‰ç«¯è®¿é—®è·¯å¾„" class="headerlink" title="ä¿®æ”¹å‰ç«¯è®¿é—®è·¯å¾„"></a>ä¿®æ”¹å‰ç«¯è®¿é—®è·¯å¾„</h3><blockquote><p>ä¿®æ”¹apiæ–‡ä»¶å¤¹ä¸‹çš„login.jsé‡Œçš„æ¥å£è·¯å¾„å³å¯</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params">username, password</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/eduservice/user/login&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      username,</span><br><span class="line">      password</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params">token</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/eduservice/user/info&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">    <span class="attr">params</span>: &#123; token &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è·¨åŸŸé—®é¢˜"><a href="#è·¨åŸŸé—®é¢˜" class="headerlink" title="è·¨åŸŸé—®é¢˜"></a>è·¨åŸŸé—®é¢˜</h2><blockquote><p>è®¿é—®åœ°å€çš„æ—¶å€™ï¼Œä»¥ä¸‹ä»»ä½•ä¸€ä¸ªåœ°æ–¹ä¸åŒï¼Œä¼šäº§ç”Ÿè·¨åŸŸé—®é¢˜ï¼š</p><ol><li>è®¿é—®åè®®</li><li>IPåœ°å€</li><li>ç«¯å£å·</li></ol></blockquote><blockquote><ol><li>åœ¨åç«¯controlleræ¥å£ä¸Šæ·»åŠ æ³¨è§£@CrossOriginå³å¯ï¼ˆå¸¸ç”¨ï¼‰</li><li>ä½¿ç”¨ç½‘å…³è§£å†³</li></ol></blockquote><h2 id="è®²å¸ˆç®¡ç†æ¨¡å—ï¼ˆå‰ç«¯ï¼‰"><a href="#è®²å¸ˆç®¡ç†æ¨¡å—ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="è®²å¸ˆç®¡ç†æ¨¡å—ï¼ˆå‰ç«¯ï¼‰"></a>è®²å¸ˆç®¡ç†æ¨¡å—ï¼ˆå‰ç«¯ï¼‰</h2><h3 id="è®²å¸ˆåˆ—è¡¨"><a href="#è®²å¸ˆåˆ—è¡¨" class="headerlink" title="è®²å¸ˆåˆ—è¡¨"></a>è®²å¸ˆåˆ—è¡¨</h3><h4 id="æ·»åŠ è·¯ç”±"><a href="#æ·»åŠ è·¯ç”±" class="headerlink" title="æ·»åŠ è·¯ç”±"></a>æ·»åŠ è·¯ç”±</h4><blockquote><p>src\router\index.js  -&gt;  constantRouterMap  -&gt;  children  -&gt;  component</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> constantRouterMap = [</span><br><span class="line">    <span class="comment">// â€¦â€¦</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/teacher&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: Layout,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/teacher/table&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;è®²å¸ˆç®¡ç†&#x27;</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;è®²å¸ˆç®¡ç†&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;example&#x27;</span> &#125;,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;list&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;è®²å¸ˆåˆ—è¡¨&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/edu/teacher/list&#x27;</span>),</span><br><span class="line">        <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;è®²å¸ˆåˆ—è¡¨&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;table&#x27;</span> &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;save&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;æ·»åŠ è®²å¸ˆ&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/edu/teacher/save&#x27;</span>),</span><br><span class="line">        <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;æ·»åŠ è®²å¸ˆ&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;tree&#x27;</span> &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">    <span class="comment">// â€¦â€¦</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºå¹¶ç¼–å†™jsæ–‡ä»¶ï¼ˆè°ƒç”¨æ¥å£ï¼‰"><a href="#åˆ›å»ºå¹¶ç¼–å†™jsæ–‡ä»¶ï¼ˆè°ƒç”¨æ¥å£ï¼‰" class="headerlink" title="åˆ›å»ºå¹¶ç¼–å†™jsæ–‡ä»¶ï¼ˆè°ƒç”¨æ¥å£ï¼‰"></a>åˆ›å»ºå¹¶ç¼–å†™jsæ–‡ä»¶ï¼ˆè°ƒç”¨æ¥å£ï¼‰</h4><blockquote><p>src\api\edu\teacher.js</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥è¯¢è®²å¸ˆåˆ—è¡¨ï¼ˆå¸¦æ¡ä»¶åˆ†é¡µï¼‰</span></span><br><span class="line">    <span class="function"><span class="title">getTeacherListPage</span>(<span class="params">current, limit, teacherQuery</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> request(&#123;</span><br><span class="line">            <span class="comment">// urlå¯ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œä½†æ˜¯æœ€å¥½ç”¨åå¼•å·</span></span><br><span class="line">            <span class="attr">url</span>: <span class="string">`/eduservice/teacher/pageTeacherCondition/<span class="subst">$&#123;current&#125;</span>/<span class="subst">$&#123;limit&#125;</span>`</span>,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">            <span class="comment">// åç«¯ä½¿ç”¨requestBodyè·å–teacherQueryï¼Œæ­¤æ—¶éœ€è¦ç”¨dataï¼ˆå°†teacherQueryè½¬æ¢ä¸ºJSONæ ¼å¼ä¼ è¾“ï¼‰</span></span><br><span class="line">            <span class="attr">data</span>: teacherQuery</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºvueé¡µé¢ï¼Œé€šè¿‡æ¥å£è·å–æ•°æ®"><a href="#åˆ›å»ºvueé¡µé¢ï¼Œé€šè¿‡æ¥å£è·å–æ•°æ®" class="headerlink" title="åˆ›å»ºvueé¡µé¢ï¼Œé€šè¿‡æ¥å£è·å–æ•°æ®"></a>åˆ›å»ºvueé¡µé¢ï¼Œé€šè¿‡æ¥å£è·å–æ•°æ®</h4><blockquote><p>æ³¨æ„routerMapä¸­çš„å¯¹åº”å¯¹è±¡ï¼ˆå³åˆ›å»ºçš„routerï¼‰ä¸­componentå¯¹åº”çš„åœ°å€ï¼Œå°±æ˜¯vueç»„ä»¶çš„åœ°å€ï¼Œåœ¨è¯¥åœ°å€ä¸‹åˆ›å»ºvueæ–‡ä»¶</p><p>src\views\edu\teacher\list.vue</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;app-container&quot;&gt;è®²å¸ˆåˆ—è¡¨&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    // å¼•å…¥è°ƒç”¨æ¥å£çš„jsæ–‡ä»¶</span><br><span class="line">    import teacher from &quot;@/api/edu/teacher.js&quot;;</span><br><span class="line"></span><br><span class="line">    export default &#123;</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                list: null, // æŸ¥è¯¢æ¥å£ä¹‹åè·å¾—çš„åˆ—è¡¨</span><br><span class="line">                page: 1, // å½“å‰é¡µ</span><br><span class="line">                limit: 10, // æ¯é¡µè®°å½•æ•°</span><br><span class="line">                total: 0, // æ€»è®°å½•æ•°</span><br><span class="line">                teacherQuery: &#123;&#125;, // æ¡ä»¶å€¼å¯¹è±¡</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;,</span><br><span class="line">        created() &#123;</span><br><span class="line">            this.getList();</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            // è·å¾—è®²å¸ˆåˆ—è¡¨</span><br><span class="line">            getList() &#123;</span><br><span class="line">                teacher</span><br><span class="line">                    .getTeacherListPage(this.page, this.limit, this.teacherQuery)</span><br><span class="line">                    .then((response) =&gt; &#123;</span><br><span class="line">                        // console.log(response);</span><br><span class="line">                        this.list = response.data.records;</span><br><span class="line">                        this.total = response.data.total;</span><br><span class="line">                    &#125;)</span><br><span class="line">                    .catch((error) =&gt; &#123;</span><br><span class="line">                        console.log(error);</span><br><span class="line">                    &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™åˆ—è¡¨æ ¼å¼ä»£ç "><a href="#ç¼–å†™åˆ—è¡¨æ ¼å¼ä»£ç " class="headerlink" title="ç¼–å†™åˆ—è¡¨æ ¼å¼ä»£ç "></a>ç¼–å†™åˆ—è¡¨æ ¼å¼ä»£ç </h4><blockquote><p>ä½¿ç”¨element-uiè¡¨æ ¼å³å¯</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">        &lt;!-- è¡¨æ ¼ --&gt;</span><br><span class="line">        &lt;el-table :data=&quot;list&quot; border fit highlight-current-row&gt;</span><br><span class="line">            &lt;el-table-column label=&quot;åºå·&quot; width=&quot;70&quot; header-align=&quot;center&quot;&gt;</span><br><span class="line">                &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">                    &#123;&#123; (page - 1) * limit + scope.$index + 1 &#125;&#125;</span><br><span class="line">                &lt;/template&gt;</span><br><span class="line">            &lt;/el-table-column&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-table-column prop=&quot;name&quot; label=&quot;åç§°&quot; width=&quot;80&quot; header-align=&quot;center&quot;/&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-table-column label=&quot;å¤´è¡”&quot; width=&quot;80&quot; header-align=&quot;center&quot;&gt;</span><br><span class="line">                &lt;!-- ä½¿ç”¨template slot-scope è¿›è¡Œåˆ¤æ–­æ˜¾ç¤º --&gt;</span><br><span class="line">                &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">                    &#123;&#123; scope.row.level === 1 ? &quot;é«˜çº§è®²å¸ˆ&quot; : &quot;é¦–å¸­è®²å¸ˆ&quot; &#125;&#125;</span><br><span class="line">                &lt;/template&gt;</span><br><span class="line">            &lt;/el-table-column&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-table-column prop=&quot;intro&quot; label=&quot;èµ„å†&quot; header-align=&quot;center&quot;/&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-table-column prop=&quot;gmtCreate&quot; label=&quot;æ·»åŠ æ—¶é—´&quot; width=&quot;160&quot; header-align=&quot;center&quot;/&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-table-column prop=&quot;sort&quot; label=&quot;æ’åº&quot; width=&quot;60&quot; header-align=&quot;center&quot;/&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-table-column label=&quot;æ“ä½œ&quot; width=&quot;200&quot; align=&quot;center&quot;&gt;</span><br><span class="line">                &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">                    &lt;router-link :to=&quot;&#x27;/teacher/edit/&#x27; + scope.row.id&quot;&gt;</span><br><span class="line">                        &lt;el-button</span><br><span class="line">                            type=&quot;primary&quot;</span><br><span class="line">                            size=&quot;mini&quot;</span><br><span class="line">                            icon=&quot;el-icon-edit&quot;</span><br><span class="line">                            &gt;ä¿®æ”¹&lt;/el-button</span><br><span class="line">                        &gt;</span><br><span class="line">                    &lt;/router-link&gt;</span><br><span class="line">                    &lt;el-button</span><br><span class="line">                        type=&quot;danger&quot;</span><br><span class="line">                        size=&quot;mini&quot;</span><br><span class="line">                        icon=&quot;el-icon-delete&quot;</span><br><span class="line">                        @click=&quot;removeDataById(scope.row.id)&quot;</span><br><span class="line">                        &gt;åˆ é™¤&lt;/el-button</span><br><span class="line">                    &gt;</span><br><span class="line">                &lt;/template&gt;</span><br><span class="line">            &lt;/el-table-column&gt;</span><br><span class="line">        &lt;/el-table&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h4 id="æ·»åŠ åˆ†é¡µæ¡"><a href="#æ·»åŠ åˆ†é¡µæ¡" class="headerlink" title="æ·»åŠ åˆ†é¡µæ¡"></a>æ·»åŠ åˆ†é¡µæ¡</h4><blockquote><p>ä½¿ç”¨element-uiåˆ†é¡µå³å¯</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">        &lt;!-- è¡¨æ ¼ --&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- åˆ†é¡µæ¡ --&gt;</span><br><span class="line">        &lt;!--  @current-change=&quot;getList&quot; åªéœ€è¦å†™æ–¹æ³•åå³å¯ï¼Œè‡ªåŠ¨ä¼ å…¥éœ€è¦è·³è½¬çš„é¡µæ•° --&gt;</span><br><span class="line">        &lt;el-pagination</span><br><span class="line">            :current-page=&quot;page&quot;</span><br><span class="line">            :page-size=&quot;limit&quot;</span><br><span class="line">            :total=&quot;total&quot;</span><br><span class="line">            style=&quot;padding: 30px 0; text-align: center&quot;</span><br><span class="line">            layout=&quot;total, prev, pager, next, jumper&quot;</span><br><span class="line">            @current-change=&quot;getList&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    // å¼•å…¥è°ƒç”¨æ¥å£çš„jsæ–‡ä»¶</span><br><span class="line">    import teacher from &quot;@/api/edu/teacher.js&quot;;</span><br><span class="line"></span><br><span class="line">    export default &#123;</span><br><span class="line">// â€¦â€¦</span><br><span class="line">        methods: &#123;</span><br><span class="line">            // è·å¾—è®²å¸ˆåˆ—è¡¨ï¼Œpageé»˜è®¤ä¸º1</span><br><span class="line">            getList(page = 1) &#123;</span><br><span class="line">                this.page = page;</span><br><span class="line">                teacher</span><br><span class="line">                    .getTeacherListPage(this.page, this.limit, this.teacherQuery)</span><br><span class="line">                    .then((response) =&gt; &#123;</span><br><span class="line">                        // console.log(response);</span><br><span class="line">                        this.list = response.data.records;</span><br><span class="line">                        this.total = response.data.total;</span><br><span class="line">                    &#125;)</span><br><span class="line">                    .catch((error) =&gt; &#123;</span><br><span class="line">                        console.log(error);</span><br><span class="line">                    &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="æ¡ä»¶æŸ¥è¯¢åˆ†é¡µ"><a href="#æ¡ä»¶æŸ¥è¯¢åˆ†é¡µ" class="headerlink" title="æ¡ä»¶æŸ¥è¯¢åˆ†é¡µ"></a>æ¡ä»¶æŸ¥è¯¢åˆ†é¡µ</h4><blockquote><p>ä½¿ç”¨element-uiè¡¨å•å³å¯</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">        &lt;!--æŸ¥è¯¢è¡¨å•--&gt;</span><br><span class="line">        &lt;el-form :inline=&quot;true&quot; class=&quot;demo-form-inline&quot;&gt;</span><br><span class="line">            &lt;el-form-item&gt;</span><br><span class="line">                &lt;el-input v-model=&quot;teacherQuery.name&quot; placeholder=&quot;è®²å¸ˆå&quot; /&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-form-item&gt;</span><br><span class="line">                &lt;el-select</span><br><span class="line">                    v-model=&quot;teacherQuery.level&quot;</span><br><span class="line">                    clearable</span><br><span class="line">                    placeholder=&quot;è®²å¸ˆå¤´è¡”&quot;</span><br><span class="line">                &gt;</span><br><span class="line">                    &lt;el-option :value=&quot;1&quot; label=&quot;é«˜çº§è®²å¸ˆ&quot; /&gt;</span><br><span class="line">                    &lt;el-option :value=&quot;2&quot; label=&quot;é¦–å¸­è®²å¸ˆ&quot; /&gt;</span><br><span class="line">                &lt;/el-select&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-form-item label=&quot;æ·»åŠ æ—¶é—´&quot;&gt;</span><br><span class="line">                &lt;el-date-picker</span><br><span class="line">                    v-model=&quot;teacherQuery.begin&quot;</span><br><span class="line">                    type=&quot;datetime&quot;</span><br><span class="line">                    placeholder=&quot;é€‰æ‹©å¼€å§‹æ—¶é—´&quot;</span><br><span class="line">                    value-format=&quot;yyyy-MM-dd HH:mm:ss&quot;</span><br><span class="line">                    default-time=&quot;00:00:00&quot;</span><br><span class="line">                /&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item&gt;</span><br><span class="line">                &lt;el-date-picker</span><br><span class="line">                    v-model=&quot;teacherQuery.end&quot;</span><br><span class="line">                    type=&quot;datetime&quot;</span><br><span class="line">                    placeholder=&quot;é€‰æ‹©æˆªæ­¢æ—¶é—´&quot;</span><br><span class="line">                    value-format=&quot;yyyy-MM-dd HH:mm:ss&quot;</span><br><span class="line">                    default-time=&quot;00:00:00&quot;</span><br><span class="line">                /&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-button type=&quot;primary&quot; icon=&quot;el-icon-search&quot; @click=&quot;getList()&quot;</span><br><span class="line">                &gt;æŸ¥è¯¢&lt;/el-button</span><br><span class="line">            &gt;</span><br><span class="line">            &lt;el-button type=&quot;default&quot; @click=&quot;resetData()&quot;&gt;æ¸…ç©º&lt;/el-button&gt;</span><br><span class="line">        &lt;/el-form&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    // å¼•å…¥è°ƒç”¨æ¥å£çš„jsæ–‡ä»¶</span><br><span class="line">    import teacher from &quot;@/api/edu/teacher.js&quot;;</span><br><span class="line"></span><br><span class="line">    export default &#123;</span><br><span class="line">        methods: &#123;</span><br><span class="line">            // è·å¾—è®²å¸ˆåˆ—è¡¨ï¼Œpageé»˜è®¤ä¸º1</span><br><span class="line">            getList(page = 1) &#123;</span><br><span class="line">            &#125;,</span><br><span class="line">            //æ¸…ç©ºè¡¨å•è¾“å…¥é¡¹æ•°æ®</span><br><span class="line">            resetData() &#123;</span><br><span class="line">                this.teacherQuery = &#123;&#125;;</span><br><span class="line">                //æŸ¥è¯¢æ‰€æœ‰è®²å¸ˆæ•°æ®</span><br><span class="line">                this.getList();</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤è®²å¸ˆ"><a href="#åˆ é™¤è®²å¸ˆ" class="headerlink" title="åˆ é™¤è®²å¸ˆ"></a>åˆ é™¤è®²å¸ˆ</h3><h4 id="æ·»åŠ é¡µé¢ç»“æ„æŒ‰é’®"><a href="#æ·»åŠ é¡µé¢ç»“æ„æŒ‰é’®" class="headerlink" title="æ·»åŠ é¡µé¢ç»“æ„æŒ‰é’®"></a>æ·»åŠ é¡µé¢ç»“æ„æŒ‰é’®</h4><blockquote><p>è®°å¾—ç»‘å®šå¯¹åº”æ–¹æ³•å</p><p>slotæ’æ§½ï¼Œ<a href="https://www.cnblogs.com/500m/p/11597377.html">Vue - slot-scope=â€scopeâ€ çš„æ„ä¹‰ - æ­¦å¡å¡ - åšå®¢å›­ (cnblogs.com)</a></p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table-column label=&quot;æ“ä½œ&quot; width=&quot;200&quot; align=&quot;center&quot;&gt;</span><br><span class="line">    &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">        &lt;router-link :to=&quot;&#x27;/teacher/edit/&#x27; + scope.row.id&quot;&gt;</span><br><span class="line">            &lt;el-button</span><br><span class="line">                type=&quot;primary&quot;</span><br><span class="line">                size=&quot;mini&quot;</span><br><span class="line">                icon=&quot;el-icon-edit&quot;</span><br><span class="line">                &gt;ä¿®æ”¹&lt;/el-button</span><br><span class="line">            &gt;</span><br><span class="line">        &lt;/router-link&gt;</span><br><span class="line">        &lt;el-button</span><br><span class="line">            type=&quot;danger&quot;</span><br><span class="line">            size=&quot;mini&quot;</span><br><span class="line">            icon=&quot;el-icon-delete&quot;</span><br><span class="line">            @click=&quot;removeDataById(scope.row.id)&quot;</span><br><span class="line">            &gt;åˆ é™¤&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™æ¥å£è°ƒç”¨æ–¹æ³•"><a href="#ç¼–å†™æ¥å£è°ƒç”¨æ–¹æ³•" class="headerlink" title="ç¼–å†™æ¥å£è°ƒç”¨æ–¹æ³•"></a>ç¼–å†™æ¥å£è°ƒç”¨æ–¹æ³•</h4><blockquote><p>å…ˆå»apiæ–‡ä»¶å¤¹ä¸‹ç¼–å†™è°ƒç”¨æ¥å£çš„æ–¹æ³• teacher.js</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ¹æ®idåˆ é™¤è®²å¸ˆ</span></span><br><span class="line">    <span class="function"><span class="title">deleteTeacherById</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> request(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">`/eduservice/teacher/<span class="subst">$&#123;id&#125;</span>`</span>,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;delete&#x27;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™æŒ‰é’®å¯¹åº”æ–¹æ³•"><a href="#ç¼–å†™æŒ‰é’®å¯¹åº”æ–¹æ³•" class="headerlink" title="ç¼–å†™æŒ‰é’®å¯¹åº”æ–¹æ³•"></a>ç¼–å†™æŒ‰é’®å¯¹åº”æ–¹æ³•</h4><blockquote><p>ç¼–å†™æŒ‰é’®å¯¹åº”æ–¹æ³•ï¼Œè€ƒè™‘åˆ°ç”¨æˆ·ä½“éªŒï¼Œæ·»åŠ element-uiå¼¹æ¡†æç¤º</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">removeDataById</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.$confirm(<span class="string">&#x27;æ­¤æ“ä½œå°†æ°¸ä¹…åˆ é™¤è¯¥è®²å¸ˆè®°å½•, æ˜¯å¦ç»§ç»­?&#x27;</span>, <span class="string">&#x27;æç¤º&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">confirmButtonText</span>: <span class="string">&#x27;ç¡®å®š&#x27;</span>,</span><br><span class="line">    <span class="attr">cancelButtonText</span>: <span class="string">&#x27;å–æ¶ˆ&#x27;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">    .then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// è°ƒç”¨åˆ é™¤æ¥å£</span></span><br><span class="line">      teacher</span><br><span class="line">        .deleteTeacherById(id)</span><br><span class="line">        .then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// æ˜¾ç¤ºæç¤ºä¿¡æ¯</span></span><br><span class="line">          <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">            <span class="attr">message</span>: <span class="string">&#x27;åˆ é™¤æˆåŠŸ!&#x27;</span></span><br><span class="line">          &#125;)</span><br><span class="line">          <span class="comment">// åˆ·æ–°åˆ—è¡¨ä¿¡æ¯</span></span><br><span class="line">          <span class="comment">// å¦‚æœæ˜¯æœ€åä¸€é¡µæœ€åä¸€ä¸ªè®°å½•ï¼ˆtotal-(page-1)*limit == 1ï¼‰</span></span><br><span class="line">          <span class="keyword">if</span> (<span class="built_in">this</span>.total - (<span class="built_in">this</span>.page - <span class="number">1</span>) * <span class="built_in">this</span>.limit == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="built_in">this</span>.getList(<span class="built_in">this</span>.page - <span class="number">1</span>)</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.getList(<span class="built_in">this</span>.page)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;info&#x27;</span>,</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&#x27;å·²å–æ¶ˆåˆ é™¤&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å½“å‰é¡¹ç›®ç»“æ„"><a href="#å½“å‰é¡¹ç›®ç»“æ„" class="headerlink" title="å½“å‰é¡¹ç›®ç»“æ„"></a>å½“å‰é¡¹ç›®ç»“æ„</h4><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210922181723945.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210922181723945.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210922181723945"></p><h3 id="æ·»åŠ è®²å¸ˆ"><a href="#æ·»åŠ è®²å¸ˆ" class="headerlink" title="æ·»åŠ è®²å¸ˆ"></a>æ·»åŠ è®²å¸ˆ</h3><h4 id="æ·»åŠ é¡µé¢ç»“æ„"><a href="#æ·»åŠ é¡µé¢ç»“æ„" class="headerlink" title="æ·»åŠ é¡µé¢ç»“æ„"></a>æ·»åŠ é¡µé¢ç»“æ„</h4><blockquote><p>src\views\edu\teacher\save.vue</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">            &lt;el-form label-width=&quot;120px&quot;&gt;</span><br><span class="line">                &lt;el-form-item label=&quot;è®²å¸ˆåç§°&quot;&gt;</span><br><span class="line">                    &lt;el-input v-model=&quot;teacher.name&quot; /&gt;</span><br><span class="line">                &lt;/el-form-item&gt;</span><br><span class="line">                &lt;el-form-item label=&quot;è®²å¸ˆæ’åº&quot;&gt;</span><br><span class="line">                    &lt;el-input-number</span><br><span class="line">                        v-model=&quot;teacher.sort&quot;</span><br><span class="line">                        controls-position=&quot;right&quot;</span><br><span class="line">                        min=&quot;0&quot;</span><br><span class="line">                    /&gt;</span><br><span class="line">                &lt;/el-form-item&gt;</span><br><span class="line">                &lt;el-form-item label=&quot;è®²å¸ˆå¤´è¡”&quot;&gt;</span><br><span class="line">                    &lt;el-select</span><br><span class="line">                        v-model=&quot;teacher.level&quot;</span><br><span class="line">                        clearable</span><br><span class="line">                        placeholder=&quot;è¯·é€‰æ‹©&quot;</span><br><span class="line">                    &gt;</span><br><span class="line">                        &lt;el-option :value=&quot;1&quot; label=&quot;é«˜çº§è®²å¸ˆ&quot; /&gt;</span><br><span class="line">                        &lt;el-option :value=&quot;2&quot; label=&quot;é¦–å¸­è®²å¸ˆ&quot; /&gt;</span><br><span class="line">                    &lt;/el-select&gt;</span><br><span class="line">                &lt;/el-form-item&gt;</span><br><span class="line">                &lt;el-form-item label=&quot;è®²å¸ˆèµ„å†&quot;&gt;</span><br><span class="line">                    &lt;el-input v-model=&quot;teacher.career&quot; /&gt;</span><br><span class="line">                &lt;/el-form-item&gt;</span><br><span class="line">                &lt;el-form-item label=&quot;è®²å¸ˆç®€ä»‹&quot;&gt;</span><br><span class="line">                    &lt;el-input</span><br><span class="line">                        v-model=&quot;teacher.intro&quot;</span><br><span class="line">                        :rows=&quot;10&quot;</span><br><span class="line">                        type=&quot;textarea&quot;</span><br><span class="line">                    /&gt;</span><br><span class="line">                &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">                &lt;!-- è®²å¸ˆå¤´åƒï¼šTODO --&gt;</span><br><span class="line">                &lt;el-form-item&gt;</span><br><span class="line">                    &lt;el-button</span><br><span class="line">                        :disabled=&quot;saveBtnDisabled&quot;</span><br><span class="line">                        type=&quot;primary&quot;</span><br><span class="line">                        @click=&quot;saveOrUpdate&quot;</span><br><span class="line">                        &gt;ä¿å­˜&lt;/el-button</span><br><span class="line">                    &gt;</span><br><span class="line">                &lt;/el-form-item&gt;</span><br><span class="line">            &lt;/el-form&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    // å¼•å…¥è°ƒç”¨æ¥å£çš„jsæ–‡ä»¶</span><br><span class="line">    import teacherApi from &#x27;@/api/edu/teacher.js&#x27;</span><br><span class="line"></span><br><span class="line">    export default &#123;</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          teacher: &#123;</span><br><span class="line">            name: &#x27;&#x27;,</span><br><span class="line">            sort: 0,</span><br><span class="line">            level: 1,</span><br><span class="line">            career: &#x27;&#x27;,</span><br><span class="line">            intro: &#x27;&#x27;,</span><br><span class="line">            avatar: &#x27;&#x27;</span><br><span class="line">          &#125;,</span><br><span class="line">          saveBtnDisabled: false</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      created() &#123;&#125;,</span><br><span class="line">      methods: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™æ¥å£è°ƒç”¨æ–¹æ³•-1"><a href="#ç¼–å†™æ¥å£è°ƒç”¨æ–¹æ³•-1" class="headerlink" title="ç¼–å†™æ¥å£è°ƒç”¨æ–¹æ³•"></a>ç¼–å†™æ¥å£è°ƒç”¨æ–¹æ³•</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ è®²å¸ˆ</span></span><br><span class="line"><span class="function"><span class="title">addTeacher</span>(<span class="params">teacher</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">`/eduservice/teacher/addTeacher`</span>,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">        <span class="attr">data</span>: teacher</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™æŒ‰é’®å¯¹åº”æ–¹æ³•-1"><a href="#ç¼–å†™æŒ‰é’®å¯¹åº”æ–¹æ³•-1" class="headerlink" title="ç¼–å†™æŒ‰é’®å¯¹åº”æ–¹æ³•"></a>ç¼–å†™æŒ‰é’®å¯¹åº”æ–¹æ³•</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    // å¼•å…¥è°ƒç”¨æ¥å£çš„jsæ–‡ä»¶</span><br><span class="line">    import teacherApi from &#x27;@/api/edu/teacher.js&#x27;</span><br><span class="line"></span><br><span class="line">    export default &#123;</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          teacher: &#123;</span><br><span class="line">            name: &#x27;&#x27;,</span><br><span class="line">            sort: 0,</span><br><span class="line">            level: 1,</span><br><span class="line">            career: &#x27;&#x27;,</span><br><span class="line">            intro: &#x27;&#x27;,</span><br><span class="line">            avatar: &#x27;&#x27;</span><br><span class="line">          &#125;,</span><br><span class="line">          saveBtnDisabled: false</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      created() &#123;&#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">        // æ·»åŠ å’Œä¿®æ”¹ä½¿ç”¨åŒä¸€ä¸ªé¡µé¢</span><br><span class="line">        saveOrUpdate() &#123;</span><br><span class="line">          this.saveTeacher()</span><br><span class="line">        &#125;,</span><br><span class="line">        saveTeacher() &#123;</span><br><span class="line">          teacherApi.addTeacher(this.teacher).then(response =&gt; &#123;</span><br><span class="line">            // æ˜¾ç¤ºæç¤ºä¿¡æ¯</span><br><span class="line">            this.$message(&#123;</span><br><span class="line">              type: &#x27;success&#x27;,</span><br><span class="line">              message: &#x27;æ·»åŠ æˆåŠŸ!&#x27;</span><br><span class="line">            &#125;)</span><br><span class="line">            // è·¯ç”±è·³è½¬åˆ°åˆ—è¡¨é¡µé¢</span><br><span class="line">            this.$router.push(&#123; path: &#x27;/teacher/list&#x27; &#125;)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="ä¼˜åŒ–è®²å¸ˆåˆ—è¡¨æ’åº"><a href="#ä¼˜åŒ–è®²å¸ˆåˆ—è¡¨æ’åº" class="headerlink" title="ä¼˜åŒ–è®²å¸ˆåˆ—è¡¨æ’åº"></a>ä¼˜åŒ–è®²å¸ˆåˆ—è¡¨æ’åº</h4><blockquote><p>æ ¹æ®æ·»åŠ æ—¶é—´é™åº</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation(&quot;å¤šæ¡ä»¶ç»„åˆåˆ†é¡µ&quot;)</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;pageTeacherCondition/&#123;current&#125;/&#123;limit&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">pageListTeacherCondition</span><span class="params">(<span class="meta">@PathVariable</span> <span class="keyword">long</span> current,</span></span></span><br><span class="line"><span class="params"><span class="function">                                  <span class="meta">@PathVariable</span> <span class="keyword">long</span> limit,</span></span></span><br><span class="line"><span class="params"><span class="function">                                  <span class="meta">@RequestBody(required = false)</span> TeacherQuery teacherQuery)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// â€¦â€¦</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ·»åŠ æ’åºæ¡ä»¶</span></span><br><span class="line">    wrapper.orderByDesc(<span class="string">&quot;gmt_create&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒç”¨serviceæ–¹æ³•å°†pageå¯¹è±¡æ ¹æ®æ¡ä»¶åˆ†é¡µ</span></span><br><span class="line">    teacherService.page(pageTeacher, wrapper);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// â€¦â€¦</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹è®²å¸ˆ"><a href="#ä¿®æ”¹è®²å¸ˆ" class="headerlink" title="ä¿®æ”¹è®²å¸ˆ"></a>ä¿®æ”¹è®²å¸ˆ</h3><h4 id="ç¼–å†™é¡µé¢ç»“æ„"><a href="#ç¼–å†™é¡µé¢ç»“æ„" class="headerlink" title="ç¼–å†™é¡µé¢ç»“æ„"></a>ç¼–å†™é¡µé¢ç»“æ„</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table-column label=&quot;æ“ä½œ&quot; width=&quot;200&quot; align=&quot;center&quot;&gt;</span><br><span class="line">    &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">        &lt;!-- routerè·³è½¬ --&gt;</span><br><span class="line">        &lt;router-link :to=&quot;&#x27;/teacher/edit/&#x27; + scope.row.id&quot;&gt;</span><br><span class="line">            &lt;el-button</span><br><span class="line">                type=&quot;primary&quot;</span><br><span class="line">                size=&quot;mini&quot;</span><br><span class="line">                icon=&quot;el-icon-edit&quot;</span><br><span class="line">                &gt;ä¿®æ”¹&lt;/el-button</span><br><span class="line">            &gt;</span><br><span class="line">        &lt;/router-link&gt;</span><br><span class="line">        &lt;el-button</span><br><span class="line">            type=&quot;danger&quot;</span><br><span class="line">            size=&quot;mini&quot;</span><br><span class="line">            icon=&quot;el-icon-delete&quot;</span><br><span class="line">            @click=&quot;removeDataById(scope.row.id)&quot;</span><br><span class="line">            &gt;åˆ é™¤&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br></pre></td></tr></table></figure><h4 id="éšè—è·¯ç”±"><a href="#éšè—è·¯ç”±" class="headerlink" title="éšè—è·¯ç”±"></a>éšè—è·¯ç”±</h4><blockquote><p>æ­¤å¤„éœ€è¦é¢å¤–æ·»åŠ routerï¼Œä¸”ä¸æ˜¾ç¤º</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> constantRouterMap = [</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/teacher&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: Layout,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/teacher/table&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;è®²å¸ˆç®¡ç†&#x27;</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;è®²å¸ˆç®¡ç†&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;example&#x27;</span> &#125;,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;list&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;è®²å¸ˆåˆ—è¡¨&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/edu/teacher/list&#x27;</span>),</span><br><span class="line">        <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;è®²å¸ˆåˆ—è¡¨&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;table&#x27;</span> &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;save&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;æ·»åŠ è®²å¸ˆ&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/edu/teacher/save&#x27;</span>),</span><br><span class="line">        <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;æ·»åŠ è®²å¸ˆ&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;tree&#x27;</span> &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// å¸¦æœ‰idå‚æ•°ï¼Œï¼šä¸ºå ä½ç¬¦</span></span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;edit/:id&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;EduTeacherEdit&#x27;</span>,</span><br><span class="line">        <span class="comment">// æ­¤å¤„è¿›å…¥çš„vueç»„ä»¶ä¸ºsave.vue</span></span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/edu/teacher/save&#x27;</span>),</span><br><span class="line">        <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;ç¼–è¾‘è®²å¸ˆ&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;tree&#x27;</span> &#125;,</span><br><span class="line">        <span class="comment">// ä¸æ˜¾ç¤ºè¯¥è·¯ç”±</span></span><br><span class="line">        <span class="attr">hidden</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h4 id="æ•°æ®å›æ˜¾"><a href="#æ•°æ®å›æ˜¾" class="headerlink" title="æ•°æ®å›æ˜¾"></a>æ•°æ®å›æ˜¾</h4><blockquote><p>ç¼–å†™åç«¯æ¥å£è°ƒç”¨æ–¹æ³•</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®idè·å–è®²å¸ˆä¿¡æ¯</span></span><br><span class="line"><span class="function"><span class="title">getTeacherInfo</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">`/eduservice/teacher/getTeacher/<span class="subst">$&#123;id&#125;</span>`</span>,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç¼–å†™è°ƒç”¨è¯¥æ–¹æ³•ï¼Œæ³¨æ„è¦åœ¨éœ€è¦æ˜¾ç¤ºè¯¥ä¿¡æ¯çš„ç»„ä»¶ä¸­è°ƒç”¨è¯¥æ–¹æ³•</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    created() &#123;</span><br><span class="line">        // åˆ¤æ–­å½“å‰è·¯å¾„æ˜¯å¦å«æœ‰idï¼Œæœ‰åˆ™ä¸ºä¿®æ”¹ï¼Œå¦åˆ™ä¸ºæ·»åŠ </span><br><span class="line">        if (this.$route.params &amp;&amp; this.$route.params.id) &#123;</span><br><span class="line">          // ä»è·¯å¾„ä¸­è·å–å‚æ•°å€¼</span><br><span class="line">          const id = this.$route.params.id</span><br><span class="line">          this.getTeacherInfo(id)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">  // æ ¹æ®idè·å¾—è®²å¸ˆä¿¡æ¯</span><br><span class="line">  getTeacherInfo(id) &#123;</span><br><span class="line">    teacherApi.getTeacherInfo(id).then(response =&gt; &#123;</span><br><span class="line">      this.teacher = response.data.teacher</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="ä¿å­˜ä¿®æ”¹"><a href="#ä¿å­˜ä¿®æ”¹" class="headerlink" title="ä¿å­˜ä¿®æ”¹"></a>ä¿å­˜ä¿®æ”¹</h4><blockquote><p>ç¼–å†™åç«¯æ¥å£è°ƒç”¨æ–¹æ³•</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¿®æ”¹è®²å¸ˆä¿¡æ¯</span></span><br><span class="line"><span class="function"><span class="title">updateTeacher</span>(<span class="params">teacher</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">`/eduservice/teacher/updateTeacher`</span>,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">        <span class="attr">data</span>: teacher</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>é¡µé¢è°ƒç”¨è¯¥æ–¹æ³•ï¼Œéœ€è¦åˆ¤æ–­æ˜¯ä¿®æ”¹è¿˜æ˜¯æ·»åŠ </p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">      methods: &#123;</span><br><span class="line">        // æ·»åŠ å’Œä¿®æ”¹ä½¿ç”¨åŒä¸€ä¸ªé¡µé¢</span><br><span class="line">        saveOrUpdate() &#123;</span><br><span class="line">          // åˆ¤æ–­æ˜¯å¦æœ‰id</span><br><span class="line">          if (this.teacher.id) &#123;</span><br><span class="line">            this.updateTeacher()</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            this.saveTeacher()</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        // ä¿®æ”¹è®²å¸ˆä¿¡æ¯</span><br><span class="line">        updateTeacher() &#123;</span><br><span class="line">          teacherApi.updateTeacher(this.teacher).then(response =&gt; &#123;</span><br><span class="line">            // æ˜¾ç¤ºæç¤ºä¿¡æ¯</span><br><span class="line">            this.$message(&#123;</span><br><span class="line">              type: &#x27;success&#x27;,</span><br><span class="line">              message: &#x27;ä¿®æ”¹æˆåŠŸ!&#x27;</span><br><span class="line">            &#125;)</span><br><span class="line">            // è·¯ç”±è·³è½¬åˆ°åˆ—è¡¨é¡µé¢</span><br><span class="line">            this.$router.push(&#123; path: &#x27;/teacher/list&#x27; &#125;)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="è·¯ç”±åˆ‡æ¢å­˜ç•™ä¿¡æ¯é—®é¢˜"><a href="#è·¯ç”±åˆ‡æ¢å­˜ç•™ä¿¡æ¯é—®é¢˜" class="headerlink" title="è·¯ç”±åˆ‡æ¢å­˜ç•™ä¿¡æ¯é—®é¢˜"></a>è·¯ç”±åˆ‡æ¢å­˜ç•™ä¿¡æ¯é—®é¢˜</h4><blockquote><p>æ„Ÿè°¢å¼¹å¹•æé†’ï¼Œä½¿ç”¨ç›‘å¬è·¯ç”±çš„æ–¹æ³•ï¼Œå¯ä»¥é˜²æ­¢å½“ç‚¹å‡»ä¿®æ”¹ååœ¨edité¡µé¢å†æ¬¡ç‚¹å‡»æ·»åŠ è®²å¸ˆï¼Œæ˜¾ç¤ºåçš„é¡µé¢ä»ç„¶ç•™å­˜è®²å¸ˆä¿¡æ¯çš„å°é—®é¢˜</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">      // ç›‘å¬</span><br><span class="line">      watch: &#123;</span><br><span class="line">        // ç›‘å¬è·¯ç”±æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ï¼Œå¦‚æœæ˜¯åˆ™æ¸…é™¤å½“å‰é¡µé¢çš„æ•°æ®</span><br><span class="line">        $route: &#123;</span><br><span class="line">          handler: function(val, oldVal) &#123;</span><br><span class="line">            this.resetData()</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">        // æ¸…ç©ºæ•°æ®</span><br><span class="line">        resetData() &#123;</span><br><span class="line">           this.teacher = &#123;</span><br><span class="line">            name: &#x27;&#x27;,</span><br><span class="line">            sort: 0,</span><br><span class="line">            level: 1,</span><br><span class="line">            career: &#x27;&#x27;,</span><br><span class="line">            intro: &#x27;&#x27;,</span><br><span class="line">            avatar: &#x27;&#x27;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><blockquote><p>å¥½å§åŸæ¥ä¸‹ä¸€é›†å°±æŠŠè¿™ä¸ªé—®é¢˜è§£å†³äº†ï¼ŒåŸå› æ˜¯å¤šæ¬¡è·³è½¬è‡³åŒä¸€ä¸ªé¡µé¢createdé’©å­å‡½æ•°åªä¼šæ‰§è¡Œä¸€æ¬¡</p><p>ä»¥ä¸‹æ˜¯è€å¸ˆçš„æ–¹æ¡ˆ</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">      // ç›‘å¬</span><br><span class="line">      watch: &#123;</span><br><span class="line">        // ç›‘å¬è·¯ç”±æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ï¼Œå¦‚æœæ˜¯åˆ™æ¸…é™¤å½“å‰é¡µé¢çš„æ•°æ®</span><br><span class="line">        $route(to, from) &#123;</span><br><span class="line">          this.init()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      created() &#123;</span><br><span class="line">         // è¿™é‡Œå¯ä»¥ä¸ç”¨è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•ï¼Œå·²ç»è®¾ç½®äº†ç›‘å¬</span><br><span class="line">        this.init()</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">        // åˆå§‹åŒ–</span><br><span class="line">        init() &#123;</span><br><span class="line">          // åˆ¤æ–­å½“å‰è·¯å¾„æ˜¯å¦å«æœ‰idï¼Œæœ‰åˆ™ä¸ºä¿®æ”¹ï¼Œå¦åˆ™ä¸ºæ·»åŠ </span><br><span class="line">          if (this.$route.params &amp;&amp; this.$route.params.id) &#123;</span><br><span class="line">            // ä»è·¯å¾„ä¸­è·å–å‚æ•°å€¼</span><br><span class="line">            const id = this.$route.params.id</span><br><span class="line">            this.getTeacherInfo(id)</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            this.teacher = &#123;</span><br><span class="line">              name: &#x27;&#x27;,</span><br><span class="line">              sort: 0,</span><br><span class="line">              level: 1,</span><br><span class="line">              career: &#x27;&#x27;,</span><br><span class="line">              intro: &#x27;&#x27;,</span><br><span class="line">              avatar: &#x27;&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h2><blockquote><p>åå‘ä»£ç†æœåŠ¡å™¨ï¼ŒåŠŸèƒ½å¦‚ä¸‹ï¼š</p><ol><li>è¯·æ±‚è½¬å‘</li><li>è´Ÿè½½å‡è¡¡</li><li>åŠ¨é™åˆ†ç¦»</li></ol></blockquote><h3 id="åŸºç¡€å‘½ä»¤"><a href="#åŸºç¡€å‘½ä»¤" class="headerlink" title="åŸºç¡€å‘½ä»¤"></a>åŸºç¡€å‘½ä»¤</h3><blockquote><ol><li>å¯åŠ¨ï¼šnginx.exe</li><li>å…³é—­ï¼šnginx.exe -s stop</li><li>é‡å¯ï¼šnginx.exe -s reload</li></ol></blockquote><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><blockquote><p>nginx.confæ–‡ä»¶ä¸­é…ç½®</p><ol><li>ä¿®æ”¹ç¬¬ä¸€ä¸ªserverä¸‹çš„listenç«¯å£å· -&gt; 81 ï¼ˆæœ€å¥½æ”¹ä¸€ä¸‹ï¼‰</li><li>æ·»åŠ è‡ªå·±çš„serverï¼Œå…¶ä¸­listenç›‘å¬çš„ç«¯å£å·è¦å’Œå‰ç«¯configä¸­çš„ç«¯å£å·(BASE_PATH)å¯¹åº”</li></ol><p>ä¾‹å¦‚ç›¸å½“äºè®¿é—®9001ä¸‹çš„xxxï¼Œå°±ä¼šè½¬å‘åˆ°8001ä¸‹çš„xxxæˆ–è€…å…¶ä»–</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       9001;</span><br><span class="line">    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    location ~ /eduservice/ &#123;</span><br><span class="line">        proxy_pass http://localhost:8001;</span><br><span class="line">    &#125;</span><br><span class="line">     location ~ /eduoss/ &#123;</span><br><span class="line">        proxy_pass http://localhost:8002;</span><br><span class="line">    &#125;</span><br><span class="line">     location ~ /eduvod/ &#123;</span><br><span class="line">        proxy_pass http://localhost:8003;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è®°å¾—ä¿®æ”¹å‰ç«¯ä¸­çš„BASE_PATHå’Œç›‘å¬ç«¯å£ä¸€è‡´</p></blockquote><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><blockquote><p>applicationå’Œnpméƒ½æ‰“å¼€ï¼Œå‰ç«¯æµ‹è¯•ä¸€ä¸‹ï¼ŒæŸ¥çœ‹networkä¸­çš„headeræ˜¯å¦ä¸ºnginxä¸­çš„ç›‘å¬ç«¯å£å·</p></blockquote><h2 id="ä¸Šä¼ å¤´åƒåŠŸèƒ½ï¼ˆåç«¯-å‰ç«¯ï¼‰"><a href="#ä¸Šä¼ å¤´åƒåŠŸèƒ½ï¼ˆåç«¯-å‰ç«¯ï¼‰" class="headerlink" title="ä¸Šä¼ å¤´åƒåŠŸèƒ½ï¼ˆåç«¯+å‰ç«¯ï¼‰"></a>ä¸Šä¼ å¤´åƒåŠŸèƒ½ï¼ˆåç«¯+å‰ç«¯ï¼‰</h2><h3 id="é˜¿é‡Œäº‘OSS"><a href="#é˜¿é‡Œäº‘OSS" class="headerlink" title="é˜¿é‡Œäº‘OSS"></a>é˜¿é‡Œäº‘OSS</h3><blockquote><p>ç®€å•æ¥è¯´ï¼šè§£å†³æµ·é‡æ•°æ®å­˜å‚¨ä¸å¼¹æ€§æ‰©å®¹</p></blockquote><h4 id="ç®€å•å…¥é—¨"><a href="#ç®€å•å…¥é—¨" class="headerlink" title="ç®€å•å…¥é—¨"></a>ç®€å•å…¥é—¨</h4><blockquote><ol><li>å¼€é€šå°±èƒ½è¿›æ§åˆ¶å°äº†</li><li>åˆ›å»ºbucket</li><li>æ–‡ä»¶ç®¡ç†ä¸­å¯ä»¥è¿›è¡Œä¸Šä¼ æ–‡ä»¶ç­‰æ“ä½œ</li><li>åˆ›å»ºaccess keyè·å¾—idå’Œç§˜é’¥</li></ol></blockquote><blockquote><p>å°å°çš„åæ§½ï¼šå½“å¤©ç»™æˆ‘çš„è´¦æˆ·é‡Œå……äº†1rmbï¼ˆå·¨é¢ï¼Œç¡®ä¿¡ï¼‰ï¼Œé…ç½®äº†ä¸€äº›OSSçš„ä¸œè¥¿ï¼Œç¬¬äºŒå¤©å°±æ¥äº†ä¸ªä¸“å±å®¢æœæ‰“ç”µè¯ç»™æˆ‘ï¼Œå‘æˆ‘ä»‹ç»å„ç§äº§å“ï¼ˆä¸Šæ¬¡åˆšæ³¨å†Œçš„æ—¶å€™ä¹Ÿç»™æˆ‘æ‰“äº†ç”µè¯ï¼Œé‡Œé¢çš„å°å§å§è¯´è¯éƒ½å¥½å¥½å¬ï¼‰æœåŠ¡å¤ªçƒ­æƒ…äº†ï¼</p></blockquote><h3 id="åç«¯é˜¿é‡Œäº‘OSSæ­å»º"><a href="#åç«¯é˜¿é‡Œäº‘OSSæ­å»º" class="headerlink" title="åç«¯é˜¿é‡Œäº‘OSSæ­å»º"></a>åç«¯é˜¿é‡Œäº‘OSSæ­å»º</h3><blockquote><p>å»å®˜æ–¹æ–‡æ¡£æŸ¥çœ‹è¯¦ç»†ä»‹ç»</p><p><a href="https://help.aliyun.com/document_detail/32011.html">å¿«é€Ÿå…¥é—¨ (aliyun.com)</a></p></blockquote><h4 id="åˆ›å»ºå¯¹åº”å­æ¨¡å—"><a href="#åˆ›å»ºå¯¹åº”å­æ¨¡å—" class="headerlink" title="åˆ›å»ºå¯¹åº”å­æ¨¡å—"></a>åˆ›å»ºå¯¹åº”å­æ¨¡å—</h4><blockquote><p>serviceæ¨¡å— -&gt; service_osså­æ¨¡å—å³å¯</p></blockquote><h4 id="å¼•å…¥ä¾èµ–"><a href="#å¼•å…¥ä¾èµ–" class="headerlink" title="å¼•å…¥ä¾èµ–"></a>å¼•å…¥ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é˜¿é‡Œäº‘ossä¾èµ– --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-sdk-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ—¥æœŸå·¥å…·æ ä¾èµ– --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>joda-time<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>joda-time<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="é…ç½®application-properties"><a href="#é…ç½®application-properties" class="headerlink" title="é…ç½®application.properties"></a>é…ç½®application.properties</h4><blockquote><p>aliyun.oss.fileåé…ç½®é˜¿é‡Œäº‘OSSå’ŒAccessKeyç›¸å…³ä¿¡æ¯</p></blockquote><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">server.port</span>=<span class="string">8002</span></span><br><span class="line"><span class="meta">spring.application.name</span>=<span class="string">service-oss</span></span><br><span class="line"><span class="meta">spring.profiles.active</span>=<span class="string">dev</span></span><br><span class="line"><span class="meta">aliyun.oss.file.endpoint</span>=<span class="string">oss-cn-beijing.aliyuncs.com</span></span><br><span class="line"><span class="meta">aliyun.oss.file.keyid</span>=<span class="string"></span></span><br><span class="line"><span class="meta">aliyun.oss.file.keysecret</span>=<span class="string"></span></span><br><span class="line"><span class="meta">aliyun.oss.file.bucketname</span>=<span class="string">demo-edu-guli</span></span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºå¯åŠ¨ç±»"><a href="#åˆ›å»ºå¯åŠ¨ç±»" class="headerlink" title="åˆ›å»ºå¯åŠ¨ç±»"></a>åˆ›å»ºå¯åŠ¨ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.oss;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &#123;&quot;com.atguigu&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OssApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(OssApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç”±äºåªä½¿ç”¨ä¸Šä¼ çš„åŠŸèƒ½ï¼Œæ‰€ä»¥ä¸éœ€è¦æ“ä½œæ•°æ®åº“ï¼Œéœ€è¦é…ç½®é»˜è®¤ä¸åŠ è½½æ•°æ®åº“ï¼ˆå¦åˆ™ä¼šæŠ¥é”™ï¼‰</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication(exclude = DataSourceAutoConfiguration.class)</span> <span class="comment">// excludeæ’é™¤è¿™ä¸ªæ•°æ®æºé…ç½®ç±»</span></span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™å¸¸é‡ç±»"><a href="#ç¼–å†™å¸¸é‡ç±»" class="headerlink" title="ç¼–å†™å¸¸é‡ç±»"></a>ç¼–å†™å¸¸é‡ç±»</h3><blockquote><p>ç”¨äºè·å–é…ç½®æ–‡ä»¶ä¸­çš„å¸¸é‡</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.oss.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.InitializingBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConstantPropertiesUtils</span> <span class="keyword">implements</span> <span class="title">InitializingBean</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è¯»å–é…ç½®æ–‡ä»¶å†…å®¹</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;aliyun.oss.file.endpoint&#125;&quot;)</span>    <span class="comment">// è‡ªåŠ¨å±æ€§æ³¨å…¥(æ³¨æ„æ­¤å¤„å±æ€§åè¦ä¸propertiesæ–‡ä»¶ä¸­çš„åå­—å¯¹åº”)</span></span><br><span class="line">    <span class="keyword">private</span> String endpoint;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;aliyun.oss.file.keyid&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String keyid;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;aliyun.oss.file.keysecret&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String keysecret;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;aliyun.oss.file.bucketname&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String bucketname;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰å…¬å¼€é™æ€å¸¸é‡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String END_POINT;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String ACCESS_KEY_ID;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String ACCESS_KEY_SECRET;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String BUCKET_NAME;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å½“åˆå§‹åŒ–propertieså®Œæˆåè¯¥æ–¹æ³•ä¼šæ‰§è¡Œ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        END_POINT = endpoint;</span><br><span class="line">        ACCESS_KEY_ID = keyid;</span><br><span class="line">        ACCESS_KEY_SECRET = keysecret;</span><br><span class="line">        BUCKET_NAME = bucketname;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™Controller"><a href="#ç¼–å†™Controller" class="headerlink" title="ç¼–å†™Controller"></a>ç¼–å†™Controller</h3><blockquote><p>å®ç°æ–‡ä»¶è·å–å’Œå›ä¼ urlå’Œé¡µé¢è·³è½¬</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.oss.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.commonutils.R;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.oss.service.OssService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/eduoss/fileoss&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span>    <span class="comment">// è§£å†³è·¨åŸŸ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OssController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OssService ossService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸Šä¼ å¤´åƒ</span></span><br><span class="line">    <span class="meta">@PostMapping()</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">uploadOssFile</span><span class="params">(MultipartFile file)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–åˆ°ä¸Šä¼ çš„æ–‡ä»¶(MultipartFile)</span></span><br><span class="line">        String url = ossService.uploadFileAvatar(file);</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">&quot;url&quot;</span>, url);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸»è¦ä¸šåŠ¡é€»è¾‘ç¼–å†™"><a href="#ä¸»è¦ä¸šåŠ¡é€»è¾‘ç¼–å†™" class="headerlink" title="ä¸»è¦ä¸šåŠ¡é€»è¾‘ç¼–å†™"></a>ä¸»è¦ä¸šåŠ¡é€»è¾‘ç¼–å†™</h3><h4 id="ç¼–å†™Serviceå®ç°ç±»"><a href="#ç¼–å†™Serviceå®ç°ç±»" class="headerlink" title="ç¼–å†™Serviceå®ç°ç±»"></a>ç¼–å†™Serviceå®ç°ç±»</h4><blockquote><p>å…ˆåˆ›å»ºæ¥å£å’Œå®ç°ç±»ï¼Œå®ç°ç±»ä¸­å®ç°ä¸Šä¼ ä¸šåŠ¡</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.oss.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSS;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSSClientBuilder;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.oss.service.OssService;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.oss.utils.ConstantPropertiesUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OssServiceImpl</span> <span class="keyword">implements</span> <span class="title">OssService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">uploadFileAvatar</span><span class="params">(MultipartFile file)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ç®€å•ä¸Šä¼ æ–‡ä»¶æ ¼å¼ï¼ˆossæ–‡æ¡£ä¿®æ”¹å³å¯ï¼‰</span></span><br><span class="line">        String endpoint = ConstantPropertiesUtils.END_POINT;</span><br><span class="line">        String accessKeyId = ConstantPropertiesUtils.ACCESS_KEY_ID;</span><br><span class="line">        String accessKeySecret = ConstantPropertiesUtils.ACCESS_KEY_SECRET;</span><br><span class="line">        String bucketName = ConstantPropertiesUtils.BUCKET_NAME;</span><br><span class="line">        String fileName = file.getOriginalFilename();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»ºOSSClientå®ä¾‹ã€‚</span></span><br><span class="line">        OSS ossClient = <span class="keyword">new</span> OSSClientBuilder().build(endpoint, accessKeyId, accessKeySecret);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//ä¾æ¬¡å¡«å†™Bucketåç§°ã€Objectå®Œæ•´è·¯å¾„ï¼ˆæ–‡ä»¶è·¯å¾„+æ–‡ä»¶åç§°ï¼‰ã€æ–‡ä»¶æµã€‚Objectå®Œæ•´è·¯å¾„ä¸­ä¸èƒ½åŒ…å«Bucketåç§°ã€‚</span></span><br><span class="line">            ossClient.putObject(bucketName, fileName, file.getInputStream());</span><br><span class="line">            <span class="comment">// æ‹¼æ¥ossä¸­æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">            String url = <span class="string">&quot;https://&quot;</span> + bucketName + <span class="string">&quot;.&quot;</span> + endpoint + <span class="string">&quot;/&quot;</span> + fileName;</span><br><span class="line">            <span class="keyword">return</span> url;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// å…³é—­OSSClientã€‚</span></span><br><span class="line">            ossClient.shutdown();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å®Œå–„Service"><a href="#å®Œå–„Service" class="headerlink" title="å®Œå–„Service"></a>å®Œå–„Service</h4><blockquote><p>é˜²æ­¢æ–‡ä»¶åé‡å¤</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸ºæ–‡ä»¶åæ·»åŠ å”¯ä¸€çš„å€¼</span></span><br><span class="line">String uuid = UUID.randomUUID().toString().replaceAll(<span class="string">&quot;-&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">fileName = uuid + fileName;</span><br><span class="line"><span class="comment">// å°†æ–‡ä»¶è¿›è¡Œåˆ†ç±»ç®¡ç†,æŒ‰ç…§æ—¥æœŸåˆ†ç±»ï¼Œä½¿ç”¨å·¥å…·ç±»</span></span><br><span class="line">String datePath = <span class="keyword">new</span> DateTime().toString(<span class="string">&quot;yyyy/MM/dd&quot;</span>);</span><br><span class="line">fileName = datePath + <span class="string">&quot;/&quot;</span> + fileName;</span><br></pre></td></tr></table></figure><h3 id="ä¸Šä¼ å¤´åƒåŠŸèƒ½ï¼ˆå‰ç«¯ï¼‰"><a href="#ä¸Šä¼ å¤´åƒåŠŸèƒ½ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="ä¸Šä¼ å¤´åƒåŠŸèƒ½ï¼ˆå‰ç«¯ï¼‰"></a>ä¸Šä¼ å¤´åƒåŠŸèƒ½ï¼ˆå‰ç«¯ï¼‰</h3><h4 id="æ·»åŠ é¡µé¢ç»“æ„-1"><a href="#æ·»åŠ é¡µé¢ç»“æ„-1" class="headerlink" title="æ·»åŠ é¡µé¢ç»“æ„"></a>æ·»åŠ é¡µé¢ç»“æ„</h4><blockquote><p>element-UIé‡Œæœ‰ç›¸å…³ç»„ä»¶ï¼ˆImageCropperã€PanThumbï¼‰ï¼Œcvå³å¯</p><p>æ³¨æ„è¦æŠŠç»„ä»¶å¤åˆ¶åˆ°conponentsé‡Œ</p><p>æ³¨æ„ä¿®æ”¹image-cropperä¸­ç»‘å®šçš„urlã€filedä¸­å±æ€§å€¼è¦ä¸åç«¯æ¥å£æ–¹æ³•ä¸­å‚æ•°åå¯¹åº”</p></blockquote><blockquote><p>åœ¨æ·»åŠ è®²å¸ˆçš„é¡µé¢æ·»åŠ å¦‚ä¸‹æ ‡ç­¾åŠä»£ç </p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">            &lt;el-form label-width=&quot;120px&quot;&gt;</span><br><span class="line">                &lt;!-- è®²å¸ˆå¤´åƒ --&gt;</span><br><span class="line">                &lt;el-form-item label=&quot;è®²å¸ˆå¤´åƒ&quot;&gt;</span><br><span class="line">                    &lt;!-- å¤´è¡”ç¼©ç•¥å›¾ --&gt;</span><br><span class="line">                    &lt;pan-thumb :image=&quot;teacher.avatar&quot; /&gt;</span><br><span class="line">                    &lt;!-- æ–‡ä»¶ä¸Šä¼ æŒ‰é’® --&gt;</span><br><span class="line">                    &lt;el-button</span><br><span class="line">                        type=&quot;primary&quot;</span><br><span class="line">                        icon=&quot;el-icon-upload&quot;</span><br><span class="line">                        @click=&quot;imagecropperShow = true&quot;</span><br><span class="line">                        &gt;æ›´æ¢å¤´åƒ</span><br><span class="line">                    &lt;/el-button&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;!--</span><br><span class="line">                      v-showï¼šæ˜¯å¦æ˜¾ç¤ºä¸Šä¼ ç»„ä»¶</span><br><span class="line">                      :keyï¼šç±»ä¼¼äºidï¼Œå¦‚æœä¸€ä¸ªé¡µé¢å¤šä¸ªå›¾ç‰‡ä¸Šä¼ æ§ä»¶ï¼Œå¯ä»¥åšåŒºåˆ†</span><br><span class="line">                      :urlï¼šåå°ä¸Šä¼ çš„urlåœ°å€</span><br><span class="line">                      @closeï¼šå…³é—­ä¸Šä¼ ç»„ä»¶</span><br><span class="line">                      @crop-upload-successï¼šä¸Šä¼ æˆåŠŸåçš„å›è°ƒ </span><br><span class="line">                        &lt;input type=&quot;file&quot; name=&quot;file&quot;/&gt;</span><br><span class="line">                    --&gt;</span><br><span class="line">                    &lt;image-cropper</span><br><span class="line">                        v-show=&quot;imagecropperShow&quot;</span><br><span class="line">                        :width=&quot;300&quot;</span><br><span class="line">                        :height=&quot;300&quot;</span><br><span class="line">                        :key=&quot;imagecropperKey&quot;</span><br><span class="line">                        :url=&quot;BASE_API + &#x27;/eduoss/fileoss&#x27;&quot;</span><br><span class="line">                        field=&quot;file&quot;</span><br><span class="line">                        @close=&quot;close&quot;</span><br><span class="line">                        @crop-upload-success=&quot;cropSuccess&quot;</span><br><span class="line">                    /&gt;</span><br><span class="line">                &lt;/el-form-item&gt;</span><br><span class="line">            &lt;/el-form&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    // ä¸Šä¼ å¤´åƒæ‰€éœ€ç»„ä»¶</span><br><span class="line">    import ImageCropper from &#x27;@/components/ImageCropper&#x27;</span><br><span class="line">    import PanThumb from &#x27;@/components/PanThumb&#x27;</span><br><span class="line">    export default &#123;</span><br><span class="line">      // å£°æ˜ç»„ä»¶</span><br><span class="line">      components: &#123; ImageCropper, PanThumb &#125;,</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          // ä¸Šä¼ å¼¹æ¡†ç»„ä»¶æ˜¯å¦æ˜¾ç¤º</span><br><span class="line">          imagecropperShow: false,</span><br><span class="line">          // ä¸Šä¼ ç»„ä»¶keyå€¼</span><br><span class="line">          imagecropperKey: 0,</span><br><span class="line">          // è·å–æ¥å£APIï¼Œå›ºå®šå†™æ³•</span><br><span class="line">          BASE_API: process.env.BASE_API</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">        // å…³é—­ä¸Šä¼ å¼¹æ¡†</span><br><span class="line">        close() &#123;&#125;,</span><br><span class="line">        // ä¸Šä¼ æˆåŠŸ</span><br><span class="line">        cropSuccess() &#123;&#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨ç»„ä»¶"><a href="#ä½¿ç”¨ç»„ä»¶" class="headerlink" title="ä½¿ç”¨ç»„ä»¶"></a>ä½¿ç”¨ç»„ä»¶</h4><blockquote><p>importä»¥åŠå£°æ˜å³å¯</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">// ä¸Šä¼ å¤´åƒæ‰€éœ€ç»„ä»¶</span><br><span class="line">import ImageCropper from &#x27;@/components/ImageCropper&#x27;</span><br><span class="line">import PanThumb from &#x27;@/components/PanThumb&#x27;</span><br><span class="line"> export default &#123;</span><br><span class="line">      // å£°æ˜ç»„ä»¶</span><br><span class="line">      components: &#123; ImageCropper, PanThumb &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™æŒ‰é’®æ–¹æ³•"><a href="#ç¼–å†™æŒ‰é’®æ–¹æ³•" class="headerlink" title="ç¼–å†™æŒ‰é’®æ–¹æ³•"></a>ç¼–å†™æŒ‰é’®æ–¹æ³•</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…³é—­ä¸Šä¼ å¼¹æ¡†</span></span><br><span class="line"><span class="function"><span class="title">close</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.imagecropperShow = <span class="literal">false</span></span><br><span class="line">  <span class="comment">// ä¸Šä¼ ç»„ä»¶åˆå§‹åŒ–</span></span><br><span class="line">  <span class="built_in">this</span>.imagecropperKey = <span class="built_in">this</span>.imagecropperKey + <span class="number">1</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// ä¸Šä¼ æˆåŠŸ(è·å¾—å¤´åƒurlå¹¶æ˜¾ç¤º)</span></span><br><span class="line"><span class="function"><span class="title">cropSuccess</span>(<span class="params">data</span>)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.teacher.avatar = data.url</span><br><span class="line">  <span class="built_in">this</span>.close()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•ï¼ŒæŠ¥é”™ä¸è§£å†³âœ…"><a href="#æµ‹è¯•ï¼ŒæŠ¥é”™ä¸è§£å†³âœ…" class="headerlink" title="æµ‹è¯•ï¼ŒæŠ¥é”™ä¸è§£å†³âœ…"></a>æµ‹è¯•ï¼ŒæŠ¥é”™ä¸è§£å†³âœ…</h4><blockquote><p>æŠ¥äº†ä¸€ä¸ªé”™ï¼Œæ˜¾ç¤ºä¸Šä¼ å¤±è´¥ï¼Œå»çœ‹networké‡Œçš„è¯·æ±‚URLé‡Œçš„åœ°å€ä¸å¯¹ï¼Œä¸­é—´å¤šäº†ä¸€ä¸ªundefinedï¼Œæƒ³åˆ°å¯èƒ½å˜é‡åå†™é”™äº†ï¼Œç¨å¾®å¯¹æ¯”äº†ä¸€ä¸‹ï¼ŒBASE_APIå†™æˆBASE_PATHäº†ï¼Œæ”¹äº†å°±å¯ä»¥äº†</p></blockquote><h2 id="è¯¾ç¨‹åˆ†ç±»ç®¡ç†æ¨¡å—ï¼ˆåç«¯-å‰ç«¯ï¼‰"><a href="#è¯¾ç¨‹åˆ†ç±»ç®¡ç†æ¨¡å—ï¼ˆåç«¯-å‰ç«¯ï¼‰" class="headerlink" title="è¯¾ç¨‹åˆ†ç±»ç®¡ç†æ¨¡å—ï¼ˆåç«¯+å‰ç«¯ï¼‰"></a>è¯¾ç¨‹åˆ†ç±»ç®¡ç†æ¨¡å—ï¼ˆåç«¯+å‰ç«¯ï¼‰</h2><blockquote><p>è®°å¾—å…ˆå¯¼å…¥æ•°æ®åº“</p><p>æ·»åŠ ä½¿ç”¨ä¸Šä¼ excelæ–‡ä»¶çš„å½¢å¼</p></blockquote><h3 id="EasyExcelå…¥é—¨"><a href="#EasyExcelå…¥é—¨" class="headerlink" title="EasyExcelå…¥é—¨"></a>EasyExcelå…¥é—¨</h3><blockquote><p><a href="https://www.yuque.com/easyexcel/doc/easyexcel">EasyExcel Â· è¯­é›€ (yuque.com)</a></p><p>è®°å¾—å¼•å…¥ä¾èµ–åæ ‡ï¼ŒåŒæ—¶éœ€è¦poiçš„ï¼Œä¸è¿‡çˆ¶æ¨¡å—å·²ç»å¼•å…¥äº†</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- EasyExcelä¾èµ– --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/easyexcel --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>easyexcel<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!--ä»¥ä¸‹æ˜¯çˆ¶æ¨¡å—ä¸­çš„ç›¸å…³ä¾èµ–--&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--xls--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.poi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>poi<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.poi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>poi-ooxml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="å†™Excel"><a href="#å†™Excel" class="headerlink" title="å†™Excel"></a>å†™Excel</h4><blockquote><p>å…ˆåˆ›å»ºå®ä½“ç±»ï¼ˆä¸€çº§åˆ†ç±»ã€äºŒçº§åˆ†ç±»ï¼‰</p><p>å±æ€§éœ€è¦å…¨å°å†™</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoData</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å®ä½“ç±»ï¼Œå…¶ä¸­å±æ€§å’ŒExcelè¡¨æ ¼å¯¹åº”</span></span><br><span class="line">    <span class="meta">@ExcelProperty(&quot;å­¦ç”Ÿç¼–å·&quot;)</span>  <span class="comment">// è¯¥æ³¨é‡Šç”¨äºå®šä¹‰è¡¨å¤´</span></span><br><span class="line">    <span class="keyword">private</span> Integer sno;</span><br><span class="line">    <span class="meta">@ExcelProperty(&quot;å­¦ç”Ÿå§“å&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String sname;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æµ‹è¯•ä»£ç </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestEasyExcel</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å†™Excel</span></span><br><span class="line">        <span class="comment">// 1ã€è®¾ç½®æ–‡ä»¶åœ°å€å’Œåç§°</span></span><br><span class="line">        String filename = <span class="string">&quot;D:\\MyProject\\excel\\test.xlsx&quot;</span>;</span><br><span class="line">        <span class="comment">// è°ƒç”¨easyExcelæ–¹æ³•å†™å…¥, å¯ä»¥è®¾ç½®sheet, æ‰§è¡ŒdoWriteä¼ å…¥æ•°æ®</span></span><br><span class="line">        EasyExcel.write(filename, DemoData.class).sheet(<span class="string">&quot;å­¦ç”Ÿåˆ—è¡¨&quot;</span>).doWrite(getData());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> List&lt;DemoData&gt; <span class="title">getData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;DemoData&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            DemoData data = <span class="keyword">new</span> DemoData();</span><br><span class="line">            data.setSname(<span class="string">&quot;aaa&quot;</span> + i);</span><br><span class="line">            data.setSno(i);</span><br><span class="line">            list.add(data);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è¯»Excel"><a href="#è¯»Excel" class="headerlink" title="è¯»Excel"></a>è¯»Excel</h4><blockquote><p>ç¨å¾®ä¿®æ”¹ä¸€ä¸‹å®ä½“ç±»</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoData</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å®ä½“ç±»ï¼Œå…¶ä¸­å±æ€§å’ŒExcelè¡¨æ ¼å¯¹åº”</span></span><br><span class="line">    <span class="meta">@ExcelProperty(value = &quot;å­¦ç”Ÿç¼–å·&quot;, index = 0)</span>  <span class="comment">// è¯¥æ³¨é‡Šç”¨äºå®šä¹‰è¡¨å¤´</span></span><br><span class="line">    <span class="keyword">private</span> Integer sno;</span><br><span class="line">    <span class="meta">@ExcelProperty(value = &quot;å­¦ç”Ÿå§“å&quot;, index = 1)</span>   <span class="comment">// indexæ ‡è®°ç¬¬å‡ åˆ—ï¼Œè¯»æ“ä½œéœ€è¦</span></span><br><span class="line">    <span class="keyword">private</span> String sname;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åˆ›å»ºç›‘å¬å™¨å¯¹excelæ–‡ä»¶çš„è¯»å–ï¼ˆä¸€è¡Œä¸€è¡Œçš„è¯»å–éœ€è¦ï¼‰</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›‘å¬å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExcelListener</span> <span class="keyword">extends</span> <span class="title">AnalysisEventListener</span>&lt;<span class="title">DemoData</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">// è¯»å–è¡Œæ•°æ®åˆ°å®ä½“ç±»å¯¹è±¡ä¸­</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">invoke</span><span class="params">(DemoData demoData, AnalysisContext analysisContext)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;*****&quot;</span> + demoData + <span class="string">&quot;*****&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¯»å–å®Œæˆä¹‹åæ‰§è¡Œ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAfterAllAnalysed</span><span class="params">(AnalysisContext analysisContext)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¯»å–è¡¨å¤´å†…å®¹</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">invokeHeadMap</span><span class="params">(Map&lt;Integer, String&gt; headMap, AnalysisContext context)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¡¨å¤´ï¼š&quot;</span> + headMap);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æµ‹è¯•ä»£ç </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String filename = <span class="string">&quot;D:\\MyProject\\excel\\test.xlsx&quot;</span>;</span><br><span class="line">EasyExcel.read(filename, DemoData.class, <span class="keyword">new</span> ExcelListener()).sheet().doRead();</span><br></pre></td></tr></table></figure><h3 id="ä»£ç ç”Ÿæˆå™¨"><a href="#ä»£ç ç”Ÿæˆå™¨" class="headerlink" title="ä»£ç ç”Ÿæˆå™¨"></a>ä»£ç ç”Ÿæˆå™¨</h3><blockquote><p>å…ˆç”Ÿæˆentityã€serviceã€mapperã€controllerå†è¯´</p><p>æ“ä½œè¿˜æ˜¯ä¸€æ ·ï¼Œè¯¦ç»†ä»£ç è§1ï¼Œåªéœ€è¦ä¿®æ”¹è¡¨åè¿è¡Œå³å¯</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸€åŠä¸åŒæ¨¡å—éœ€è¦ä¿®æ”¹çš„åœ°æ–¹å°±æ˜¯è¡¨å</span></span><br><span class="line">strategy.setInclude(<span class="string">&quot;edu_subject&quot;</span>); <span class="comment">//åŠ è½½è¡¨</span></span><br></pre></td></tr></table></figure><blockquote><p>è®°å¾—ä¸ºè‡ªåŠ¨ç”Ÿæˆçš„å®ä½“ç±»æ·»åŠ è‡ªåŠ¨å¡«å……ï¼ˆ@TableField(fill = FieldFill.INSERT)ç­‰ï¼‰çš„æ³¨è§£</p><p>æ³¨æ„controlleræ·»åŠ æ³¨é‡Š@CrossOriginè§£å†³è·¨åŸŸ</p></blockquote><h3 id="æ·»åŠ è¯¾ç¨‹åˆ†ç±»ï¼ˆåç«¯ï¼‰"><a href="#æ·»åŠ è¯¾ç¨‹åˆ†ç±»ï¼ˆåç«¯ï¼‰" class="headerlink" title="æ·»åŠ è¯¾ç¨‹åˆ†ç±»ï¼ˆåç«¯ï¼‰"></a>æ·»åŠ è¯¾ç¨‹åˆ†ç±»ï¼ˆåç«¯ï¼‰</h3><h4 id="åˆ›å»ºè¡¨æ ¼å®ä½“ç±»"><a href="#åˆ›å»ºè¡¨æ ¼å®ä½“ç±»" class="headerlink" title="åˆ›å»ºè¡¨æ ¼å®ä½“ç±»"></a>åˆ›å»ºè¡¨æ ¼å®ä½“ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * subjectè¡¨æ ¼å®ä½“ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SubjectData</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExcelProperty(index = 0)</span></span><br><span class="line">    <span class="keyword">private</span> String oneSubjectName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExcelProperty(index = 1)</span></span><br><span class="line">    <span class="keyword">private</span> String twoSubjectName;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™service"><a href="#ç¼–å†™service" class="headerlink" title="ç¼–å†™service"></a>ç¼–å†™service</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduSubjectServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">EduSubjectMapper</span>, <span class="title">EduSubject</span>&gt; <span class="keyword">implements</span> <span class="title">EduSubjectService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveSubject</span><span class="params">(MultipartFile file)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// è·å¾—æ–‡ä»¶è¾“å…¥æµ</span></span><br><span class="line">            InputStream inputStream = file.getInputStream();</span><br><span class="line">            <span class="comment">// è°ƒç”¨æ–¹æ³•è¯»å–</span></span><br><span class="line">            EasyExcel.read(inputStream, SubjectData.class, <span class="keyword">new</span> SubjectExcelListener()).sheet().doRead();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™ç›‘å¬å™¨"><a href="#ç¼–å†™ç›‘å¬å™¨" class="headerlink" title="ç¼–å†™ç›‘å¬å™¨"></a>ç¼–å†™ç›‘å¬å™¨</h4><blockquote><p>æ³¨æ„DataListener ä¸èƒ½è¢«springç®¡ç†ï¼ˆå®˜æ–¹è¯´çš„ï¼‰ï¼Œå¦‚æœä½¿ç”¨springéœ€è¦ä½¿ç”¨ç‰¹å®šæ„é€ å™¨</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.eduservice.listener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.context.AnalysisContext;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.event.AnalysisEventListener;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.eduservice.entity.EduSubject;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.eduservice.entity.excel.SubjectData;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.eduservice.service.EduSubjectService;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.servicebase.ExceptionHandler.GuliException;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SubjectExcelListener</span> <span class="keyword">extends</span> <span class="title">AnalysisEventListener</span>&lt;<span class="title">SubjectData</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> EduSubjectService subjectService;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SubjectExcelListener</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å½“newå½“å‰å¯¹è±¡çš„æ—¶å€™åŒæ—¶æ³¨å…¥service</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SubjectExcelListener</span><span class="params">(EduSubjectService subjectService)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.subjectService = subjectService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¯»å–excelå†…å®¹ï¼Œå†™å…¥æ•°æ®åº“</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">invoke</span><span class="params">(SubjectData subjectData, AnalysisContext analysisContext)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (subjectData == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;æ–‡ä»¶æ•°æ®ä¸ºç©º&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ·»åŠ ä¸€çº§åˆ†ç±»ï¼Œå…ˆåˆ¤æ–­ä¸€çº§åˆ†ç±»æ˜¯å¦å·²ç»å­˜åœ¨</span></span><br><span class="line">        EduSubject existOneSubject = <span class="keyword">this</span>.existSubject(subjectData.getOneSubjectName(), <span class="string">&quot;0&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (existOneSubject == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// æ­¤æ—¶æ²¡æœ‰ç›¸åŒçš„ä¸€çº§åˆ†ç±»ï¼Œéœ€è¦æ·»åŠ </span></span><br><span class="line">            EduSubject eduSubject = <span class="keyword">new</span> EduSubject();</span><br><span class="line">            eduSubject.setParentId(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">            eduSubject.setTitle(subjectData.getOneSubjectName());</span><br><span class="line">            subjectService.save(eduSubject);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//æ·»åŠ äºŒçº§åˆ†ç±»ï¼Œå…ˆåˆ¤æ–­</span></span><br><span class="line">            EduSubject eduTwoSubject = <span class="keyword">this</span>.existSubject(subjectData.getTwoSubjectName(), existOneSubject.getId());</span><br><span class="line">            <span class="keyword">if</span> (eduTwoSubject == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">// æ­¤æ—¶æ²¡æœ‰ç›¸åŒçš„ä¸€çº§åˆ†ç±»ï¼Œéœ€è¦æ·»åŠ </span></span><br><span class="line">                EduSubject eduSubject = <span class="keyword">new</span> EduSubject();</span><br><span class="line">                eduSubject.setParentId(existOneSubject.getId());</span><br><span class="line">                eduSubject.setTitle(subjectData.getTwoSubjectName());</span><br><span class="line">                subjectService.save(eduSubject);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAfterAllAnalysed</span><span class="params">(AnalysisContext analysisContext)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨äºåˆ¤æ–­åˆ†ç±»æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> EduSubject <span class="title">existSubject</span><span class="params">(String title, String pid)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ·»åŠ æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">        QueryWrapper&lt;EduSubject&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">        wrapper.eq(<span class="string">&quot;title&quot;</span>, title);</span><br><span class="line">        <span class="comment">// pid=0ä¸ºä¸€çº§åˆ†ç±»</span></span><br><span class="line">        wrapper.eq(<span class="string">&quot;parent_id&quot;</span>, pid);</span><br><span class="line">        <span class="keyword">return</span> subjectService.getOne(wrapper);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>åŒæ—¶ä¿®æ”¹ä¸€ä¸‹serviceä¸­æ–¹æ³•çš„å‚æ•°</p><p>å…¶å®è¿™é‡Œæœ‰ç‚¹å¥‡æ€ªï¼Œlisteneråšäº†ä¸»è¦ä¸šåŠ¡é€»è¾‘ï¼Œç­‰åšå®Œäº†å†è¯•è¯•åˆ«çš„æ–¹æ³•</p></blockquote><h4 id="ç¼–å†™controller"><a href="#ç¼–å†™controller" class="headerlink" title="ç¼–å†™controller"></a>ç¼–å†™controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/eduservice/subject&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduSubjectController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduSubjectService subjectService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ·»åŠ è¯¾ç¨‹åˆ†ç±»</span></span><br><span class="line">    <span class="comment">// è·å–ä¸Šä¼ è¿‡æ¥çš„æ–‡ä»¶ï¼ŒæŠŠæ–‡ä»¶å†…å®¹è¯»å–å‡ºæ¥å³å¯</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;addSubject&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">addSubject</span><span class="params">(MultipartFile file)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è·å¾—ä¸Šä¼ è¿‡æ¥çš„excelæ–‡ä»¶</span></span><br><span class="line">        subjectService.saveSubject(file, subjectService);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•ï¼ŒæŠ¥é”™ä¸è§£å†³âœ…-1"><a href="#æµ‹è¯•ï¼ŒæŠ¥é”™ä¸è§£å†³âœ…-1" class="headerlink" title="æµ‹è¯•ï¼ŒæŠ¥é”™ä¸è§£å†³âœ…"></a>æµ‹è¯•ï¼ŒæŠ¥é”™ä¸è§£å†³âœ…</h4><blockquote><p>swaggeræˆåŠŸï¼Œåå°æŠ¥é”™ï¼Œçœ‹äº†ä¸‹è¯´gtm_timeæ²¡æœ‰é»˜è®¤å€¼ï¼Œç„¶åæƒ³åˆ°è‡ªåŠ¨æ³¨å…¥å¯èƒ½æ²¡åŠ ï¼Œæœç„¶ã€‚</p><p>ç„¶åæ˜¯èƒ½å¤Ÿå†™å…¥æ•°æ®åº“äº†ä½†æ˜¯ä¸€çº§å†™åˆ°äºŒçº§å»äº†ï¼Œçœ‹äº†ä¸‹æ˜¯æ·»åŠ äºŒçº§åˆ†ç±»çš„æ—¶å€™çš„getæ–¹æ³•æˆgetOneSubjectNameè€Œä¸æ˜¯getTwoSubjectNameï¼Œæ”¹ä¸€ä¸‹å°±è§£å†³äº†</p></blockquote><h3 id="æ·»åŠ è¯¾ç¨‹åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰"><a href="#æ·»åŠ è¯¾ç¨‹åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="æ·»åŠ è¯¾ç¨‹åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰"></a>æ·»åŠ è¯¾ç¨‹åˆ†ç±»ï¼ˆå‰ç«¯ï¼‰</h3><h4 id="é…ç½®router"><a href="#é…ç½®router" class="headerlink" title="é…ç½®router"></a>é…ç½®router</h4><blockquote><p>src -&gt; router -&gt; index.js å½“ä¸­æ·»åŠ å³å¯</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯¾ç¨‹ç®¡ç†æ¨¡å—è·¯ç”±</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/subject&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: Layout,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/subject/list&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;è¯¾ç¨‹åˆ†ç±»ç®¡ç†&#x27;</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;è¯¾ç¨‹åˆ†ç±»ç®¡ç†&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;example&#x27;</span> &#125;,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;list&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;è¯¾ç¨‹åˆ†ç±»åˆ—è¡¨&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/edu/subject/list&#x27;</span>),</span><br><span class="line">        <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;è¯¾ç¨‹åˆ†ç±»åˆ—è¡¨&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;tree&#x27;</span> &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;save&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;æ·»åŠ è¯¾ç¨‹åˆ†ç±»&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/edu/subject/add&#x27;</span>),</span><br><span class="line">        <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;æ·»åŠ è¯¾ç¨‹åˆ†ç±»&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;table&#x27;</span> &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™æ·»åŠ è¯¾ç¨‹åˆ†ç±»è§†å›¾"><a href="#ç¼–å†™æ·»åŠ è¯¾ç¨‹åˆ†ç±»è§†å›¾" class="headerlink" title="ç¼–å†™æ·»åŠ è¯¾ç¨‹åˆ†ç±»è§†å›¾"></a>ç¼–å†™æ·»åŠ è¯¾ç¨‹åˆ†ç±»è§†å›¾</h4><blockquote><p>element-ui ä¸­ cvä¸€ä¸‹ï¼ˆæ–‡ä»¶ä¸Šä¼ ç›¸å…³ï¼‰</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">        &lt;el-form label-width=&quot;120px&quot;&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;ä¿¡æ¯æè¿°&quot;&gt;</span><br><span class="line">                &lt;el-tag type=&quot;info&quot;&gt;excelæ¨¡ç‰ˆè¯´æ˜&lt;/el-tag&gt;</span><br><span class="line">                &lt;el-tag&gt;</span><br><span class="line">                    &lt;i class=&quot;el-icon-download&quot; /&gt;</span><br><span class="line">                    &lt;!-- è¿™é‡Œæ¨¡æ¿æ”¾åœ¨äº†æœ¬åœ°staticæ–‡ä»¶å¤¹é‡Œï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨OSSå½“ä¸­ --&gt;</span><br><span class="line">                    &lt;a :href=&quot;&#x27;/static/demo.xlsx&#x27;&quot;&gt;ç‚¹å‡»ä¸‹è½½æ¨¡ç‰ˆ&lt;/a&gt;</span><br><span class="line">                &lt;/el-tag&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-form-item label=&quot;é€‰æ‹©Excel&quot;&gt;</span><br><span class="line">                &lt;el-upload</span><br><span class="line">                    ref=&quot;upload&quot;</span><br><span class="line">                    :auto-upload=&quot;false&quot;</span><br><span class="line">                    :on-success=&quot;fileUploadSuccess&quot;</span><br><span class="line">                    :on-error=&quot;fileUploadError&quot;</span><br><span class="line">                    :disabled=&quot;importBtnDisabled&quot;</span><br><span class="line">                    :limit=&quot;1&quot;</span><br><span class="line">                    :action=&quot;BASE_API + &#x27;/eduservice/subject/addSubject&#x27;&quot;</span><br><span class="line">                    name=&quot;file&quot;</span><br><span class="line">                    accept=&quot;application/vnd.ms-excel&quot;</span><br><span class="line">                &gt;</span><br><span class="line">                    &lt;el-button slot=&quot;trigger&quot; size=&quot;small&quot; type=&quot;primary&quot;</span><br><span class="line">                        &gt;é€‰å–æ–‡ä»¶&lt;/el-button</span><br><span class="line">                    &gt;</span><br><span class="line">                    &lt;el-button</span><br><span class="line">                        :loading=&quot;loading&quot;</span><br><span class="line">                        style=&quot;margin-left: 10px&quot;</span><br><span class="line">                        size=&quot;small&quot;</span><br><span class="line">                        type=&quot;success&quot;</span><br><span class="line">                        @click=&quot;submitUpload&quot;</span><br><span class="line">                        &gt;ä¸Šä¼ åˆ°æœåŠ¡å™¨&lt;/el-button</span><br><span class="line">                    &gt;</span><br><span class="line">                &lt;/el-upload&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">        &lt;/el-form&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          BASE_API: process.env.BASE_API, // æ¥å£APIåœ°å€</span><br><span class="line">          OSS_PATH: process.env.OSS_PATH,    // é˜¿é‡Œäº‘OSSåœ°å€</span><br><span class="line">          importBtnDisabled: false, // æŒ‰é’®æ˜¯å¦ç¦ç”¨,</span><br><span class="line">          loading: false</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      created() &#123;&#125;,</span><br><span class="line">      methods: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™è°ƒç”¨æ–¹æ³•"><a href="#ç¼–å†™è°ƒç”¨æ–¹æ³•" class="headerlink" title="ç¼–å†™è°ƒç”¨æ–¹æ³•"></a>ç¼–å†™è°ƒç”¨æ–¹æ³•</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  <span class="comment">// ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line">  <span class="function"><span class="title">submitUpload</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.importBtnDisabled = <span class="literal">true</span></span><br><span class="line">    <span class="built_in">this</span>.loading = <span class="literal">true</span></span><br><span class="line">    <span class="comment">// ä½¿ç”¨vueçš„æäº¤ï¼Œè€Œä¸æ˜¯Ajaxè¯·æ±‚</span></span><br><span class="line">    <span class="built_in">this</span>.$refs.upload.submit()</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ä¸Šä¼ æˆåŠŸ</span></span><br><span class="line">  <span class="function"><span class="title">fileUploadSuccess</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.loading = <span class="literal">false</span></span><br><span class="line">    <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;æ·»åŠ è¯¾ç¨‹åˆ†ç±»æˆåŠŸï¼&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ä¸Šä¼ å¤±è´¥</span></span><br><span class="line">  <span class="function"><span class="title">fileUploadError</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.loading = <span class="literal">false</span></span><br><span class="line">    <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;æ·»åŠ è¯¾ç¨‹åˆ†ç±»å¤±è´¥ï¼&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å®Œå–„"><a href="#å®Œå–„" class="headerlink" title="å®Œå–„"></a>å®Œå–„</h4><blockquote><ol><li>el-uploadæ·»åŠ ä¸€ä¸ª :before-upload=â€beforeUploadâ€ï¼Œç”¨äºä¸Šä¼ å‰åˆ¤æ–­æ–‡ä»¶åç¼€æ ¼å¼</li><li>ä¸Šä¼ æ–‡ä»¶æ—¶åˆ¤æ–­æ–‡ä»¶æ˜¯å¦ä¸ºç©º</li></ol></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">        &lt;el-form label-width=&quot;120px&quot;&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;é€‰æ‹©Excel&quot;&gt;</span><br><span class="line">                &lt;el-upload</span><br><span class="line">                    ref=&quot;upload&quot;</span><br><span class="line">                    :auto-upload=&quot;true&quot;</span><br><span class="line">                    :before-upload=&quot;beforeUpload&quot;</span><br><span class="line">                    :on-success=&quot;fileUploadSuccess&quot;</span><br><span class="line">                    :on-error=&quot;fileUploadError&quot;</span><br><span class="line">                    :disabled=&quot;importBtnDisabled&quot;</span><br><span class="line">                    :limit=&quot;1&quot;</span><br><span class="line">                    :action=&quot;BASE_API + &#x27;/eduservice/subject/addSubject&#x27;&quot;</span><br><span class="line">                    name=&quot;file&quot;</span><br><span class="line">                    accept=&quot;application.xlsx&quot;</span><br><span class="line">                &gt;</span><br><span class="line">                    &lt;el-button slot=&quot;trigger&quot; size=&quot;small&quot; type=&quot;primary&quot;</span><br><span class="line">                        &gt;é€‰å–æ–‡ä»¶&lt;/el-button</span><br><span class="line">                    &gt;</span><br><span class="line">                    &lt;el-button</span><br><span class="line">                        :loading=&quot;loading&quot;</span><br><span class="line">                        style=&quot;margin-left: 10px&quot;</span><br><span class="line">                        size=&quot;small&quot;</span><br><span class="line">                        type=&quot;success&quot;</span><br><span class="line">                        @click=&quot;submitUpload&quot;</span><br><span class="line">                        &gt;ä¸Šä¼ åˆ°æœåŠ¡å™¨&lt;/el-button</span><br><span class="line">                    &gt;</span><br><span class="line">                &lt;/el-upload&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">        &lt;/el-form&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">      methods: &#123;</span><br><span class="line">        // ä¸Šä¼ å‰åˆ¤æ–­æ ¼å¼</span><br><span class="line">        beforeUpload() &#123;</span><br><span class="line">          const fileName = this.$refs.upload.uploadFiles[0].name</span><br><span class="line">          const suffix = fileName.substring(fileName.lastIndexOf(&#x27;.&#x27;) + 1)</span><br><span class="line">          if (suffix != &#x27;xlsx&#x27;) &#123;</span><br><span class="line">            this.fileSuffixError()</span><br><span class="line">            return false</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        // ä¸Šä¼ æ–‡ä»¶</span><br><span class="line">        submitUpload() &#123;</span><br><span class="line">          if (this.$refs.upload.uploadFiles.length == 0) &#123;</span><br><span class="line">            this.fileUploadError()</span><br><span class="line">            return</span><br><span class="line">          &#125;</span><br><span class="line">          this.importBtnDisabled = true</span><br><span class="line">          this.loading = true</span><br><span class="line">          // ä½¿ç”¨vueçš„æäº¤ï¼Œè€Œä¸æ˜¯Ajaxè¯·æ±‚</span><br><span class="line">          this.$refs.upload.submit()</span><br><span class="line">        &#125;,</span><br><span class="line">        // æ–‡ä»¶æ ¼å¼é”™è¯¯å¤±è´¥</span><br><span class="line">        fileSuffixError() &#123;</span><br><span class="line">          this.loading = false</span><br><span class="line">          this.$message(&#123;</span><br><span class="line">            type: &#x27;error&#x27;,</span><br><span class="line">            message: &#x27;æ–‡ä»¶æ ¼å¼é”™è¯¯ï¼&#x27;</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="è¯¾ç¨‹åˆ†ç±»åˆ—è¡¨ï¼ˆåç«¯ï¼‰"><a href="#è¯¾ç¨‹åˆ†ç±»åˆ—è¡¨ï¼ˆåç«¯ï¼‰" class="headerlink" title="è¯¾ç¨‹åˆ†ç±»åˆ—è¡¨ï¼ˆåç«¯ï¼‰"></a>è¯¾ç¨‹åˆ†ç±»åˆ—è¡¨ï¼ˆåç«¯ï¼‰</h3><h4 id="é’ˆå¯¹è¿”å›çš„æ•°æ®åˆ›å»ºå¯¹åº”å®ä½“ç±»"><a href="#é’ˆå¯¹è¿”å›çš„æ•°æ®åˆ›å»ºå¯¹åº”å®ä½“ç±»" class="headerlink" title="é’ˆå¯¹è¿”å›çš„æ•°æ®åˆ›å»ºå¯¹åº”å®ä½“ç±»"></a>é’ˆå¯¹è¿”å›çš„æ•°æ®åˆ›å»ºå¯¹åº”å®ä½“ç±»</h4><blockquote><p>ä¸€çº§åˆ†ç±»ã€äºŒçº§åˆ†ç±»éƒ½è¦åˆ›å»ºå¯¹åº”å®ä½“ç±»</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸€çº§åˆ†ç±»</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OneSubject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">    <span class="keyword">private</span> List&lt;TwoSubject&gt; children = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// äºŒçº§åˆ†ç±»</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TwoSubject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™controller-1"><a href="#ç¼–å†™controller-1" class="headerlink" title="ç¼–å†™controller"></a>ç¼–å†™controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯¾ç¨‹åˆ†ç±»åˆ—è¡¨ï¼ˆæ ‘å½¢ï¼‰</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;getAllSubjects&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">getAllSubjects</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;OneSubject&gt; list = subjectService.getAllSubjects();</span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">&quot;list&quot;</span>, <span class="string">&quot;list&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™service-1"><a href="#ç¼–å†™service-1" class="headerlink" title="ç¼–å†™service"></a>ç¼–å†™service</h4><blockquote><p>serviceç»§æ‰¿çš„ServiceImplå·²ç»è‡ªåŠ¨æ³¨å…¥äº†baseMapper</p><p>è¿™é‡Œçš„ä»£ç ä¸å¤Ÿä¼˜é›…</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;OneSubject&gt; <span class="title">getAllSubjects</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢æ‰€æœ‰ä¸€çº§åˆ†ç±»</span></span><br><span class="line">    QueryWrapper&lt;EduSubject&gt; wrapperOne = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    wrapperOne.eq(<span class="string">&quot;parent_id&quot;</span>, <span class="string">&quot;0&quot;</span>);</span><br><span class="line">    List&lt;EduSubject&gt; oneSubjectList = baseMapper.selectList(wrapperOne);</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢æ‰€æœ‰äºŒçº§åˆ†ç±»</span></span><br><span class="line">    QueryWrapper&lt;EduSubject&gt; wrapperTwo = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    wrapperTwo.ne(<span class="string">&quot;parent_id&quot;</span>, <span class="string">&quot;0&quot;</span>);</span><br><span class="line">    List&lt;EduSubject&gt; twoSubjectList = baseMapper.selectList(wrapperTwo);</span><br><span class="line"></span><br><span class="line">    List&lt;OneSubject&gt; finalList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; oneSubjectList.size(); i++) &#123;</span><br><span class="line">        <span class="comment">// å°è£…ä¸€çº§</span></span><br><span class="line">        EduSubject eduSubjectOne = oneSubjectList.get(i);</span><br><span class="line">        OneSubject oneSubject = <span class="keyword">new</span> OneSubject();</span><br><span class="line">        BeanUtils.copyProperties(eduSubjectOne, oneSubject);</span><br><span class="line">        finalList.add(oneSubject);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å°è£…äºŒçº§åˆ†ç±»</span></span><br><span class="line">        List&lt;TwoSubject&gt; childrenList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="comment">//éå†äºŒçº§åˆ†ç±»listé›†åˆ</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> m = <span class="number">0</span>; m &lt; twoSubjectList.size(); m++) &#123;</span><br><span class="line">            <span class="comment">//è·å–æ¯ä¸ªäºŒçº§åˆ†ç±»</span></span><br><span class="line">            EduSubject eduSubjectTwo = twoSubjectList.get(m);</span><br><span class="line">            <span class="comment">//åˆ¤æ–­äºŒçº§åˆ†ç±»parentidå’Œä¸€çº§åˆ†ç±»idæ˜¯å¦ä¸€æ ·</span></span><br><span class="line">            <span class="keyword">if</span> (eduSubjectTwo.getParentId().equals(eduSubjectOne.getId())) &#123;</span><br><span class="line">                <span class="comment">//æŠŠtSubjectå€¼å¤åˆ¶åˆ°TwoSubjecté‡Œé¢ï¼Œæ”¾åˆ°twoFinalSubjectListé‡Œé¢</span></span><br><span class="line">                TwoSubject twoSubject = <span class="keyword">new</span> TwoSubject();</span><br><span class="line">                BeanUtils.copyProperties(eduSubjectTwo, twoSubject);</span><br><span class="line">                childrenList.add(twoSubject);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æŠŠä¸€çº§ä¸‹é¢æ‰€æœ‰äºŒçº§åˆ†ç±»æ”¾åˆ°ä¸€çº§åˆ†ç±»é‡Œé¢</span></span><br><span class="line">        oneSubject.setChildren(childrenList);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> finalList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¯¾ç¨‹åˆ†ç±»åˆ—è¡¨ï¼ˆå‰ç«¯ï¼‰"><a href="#è¯¾ç¨‹åˆ†ç±»åˆ—è¡¨ï¼ˆå‰ç«¯ï¼‰" class="headerlink" title="è¯¾ç¨‹åˆ†ç±»åˆ—è¡¨ï¼ˆå‰ç«¯ï¼‰"></a>è¯¾ç¨‹åˆ†ç±»åˆ—è¡¨ï¼ˆå‰ç«¯ï¼‰</h3><h4 id="æ ‘å½¢ç»“æ„æ¨¡æ¿"><a href="#æ ‘å½¢ç»“æ„æ¨¡æ¿" class="headerlink" title="æ ‘å½¢ç»“æ„æ¨¡æ¿"></a>æ ‘å½¢ç»“æ„æ¨¡æ¿</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">        &lt;!-- æ£€ç´¢ --&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">            v-model=&quot;filterText&quot;</span><br><span class="line">            placeholder=&quot;Filter keyword&quot;</span><br><span class="line">            style=&quot;margin-bottom: 30px&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">        &lt;!-- æ ‘å½¢ç»“æ„ --&gt;</span><br><span class="line">        &lt;el-tree</span><br><span class="line">            ref=&quot;tree2&quot;</span><br><span class="line">            :data=&quot;data2&quot;</span><br><span class="line">            :props=&quot;defaultProps&quot;</span><br><span class="line">            :filter-node-method=&quot;filterNode&quot;</span><br><span class="line">            class=&quot;filter-tree&quot;</span><br><span class="line">            default-expand-all</span><br><span class="line">        /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          filterText: &#x27;&#x27;,</span><br><span class="line">          data2: [</span><br><span class="line">            &#123;</span><br><span class="line">              id: 1,</span><br><span class="line">              label: &#x27;Level one 1&#x27;,</span><br><span class="line">              children: [</span><br><span class="line">                &#123;</span><br><span class="line">                  id: 4,</span><br><span class="line">                  label: &#x27;Level two 1-1&#x27;,</span><br><span class="line">                  children: [</span><br><span class="line">                    &#123;</span><br><span class="line">                      id: 9,</span><br><span class="line">                      label: &#x27;Level three 1-1-1&#x27;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                      id: 10,</span><br><span class="line">                      label: &#x27;Level three 1-1-2&#x27;</span><br><span class="line">                    &#125;</span><br><span class="line">                  ]</span><br><span class="line">                &#125;</span><br><span class="line">              ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              id: 2,</span><br><span class="line">              label: &#x27;Level one 2&#x27;,</span><br><span class="line">              children: [</span><br><span class="line">                &#123;</span><br><span class="line">                  id: 5,</span><br><span class="line">                  label: &#x27;Level two 2-1&#x27;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                  id: 6,</span><br><span class="line">                  label: &#x27;Level two 2-2&#x27;</span><br><span class="line">                &#125;</span><br><span class="line">              ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              id: 3,</span><br><span class="line">              label: &#x27;Level one 3&#x27;,</span><br><span class="line">              children: [</span><br><span class="line">                &#123;</span><br><span class="line">                  id: 7,</span><br><span class="line">                  label: &#x27;Level two 3-1&#x27;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                  id: 8,</span><br><span class="line">                  label: &#x27;Level two 3-2&#x27;</span><br><span class="line">                &#125;</span><br><span class="line">              ]</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          defaultProps: &#123;</span><br><span class="line">            children: &#x27;children&#x27;,</span><br><span class="line">            label: &#x27;label&#x27;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      watch: &#123;</span><br><span class="line">        filterText(val) &#123;</span><br><span class="line">          this.$refs.tree2.filter(val)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      methods: &#123;</span><br><span class="line">        filterNode(value, data) &#123;</span><br><span class="line">          if (!value) return true</span><br><span class="line">          return data.label.indexOf(value) !== -1</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><blockquote><p>éœ€è¦ç¨å¾®ä¿®æ”¹</p></blockquote><h4 id="åç«¯æ¥å£è°ƒç”¨"><a href="#åç«¯æ¥å£è°ƒç”¨" class="headerlink" title="åç«¯æ¥å£è°ƒç”¨"></a>åç«¯æ¥å£è°ƒç”¨</h4><blockquote><p>api -&gt; edu -&gt; subject.js</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¯¾ç¨‹åˆ†ç±»åˆ—è¡¨</span></span><br><span class="line">    <span class="function"><span class="title">getSubjectList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> request(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">`/eduservice/subject/getAllSubjects`</span>,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è®°å¾—åœ¨vueè§†å›¾ä¸­å¼•å…¥</p></blockquote><h4 id="vueè§†å›¾å’Œæ–¹æ³•"><a href="#vueè§†å›¾å’Œæ–¹æ³•" class="headerlink" title="vueè§†å›¾å’Œæ–¹æ³•"></a>vueè§†å›¾å’Œæ–¹æ³•</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">        &lt;!-- æ£€ç´¢ --&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">            v-model=&quot;filterText&quot;</span><br><span class="line">            placeholder=&quot;Filter keyword&quot;</span><br><span class="line">            style=&quot;margin-bottom: 30px&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">        &lt;!-- æ ‘å½¢ç»“æ„ --&gt;</span><br><span class="line">        &lt;el-tree</span><br><span class="line">            ref=&quot;tree2&quot;</span><br><span class="line">            :data=&quot;list&quot;</span><br><span class="line">            :props=&quot;defaultProps&quot;</span><br><span class="line">            :filter-node-method=&quot;filterNode&quot;</span><br><span class="line">            class=&quot;filter-tree&quot;</span><br><span class="line">            default-expand-all</span><br><span class="line">        /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    // å¼•å…¥è°ƒç”¨æ¥å£çš„jsæ–‡ä»¶</span><br><span class="line">    import subjectApi from &#x27;@/api/edu/subject.js&#x27;</span><br><span class="line">    export default &#123;</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          // ç´¢å¼•æ–‡æœ¬</span><br><span class="line">          filterText: &#x27;&#x27;,</span><br><span class="line">          list: [],</span><br><span class="line">          defaultProps: &#123;</span><br><span class="line">            children: &#x27;children&#x27;,</span><br><span class="line">            label: &#x27;title&#x27;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      watch: &#123;</span><br><span class="line">        filterText(val) &#123;</span><br><span class="line">          this.$refs.tree2.filter(val)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      created() &#123;</span><br><span class="line">        this.getAllSubjectList()</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">        // è·å¾—æ‰€æœ‰subject</span><br><span class="line">        getAllSubjectList() &#123;</span><br><span class="line">          subjectApi.getSubjectList().then(result =&gt; &#123;</span><br><span class="line">            this.list = result.data.list</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        // è¿‡æ»¤æ–‡æœ¬ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰</span><br><span class="line">        filterNode(value, data) &#123;</span><br><span class="line">          if (!value) return true</span><br><span class="line">          return data.title.toLowerCase().indexOf(value.toLowerCase()) !== -1</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•-1"><a href="#æµ‹è¯•-1" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><blockquote><p>è®°å¾—å¼€nginx</p></blockquote><h2 id="å¾…ç»­"><a href="#å¾…ç»­" class="headerlink" title="å¾…ç»­"></a>å¾…ç»­</h2><blockquote><p>è¿›åº¦1/3</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> é¡¹ç›® </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> SpringCloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€å­¦ä¹ ç¬”è®°ã€‘MyBatisPlus</title>
      <link href="/2021/09/20/xue-xi-bi-ji-mybatisplus/"/>
      <url>/2021/09/20/xue-xi-bi-ji-mybatisplus/</url>
      
        <content type="html"><![CDATA[<h2 id="å®˜ç½‘"><a href="#å®˜ç½‘" class="headerlink" title="å®˜ç½‘"></a>å®˜ç½‘</h2><p><a href="https://mp.baomidou.com/">MyBatis-Plus (baomidou.com)</a></p><h2 id="åˆ›å»ºå¹¶åˆå§‹åŒ–æ•°æ®åº“"><a href="#åˆ›å»ºå¹¶åˆå§‹åŒ–æ•°æ®åº“" class="headerlink" title="åˆ›å»ºå¹¶åˆå§‹åŒ–æ•°æ®åº“"></a>åˆ›å»ºå¹¶åˆå§‹åŒ–æ•°æ®åº“</h2><p>è§è¯¾ä»¶</p><h2 id="å¿«é€Ÿåˆ›å»ºå·¥ç¨‹"><a href="#å¿«é€Ÿåˆ›å»ºå·¥ç¨‹" class="headerlink" title="å¿«é€Ÿåˆ›å»ºå·¥ç¨‹"></a>å¿«é€Ÿåˆ›å»ºå·¥ç¨‹</h2><h3 id="åˆ›å»ºspringbootå·¥ç¨‹"><a href="#åˆ›å»ºspringbootå·¥ç¨‹" class="headerlink" title="åˆ›å»ºspringbootå·¥ç¨‹"></a>åˆ›å»ºspringbootå·¥ç¨‹</h3><blockquote><p>new project -&gt; spring Initializr</p></blockquote><h3 id="mybatisplusä¾èµ–"><a href="#mybatisplusä¾èµ–" class="headerlink" title="mybatisplusä¾èµ–"></a>mybatisplusä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- velocity æ¨¡æ¿å¼•æ“, Mybatis Plus ä»£ç ç”Ÿæˆå™¨éœ€è¦ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.velocity<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>velocity-engine-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="é…ç½®application-properties"><a href="#é…ç½®application-properties" class="headerlink" title="é…ç½®application.properties"></a>é…ç½®application.properties</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/mybatis_plus?serverTimezone=GMT%2B8</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">123456789</span></span><br><span class="line"><span class="comment"># mybatisæ—¥å¿—ï¼Œå¯ä»¥æŸ¥çœ‹æ›´å¤šè¯¦ç»†ä¿¡æ¯</span></span><br><span class="line"><span class="meta">mybatis-plus.configuration.log-impl</span>=<span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºå®ä½“ç±»"><a href="#åˆ›å»ºå®ä½“ç±»" class="headerlink" title="åˆ›å»ºå®ä½“ç±»"></a>åˆ›å»ºå®ä½“ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mybatisplus_demo.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºMapepræ¥å£"><a href="#åˆ›å»ºMapepræ¥å£" class="headerlink" title="åˆ›å»ºMapepræ¥å£"></a>åˆ›å»ºMapepræ¥å£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mybatisplus_demo.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> com.example.mybatisplus_demo.entity.User;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="mapperæ‰«æ"><a href="#mapperæ‰«æ" class="headerlink" title="mapperæ‰«æ"></a>mapperæ‰«æ</h3><blockquote><p>æ³¨æ„è¿™é‡Œæœ‰ä¸ªæ˜“é”™ç‚¹ï¼Œmappersanå†…å¡«å†™åˆ°Mapperæ–‡ä»¶å­˜æ”¾çš„æ–‡ä»¶å¤¹ï¼Œè€Œä¸æ˜¯mapperæ–‡ä»¶</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.example.mybatisplus_demo.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisplusDemoApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(MybatisplusDemoApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å•å…ƒæµ‹è¯•"><a href="#å•å…ƒæµ‹è¯•" class="headerlink" title="å•å…ƒæµ‹è¯•"></a>å•å…ƒæµ‹è¯•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mybatisplus_demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.mybatisplus_demo.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MybatisplusDemoApplicationTests</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line">    <span class="comment">// æ­¤å¤„å¦‚æœæŠ¥é”™ï¼Œåˆ™åœ¨UserMapperæ¥å£å¤„æ·»åŠ æ³¨é‡Š@Repositoryå³å¯</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å½“å‰é¡¹ç›®ç»“æ„"><a href="#å½“å‰é¡¹ç›®ç»“æ„" class="headerlink" title="å½“å‰é¡¹ç›®ç»“æ„"></a>å½“å‰é¡¹ç›®ç»“æ„</h3><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210920125342626.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210920125342626.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210920125342626"></p><h2 id="åŸºç¡€CRUDæ¥å£"><a href="#åŸºç¡€CRUDæ¥å£" class="headerlink" title="åŸºç¡€CRUDæ¥å£"></a>åŸºç¡€CRUDæ¥å£</h2><h3 id="æ·»åŠ "><a href="#æ·»åŠ " class="headerlink" title="æ·»åŠ "></a>æ·»åŠ </h3><blockquote><p>ä¸éœ€è¦è®¾ç½®idä¸»é”®çš„å€¼ï¼Œmybatisplusè‡ªåŠ¨ç”Ÿæˆ19ä½id</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> insert = userMapper.insert(<span class="keyword">new</span> User(<span class="keyword">null</span>, <span class="string">&quot;çˆ±ä¸½ä¸&quot;</span>, <span class="number">12</span>, <span class="string">&quot;Alice@qq.com&quot;</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;insert: &quot;</span> + insert);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¸»é”®ç”Ÿæˆç­–ç•¥"><a href="#ä¸»é”®ç”Ÿæˆç­–ç•¥" class="headerlink" title="ä¸»é”®ç”Ÿæˆç­–ç•¥"></a>ä¸»é”®ç”Ÿæˆç­–ç•¥</h4><p><a href="https://www.cnblogs.com/haoxinyue/p/5208136.html">åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€IDç”Ÿæˆæ–¹æ¡ˆæ±‡æ€» - nick hao - åšå®¢å›­ (cnblogs.com)</a></p><ol><li>è‡ªåŠ¨å¢é•¿</li><li>UUID</li><li>Redisç”Ÿæˆ</li><li>snowflakeé›ªèŠ±ç®—æ³•</li></ol><p>mybatisplusä¸­æŒ‡å®šç­–ç•¥å¦‚ä¸‹</p><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210920132148411.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210920132148411.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210920132148411"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableId(type = IdType.AUTO)</span></span><br><span class="line"><span class="keyword">private</span> Long id;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹"><a href="#ä¿®æ”¹" class="headerlink" title="ä¿®æ”¹"></a>ä¿®æ”¹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">updateUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    userMapper.updateById(<span class="keyword">new</span> User(<span class="number">2L</span>, <span class="string">&quot;Jacks&quot;</span>, <span class="number">11</span>, <span class="string">&quot;Jacks@qq.com&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è‡ªåŠ¨å¡«å……"><a href="#è‡ªåŠ¨å¡«å……" class="headerlink" title="è‡ªåŠ¨å¡«å……"></a>è‡ªåŠ¨å¡«å……</h4><blockquote><p>ä¸ºå®ä½“ç±»æ·»åŠ å¸¦æœ‰æ³¨è§£çš„å±æ€§</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//create_time</span></span><br><span class="line"><span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line"><span class="keyword">private</span> Date createTime;</span><br><span class="line"></span><br><span class="line"><span class="comment">//update_time  æ³¨æ„è¿™é‡Œæ˜¯INSERT_UPDATE</span></span><br><span class="line"><span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class="line"><span class="keyword">private</span> Date updateTime;</span><br></pre></td></tr></table></figure><blockquote><p>åˆ›å»ºhandlerç±»ï¼Œå¹¶å®ç°æ¥å£MetaObjectHandlerçš„æ–¹æ³•</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mybatisplus_demo.handler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.reflection.MetaObject;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">// éœ€è¦äº¤ç»™spring</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title">MetaObjectHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å½“ä½¿ç”¨mpå®ç°æ·»åŠ æ“ä½œæ—¶ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šæ‰§è¡Œ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;createTime&quot;</span>, <span class="keyword">new</span> Date(), metaObject);</span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;updateTime&quot;</span>, <span class="keyword">new</span> Date(), metaObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;updateTime&quot;</span>, <span class="keyword">new</span> Date(), metaObject);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æµ‹è¯•</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setName(<span class="string">&quot;å²³ä¸ç¾¤1&quot;</span>);</span><br><span class="line">        user.setAge(<span class="number">70</span>);</span><br><span class="line">        user.setEmail(<span class="string">&quot;lucy@qq.com&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        user.setCreateTime(new Date());</span></span><br><span class="line"><span class="comment">//        user.setUpdateTime(new Date());</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> insert = userMapper.insert(user);</span><br><span class="line">        System.out.println(<span class="string">&quot;insert:&quot;</span> + insert);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setId(<span class="number">1439818355027558402L</span>);</span><br><span class="line">        user.setAge(<span class="number">120</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> row = userMapper.updateById(user);</span><br><span class="line">        System.out.println(row);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="ä¹è§‚é”"><a href="#ä¹è§‚é”" class="headerlink" title="ä¹è§‚é”"></a>ä¹è§‚é”</h4><blockquote><p>ä¸»è¦è§£å†³ï¼šä¸¢å¤±æ›´æ–°</p></blockquote><blockquote><p>ä¸ºå®ä½“ç±»æ·»åŠ å¸¦æ³¨è§£çš„å±æ€§</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Version</span></span><br><span class="line"><span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line"><span class="keyword">private</span> Integer version;</span><br></pre></td></tr></table></figure><blockquote><p>é…ç½®ä¹è§‚é”æ’ä»¶ï¼Œå¯ä»¥å†™åœ¨ç‹¬ç«‹çš„é…ç½®ç±»ä¸­ï¼ˆMapperScanä¹Ÿå¯ä»¥å†™åœ¨è¯¥é…ç½®ç±»ä¸­ï¼‰</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.example.mybatisplus_demo.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MpConfig</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¹è§‚é”æ’ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MybatisPlusInterceptor <span class="title">mybatisPlusInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        MybatisPlusInterceptor interceptor = <span class="keyword">new</span> MybatisPlusInterceptor();</span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> OptimisticLockerInnerInterceptor());</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç¼–å†™handlerç±»</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;createTime&quot;</span>, <span class="keyword">new</span> Date(), metaObject);</span><br><span class="line">    <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;updateTime&quot;</span>, <span class="keyword">new</span> Date(), metaObject);</span><br><span class="line">    <span class="comment">// é»˜è®¤åˆå§‹å€¼1</span></span><br><span class="line">    <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;version&quot;</span>, <span class="number">1</span>, metaObject);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æµ‹è¯•</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testOptimisticLockerInnerInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å…ˆæŸ¥</span></span><br><span class="line">    User user = userMapper.selectById(<span class="number">1439842460539846658L</span>);</span><br><span class="line">    <span class="comment">// åæ”¹</span></span><br><span class="line">    user.setAge(<span class="number">44</span>);</span><br><span class="line">    userMapper.updateById(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æŸ¥è¯¢"><a href="#æŸ¥è¯¢" class="headerlink" title="æŸ¥è¯¢"></a>æŸ¥è¯¢</h3><h4 id="æ‰¹é‡æŸ¥è¯¢"><a href="#æ‰¹é‡æŸ¥è¯¢" class="headerlink" title="æ‰¹é‡æŸ¥è¯¢"></a>æ‰¹é‡æŸ¥è¯¢</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testSelect</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectBatchIds(Arrays.asList(<span class="number">1L</span>, <span class="number">2L</span>, <span class="number">3L</span>));</span><br><span class="line">    System.out.println(users);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ†é¡µæŸ¥è¯¢"><a href="#åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="åˆ†é¡µæŸ¥è¯¢"></a>åˆ†é¡µæŸ¥è¯¢</h4><blockquote><p>åœ¨é…ç½®ç±»ä¸­é…ç½®åˆ†é¡µæ’ä»¶</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.example.mybatisplus_demo.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MpConfig</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MybatisPlusInterceptor <span class="title">mybatisPlusInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        MybatisPlusInterceptor interceptor = <span class="keyword">new</span> MybatisPlusInterceptor();</span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> OptimisticLockerInnerInterceptor());</span><br><span class="line">       <span class="comment">// åˆ†é¡µæ’ä»¶</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> PaginationInnerInterceptor(DbType.MYSQL));</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æµ‹è¯•</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testPage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºpageå¯¹è±¡</span></span><br><span class="line">    Page&lt;User&gt; page = <span class="keyword">new</span> Page&lt;&gt;(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢</span></span><br><span class="line">    Page&lt;User&gt; page1 = userMapper.selectPage(page, <span class="keyword">null</span>);</span><br><span class="line">    System.out.println(page1);</span><br><span class="line">    <span class="comment">// è·å¾—çš„pageå¯¹è±¡æœ‰è®¸å¤šæ–¹æ³•å¯ä»¥è·å¾—å¯¹åº”å€¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h3><blockquote><p>ç‰©ç†åˆ é™¤ï¼šçœŸå®åˆ é™¤ï¼Œå°†æ•°æ®ä»æ•°æ®åº“ä¸­åˆ é™¤<br>é€»è¾‘åˆ é™¤ï¼šå‡åˆ é™¤ï¼Œæ ¹æ®å­—æ®µçŠ¶æ€åˆ¤æ–­</p></blockquote><h4 id="æ‰¹é‡åˆ é™¤ï¼ˆç‰©ç†åˆ é™¤ï¼‰"><a href="#æ‰¹é‡åˆ é™¤ï¼ˆç‰©ç†åˆ é™¤ï¼‰" class="headerlink" title="æ‰¹é‡åˆ é™¤ï¼ˆç‰©ç†åˆ é™¤ï¼‰"></a>æ‰¹é‡åˆ é™¤ï¼ˆç‰©ç†åˆ é™¤ï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testDelete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    userMapper.deleteBatchIds(Arrays.asList(<span class="number">1L</span>, <span class="number">2L</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="é€»è¾‘åˆ é™¤"><a href="#é€»è¾‘åˆ é™¤" class="headerlink" title="é€»è¾‘åˆ é™¤"></a>é€»è¾‘åˆ é™¤</h4><blockquote><p>åœ¨å®ä½“ç±»ä¸­æ·»åŠ å¸¦æ³¨é‡Šçš„å±æ€§ï¼ˆå¯ä»¥å†åŠ ä¸ŠTableFieldè®¾ç½®é»˜è®¤å€¼ç­‰ï¼‰</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableLogic</span></span><br><span class="line"><span class="keyword">private</span> Integer deleted;</span><br></pre></td></tr></table></figure><blockquote><p>é«˜ç‰ˆæœ¬å·²ä¸éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ æ’ä»¶</p></blockquote><blockquote><p>æµ‹è¯•</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testDelete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    userMapper.deleteBatchIds(Arrays.asList(<span class="number">1L</span>, <span class="number">2L</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>é€»è¾‘åˆ é™¤ä¹‹åçš„æ•°æ®åœ¨æŸ¥è¯¢çš„æ—¶å€™ä¸ä¼šè¢«æŸ¥è¯¢åˆ°ï¼ˆæ·»åŠ äº†é¢å¤–çš„æ¡ä»¶deleted=0ï¼‰</p></blockquote><h2 id="æ¡ä»¶æ„é€ å™¨"><a href="#æ¡ä»¶æ„é€ å™¨" class="headerlink" title="æ¡ä»¶æ„é€ å™¨"></a>æ¡ä»¶æ„é€ å™¨</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testWrapper</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    <span class="comment">// è®¾ç½®æ¡ä»¶(æ›´å¤šæ¡ä»¶è¯¦è§å®˜ç½‘)</span></span><br><span class="line">    wrapper.ge(<span class="string">&quot;age&quot;</span>, <span class="number">20</span>).le(<span class="string">&quot;age&quot;</span>, <span class="number">40</span>);</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br><span class="line">    System.out.println(users);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210920153358406.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210920153358406.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210920153358406"></p><h2 id="ä»£ç ç”Ÿæˆå™¨"><a href="#ä»£ç ç”Ÿæˆå™¨" class="headerlink" title="ä»£ç ç”Ÿæˆå™¨"></a>ä»£ç ç”Ÿæˆå™¨</h2>]]></content>
      
      
      
        <tags>
            
            <tag> MyBatisPlus </tag>
            
            <tag> å­¦ä¹  </tag>
            
            <tag> ssm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€é¡¹ç›®ç¬”è®°ã€‘åœ¨çº¿æ•™è‚²é¡¹ç›®å®æˆ˜1</title>
      <link href="/2021/09/19/xiang-mu-bi-ji-zai-xian-jiao-yu-xiang-mu-shi-zhan-1/"/>
      <url>/2021/09/19/xiang-mu-bi-ji-zai-xian-jiao-yu-xiang-mu-shi-zhan-1/</url>
      
        <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>â€‹    ä»Šå¤©å‡†å¤‡å†™ä¸€ä¸ªssmæ•´åˆçš„crudç®€å•é¡¹ç›®ï¼Œç„¶åé¡ºä¾¿åº”ä»˜ä¸€ä¸‹å­¦æ ¡è¯¾ç¨‹ï¼Œç„¶åè¢«springçš„æ³¨é‡Šæ°”åˆ°äº†ï¼ˆæ³¨é‡Šä»£ç ä»€ä¹ˆéƒ½å†™å¾—ä¸€æ¨¡ä¸€æ ·ï¼Œå°±æ˜¯ideaæŠ¥æ‰¾ä¸åˆ°beanï¼Œç»“æœæˆ‘é‡å†™äº†å‡ éä¹‹åè«åçš„å¥½äº†ï¼Œç¦»è°±ï¼ï¼‰ï¼Œè¢«jspæ°”åˆ°äº†ï¼ˆè¿™ä¸ªé”™è¯¯ä¹‹å‰é‡åˆ°å¥½å‡ æ¬¡äº†ï¼Œä¹Ÿæ˜¯ä»£ç ä¸€æ¨¡ä¸€æ ·ï¼Œå°±æ˜¯æŠ¥404ï¼Œç¦»è°±ï¼ï¼‰ï¼Œå®åœ¨æ˜¯ä¸æƒ³åœ¨è¿™äº›ä¸Šé¢æŠ˜è…¾äº†ï¼Œä»Šå¤©åœ¨å®éªŒå®¤æœ‰ä¸€åŠçš„æ—¶é—´éƒ½åœ¨å¹æ°”ï¼Œäºæ˜¯æœæ–­æ”¾å¼ƒäº†å®ƒï¼ŒæŠ•å…¥äº†springboot+vueçš„æ€€æŠ±ã€‚</p><h2 id="é¡¹ç›®ç®€ä»‹"><a href="#é¡¹ç›®ç®€ä»‹" class="headerlink" title="é¡¹ç›®ç®€ä»‹"></a>é¡¹ç›®ç®€ä»‹</h2><h3 id="é¡¹ç›®å•†ä¸šæ¨¡å¼"><a href="#é¡¹ç›®å•†ä¸šæ¨¡å¼" class="headerlink" title="é¡¹ç›®å•†ä¸šæ¨¡å¼"></a>é¡¹ç›®å•†ä¸šæ¨¡å¼</h3><h4 id="B2Cï¼ˆå½“å‰é¡¹ç›®ï¼‰"><a href="#B2Cï¼ˆå½“å‰é¡¹ç›®ï¼‰" class="headerlink" title="B2Cï¼ˆå½“å‰é¡¹ç›®ï¼‰"></a>B2Cï¼ˆå½“å‰é¡¹ç›®ï¼‰</h4><blockquote><p>Business To Customers</p><p>ä¸¤ä¸ªè§’è‰²ï¼š<br>    ç®¡ç†å‘˜ï¼šæ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤<br>    æ™®é€šç”¨æˆ·ï¼šæŸ¥è¯¢</p></blockquote><h4 id="B2B2C"><a href="#B2B2C" class="headerlink" title="B2B2C"></a>B2B2C</h4><blockquote><p>Business To Business To Customers</p><p>ä¾‹å­ï¼šæ·˜å®</p></blockquote><h3 id="é¡¹ç›®å®ç°åŠŸèƒ½æ¨¡å—"><a href="#é¡¹ç›®å®ç°åŠŸèƒ½æ¨¡å—" class="headerlink" title="é¡¹ç›®å®ç°åŠŸèƒ½æ¨¡å—"></a>é¡¹ç›®å®ç°åŠŸèƒ½æ¨¡å—</h3><h4 id="åå°ï¼ˆç®¡ç†å‘˜ï¼‰"><a href="#åå°ï¼ˆç®¡ç†å‘˜ï¼‰" class="headerlink" title="åå°ï¼ˆç®¡ç†å‘˜ï¼‰"></a>åå°ï¼ˆç®¡ç†å‘˜ï¼‰</h4><blockquote><ol><li>è®²å¸ˆç®¡ç†</li><li>è¯¾ç¨‹åˆ†ç±»ç®¡ç†</li><li>è¯¾ç¨‹ç®¡ç†<ul><li>è§†é¢‘</li></ul></li><li>ç»Ÿè®¡åˆ†æ<ul><li>è¯¾ç¨‹ç›¸å…³</li></ul></li><li>è®¢å•ç®¡ç†</li><li>bannerï¼ˆè½®æ’­å›¾ï¼‰ç®¡ç†</li><li>æƒé™ç®¡ç†</li></ol></blockquote><h4 id="å‰å°ï¼ˆæ™®é€šç”¨æˆ·ï¼‰"><a href="#å‰å°ï¼ˆæ™®é€šç”¨æˆ·ï¼‰" class="headerlink" title="å‰å°ï¼ˆæ™®é€šç”¨æˆ·ï¼‰"></a>å‰å°ï¼ˆæ™®é€šç”¨æˆ·ï¼‰</h4><blockquote><ol><li>é¦–é¡µæ•°æ®æ˜¾ç¤º</li><li>è®²å¸ˆåˆ—è¡¨å’Œè¯¦æƒ…</li><li>è¯¾ç¨‹åˆ—è¡¨å’Œè¯¦æƒ…<ul><li>è§†é¢‘åœ¨çº¿æ’­æ”¾</li></ul></li><li>ç™»å½•å’Œæ³¨å†Œ</li><li>å¾®ä¿¡æ‰«ç ç™»å½•</li><li>å¾®ä¿¡æ”¯ä»˜</li></ol></blockquote><h3 id="é¡¹ç›®ä½¿ç”¨çš„æŠ€æœ¯ç‚¹"><a href="#é¡¹ç›®ä½¿ç”¨çš„æŠ€æœ¯ç‚¹" class="headerlink" title="é¡¹ç›®ä½¿ç”¨çš„æŠ€æœ¯ç‚¹"></a>é¡¹ç›®ä½¿ç”¨çš„æŠ€æœ¯ç‚¹</h3><h4 id="åç«¯æŠ€æœ¯"><a href="#åç«¯æŠ€æœ¯" class="headerlink" title="åç«¯æŠ€æœ¯"></a>åç«¯æŠ€æœ¯</h4><blockquote><ol><li>SpringBoot</li><li>SpringCloud</li><li>MyBatisPlus</li><li>SpringSecurity</li><li>redisï¼Œmavenï¼ŒeasyExcelï¼Œjwtï¼ŒOAuth2</li><li>â€¦â€¦</li></ol></blockquote><h4 id="å‰ç«¯æŠ€æœ¯"><a href="#å‰ç«¯æŠ€æœ¯" class="headerlink" title="å‰ç«¯æŠ€æœ¯"></a>å‰ç«¯æŠ€æœ¯</h4><blockquote><ol><li>vue</li><li>element-ui</li><li>axios</li><li>node.js</li><li>â€¦â€¦</li></ol></blockquote><h4 id="å…¶ä»–æŠ€æœ¯"><a href="#å…¶ä»–æŠ€æœ¯" class="headerlink" title="å…¶ä»–æŠ€æœ¯"></a>å…¶ä»–æŠ€æœ¯</h4><blockquote><ol><li>é˜¿é‡Œäº‘oss</li><li>é˜¿é‡Œäº‘è§†é¢‘ç‚¹æ’­æœåŠ¡</li><li>é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡</li><li>å¾®ä¿¡æ”¯ä»˜å’Œç™»å½•</li><li>dockerï¼Œgitï¼ŒJenkins</li><li>â€¦â€¦</li></ol></blockquote><h2 id="MyBatisPlusä»‹ç»"><a href="#MyBatisPlusä»‹ç»" class="headerlink" title="MyBatisPlusä»‹ç»"></a>MyBatisPlusä»‹ç»</h2><blockquote><p>è¯¦è§å•ç‹¬çš„æ–‡æ¡£è¯´æ˜</p></blockquote><h2 id="æ­å»ºé¡¹ç›®ç¯å¢ƒ"><a href="#æ­å»ºé¡¹ç›®ç¯å¢ƒ" class="headerlink" title="æ­å»ºé¡¹ç›®ç¯å¢ƒ"></a>æ­å»ºé¡¹ç›®ç¯å¢ƒ</h2><h3 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h3><blockquote><p>è¯¦è§èµ„æ–™</p></blockquote><h3 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h3><blockquote><p>çˆ¶å·¥ç¨‹ï¼špomç±»å‹ï¼Œç”¨äºç®¡ç†ä»¥æ¥ç‰ˆæœ¬å’Œæ”¾å…¬å…±ä¾èµ–</p><p>å­æ¨¡å—nï¼šå®ç°å„ä¸ªæ¨¡å—</p></blockquote><h3 id="åˆ›å»ºspringbootçˆ¶é¡¹ç›®"><a href="#åˆ›å»ºspringbootçˆ¶é¡¹ç›®" class="headerlink" title="åˆ›å»ºspringbootçˆ¶é¡¹ç›®"></a>åˆ›å»ºspringbootçˆ¶é¡¹ç›®</h3><h4 id="é…ç½®çˆ¶é¡¹ç›®çš„pom-xml"><a href="#é…ç½®çˆ¶é¡¹ç›®çš„pom-xml" class="headerlink" title="é…ç½®çˆ¶é¡¹ç›®çš„pom.xml"></a>é…ç½®çˆ¶é¡¹ç›®çš„pom.xml</h4><blockquote><p>é…ç½®æ‰“åŒ…æ–¹å¼ã€åˆ é™¤dependenciesã€æ·»åŠ propertieså’ŒdependencyManagementã€åˆ é™¤srcæ–‡ä»¶å¤¹ç­‰</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span> /&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>guli_parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>guli_parent<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>guli_parent<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">guli.version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">guli.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mybatis-plus.version</span>&gt;</span>3.0.5<span class="tag">&lt;/<span class="name">mybatis-plus.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">velocity.version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">velocity.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">swagger.version</span>&gt;</span>2.7.0<span class="tag">&lt;/<span class="name">swagger.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aliyun.oss.version</span>&gt;</span>2.8.3<span class="tag">&lt;/<span class="name">aliyun.oss.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jodatime.version</span>&gt;</span>2.10.1<span class="tag">&lt;/<span class="name">jodatime.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">poi.version</span>&gt;</span>3.17<span class="tag">&lt;/<span class="name">poi.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">commons-fileupload.version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">commons-fileupload.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">commons-io.version</span>&gt;</span>2.6<span class="tag">&lt;/<span class="name">commons-io.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">httpclient.version</span>&gt;</span>4.5.1<span class="tag">&lt;/<span class="name">httpclient.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jwt.version</span>&gt;</span>0.7.0<span class="tag">&lt;/<span class="name">jwt.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aliyun-java-sdk-core.version</span>&gt;</span>4.3.3<span class="tag">&lt;/<span class="name">aliyun-java-sdk-core.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aliyun-sdk-oss.version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">aliyun-sdk-oss.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aliyun-java-sdk-vod.version</span>&gt;</span>2.15.2<span class="tag">&lt;/<span class="name">aliyun-java-sdk-vod.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aliyun-java-vod-upload.version</span>&gt;</span>1.4.11<span class="tag">&lt;/<span class="name">aliyun-java-vod-upload.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aliyun-sdk-vod-upload.version</span>&gt;</span>1.4.11<span class="tag">&lt;/<span class="name">aliyun-sdk-vod-upload.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">fastjson.version</span>&gt;</span>1.2.28<span class="tag">&lt;/<span class="name">fastjson.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">gson.version</span>&gt;</span>2.8.2<span class="tag">&lt;/<span class="name">gson.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">json.version</span>&gt;</span>20170516<span class="tag">&lt;/<span class="name">json.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">commons-dbutils.version</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">commons-dbutils.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">canal.client.version</span>&gt;</span>1.1.0<span class="tag">&lt;/<span class="name">canal.client.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">docker.image.prefix</span>&gt;</span>zx<span class="tag">&lt;/<span class="name">docker.image.prefix</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cloud-alibaba.version</span>&gt;</span>0.2.2.RELEASE<span class="tag">&lt;/<span class="name">cloud-alibaba.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--Spring Cloud--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>Hoxton.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;cloud-alibaba.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--mybatis-plus æŒä¹…å±‚--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis-plus.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">&lt;!-- velocity æ¨¡æ¿å¼•æ“, Mybatis Plus ä»£ç ç”Ÿæˆå™¨éœ€è¦ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.velocity<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>velocity-engine-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;velocity.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">&lt;!--swagger--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;swagger.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--swagger ui--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;swagger.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">&lt;!--aliyunOSS--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-sdk-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;aliyun.oss.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">&lt;!--æ—¥æœŸæ—¶é—´å·¥å…·--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>joda-time<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>joda-time<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;jodatime.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">&lt;!--xls--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.poi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>poi<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;poi.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--xlsx--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.poi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>poi-ooxml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;poi.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">&lt;!--æ–‡ä»¶ä¸Šä¼ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;commons-fileupload.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">&lt;!--commons-io--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;commons-io.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">&lt;!--httpclient--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>httpclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;httpclient.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.code.gson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;gson.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">&lt;!-- JWT --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;jwt.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">&lt;!--aliyun--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-java-sdk-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;aliyun-java-sdk-core.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-sdk-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;aliyun-sdk-oss.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-java-sdk-vod<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;aliyun-java-sdk-vod.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-java-vod-upload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;aliyun-java-vod-upload.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-sdk-vod-upload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;aliyun-sdk-vod-upload.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;fastjson.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.json<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>json<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;json.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-dbutils<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-dbutils<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;commons-dbutils.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.otter<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>canal.client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;canal.client.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºå­æ¨¡å—"><a href="#åˆ›å»ºå­æ¨¡å—" class="headerlink" title="åˆ›å»ºå­æ¨¡å—"></a>åˆ›å»ºå­æ¨¡å—</h3><blockquote><p>å³é”®new modelåˆ›å»ºå³å¯ï¼Œå­é¡¹ç›®serviceç­‰</p></blockquote><h4 id="é…ç½®pom-xml"><a href="#é…ç½®pom-xml" class="headerlink" title="é…ç½®pom.xml"></a>é…ç½®pom.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        </span><br><span class="line"><span class="comment">&lt;!--        &lt;dependency&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;groupId&gt;com.atguigu&lt;/groupId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;artifactId&gt;service_base&lt;/artifactId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/dependency&gt;--&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--&lt;dependency&gt;</span></span><br><span class="line"><span class="comment">            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">            &lt;artifactId&gt;spring-cloud-starter-netflix-ribbon&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">        &lt;/dependency&gt;--&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--hystrixä¾èµ–ï¼Œä¸»è¦æ˜¯ç”¨  @HystrixCommand --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;dependency&gt;</span></span><br><span class="line"><span class="comment">            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">            &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">        &lt;/dependency&gt;--&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--æœåŠ¡æ³¨å†Œ--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;dependency&gt;</span></span><br><span class="line"><span class="comment">             &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">             &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">         &lt;/dependency&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æœåŠ¡è°ƒç”¨--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;dependency&gt;</span></span><br><span class="line"><span class="comment">             &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">             &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">         &lt;/dependency&gt;--&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--mybatis-plus--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--mysql--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- velocity æ¨¡æ¿å¼•æ“, Mybatis Plus ä»£ç ç”Ÿæˆå™¨éœ€è¦ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.velocity<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>velocity-engine-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--swagger--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--lombokç”¨æ¥ç®€åŒ–å®ä½“ç±»ï¼šéœ€è¦å®‰è£…lombokæ’ä»¶--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--xls--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.poi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>poi<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.poi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>poi-ooxml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--httpclient--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>httpclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--commons-io--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--gson--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.code.gson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºå­å­æ¨¡å—"><a href="#åˆ›å»ºå­å­æ¨¡å—" class="headerlink" title="åˆ›å»ºå­å­æ¨¡å—"></a>åˆ›å»ºå­å­æ¨¡å—</h3><blockquote><p>service_eduã€service_vod</p></blockquote><h3 id="å½“å‰é¡¹ç›®ç»“æ„"><a href="#å½“å‰é¡¹ç›®ç»“æ„" class="headerlink" title="å½“å‰é¡¹ç›®ç»“æ„"></a>å½“å‰é¡¹ç›®ç»“æ„</h3><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210920162644497.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210920162644497.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210920162644497"></p><h2 id="commonæ¨¡å—"><a href="#commonæ¨¡å—" class="headerlink" title="commonæ¨¡å—"></a>commonæ¨¡å—</h2><h3 id="swaggerå·¥å…·"><a href="#swaggerå·¥å…·" class="headerlink" title="swaggerå·¥å…·"></a>swaggerå·¥å…·</h3><h4 id="åˆ›å»ºå­æ¨¡å—-1"><a href="#åˆ›å»ºå­æ¨¡å—-1" class="headerlink" title="åˆ›å»ºå­æ¨¡å—"></a>åˆ›å»ºå­æ¨¡å—</h4><blockquote><p>å‘½åä¸ºcommonï¼Œè¯¥æ¨¡å—ä¸éœ€è¦srcæ–‡ä»¶å¤¹</p></blockquote><h4 id="é…ç½®ä¾èµ–"><a href="#é…ç½®ä¾èµ–" class="headerlink" title="é…ç½®ä¾èµ–"></a>é…ç½®ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>guli_parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--mybatis-plus--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--lombokç”¨æ¥ç®€åŒ–å®ä½“ç±»ï¼šéœ€è¦å®‰è£…lombokæ’ä»¶--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--swagger--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- redis --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- spring2.Xé›†æˆredisæ‰€éœ€common-pool2</span></span><br><span class="line"><span class="comment">        &lt;dependency&gt;</span></span><br><span class="line"><span class="comment">            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">            &lt;artifactId&gt;commons-pool2&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">            &lt;version&gt;2.6.0&lt;/version&gt;</span></span><br><span class="line"><span class="comment">        &lt;/dependency&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºå­å­æ¨¡å—-1"><a href="#åˆ›å»ºå­å­æ¨¡å—-1" class="headerlink" title="åˆ›å»ºå­å­æ¨¡å—"></a>åˆ›å»ºå­å­æ¨¡å—</h4><blockquote><p>service_base</p></blockquote><h4 id="åˆ›å»ºSwaggerConfig-javaé…ç½®ç±»"><a href="#åˆ›å»ºSwaggerConfig-javaé…ç½®ç±»" class="headerlink" title="åˆ›å»ºSwaggerConfig.javaé…ç½®ç±»"></a>åˆ›å»ºSwaggerConfig.javaé…ç½®ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.servicebase;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.common.base.Predicates;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.builders.ApiInfoBuilder;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.builders.PathSelectors;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.service.ApiInfo;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.service.Contact;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.spi.DocumentationType;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.spring.web.plugins.Docket;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.swagger2.annotations.EnableSwagger2;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableSwagger2</span> <span class="comment">// swaggeræ³¨è§£</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwaggerConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸€äº›å›ºå®šé…ç½®</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Docket <span class="title">webApiConfig</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">                .groupName(<span class="string">&quot;webApi&quot;</span>)</span><br><span class="line">                .apiInfo(webApiInfo())</span><br><span class="line">                .select()</span><br><span class="line">                .paths(Predicates.not(PathSelectors.regex(<span class="string">&quot;/admin/.*&quot;</span>)))</span><br><span class="line">                .paths(Predicates.not(PathSelectors.regex(<span class="string">&quot;/error.*&quot;</span>)))</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// æ–‡æ¡£æç¤ºä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> ApiInfo <span class="title">webApiInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ApiInfoBuilder()</span><br><span class="line">                .title(<span class="string">&quot;ç½‘ç«™-è¯¾ç¨‹ä¸­å¿ƒAPIæ–‡æ¡£&quot;</span>)</span><br><span class="line">                .description(<span class="string">&quot;æœ¬æ–‡æ¡£æè¿°äº†è¯¾ç¨‹ä¸­å¿ƒå¾®æœåŠ¡æ¥å£å®šä¹‰&quot;</span>)</span><br><span class="line">                .version(<span class="string">&quot;1.0&quot;</span>)</span><br><span class="line">                .contact(<span class="keyword">new</span> Contact(<span class="string">&quot;java&quot;</span>, <span class="string">&quot;http://atguigu.com&quot;</span>, <span class="string">&quot;1123@qq.com&quot;</span>))</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¼•å…¥swaggerå­æ¨¡å—"><a href="#å¼•å…¥swaggerå­æ¨¡å—" class="headerlink" title="å¼•å…¥swaggerå­æ¨¡å—"></a>å¼•å…¥swaggerå­æ¨¡å—</h4><blockquote><p>éœ€è¦åœ¨serviceæ¨¡å—ä¸­å¼•å…¥swaggeræ¨¡å—çš„å­æ¨¡å—servicebaseæ¨¡å—ï¼Œå³åœ¨serviceæ¨¡å—çš„pom.xmlæ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–å³å¯ï¼ˆå› ä¸ºæƒ³è¦åœ¨serviceæ¨¡å—çš„å­æ¨¡å—ä¸­ä½¿ç”¨ï¼Œä¸”éƒ½å†™ä¸Šäº†pomæ‰“åŒ…ï¼Œæ‰€ä»¥åªè¦åœ¨serviceæ¨¡å—çš„pom.xmlä¸­æ·»åŠ å³å¯ï¼‰</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>service_base<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨ç±»æ·»åŠ ç»„ä»¶æ‰«æ"><a href="#å¯åŠ¨ç±»æ·»åŠ ç»„ä»¶æ‰«æ" class="headerlink" title="å¯åŠ¨ç±»æ·»åŠ ç»„ä»¶æ‰«æ"></a>å¯åŠ¨ç±»æ·»åŠ ç»„ä»¶æ‰«æ</h4><blockquote><p>EduApplicationæ˜¯service_eduæ¨¡å—ä¸‹çš„å¯åŠ¨ç±»ï¼Œç”±äºservice_baseæ¨¡å—ä¸­çš„swaggerconfigé…ç½®ç±»æ‰€åœ¨åŒ…åœ°å€ä¹Ÿæ˜¯com.atguigu.xxxï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡è¿™ä¸ªæ‰«æåˆ°ï¼Œå¦åˆ™åªä¼šæ‰«æå¯åŠ¨ç±»æ‰€åœ¨åŠå­åŒ…ä¸‹çš„ç±»ï¼ˆæ‰€ä»¥å¯åŠ¨ç±»è¦æ”¾åœ¨æ‰€æœ‰packageçš„åŒçº§ï¼‰ï¼Œå¦‚æœæ˜¯åˆ«çš„åœ°å€å†é¢å¤–æ·»åŠ å³å¯ï¼ˆ{â€œcom.atguiguâ€,â€com.xxxâ€}ï¼‰</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &#123;&quot;com.atguigu&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(EduApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•ï¼ˆè®¿é—®ï¼‰swagger"><a href="#æµ‹è¯•ï¼ˆè®¿é—®ï¼‰swagger" class="headerlink" title="æµ‹è¯•ï¼ˆè®¿é—®ï¼‰swagger"></a>æµ‹è¯•ï¼ˆè®¿é—®ï¼‰swagger</h4><blockquote><p>å¯åŠ¨xxxApplicationå¯åŠ¨ç±»</p><p><a href="http://localhost:8001/swagger-ui.html">http://localhost:8001/swagger-ui.html</a></p></blockquote><h4 id="APIæ–‡æ¡£æç¤ºç¼–å†™"><a href="#APIæ–‡æ¡£æç¤ºç¼–å†™" class="headerlink" title="APIæ–‡æ¡£æç¤ºç¼–å†™"></a>APIæ–‡æ¡£æç¤ºç¼–å†™</h4><blockquote><p>ä¸€ä¸‹ä»¥controllerä¸ºä¾‹</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.eduservice.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.eduservice.entity.EduTeacher;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.eduservice.service.EduTeacherService;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.Api;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiOperation;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * è®²å¸ˆ å‰ç«¯æ§åˆ¶å™¨</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> testjava</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2021-09-20</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Api(tags = &#123;&quot;è®²å¸ˆç®¡ç†&quot;&#125;)</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/eduservice/edu-teacher&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduTeacherController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduTeacherService teacherService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// RESTé£æ ¼</span></span><br><span class="line">    <span class="comment">// 1ã€æŸ¥è¯¢è®²å¸ˆè¡¨çš„æ‰€æœ‰æ•°æ®</span></span><br><span class="line">    <span class="comment">// åœ°å€ï¼šlocalhost:8001//eduservice/edu-teacher/findAll</span></span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;æ‰€æœ‰è®²å¸ˆåˆ—è¡¨&quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;findAll&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;EduTeacher&gt; <span class="title">findAllTeacher</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨Serviceçš„æ–¹æ³•</span></span><br><span class="line">        List&lt;EduTeacher&gt; list = teacherService.list(<span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2ã€é€»è¾‘åˆ é™¤è®²å¸ˆ</span></span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;æ ¹æ®idé€»è¾‘åˆ é™¤è®²å¸ˆ&quot;)</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">removeTeacher</span><span class="params">(<span class="meta">@ApiParam(name = &quot;id&quot;, value = &quot;è®²å¸ˆID&quot;, required = true)</span> <span class="meta">@PathVariable(&quot;id&quot;)</span> String id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> flag = teacherService.removeById(id);</span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å½“å‰é¡¹ç›®ç»“æ„-1"><a href="#å½“å‰é¡¹ç›®ç»“æ„-1" class="headerlink" title="å½“å‰é¡¹ç›®ç»“æ„"></a>å½“å‰é¡¹ç›®ç»“æ„</h4><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210921130942041.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210921130942041.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210921130942041"></p><h3 id="ç»Ÿä¸€ç»“æœè¿”å›æ ¼å¼"><a href="#ç»Ÿä¸€ç»“æœè¿”å›æ ¼å¼" class="headerlink" title="ç»Ÿä¸€ç»“æœè¿”å›æ ¼å¼"></a>ç»Ÿä¸€ç»“æœè¿”å›æ ¼å¼</h3><h4 id="ç»Ÿä¸€ç»“æœçš„æ ¼å¼"><a href="#ç»Ÿä¸€ç»“æœçš„æ ¼å¼" class="headerlink" title="ç»Ÿä¸€ç»“æœçš„æ ¼å¼"></a>ç»Ÿä¸€ç»“æœçš„æ ¼å¼</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;success&quot;</span>: å¸ƒå°”, <span class="comment">//å“åº”æ˜¯å¦æˆåŠŸ</span></span><br><span class="line">  <span class="attr">&quot;code&quot;</span>: æ•°å­—, <span class="comment">//å“åº”ç </span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span>: å­—ç¬¦ä¸², <span class="comment">//è¿”å›æ¶ˆæ¯</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: HashMap <span class="comment">//è¿”å›æ•°æ®ï¼Œæ”¾åœ¨é”®å€¼å¯¹ä¸­</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºå­æ¨¡å—-2"><a href="#åˆ›å»ºå­æ¨¡å—-2" class="headerlink" title="åˆ›å»ºå­æ¨¡å—"></a>åˆ›å»ºå­æ¨¡å—</h4><blockquote><p>commonæ¨¡å—ä¸‹åˆ›å»ºcommon_utilsæ¨¡å—</p></blockquote><h4 id="è®¾å®šçŠ¶æ€ç "><a href="#è®¾å®šçŠ¶æ€ç " class="headerlink" title="è®¾å®šçŠ¶æ€ç "></a>è®¾å®šçŠ¶æ€ç </h4><blockquote><p>å¯ä»¥å†™æˆæ¥å£ï¼Œæˆ–è€…å…¶ä»–å½¢å¼</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.commonutils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ResultCode</span> </span>&#123;</span><br><span class="line">    <span class="comment">// çŠ¶æ€ç </span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Integer SUCCESS = <span class="number">20000</span>; <span class="comment">//æˆåŠŸ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Integer ERROR = <span class="number">20001</span>; <span class="comment">//å¤±è´¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å®šä¹‰è¿”å›æ•°æ®æ ¼å¼"><a href="#å®šä¹‰è¿”å›æ•°æ®æ ¼å¼" class="headerlink" title="å®šä¹‰è¿”å›æ•°æ®æ ¼å¼"></a>å®šä¹‰è¿”å›æ•°æ®æ ¼å¼</h4><blockquote><p>åˆ›å»ºä¸€ä¸ªç»Ÿä¸€è¿”å›ç»“æœç±»</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.commonutils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»Ÿä¸€è¿”å›ç»“æœçš„ç±»</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">R</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä»¥ä¸‹å±æ€§ä¸ºè¿”å›å†…å®¹key</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;æ˜¯å¦æˆåŠŸ&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Boolean success;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;è¿”å›ç &quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;è¿”å›æ¶ˆæ¯&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;è¿”å›æ•°æ®&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Object&gt; data = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŠŠæ„é€ æ–¹æ³•ç§æœ‰</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">R</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æˆåŠŸé™æ€æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> R <span class="title">ok</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        R r = <span class="keyword">new</span> R();</span><br><span class="line">        r.setSuccess(<span class="keyword">true</span>);</span><br><span class="line">        r.setCode(ResultCode.SUCCESS);</span><br><span class="line">        r.setMessage(<span class="string">&quot;æˆåŠŸ&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¤±è´¥é™æ€æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> R <span class="title">error</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        R r = <span class="keyword">new</span> R();</span><br><span class="line">        r.setSuccess(<span class="keyword">false</span>);</span><br><span class="line">        r.setCode(ResultCode.ERROR);</span><br><span class="line">        r.setMessage(<span class="string">&quot;å¤±è´¥&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»¥ä¸‹çš„return thisè¿”å›çš„æ˜¯r</span></span><br><span class="line">    <span class="comment">// å¯ä»¥å®ç°é“¾å¼ç¼–ç¨‹ï¼ˆR.success().message().â€¦â€¦ï¼‰</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">success</span><span class="params">(Boolean success)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setSuccess(success);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">message</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setMessage(message);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">code</span><span class="params">(Integer code)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setCode(code);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">data</span><span class="params">(String key, Object value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.data.put(key, value);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">data</span><span class="params">(Map&lt;String, Object&gt; map)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setData(map);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨ç»Ÿä¸€è¿”å›ç»“æœæ ¼å¼"><a href="#ä½¿ç”¨ç»Ÿä¸€è¿”å›ç»“æœæ ¼å¼" class="headerlink" title="ä½¿ç”¨ç»Ÿä¸€è¿”å›ç»“æœæ ¼å¼"></a>ä½¿ç”¨ç»Ÿä¸€è¿”å›ç»“æœæ ¼å¼</h4><blockquote><p>å…ˆåœ¨æ¨¡å—çš„pom.xmlä¸­å¼•å…¥å·²ç»å®šä¹‰å¥½çš„ç»Ÿä¸€è¿”å›ç»“æœç±»æ‰€åœ¨</p></blockquote><blockquote><p>å°†æ¥å£æ–¹æ³•ï¼ˆcontrollerä¸­çš„æ–¹æ³•ï¼‰è¿”å›ç»“æœæ”¹ä¸ºRå³å¯</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æœªä½¿ç”¨ç»Ÿä¸€ç»“æœæ ¼å¼</span></span><br><span class="line"><span class="meta">@Api(tags = &#123;&quot;è®²å¸ˆç®¡ç†&quot;&#125;)</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/eduservice/edu-teacher&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduTeacherController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduTeacherService teacherService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// RESTé£æ ¼</span></span><br><span class="line">    <span class="comment">// 1ã€æŸ¥è¯¢è®²å¸ˆè¡¨çš„æ‰€æœ‰æ•°æ®</span></span><br><span class="line">    <span class="comment">// åœ°å€ï¼šlocalhost:8001//eduservice/edu-teacher/findAll</span></span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;æ‰€æœ‰è®²å¸ˆåˆ—è¡¨&quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;findAll&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;EduTeacher&gt; <span class="title">findAllTeacher</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨Serviceçš„æ–¹æ³•</span></span><br><span class="line">        List&lt;EduTeacher&gt; list = teacherService.list(<span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2ã€é€»è¾‘åˆ é™¤è®²å¸ˆ</span></span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;æ ¹æ®idé€»è¾‘åˆ é™¤è®²å¸ˆ&quot;)</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">removeTeacher</span><span class="params">(<span class="meta">@ApiParam(name = &quot;id&quot;, value = &quot;è®²å¸ˆID&quot;, required = true)</span> <span class="meta">@PathVariable(&quot;id&quot;)</span> String id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> flag = teacherService.removeById(id);</span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ç»Ÿä¸€ç»“æœæ ¼å¼</span></span><br><span class="line"><span class="meta">@Api(tags = &#123;&quot;è®²å¸ˆç®¡ç†&quot;&#125;)</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/eduservice/edu-teacher&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduTeacherController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduTeacherService teacherService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// RESTé£æ ¼</span></span><br><span class="line">    <span class="comment">// 1ã€æŸ¥è¯¢è®²å¸ˆè¡¨çš„æ‰€æœ‰æ•°æ®</span></span><br><span class="line">    <span class="comment">// åœ°å€ï¼šlocalhost:8001//eduservice/edu-teacher/findAll</span></span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;æ‰€æœ‰è®²å¸ˆåˆ—è¡¨&quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;findAll&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">findAllTeacher</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨Serviceçš„æ–¹æ³•</span></span><br><span class="line">        List&lt;EduTeacher&gt; list = teacherService.list(<span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">&quot;teacherList&quot;</span>, list);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2ã€é€»è¾‘åˆ é™¤è®²å¸ˆ</span></span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;æ ¹æ®idé€»è¾‘åˆ é™¤è®²å¸ˆ&quot;)</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">removeTeacher</span><span class="params">(<span class="meta">@ApiParam(name = &quot;id&quot;, value = &quot;è®²å¸ˆID&quot;, required = true)</span> <span class="meta">@PathVariable(&quot;id&quot;)</span> String id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> flag = teacherService.removeById(id);</span><br><span class="line">        <span class="keyword">return</span> flag ? R.ok() : R.error();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å½“å‰é¡¹ç›®ç»“æ„-2"><a href="#å½“å‰é¡¹ç›®ç»“æ„-2" class="headerlink" title="å½“å‰é¡¹ç›®ç»“æ„"></a>å½“å‰é¡¹ç›®ç»“æ„</h4><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210921131024571.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210921131024571.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210921131024571"></p><h3 id="ç»Ÿä¸€å¼‚å¸¸å¤„ç†"><a href="#ç»Ÿä¸€å¼‚å¸¸å¤„ç†" class="headerlink" title="ç»Ÿä¸€å¼‚å¸¸å¤„ç†"></a>ç»Ÿä¸€å¼‚å¸¸å¤„ç†</h3><h4 id="ç»Ÿä¸€å¼‚å¸¸å¤„ç†ç±»"><a href="#ç»Ÿä¸€å¼‚å¸¸å¤„ç†ç±»" class="headerlink" title="ç»Ÿä¸€å¼‚å¸¸å¤„ç†ç±»"></a>ç»Ÿä¸€å¼‚å¸¸å¤„ç†ç±»</h4><blockquote><p>åœ¨commonæ¨¡å—ä¸­çš„service_baseä¸­æ·»åŠ å³å¯</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»Ÿä¸€å¼‚å¸¸å¤„ç†ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ControllerAdvice</span>   <span class="comment">// å¢å¼ºçš„controllerï¼Œå¯ä»¥ç”¨äºå…¨å±€å¼‚å¸¸å¤„ç†</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalExceptionHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…¨å±€å¼‚å¸¸å¤„ç†</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span> <span class="comment">// æŒ‡å®šå‡ºç°ä»€ä¹ˆå¼‚å¸¸æ‰ä¼šæ‰§è¡Œè¿™ä¸ªæ–¹æ³•</span></span><br><span class="line">    <span class="meta">@ResponseBody</span>                      <span class="comment">// ç”¨äºè¿”å›æ•°æ®</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">error</span><span class="params">(Exception e)</span> </span>&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> R.error().message(<span class="string">&quot;äº§ç”Ÿäº†å¼‚å¸¸!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œæœ‰ä¸€ä¸ªä¾èµ–çš„é—®é¢˜ï¼Œéœ€è¦æ³¨æ„</p></blockquote><h4 id="ç‰¹å®šå¼‚å¸¸å¤„ç†"><a href="#ç‰¹å®šå¼‚å¸¸å¤„ç†" class="headerlink" title="ç‰¹å®šå¼‚å¸¸å¤„ç†"></a>ç‰¹å®šå¼‚å¸¸å¤„ç†</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»Ÿä¸€å¼‚å¸¸å¤„ç†ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ControllerAdvice</span>   <span class="comment">// å¢å¼ºçš„controllerï¼Œå¯ä»¥ç”¨äºå…¨å±€å¼‚å¸¸å¤„ç†</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalExceptionHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…¨å±€å¼‚å¸¸å¤„ç†</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span> <span class="comment">// æŒ‡å®šå‡ºç°ä»€ä¹ˆå¼‚å¸¸æ‰ä¼šæ‰§è¡Œè¿™ä¸ªæ–¹æ³•</span></span><br><span class="line">    <span class="meta">@ResponseBody</span>                      <span class="comment">// ç”¨äºè¿”å›æ•°æ®</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">error</span><span class="params">(Exception e)</span> </span>&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> R.error().message(<span class="string">&quot;äº§ç”Ÿäº†å¼‚å¸¸!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç‰¹å®šå¼‚å¸¸å¤„ç†</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(ArithmeticException.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">error</span><span class="params">(ArithmeticException e)</span> </span>&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> R.error().message(<span class="string">&quot;äº§ç”Ÿäº†ArithmeticExceptionå¼‚å¸¸!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†"><a href="#è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†" class="headerlink" title="è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†"></a>è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†</h4><blockquote><p>åˆ›å»ºè‡ªå®šä¹‰å¼‚å¸¸ç±»</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GuliException</span> <span class="keyword">extends</span> <span class="title">RuntimeException</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer code;   <span class="comment">// çŠ¶æ€ç </span></span><br><span class="line">    <span class="keyword">private</span> String msg;     <span class="comment">// å¼‚å¸¸ä¿¡æ¯</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//â€¦â€¦</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨ç»Ÿä¸€å¼‚å¸¸å¤„ç†ç±»ä¸­åˆ›å»ºæ–¹æ³•</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†</span></span><br><span class="line"><span class="meta">@ExceptionHandler(GuliException.class)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">error</span><span class="params">(GuliException e)</span> </span>&#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">    <span class="keyword">return</span> R.error().code(e.getCode()).message(e.getMsg());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">1</span> / <span class="number">0</span>;</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;zzzzz&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å½“å‰é¡¹ç›®ç»“æ„-3"><a href="#å½“å‰é¡¹ç›®ç»“æ„-3" class="headerlink" title="å½“å‰é¡¹ç›®ç»“æ„"></a>å½“å‰é¡¹ç›®ç»“æ„</h4><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210921154934229.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210921154934229.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210921154934229"></p><h3 id="ç»Ÿä¸€æ—¥å¿—å¤„ç†"><a href="#ç»Ÿä¸€æ—¥å¿—å¤„ç†" class="headerlink" title="ç»Ÿä¸€æ—¥å¿—å¤„ç†"></a>ç»Ÿä¸€æ—¥å¿—å¤„ç†</h3><h4 id="é…ç½®æ—¥å¿—çº§åˆ«"><a href="#é…ç½®æ—¥å¿—çº§åˆ«" class="headerlink" title="é…ç½®æ—¥å¿—çº§åˆ«"></a>é…ç½®æ—¥å¿—çº§åˆ«</h4><blockquote><p>application.propertiesæ–‡ä»¶ä¸­é…ç½®å³å¯</p></blockquote><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">logging.level.root</span>=<span class="string">INFO</span></span><br></pre></td></tr></table></figure><h4 id="logbackæ—¥å¿—å·¥å…·"><a href="#logbackæ—¥å¿—å·¥å…·" class="headerlink" title="logbackæ—¥å¿—å·¥å…·"></a>logbackæ—¥å¿—å·¥å…·</h4><blockquote><p>log4jï¼Œlogbackç­‰å¯ä»¥å°†æ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶ä¸­</p><p>æ³¨æ„ï¼šéœ€è¦å…ˆå°†application.propertiesä¸­çš„æœ‰å…³æ—¥å¿—çš„é…ç½®æ³¨é‡Šæ‰</p></blockquote><h4 id="é…ç½®å·¥å…·çš„é…ç½®æ–‡ä»¶"><a href="#é…ç½®å·¥å…·çš„é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®å·¥å…·çš„é…ç½®æ–‡ä»¶"></a>é…ç½®å·¥å…·çš„é…ç½®æ–‡ä»¶</h4><blockquote><p>åœ¨resourceæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºlogback-spring.xmlé…ç½®æ–‡ä»¶</p><p>  æ³¨æ„ <property name="log.path" value="D:/MyProject/log/guli_edu" /> çš„è·¯å¾„å³å¯</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">scan</span>=<span class="string">&quot;true&quot;</span> <span class="attr">scanPeriod</span>=<span class="string">&quot;10 seconds&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ—¥å¿—çº§åˆ«ä»ä½åˆ°é«˜åˆ†ä¸ºTRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATALï¼Œå¦‚æœè®¾ç½®ä¸ºWARNï¼Œåˆ™ä½äºWARNçš„ä¿¡æ¯éƒ½ä¸ä¼šè¾“å‡º --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- scan:å½“æ­¤å±æ€§è®¾ç½®ä¸ºtrueæ—¶ï¼Œé…ç½®æ–‡ä»¶å¦‚æœå‘ç”Ÿæ”¹å˜ï¼Œå°†ä¼šè¢«é‡æ–°åŠ è½½ï¼Œé»˜è®¤å€¼ä¸ºtrue --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- scanPeriod:è®¾ç½®ç›‘æµ‹é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰ä¿®æ”¹çš„æ—¶é—´é—´éš”ï¼Œå¦‚æœæ²¡æœ‰ç»™å‡ºæ—¶é—´å•ä½ï¼Œé»˜è®¤å•ä½æ˜¯æ¯«ç§’ã€‚å½“scanä¸ºtrueæ—¶ï¼Œæ­¤å±æ€§ç”Ÿæ•ˆã€‚é»˜è®¤çš„æ—¶é—´é—´éš”ä¸º1åˆ†é’Ÿã€‚ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- de<span class="doctag">bug:</span>å½“æ­¤å±æ€§è®¾ç½®ä¸ºtrueæ—¶ï¼Œå°†æ‰“å°å‡ºlogbackå†…éƒ¨æ—¥å¿—ä¿¡æ¯ï¼Œå®æ—¶æŸ¥çœ‹logbackè¿è¡ŒçŠ¶æ€ã€‚é»˜è®¤å€¼ä¸ºfalseã€‚ --&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">contextName</span>&gt;</span>logback<span class="tag">&lt;/<span class="name">contextName</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- nameçš„å€¼æ˜¯å˜é‡çš„åç§°ï¼Œvalueçš„å€¼æ—¶å˜é‡å®šä¹‰çš„å€¼ã€‚é€šè¿‡å®šä¹‰çš„å€¼ä¼šè¢«æ’å…¥åˆ°loggerä¸Šä¸‹æ–‡ä¸­ã€‚å®šä¹‰å˜é‡åï¼Œå¯ä»¥ä½¿â€œ$&#123;&#125;â€æ¥ä½¿ç”¨å˜é‡ã€‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;log.path&quot;</span> <span class="attr">value</span>=<span class="string">&quot;D:/MyProject/log/guli_edu&quot;</span> /&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- å½©è‰²æ—¥å¿— --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®æ ¼å¼å˜é‡ï¼šCONSOLE_LOG_PATTERN å½©è‰²æ—¥å¿—æ ¼å¼ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- magenta:æ´‹çº¢ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- boldMagenta:ç²—çº¢--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- cyan:é’è‰² --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- white:ç™½è‰² --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- magenta:æ´‹çº¢ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;CONSOLE_LOG_PATTERN&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">value</span>=<span class="string">&quot;%yellow(%date&#123;yyyy-MM-dd HH:mm:ss&#125;) |%highlight(%-5level) |%blue(%thread) |%blue(%file:%line) |%green(%logger) |%cyan(%msg%n)&quot;</span> /&gt;</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--è¾“å‡ºåˆ°æ§åˆ¶å°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;CONSOLE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ­¤æ—¥å¿—appenderæ˜¯ä¸ºå¼€å‘ä½¿ç”¨ï¼Œåªé…ç½®æœ€åº•çº§åˆ«ï¼Œæ§åˆ¶å°è¾“å‡ºçš„æ—¥å¿—çº§åˆ«æ˜¯å¤§äºæˆ–ç­‰äºæ­¤çº§åˆ«çš„æ—¥å¿—ä¿¡æ¯--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ä¾‹å¦‚ï¼šå¦‚æœæ­¤å¤„é…ç½®äº†INFOçº§åˆ«ï¼Œåˆ™åé¢å…¶ä»–ä½ç½®å³ä½¿é…ç½®äº†DEBUGçº§åˆ«çš„æ—¥å¿—ï¼Œä¹Ÿä¸ä¼šè¢«è¾“å‡º --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>INFO<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Pattern</span>&gt;</span>$&#123;CONSOLE_LOG_PATTERN&#125;<span class="tag">&lt;/<span class="name">Pattern</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- è®¾ç½®å­—ç¬¦é›† --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--è¾“å‡ºåˆ°æ–‡ä»¶--&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- æ—¶é—´æ»šåŠ¨è¾“å‡º levelä¸º INFO æ—¥å¿— --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;INFO_FILE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ­£åœ¨è®°å½•çš„æ—¥å¿—æ–‡ä»¶çš„è·¯å¾„åŠæ–‡ä»¶å --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;log.path&#125;/log_info.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶è¾“å‡ºæ ¼å¼--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ—¥å¿—è®°å½•å™¨çš„æ»šåŠ¨ç­–ç•¥ï¼ŒæŒ‰æ—¥æœŸï¼ŒæŒ‰å¤§å°è®°å½• --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- æ¯å¤©æ—¥å¿—å½’æ¡£è·¯å¾„ä»¥åŠæ ¼å¼ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;log.path&#125;/info/log-info-%d&#123;yyyy-MM-dd&#125;.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>100MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶ä¿ç•™å¤©æ•°--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>15<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ­¤æ—¥å¿—æ–‡ä»¶åªè®°å½•infoçº§åˆ«çš„ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>INFO<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- æ—¶é—´æ»šåŠ¨è¾“å‡º levelä¸º WARN æ—¥å¿— --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;WARN_FILE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ­£åœ¨è®°å½•çš„æ—¥å¿—æ–‡ä»¶çš„è·¯å¾„åŠæ–‡ä»¶å --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;log.path&#125;/log_warn.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶è¾“å‡ºæ ¼å¼--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span> <span class="comment">&lt;!-- æ­¤å¤„è®¾ç½®å­—ç¬¦é›† --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ—¥å¿—è®°å½•å™¨çš„æ»šåŠ¨ç­–ç•¥ï¼ŒæŒ‰æ—¥æœŸï¼ŒæŒ‰å¤§å°è®°å½• --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;log.path&#125;/warn/log-warn-%d&#123;yyyy-MM-dd&#125;.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>100MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶ä¿ç•™å¤©æ•°--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>15<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ­¤æ—¥å¿—æ–‡ä»¶åªè®°å½•warnçº§åˆ«çš„ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>warn<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- æ—¶é—´æ»šåŠ¨è¾“å‡º levelä¸º ERROR æ—¥å¿— --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;ERROR_FILE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ­£åœ¨è®°å½•çš„æ—¥å¿—æ–‡ä»¶çš„è·¯å¾„åŠæ–‡ä»¶å --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;log.path&#125;/log_error.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶è¾“å‡ºæ ¼å¼--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span> <span class="comment">&lt;!-- æ­¤å¤„è®¾ç½®å­—ç¬¦é›† --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ—¥å¿—è®°å½•å™¨çš„æ»šåŠ¨ç­–ç•¥ï¼ŒæŒ‰æ—¥æœŸï¼ŒæŒ‰å¤§å°è®°å½• --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;log.path&#125;/error/log-error-%d&#123;yyyy-MM-dd&#125;.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>100MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶ä¿ç•™å¤©æ•°--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>15<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ­¤æ—¥å¿—æ–‡ä»¶åªè®°å½•ERRORçº§åˆ«çš„ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>ERROR<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        &lt;logger&gt;ç”¨æ¥è®¾ç½®æŸä¸€ä¸ªåŒ…æˆ–è€…å…·ä½“çš„æŸä¸€ä¸ªç±»çš„æ—¥å¿—æ‰“å°çº§åˆ«ã€ä»¥åŠæŒ‡å®š&lt;appender&gt;ã€‚</span></span><br><span class="line"><span class="comment">        &lt;logger&gt;ä»…æœ‰ä¸€ä¸ªnameå±æ€§ï¼Œ</span></span><br><span class="line"><span class="comment">        ä¸€ä¸ªå¯é€‰çš„levelå’Œä¸€ä¸ªå¯é€‰çš„addtivityå±æ€§ã€‚</span></span><br><span class="line"><span class="comment">        name:ç”¨æ¥æŒ‡å®šå—æ­¤loggerçº¦æŸçš„æŸä¸€ä¸ªåŒ…æˆ–è€…å…·ä½“çš„æŸä¸€ä¸ªç±»ã€‚</span></span><br><span class="line"><span class="comment">        level:ç”¨æ¥è®¾ç½®æ‰“å°çº§åˆ«ï¼Œå¤§å°å†™æ— å…³ï¼šTRACE, DEBUG, INFO, WARN, ERROR, ALL å’Œ OFFï¼Œ</span></span><br><span class="line"><span class="comment">              å¦‚æœæœªè®¾ç½®æ­¤å±æ€§ï¼Œé‚£ä¹ˆå½“å‰loggerå°†ä¼šç»§æ‰¿ä¸Šçº§çš„çº§åˆ«ã€‚</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        ä½¿ç”¨mybatisçš„æ—¶å€™ï¼Œsqlè¯­å¥æ˜¯debugä¸‹æ‰ä¼šæ‰“å°ï¼Œè€Œè¿™é‡Œæˆ‘ä»¬åªé…ç½®äº†infoï¼Œæ‰€ä»¥æƒ³è¦æŸ¥çœ‹sqlè¯­å¥çš„è¯ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§æ“ä½œï¼š</span></span><br><span class="line"><span class="comment">        ç¬¬ä¸€ç§æŠŠ&lt;root level=&quot;INFO&quot;&gt;æ”¹æˆ&lt;root level=&quot;DEBUG&quot;&gt;è¿™æ ·å°±ä¼šæ‰“å°sqlï¼Œä¸è¿‡è¿™æ ·æ—¥å¿—é‚£è¾¹ä¼šå‡ºç°å¾ˆå¤šå…¶ä»–æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">        ç¬¬äºŒç§å°±æ˜¯å•ç‹¬ç»™mapperä¸‹ç›®å½•é…ç½®DEBUGæ¨¡å¼ï¼Œä»£ç å¦‚ä¸‹ï¼Œè¿™æ ·é…ç½®sqlè¯­å¥ä¼šæ‰“å°ï¼Œå…¶ä»–è¿˜æ˜¯æ­£å¸¸DEBUGçº§åˆ«ï¼š</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¼€å‘ç¯å¢ƒ:æ‰“å°æ§åˆ¶å°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å¯ä»¥è¾“å‡ºé¡¹ç›®ä¸­çš„debugæ—¥å¿—ï¼ŒåŒ…æ‹¬mybatisçš„sqlæ—¥å¿—--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;com.guli&quot;</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span> /&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">            rootèŠ‚ç‚¹æ˜¯å¿…é€‰èŠ‚ç‚¹ï¼Œç”¨æ¥æŒ‡å®šæœ€åŸºç¡€çš„æ—¥å¿—è¾“å‡ºçº§åˆ«ï¼Œåªæœ‰ä¸€ä¸ªlevelå±æ€§</span></span><br><span class="line"><span class="comment">            level:ç”¨æ¥è®¾ç½®æ‰“å°çº§åˆ«ï¼Œå¤§å°å†™æ— å…³ï¼šTRACE, DEBUG, INFO, WARN, ERROR, ALL å’Œ OFFï¼Œé»˜è®¤æ˜¯DEBUG</span></span><br><span class="line"><span class="comment">            å¯ä»¥åŒ…å«é›¶ä¸ªæˆ–å¤šä¸ªappenderå…ƒç´ ã€‚</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;CONSOLE&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;INFO_FILE&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;WARN_FILE&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;ERROR_FILE&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--ç”Ÿäº§ç¯å¢ƒ:è¾“å‡ºåˆ°æ–‡ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">&quot;pro&quot;</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;CONSOLE&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;DEBUG_FILE&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;INFO_FILE&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;ERROR_FILE&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;WARN_FILE&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="è¾“å‡ºé”™è¯¯æ—¥å¿—"><a href="#è¾“å‡ºé”™è¯¯æ—¥å¿—" class="headerlink" title="è¾“å‡ºé”™è¯¯æ—¥å¿—"></a>è¾“å‡ºé”™è¯¯æ—¥å¿—</h4><blockquote><p>åœ¨ç»Ÿä¸€å¼‚å¸¸å¤„ç†ç±»ä¸Šæ·»åŠ æ³¨é‡Šï¼Œå¹¶ä¸”åœ¨å¼‚å¸¸å¤„ç†çš„æ—¶å€™è°ƒç”¨log.error()</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»Ÿä¸€å¼‚å¸¸å¤„ç†ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ControllerAdvice</span>   <span class="comment">// å¢å¼ºçš„controllerï¼Œå¯ä»¥ç”¨äºå…¨å±€å¼‚å¸¸å¤„ç†</span></span><br><span class="line"><span class="meta">@Slf4j</span>              <span class="comment">// è¾“å‡ºé”™è¯¯æ—¥å¿—</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalExceptionHandler</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ç‰¹å®šå¼‚å¸¸å¤„ç†</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(ArithmeticException.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">error</span><span class="params">(ArithmeticException e)</span> </span>&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        log.error(e.getMessage());  <span class="comment">// å°†é”™è¯¯æ—¥å¿—çš„å†…å®¹è¾“å‡ºåˆ°æ–‡ä»¶å½“ä¸­</span></span><br><span class="line">        <span class="keyword">return</span> R.error().message(<span class="string">&quot;äº§ç”Ÿäº†ArithmeticExceptionå¼‚å¸¸!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// â€¦â€¦</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨é…ç½®çš„è·¯å¾„ä¸­å³å¯çœ‹åˆ°æ—¥å¿—æ–‡ä»¶</p></blockquote><h4 id="å½“å‰ç›®å½•ç»“æ„"><a href="#å½“å‰ç›®å½•ç»“æ„" class="headerlink" title="å½“å‰ç›®å½•ç»“æ„"></a>å½“å‰ç›®å½•ç»“æ„</h4><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210921155023827.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210921155023827.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210921155023827"></p><h2 id="service-eduè®²å¸ˆç®¡ç†æ¨¡å—ï¼ˆåç«¯ï¼‰"><a href="#service-eduè®²å¸ˆç®¡ç†æ¨¡å—ï¼ˆåç«¯ï¼‰" class="headerlink" title="service_eduè®²å¸ˆç®¡ç†æ¨¡å—ï¼ˆåç«¯ï¼‰"></a>service_eduè®²å¸ˆç®¡ç†æ¨¡å—ï¼ˆåç«¯ï¼‰</h2><h3 id="å¿«é€Ÿå‰ç½®é…ç½®"><a href="#å¿«é€Ÿå‰ç½®é…ç½®" class="headerlink" title="å¿«é€Ÿå‰ç½®é…ç½®"></a>å¿«é€Ÿå‰ç½®é…ç½®</h3><h4 id="é…ç½®æ–‡ä»¶application-properties"><a href="#é…ç½®æ–‡ä»¶application-properties" class="headerlink" title="é…ç½®æ–‡ä»¶application.properties"></a>é…ç½®æ–‡ä»¶application.properties</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç«¯å£å·</span></span><br><span class="line"><span class="meta">server.port</span>=<span class="string">8001</span></span><br><span class="line"><span class="comment"># æœåŠ¡å</span></span><br><span class="line"><span class="meta">spring.application.name</span>=<span class="string">service-edu</span></span><br><span class="line"><span class="comment"># ç¯å¢ƒ</span></span><br><span class="line"><span class="meta">spring.profiles.active</span>=<span class="string">dev</span></span><br><span class="line"><span class="comment"># mysqlæ•°æ®åº“ä¿¡æ¯</span></span><br><span class="line"><span class="meta">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/guli?serverTimezone=GMT%2B8</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">123456789</span></span><br><span class="line"><span class="comment"># è¿”å›JSONçš„å…¨å±€æ—¶é—´æ ¼å¼</span></span><br><span class="line"><span class="meta">spring.jackson.date-format</span>=<span class="string">yyyy-MM-dd HH:mm:ss</span></span><br><span class="line"><span class="meta">spring.jackson.time-zone</span>=<span class="string">GMT+8</span></span><br><span class="line"><span class="comment">#mybatisæ—¥å¿—</span></span><br><span class="line"><span class="meta">mybatis-plus.configuration.log-impl</span>=<span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure><h4 id="mybatisplusä»£ç ç”Ÿæˆå™¨"><a href="#mybatisplusä»£ç ç”Ÿæˆå™¨" class="headerlink" title="mybatisplusä»£ç ç”Ÿæˆå™¨"></a>mybatisplusä»£ç ç”Ÿæˆå™¨</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.DbType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.AutoGenerator;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.DataSourceConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.GlobalConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.PackageConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.StrategyConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.rules.DateType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.rules.NamingStrategy;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CodeGenerator</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1ã€åˆ›å»ºä»£ç ç”Ÿæˆå™¨</span></span><br><span class="line">        AutoGenerator mpg = <span class="keyword">new</span> AutoGenerator();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2ã€å…¨å±€é…ç½®</span></span><br><span class="line">        GlobalConfig gc = <span class="keyword">new</span> GlobalConfig();</span><br><span class="line">        <span class="comment">// String projectPath = System.getProperty(&quot;user.dir&quot;);</span></span><br><span class="line">        <span class="comment">// gc.setOutputDir(projectPath + &quot;/src/main/java&quot;);</span></span><br><span class="line">        <span class="comment">// å»ºè®®å†™æˆç»å¯¹è·¯å¾„</span></span><br><span class="line">        gc.setOutputDir(<span class="string">&quot;D:\\MyProject\\springboot\\guli_parent\\service\\service_edu&quot;</span> + <span class="string">&quot;/src/main/java&quot;</span>);</span><br><span class="line"></span><br><span class="line">        gc.setAuthor(<span class="string">&quot;testjava&quot;</span>);</span><br><span class="line">        gc.setOpen(<span class="keyword">false</span>); <span class="comment">//ç”Ÿæˆåæ˜¯å¦æ‰“å¼€èµ„æºç®¡ç†å™¨</span></span><br><span class="line">        gc.setFileOverride(<span class="keyword">false</span>); <span class="comment">//é‡æ–°ç”Ÿæˆæ—¶æ–‡ä»¶æ˜¯å¦è¦†ç›–</span></span><br><span class="line">        gc.setServiceName(<span class="string">&quot;%sService&quot;</span>);<span class="comment">//å»æ‰Serviceæ¥å£çš„é¦–å­—æ¯I</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// idç±»å‹å¦‚æœæ˜¯Longåˆ™æ”¹ä¸ºID_WORKER</span></span><br><span class="line">        gc.setIdType(IdType.ID_WORKER_STR); <span class="comment">//ä¸»é”®ç­–ç•¥</span></span><br><span class="line">        gc.setDateType(DateType.ONLY_DATE);<span class="comment">//å®šä¹‰ç”Ÿæˆçš„å®ä½“ç±»ä¸­æ—¥æœŸç±»å‹</span></span><br><span class="line">        gc.setSwagger2(<span class="keyword">true</span>);<span class="comment">//å¼€å¯Swagger2æ¨¡å¼</span></span><br><span class="line"></span><br><span class="line">        mpg.setGlobalConfig(gc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3ã€æ•°æ®æºé…ç½®</span></span><br><span class="line">        DataSourceConfig dsc = <span class="keyword">new</span> DataSourceConfig();</span><br><span class="line">        dsc.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/guli?serverTimezone=GMT%2B8&quot;</span>);</span><br><span class="line">        dsc.setDriverName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">        dsc.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        dsc.setPassword(<span class="string">&quot;123456789&quot;</span>);</span><br><span class="line">        dsc.setDbType(DbType.MYSQL);</span><br><span class="line">        mpg.setDataSource(dsc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4ã€åŒ…é…ç½®</span></span><br><span class="line">        PackageConfig pc = <span class="keyword">new</span> PackageConfig();</span><br><span class="line">        pc.setModuleName(<span class="string">&quot;eduservice&quot;</span>); <span class="comment">//æ¨¡å—å</span></span><br><span class="line">        pc.setParent(<span class="string">&quot;com.atguigu&quot;</span>);</span><br><span class="line">        pc.setController(<span class="string">&quot;controller&quot;</span>);</span><br><span class="line">        pc.setEntity(<span class="string">&quot;entity&quot;</span>);</span><br><span class="line">        pc.setService(<span class="string">&quot;service&quot;</span>);</span><br><span class="line">        pc.setMapper(<span class="string">&quot;mapper&quot;</span>);</span><br><span class="line">        mpg.setPackageInfo(pc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5ã€ç­–ç•¥é…ç½®</span></span><br><span class="line">        StrategyConfig strategy = <span class="keyword">new</span> StrategyConfig();</span><br><span class="line">        </span><br><span class="line">        strategy.setInclude(<span class="string">&quot;edu_teacher&quot;</span>); <span class="comment">//åŠ è½½è¡¨</span></span><br><span class="line">        </span><br><span class="line">        strategy.setNaming(NamingStrategy.underline_to_camel);<span class="comment">//æ•°æ®åº“è¡¨æ˜ å°„åˆ°å®ä½“çš„å‘½åç­–ç•¥</span></span><br><span class="line">        strategy.setTablePrefix(pc.getModuleName() + <span class="string">&quot;_&quot;</span>); <span class="comment">//ç”Ÿæˆå®ä½“æ—¶å»æ‰è¡¨å‰ç¼€</span></span><br><span class="line"></span><br><span class="line">        strategy.setColumnNaming(NamingStrategy.underline_to_camel);<span class="comment">//æ•°æ®åº“è¡¨å­—æ®µæ˜ å°„åˆ°å®ä½“çš„å‘½åç­–ç•¥</span></span><br><span class="line">        strategy.setEntityLombokModel(<span class="keyword">true</span>); <span class="comment">// lombok æ¨¡å‹ @Accessors(chain = true) setteré“¾å¼æ“ä½œ</span></span><br><span class="line"></span><br><span class="line">        strategy.setRestControllerStyle(<span class="keyword">true</span>); <span class="comment">//restful apié£æ ¼æ§åˆ¶å™¨</span></span><br><span class="line">        strategy.setControllerMappingHyphenStyle(<span class="keyword">true</span>); <span class="comment">//urlä¸­é©¼å³°è½¬è¿å­—ç¬¦</span></span><br><span class="line"></span><br><span class="line">        mpg.setStrategy(strategy);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6ã€æ‰§è¡Œ</span></span><br><span class="line">        mpg.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å½“å‰é¡¹ç›®ç»“æ„-4"><a href="#å½“å‰é¡¹ç›®ç»“æ„-4" class="headerlink" title="å½“å‰é¡¹ç›®ç»“æ„"></a>å½“å‰é¡¹ç›®ç»“æ„</h4><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210920164803926.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210920164803926.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210920164803926"></p><h4 id="åˆ›å»ºé…ç½®ç±»"><a href="#åˆ›å»ºé…ç½®ç±»" class="headerlink" title="åˆ›å»ºé…ç½®ç±»"></a>åˆ›å»ºé…ç½®ç±»</h4><blockquote><p>é…ç½®åŒ…æ‰«æç­‰</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.eduservice.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.atguigu.eduservice.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduConfig</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºå¯åŠ¨ç±»"><a href="#åˆ›å»ºå¯åŠ¨ç±»" class="headerlink" title="åˆ›å»ºå¯åŠ¨ç±»"></a>åˆ›å»ºå¯åŠ¨ç±»</h4><blockquote><p>å¯åŠ¨ç±»ä½ç½®è¦æ”¾åœ¨controllerã€entityç­‰packageçš„åŒçº§ï¼Œç„¶årunå³å¯å¯åŠ¨</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.eduservice;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(EduApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç®€å•æŸ¥è¯¢æ‰€æœ‰è®²å¸ˆ"><a href="#ç®€å•æŸ¥è¯¢æ‰€æœ‰è®²å¸ˆ" class="headerlink" title="ç®€å•æŸ¥è¯¢æ‰€æœ‰è®²å¸ˆ"></a>ç®€å•æŸ¥è¯¢æ‰€æœ‰è®²å¸ˆ</h3><h4 id="ç¼–å†™controller"><a href="#ç¼–å†™controller" class="headerlink" title="ç¼–å†™controller"></a>ç¼–å†™controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.eduservice.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.eduservice.entity.EduTeacher;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.eduservice.service.EduTeacherService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * è®²å¸ˆ å‰ç«¯æ§åˆ¶å™¨</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> testjava</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2021-09-20</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/eduservice/edu-teacher&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduTeacherController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EduTeacherService teacherService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// RESTé£æ ¼</span></span><br><span class="line">    <span class="comment">// 1ã€æŸ¥è¯¢è®²å¸ˆè¡¨çš„æ‰€æœ‰æ•°æ®</span></span><br><span class="line">    <span class="comment">// åœ°å€ï¼šlocalhost:8001//eduservice/edu-teacher/findAll</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;findAll&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;EduTeacher&gt; <span class="title">findAllTeacher</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨Serviceçš„æ–¹æ³•</span></span><br><span class="line">        List&lt;EduTeacher&gt; list = teacherService.list(<span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><p><code>localhost:8001//eduservice/edu-teacher/findAll</code></p><h3 id="é€»è¾‘åˆ é™¤è®²å¸ˆ"><a href="#é€»è¾‘åˆ é™¤è®²å¸ˆ" class="headerlink" title="é€»è¾‘åˆ é™¤è®²å¸ˆ"></a>é€»è¾‘åˆ é™¤è®²å¸ˆ</h3><h4 id="å®ä½“ç±»å±æ€§æ·»åŠ æ³¨è§£"><a href="#å®ä½“ç±»å±æ€§æ·»åŠ æ³¨è§£" class="headerlink" title="å®ä½“ç±»å±æ€§æ·»åŠ æ³¨è§£"></a>å®ä½“ç±»å±æ€§æ·»åŠ æ³¨è§£</h4><blockquote><p>ä¸ºEduTeacherå®ä½“ç±»æ·»åŠ ç›¸åº”çš„æ³¨é‡Š@TableLogic</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiModelProperty(value = &quot;é€»è¾‘åˆ é™¤ 1ï¼ˆtrueï¼‰å·²åˆ é™¤ï¼Œ 0ï¼ˆfalseï¼‰æœªåˆ é™¤&quot;)</span></span><br><span class="line"><span class="meta">@TableLogic</span></span><br><span class="line"><span class="keyword">private</span> Integer isDeleted;</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºmybatisplusé…ç½®ç±»"><a href="#åˆ›å»ºmybatisplusé…ç½®ç±»" class="headerlink" title="åˆ›å»ºmybatisplusé…ç½®ç±»"></a>åˆ›å»ºmybatisplusé…ç½®ç±»</h4><blockquote><p>æ·»åŠ é€»è¾‘åˆ é™¤æ’ä»¶ï¼ˆæ³¨æ„mybatisç‰ˆæœ¬ï¼Œä½ç‰ˆæœ¬æ˜¯éœ€è¦æ·»åŠ çš„ï¼Œé«˜ç‰ˆæœ¬ä¸ç”¨ï¼Œè€Œä¸”TableIdè‡ªåŠ¨è¯†åˆ«Type AutoGeneratorå†™æ³•ä¹Ÿæœ‰åŒºåˆ«ç­‰ï¼‰</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.eduservice.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.injector.ISqlInjector;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.injector.LogicSqlInjector;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.atguigu.eduservice.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€»è¾‘åˆ é™¤æ’ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ISqlInjector <span class="title">sqlInjector</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> LogicSqlInjector();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™controller-1"><a href="#ç¼–å†™controller-1" class="headerlink" title="ç¼–å†™controller"></a>ç¼–å†™controller</h4><blockquote><p>æ³¨æ„ä½¿ç”¨RESTé£æ ¼URIï¼ŒpathVariableå¯¹åº”è·¯å¾„å‚æ•°</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2ã€é€»è¾‘åˆ é™¤è®²å¸ˆ</span></span><br><span class="line"><span class="meta">@DeleteMapping(&quot;&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">removeTeacher</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> String id)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span> flag = teacherService.removeById(id);</span><br><span class="line">    <span class="keyword">return</span> flag;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•ï¼ˆswaggerå·¥å…·ï¼‰"><a href="#æµ‹è¯•ï¼ˆswaggerå·¥å…·ï¼‰" class="headerlink" title="æµ‹è¯•ï¼ˆswaggerå·¥å…·ï¼‰"></a>æµ‹è¯•ï¼ˆswaggerå·¥å…·ï¼‰</h4><blockquote><p>æ•´åˆswaggerå¯ä»¥ç”¨äºæ¥å£æµ‹è¯•ã€ç”Ÿæˆåœ¨çº¿æ¥å£æ–‡æ¡£ç­‰</p></blockquote><h3 id="åˆ†é¡µåŠŸèƒ½"><a href="#åˆ†é¡µåŠŸèƒ½" class="headerlink" title="åˆ†é¡µåŠŸèƒ½"></a>åˆ†é¡µåŠŸèƒ½</h3><h4 id="é…ç½®ç±»å¯¼å…¥æ’ä»¶"><a href="#é…ç½®ç±»å¯¼å…¥æ’ä»¶" class="headerlink" title="é…ç½®ç±»å¯¼å…¥æ’ä»¶"></a>é…ç½®ç±»å¯¼å…¥æ’ä»¶</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.atguigu.eduservice.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€»è¾‘åˆ é™¤æ’ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ISqlInjector <span class="title">sqlInjector</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> LogicSqlInjector();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ†é¡µæ’ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> PaginationInterceptor <span class="title">paginationInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PaginationInterceptor();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™controller-2"><a href="#ç¼–å†™controller-2" class="headerlink" title="ç¼–å†™controller"></a>ç¼–å†™controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 3ã€åˆ†é¡µåŠŸèƒ½</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> current å½“å‰é¡µ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> limit   æ¯é¡µè®°å½•æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;pageTeacher/&#123;current&#125;/&#123;limit&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">pageListTeacher</span><span class="params">(<span class="meta">@PathVariable</span> <span class="keyword">long</span> current,</span></span></span><br><span class="line"><span class="params"><span class="function">                         <span class="meta">@PathVariable</span> <span class="keyword">long</span> limit)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºpageå¯¹è±¡</span></span><br><span class="line">    Page&lt;EduTeacher&gt; pageTeacher = <span class="keyword">new</span> Page&lt;&gt;(current, limit);</span><br><span class="line">    <span class="comment">// è°ƒç”¨æ–¹æ³•å®ç°åˆ†ç±»</span></span><br><span class="line">    teacherService.page(pageTeacher, <span class="keyword">null</span>);</span><br><span class="line">    <span class="keyword">long</span> total = pageTeacher.getTotal();</span><br><span class="line">    List&lt;EduTeacher&gt; records = pageTeacher.getRecords();</span><br><span class="line">    HashMap&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;total&quot;</span>, total);</span><br><span class="line">    map.put(<span class="string">&quot;records&quot;</span>, records);</span><br><span class="line">    <span class="keyword">return</span> R.ok().data(map);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¤šæ¡ä»¶ç»„åˆæŸ¥è¯¢åˆ†é¡µ"><a href="#å¤šæ¡ä»¶ç»„åˆæŸ¥è¯¢åˆ†é¡µ" class="headerlink" title="å¤šæ¡ä»¶ç»„åˆæŸ¥è¯¢åˆ†é¡µ"></a>å¤šæ¡ä»¶ç»„åˆæŸ¥è¯¢åˆ†é¡µ</h3><h4 id="åˆ›å»ºVOå®ä½“å¯¹è±¡"><a href="#åˆ›å»ºVOå®ä½“å¯¹è±¡" class="headerlink" title="åˆ›å»ºVOå®ä½“å¯¹è±¡"></a>åˆ›å»ºVOå®ä½“å¯¹è±¡</h4><blockquote><p>æŠŠæ¡ä»¶å€¼ä¼ é€’åˆ°æ¥å£é‡Œï¼ˆå°†æ¡ä»¶å€¼å°è£…åˆ°VO(ViewObject)å®ä½“å¯¹è±¡å½“ä¸­ï¼Œå†æŠŠå¯¹è±¡voä¼ é€’åˆ°æ¥å£ä¸­ï¼‰<br><a href="https://blog.csdn.net/zjrbiancheng/article/details/6253232">æµ…æVOã€DTOã€DOã€POçš„æ¦‚å¿µã€åŒºåˆ«å’Œç”¨å¤„_zjrbianchengçš„ä¸“æ -CSDNåšå®¢</a><br><a href="https://blog.csdn.net/wangxin1982314/article/details/51954264/">å®ä½“ç±»ï¼ˆVOï¼ŒDOï¼ŒDTOï¼‰çš„åˆ’åˆ†_xin.wangçš„åšå®¢-CSDNåšå®¢</a></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.eduservice.entity.vo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¡ä»¶å°è£…å¯¹è±¡</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TeacherQuery</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸€ä¸‹å±æ€§æ˜¯å¯¹åº”çš„å¯è¢«ä¾æ®çš„æŸ¥è¯¢æ¡ä»¶ï¼ˆæ³¨æ„å’Œè¡¨ä¸­å­—æ®µåå¯¹åº”ï¼‰</span></span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;æ•™å¸ˆåç§°,æ¨¡ç³ŠæŸ¥è¯¢&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;å¤´è¡” 1é«˜çº§è®²å¸ˆ 2é¦–å¸­è®²å¸ˆ&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer level;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;æŸ¥è¯¢å¼€å§‹æ—¶é—´&quot;, example = &quot;2019-01-01 10:10:10&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String begin;<span class="comment">//æ³¨æ„ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯Stringç±»å‹ï¼Œå‰ç«¯ä¼ è¿‡æ¥çš„æ•°æ®æ— éœ€è¿›è¡Œç±»å‹è½¬æ¢</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;æŸ¥è¯¢ç»“æŸæ—¶é—´&quot;, example = &quot;2019-12-01 10:10:10&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String end;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™controller-3"><a href="#ç¼–å†™controller-3" class="headerlink" title="ç¼–å†™controller"></a>ç¼–å†™controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 4ã€å¤šæ¡ä»¶ç»„åˆåˆ†é¡µ</span></span><br><span class="line"><span class="comment"> * å‚æ•°ä¸­å¯ä»¥ä½¿ç”¨<span class="doctag">@RequestBody</span> TeacherQuery teacherQuery</span></span><br><span class="line"><span class="comment"> * è¯¥æ³¨é‡Šè¡¨ç¤ºä½¿ç”¨JSONæ ¼å¼å‘åç«¯ä¼ é€’æ•°æ®ï¼Œä¼šè‡ªåŠ¨å°è£…åˆ°å¯¹åº”å¯¹è±¡ä¸­ï¼Œ</span></span><br><span class="line"><span class="comment"> * ä¸”éœ€è¦ä½¿ç”¨POSTMappingæ‰èƒ½è·å–æ•°æ®ï¼Œä¸”å¦‚æœæ•°æ®æœ‰ç©ºéœ€è¦åŠ ä¸Š(required = false)</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> current      å½“å‰é¡µ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> limit        æ¯é¡µè®°å½•æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> teacherQuery æ¡ä»¶å€¼ï¼ˆä»¥å¯¹è±¡çš„å½¢å¼ï¼‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;å¤šæ¡ä»¶ç»„åˆåˆ†é¡µ&quot;)</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;pageTeacherCondition/&#123;current&#125;/&#123;limit&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">pageListTeacherCondition</span><span class="params">(<span class="meta">@PathVariable</span> <span class="keyword">long</span> current,</span></span></span><br><span class="line"><span class="params"><span class="function">                                  <span class="meta">@PathVariable</span> <span class="keyword">long</span> limit,</span></span></span><br><span class="line"><span class="params"><span class="function">                                  <span class="meta">@RequestBody(required = false)</span> TeacherQuery teacherQuery)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºpageå¯¹è±¡</span></span><br><span class="line">    Page&lt;EduTeacher&gt; pageTeacher = <span class="keyword">new</span> Page&lt;&gt;(current, limit);</span><br><span class="line">    <span class="comment">// åˆ›å»ºwrapperå¯¹è±¡</span></span><br><span class="line">    QueryWrapper&lt;EduTeacher&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    <span class="comment">// è®¾å®šæ¡ä»¶</span></span><br><span class="line">    String name = teacherQuery.getName();</span><br><span class="line">    Integer level = teacherQuery.getLevel();</span><br><span class="line">    String begin = teacherQuery.getBegin();</span><br><span class="line">    String end = teacherQuery.getEnd();</span><br><span class="line">    <span class="keyword">if</span> (StringUtils.hasLength(name)) &#123;</span><br><span class="line">        wrapper.like(<span class="string">&quot;name&quot;</span>, name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (level != <span class="keyword">null</span>) &#123;</span><br><span class="line">        wrapper.eq(<span class="string">&quot;level&quot;</span>, level);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (StringUtils.hasLength(begin)) &#123;</span><br><span class="line">        wrapper.ge(<span class="string">&quot;gmt_create&quot;</span>, begin);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (StringUtils.hasLength(end)) &#123;</span><br><span class="line">        wrapper.le(<span class="string">&quot;gmt_create&quot;</span>, end);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è°ƒç”¨serviceæ–¹æ³•å°†pageå¯¹è±¡æ ¹æ®æ¡ä»¶åˆ†é¡µ</span></span><br><span class="line">    teacherService.page(pageTeacher, wrapper);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">long</span> total = pageTeacher.getTotal();</span><br><span class="line">    List&lt;EduTeacher&gt; records = pageTeacher.getRecords();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">&quot;total&quot;</span>, total).data(<span class="string">&quot;records&quot;</span>, records);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ è®²å¸ˆ"><a href="#æ·»åŠ è®²å¸ˆ" class="headerlink" title="æ·»åŠ è®²å¸ˆ"></a>æ·»åŠ è®²å¸ˆ</h3><h4 id="å®ä½“ç±»å±æ€§æ·»åŠ æ³¨è§£-1"><a href="#å®ä½“ç±»å±æ€§æ·»åŠ æ³¨è§£-1" class="headerlink" title="å®ä½“ç±»å±æ€§æ·»åŠ æ³¨è§£"></a>å®ä½“ç±»å±æ€§æ·»åŠ æ³¨è§£</h4><blockquote><p>@TableFieldï¼ˆfill = FieldFill.xxxï¼‰è‡ªåŠ¨å¡«å……æ³¨è§£</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiModelProperty(value = &quot;åˆ›å»ºæ—¶é—´&quot;)</span></span><br><span class="line"><span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line"><span class="keyword">private</span> Date gmtCreate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ApiModelProperty(value = &quot;æ›´æ–°æ—¶é—´&quot;)</span></span><br><span class="line"><span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class="line"><span class="keyword">private</span> Date gmtModified;</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºè‡ªå®šä¹‰handlerç±»"><a href="#åˆ›å»ºè‡ªå®šä¹‰handlerç±»" class="headerlink" title="åˆ›å»ºè‡ªå®šä¹‰handlerç±»"></a>åˆ›å»ºè‡ªå®šä¹‰handlerç±»</h4><blockquote><p>å¯ä»¥æ”¾åˆ°service_baseæ¨¡å—ï¼Œç„¶åéœ€è¦ä½¿ç”¨å¯¼å…¥ä¾èµ–å³å¯</p><p>å½“å¯¹åº”æ–¹æ³•è¢«ä½¿ç”¨çš„ä½¿ç”¨ä¼šè¢«è°ƒç”¨</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.servicebase.handler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.reflection.MetaObject;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title">MetaObjectHandler</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;gmtCreate&quot;</span>, <span class="keyword">new</span> Date(), metaObject);</span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;gmtModified&quot;</span>, <span class="keyword">new</span> Date(), metaObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;gmtModified&quot;</span>, <span class="keyword">new</span> Date(), metaObject);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ç»“æ„</p></blockquote><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210921131439930.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210921131439930.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210921131439930"></p><h4 id="ç¼–å†™controller-4"><a href="#ç¼–å†™controller-4" class="headerlink" title="ç¼–å†™controller"></a>ç¼–å†™controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 5ã€æ·»åŠ è®²å¸ˆ</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> eduTeacher</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;æ·»åŠ è®²å¸ˆ&quot;)</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;addTeacher&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">addTeacher</span><span class="params">(<span class="meta">@RequestBody</span> EduTeacher eduTeacher)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span> save = teacherService.save(eduTeacher);</span><br><span class="line">    <span class="keyword">return</span> save ? R.ok() : R.error();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹è®²å¸ˆ"><a href="#ä¿®æ”¹è®²å¸ˆ" class="headerlink" title="ä¿®æ”¹è®²å¸ˆ"></a>ä¿®æ”¹è®²å¸ˆ</h3><h4 id="ç¼–å†™controller-5"><a href="#ç¼–å†™controller-5" class="headerlink" title="ç¼–å†™controller"></a>ç¼–å†™controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation(&quot;æ ¹æ®idæŸ¥è¯¢è®²å¸ˆ&quot;)</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;getTeacher/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">getTeacher</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span> </span>&#123;</span><br><span class="line">    EduTeacher teacher = teacherService.getById(id);</span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">&quot;teacher&quot;</span>, teacher);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ApiOperation(&quot;ä¿®æ”¹è®²å¸ˆ&quot;)</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;updateTeacher&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">updateTeacher</span><span class="params">(<span class="meta">@RequestBody</span> EduTeacher teacher)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span> flag = teacherService.updateById(teacher);</span><br><span class="line">    <span class="keyword">return</span> flag ? R.ok() : R.error();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨@PutMappingå¦‚ä¸‹</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation(&quot;ä¿®æ”¹è®²å¸ˆ&quot;)</span></span><br><span class="line"><span class="meta">@PutMapping(&quot;&#123;id&#125;&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">updateTeacher</span><span class="params">(<span class="meta">@PathVariable</span> String id,</span></span></span><br><span class="line"><span class="params"><span class="function">                       <span class="meta">@RequestBody</span> EduTeacher teacher)</span> </span>&#123;</span><br><span class="line">    teacher.setId(id);</span><br><span class="line">    <span class="keyword">boolean</span> flag = teacherService.updateById(teacher);</span><br><span class="line">    <span class="keyword">return</span> flag ? R.ok() : R.error();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¾…ç»­"><a href="#å¾…ç»­" class="headerlink" title="å¾…ç»­"></a>å¾…ç»­</h2>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> é¡¹ç›® </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> SpringCloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Unityã€‘ä»ç‹¬ç«‹æ¸¸æˆå­¦ä¹ å¼€å‘</title>
      <link href="/2021/08/24/unity2d-cong-du-li-you-xi-xue-xi-kai-fa/"/>
      <url>/2021/08/24/unity2d-cong-du-li-you-xi-xue-xi-kai-fa/</url>
      
        <content type="html"><![CDATA[<h2 id="æ„Ÿè°¢"><a href="#æ„Ÿè°¢" class="headerlink" title="æ„Ÿè°¢"></a>æ„Ÿè°¢</h2><p>æ„Ÿè°¢bilibiliè§†é¢‘ç½‘ç«™M_Studioéº¦å£è€å¸ˆç³»åˆ—è§†é¢‘æ•™å­¦ï¼ŒUnity2Déƒ½æ˜¯ä»ä»–è¿™å­¦çš„ã€‚</p><h2 id="åˆ›å»ºé¡¹ç›®ä¸å¯¼å…¥ç´ æ"><a href="#åˆ›å»ºé¡¹ç›®ä¸å¯¼å…¥ç´ æ" class="headerlink" title="åˆ›å»ºé¡¹ç›®ä¸å¯¼å…¥ç´ æ"></a>åˆ›å»ºé¡¹ç›®ä¸å¯¼å…¥ç´ æ</h2><ol><li>åˆ›å»ºæ–°é¡¹ç›®</li><li>å¯¼å…¥ç´ æï¼Œç‚¹å‡»èœå•æ <code>Assets -&gt; ImportPackage</code></li></ol><h3 id="å¯¼å…¥å¹¶ç¼–è¾‘Tiles"><a href="#å¯¼å…¥å¹¶ç¼–è¾‘Tiles" class="headerlink" title="å¯¼å…¥å¹¶ç¼–è¾‘Tiles"></a>å¯¼å…¥å¹¶ç¼–è¾‘Tiles</h3><ol><li>ç‚¹å‡»èœå•æ <code>window -&gt; 2D -&gt; tile palette</code> ï¼Œç‚¹å‡»<code>createNewPalette</code>åˆ›å»ºpalette</li><li>å¯¼å…¥Levelæ–‡ä»¶å¤¹ä¸‹Spiritæ–‡ä»¶å¤¹ä¸­çš„ç´ æï¼Œå¹¶ä¸”é€‚å½“ç¼–è¾‘</li></ol><h2 id="TileMap"><a href="#TileMap" class="headerlink" title="TileMap"></a>TileMap</h2><ol><li>åœ¨Hierarchyçª—å£ï¼Œåˆ›å»ºæ‰€éœ€è¦çš„<code>2dObject -&gt; tilemap</code></li><li>åœ¨Tile Paletteçª—å£ï¼Œé€‰ä¸­ç›¸åº”<code>Active Tile Map</code>å¹¶ç»˜åˆ¶</li></ol><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210818134102428.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210818134102428.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210818134102428"></p><ol start="3"><li>åœ¨Inspectorçª—å£è®¾ç½®<code>Sorting Layer</code>ï¼Œå¦‚ä¸‹</li></ol><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210818193555665.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210818193555665.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210818193555665"></p><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210818193335243.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210818193335243.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210818193335243"></p><p>â€‹    Sorting Layerä¸­Layerè¶Šé ä¸‹è¶Šæ˜¾ç¤ºåœ¨å‰æ–¹ï¼Œä½äºåŒä¸€Layerä¸­Order in Layeræ•°å€¼è¶Šå¤§è¶Šæ˜¾ç¤ºåœ¨å‰æ–¹</p><ol start="4"><li>å…¶ä¸­ <code> Background Details</code>ç”¨äºåœ¨Backgroundä¸­å†æ·»åŠ ç›¸åº”tileï¼ˆåœ¨åŒä¸€ä¸ªTileMapä¸Šç»˜åˆ¶åªèƒ½æ˜¾ç¤ºä¸€ä¸ªtileï¼Œå³ä½¿tileæ˜¯å«æœ‰é€æ˜èƒŒæ™¯ï¼Œä¹Ÿä¼šå®Œå…¨æ›¿æ¢ï¼‰</li></ol><h2 id="2D-Extraæ’ä»¶"><a href="#2D-Extraæ’ä»¶" class="headerlink" title="2D Extraæ’ä»¶"></a>2D Extraæ’ä»¶</h2><h3 id="RuleTile"><a href="#RuleTile" class="headerlink" title="RuleTile"></a>RuleTile</h3><ol><li>åœ¨Tilesæ–‡ä»¶å¤¹ä¸‹å³é”®ç‚¹å‡» <code> Create -&gt; tiles -&gt; rule tile</code>ï¼Œå¹¶åœ¨Inspectorçª—å£ä¸­è®¾ç½®<code> Default Spriteé»˜è®¤å›¾ç‰‡</code> </li><li>åœ¨Inspectorçª—å£ä¸­ï¼Œè®¾ç½®<code>Tiling Rules</code>ï¼Œå¹¶å°†æ–°tileæ‹–æ‹½è¿›Tile Paletteå¹¶ç»˜åˆ¶ï¼Œå¦‚ä¸‹</li></ol><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210818195734376.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210818195734376.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210818195734376"></p><p>â€‹    æ¯ä¸€ä¸ªTiling Rulesä¸­ï¼Œå³ä¾§å›¾ç‰‡ä¸ºç¬¦åˆè¯¥è§„åˆ™å°±æ˜¾ç¤ºçš„tileï¼Œä¹å®«æ ¼ä¸­è®¾ç½®è§„åˆ™ï¼Œç»¿è‰²ç®­å¤´è¡¨ç¤ºåœ¨è¯¥æ–¹å‘ä¸Šæœ‰tileï¼Œçº¢è‰²å‰å·è¡¨ç¤ºä¸èƒ½æœ‰tileï¼ŒåŒæ—¶åˆ—è¡¨ä¸­è¶Šé ä¸Šçš„ruleä¼˜å…ˆçº§è¶Šé«˜<br>â€‹    å¦‚ä¸Šè®¾ç½®å¯å¿«é€Ÿå¡«å……å°é—­å›¾å½¢çš„å¯¹åº”tile</p><ol start="3"><li>å¦‚ä¸‹è§„åˆ™è§£å†³å†…è§’é—®é¢˜ï¼Œæ³¨æ„è¿™å››ä¸ªè§’çš„é¢å¤–ruleè¦æ”¾åœ¨æ¨ªç«–ä¸¤ä¸ªtileçš„ä¸Šæ–¹</li></ol><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210818200334242.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210818200334242.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210818200334242"></p><h3 id="Brush"><a href="#Brush" class="headerlink" title="Brush"></a>Brush</h3><blockquote><p>æƒ³è¦æ·»åŠ è´´åˆæ ¼å­çš„ç‰©ä»¶prefabï¼Œå¯ä»¥ä½¿ç”¨åˆ›å»ºbrushçš„æ–¹å¼</p></blockquote><ol><li>åˆ›å»ºbrushï¼Œå³é”®ç‚¹å‡»<code> create -&gt; Brush -&gt; prefab Brush</code></li><li>æ·»åŠ Element</li><li>åœ¨ <code> Tile Palette</code> çª—å£ä¸­å·¦ä¸‹è§’ä½¿ç”¨è‡ªå®šä¹‰brushå³å¯</li><li>æ·»åŠ çš„å¯¹è±¡åˆ«å¿˜äº†è®¾ç½®Layerä»¥åˆ¤æ–­ï¼ŒåŒæ—¶å¯ä»¥ä½¿ç”¨Overrideä½¿å¾—åŒä¸€ç‰©å“ç›¸åŒè®¾ç½®</li></ol><h2 id="Colliderå’ŒRigidbody"><a href="#Colliderå’ŒRigidbody" class="headerlink" title="Colliderå’ŒRigidbody"></a>Colliderå’ŒRigidbody</h2><h3 id="Platformè®¾ç½®Colliderå’ŒRigidbody"><a href="#Platformè®¾ç½®Colliderå’ŒRigidbody" class="headerlink" title="Platformè®¾ç½®Colliderå’ŒRigidbody"></a>Platformè®¾ç½®Colliderå’ŒRigidbody</h3><ol><li>é€‰ä¸­Platformå¯¹è±¡ï¼Œåœ¨Inspectorçª—å£ä¸‹æ–¹ç‚¹å‡» <code> add component -&gt; Tilemap Collider 2D</code></li><li>å‹¾é€‰colliderä¸­çš„ <code> user By Composite</code>ï¼Œå³ä½¿ç”¨å¤åˆç¢°æ’ä½“ï¼ŒæŒ‰ç…§æç¤ºæ·»åŠ <code> Composite Collider 2D</code>ï¼Œåˆ™æ•´ä¸ªPlatformä¸ºä¸€ä¸ªæ•´ä½“ç¢°æ’ä½“</li><li>å°†éšä¹‹æ·»åŠ çš„<code> rigidbody -&gt; bodytypeè®¾ç½®ä¸ºstatic</code>ï¼Œå³å¯ä¿æŒPlatformå›ºå®šï¼Œè€Œä¸ä¼šå› ä¸ºgravityé‡åŠ›ä¸‹è½</li><li>åŒæ—¶ä¹Ÿå¯ä»¥å°†Platformæœ¬èº«è®¾ç½®ä¸ºstatic</li></ol><h3 id="Playerè®¾ç½®Colliderå’ŒRigidbody"><a href="#Playerè®¾ç½®Colliderå’ŒRigidbody" class="headerlink" title="Playerè®¾ç½®Colliderå’ŒRigidbody"></a>Playerè®¾ç½®Colliderå’ŒRigidbody</h3><ol><li>é€‰ä¸­Playerå¯¹è±¡ï¼Œç‚¹å‡» <code> add component -&gt; rigidbody 2D</code>ï¼Œå¹¶è®¾ç½®å‚æ•°å¦‚ä¸‹</li></ol><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210819114945303.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210819114945303.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210819114945303"></p><p>â€‹        æ³¨æ„<code>Colllision Detection ç¢°æ’æ–¹å¼</code>è®¾ç½®ä¸ºContinuousï¼Œå³å¯æŒç»­åˆ¤æ–­æ˜¯å¦äº§ç”Ÿç¢°æ’ï¼›<code> Interpolateå·®å€¼</code>è®¾ç½®ä¸ºInterpolateï¼Œå³å¯å½“ä¸‹è½ç¢°æ’æ—¶å¯¹ç¢°æ’ä½“äº§ç”Ÿä¸€å®šæ•ˆæœï¼ˆåŸºäºä¸Šä¸€å¸§ç‰©ä½“ä½ç½®æ¥æ’å€¼æ¨¡æ‹Ÿï¼‰</p><ol start="2"><li>ç‚¹å‡» <code> add component -&gt; Box Collider 2D</code>ï¼Œå¹¶ç‚¹å‡»Editè®¾ç½®ç¢°æ’ä½“èŒƒå›´</li><li>åŒæ—¶åœ¨<code> Constraintsé™åˆ¶</code>é€‰é¡¹ä¸­é€‰æ‹©<code>Freeze Rotation Z</code>ï¼Œå³å¯é˜²æ­¢å½“è§’è‰²å¤„äºPlatformè§’ä¸Šæ—¶ä¼šç»•ç€Zè½´æ—‹è½¬æ‰è½</li><li>åŒæ—¶ä¸ºCollideræ·»åŠ Materail</li></ol><h2 id="Layer"><a href="#Layer" class="headerlink" title="Layer"></a>Layer</h2><p>ä¸ºPlatformå’ŒPlayeræ·»åŠ ä¸åŒçš„Layerï¼Œç”¨äºæ—¥ååˆ¤æ–­</p><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210819120442875.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210819120442875.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210819120442875"></p><h2 id="Playerå·¦å³ç§»åŠ¨å’Œå½¢è±¡ç¿»è½¬"><a href="#Playerå·¦å³ç§»åŠ¨å’Œå½¢è±¡ç¿»è½¬" class="headerlink" title="Playerå·¦å³ç§»åŠ¨å’Œå½¢è±¡ç¿»è½¬"></a>Playerå·¦å³ç§»åŠ¨å’Œå½¢è±¡ç¿»è½¬</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">public class PlayerMovement : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">   // é€šè¿‡ â€œHeaderâ€, â€œTooltipâ€ and â€œSpaceâ€ å±æ€§æ¥ç»„ç»‡Inspectorä¸­çš„å±æ€§æ˜¾ç¤ºï¼Œå³åœ¨Inspectorçª—å£ä¸Šæœ‰å°æ ‡é¢˜åˆ†åŒºæ˜¾ç¤º</span><br><span class="line">    // åˆ›å»ºrigidbody</span><br><span class="line">    private Rigidbody2D rb;</span><br><span class="line">    </span><br><span class="line">    [Header(&quot;ç§»åŠ¨å‚æ•°&quot;)]</span><br><span class="line">    public float speed = 8f;    //</span><br><span class="line">    public float crouchSpeedDivisor = 3f;   // è¹²ä¸‹é€Ÿåº¦å‡ç¼“é‡</span><br><span class="line"></span><br><span class="line">    [Header(&quot;çŠ¶æ€&quot;)]</span><br><span class="line">    public bool isCrouch;   // æ˜¯å¦ä¸‹è¹²</span><br><span class="line"></span><br><span class="line">    float xVelocity;    // è½´é€Ÿåº¦</span><br><span class="line">    </span><br><span class="line">void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        // è·å–rigidbody</span><br><span class="line">        rb = GetComponent&lt;Rigidbody2D&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    void Update()</span><br><span class="line">    &#123;    &#125;</span><br><span class="line">    // å›ºå®šå¸§é€Ÿç‡ä¸‹æ¯å¸§éƒ½è°ƒç”¨è¯¥å‡½æ•°</span><br><span class="line">    private void FixedUpdate()</span><br><span class="line">    &#123;</span><br><span class="line">        GroundMovement();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // æ§åˆ¶è§’è‰²å·¦å³ç§»åŠ¨</span><br><span class="line">    void GroundMovement()</span><br><span class="line">    &#123;</span><br><span class="line">        // è·å–é”®ç›˜è¾“å…¥å¹¶è®¾ç½®ç§»åŠ¨</span><br><span class="line">        xVelocity = Input.GetAxis(&quot;Horizontal&quot;);    // è¿”å›å€¼-1f ~ 1fï¼Œå½“ä¸æŒ‰ä¸‹æ–¹å‘é”®æ—¶ä¸º0</span><br><span class="line">        rb.velocity = new Vector2(xVelocity * speed, rb.velocity.y);</span><br><span class="line">        // æ§åˆ¶æœå‘</span><br><span class="line">        FlipDiraction();</span><br><span class="line">    &#125;</span><br><span class="line">    // æ§åˆ¶è§’è‰²é¢å‘æ–¹å‘</span><br><span class="line">    void FlipDiraction()</span><br><span class="line">    &#123;</span><br><span class="line">        if(xVelocity &lt; 0)</span><br><span class="line">        &#123;</span><br><span class="line">            transform.localScale = new Vector2(-1, 1);</span><br><span class="line">        &#125;else if(xVelocity &gt; 0)</span><br><span class="line">        &#123;</span><br><span class="line">            transform.localScale = new Vector2(1, 1);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Playerä¸‹è¹²"><a href="#Playerä¸‹è¹²" class="headerlink" title="Playerä¸‹è¹²"></a>Playerä¸‹è¹²</h2><p>ç‚¹å‡»<code> Edit -&gt; Project Setting -&gt; Input Manager -&gt; å¤åˆ¶JumpElementå¹¶ä¿®æ”¹ä¸ºCrouch</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class PlayerMovement : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    // é€šè¿‡ â€œHeaderâ€, â€œTooltipâ€ and â€œSpaceâ€ å±æ€§æ¥ç»„ç»‡Inspectorä¸­çš„å±æ€§æ˜¾ç¤ºï¼Œå³åœ¨Inspectorçª—å£ä¸Šæœ‰å°æ ‡é¢˜åˆ†åŒºæ˜¾ç¤º</span><br><span class="line">    </span><br><span class="line">    // rigidbody,collider</span><br><span class="line">    private Rigidbody2D rb;</span><br><span class="line">    private BoxCollider2D coll;     // ä½¿ç”¨BoxColliderå¯ä»¥ç›´æ¥è·å¾—å…¶ä¸­çš„sizeã€offsetå‚æ•°</span><br><span class="line">    </span><br><span class="line">    [Header(&quot;ç§»åŠ¨å‚æ•°&quot;)]</span><br><span class="line">    public float speed = 8f;    //</span><br><span class="line">    public float crouchSpeedDivisor = 3f;   // è¹²ä¸‹æ—¶çš„é€Ÿåº¦å‡ç¼“é‡</span><br><span class="line"></span><br><span class="line">    [Header(&quot;çŠ¶æ€&quot;)]</span><br><span class="line">    public bool isCrouch;   // æ˜¯å¦ä¸‹è¹²</span><br><span class="line"></span><br><span class="line">    float xVelocity;    // è½´é€Ÿåº¦</span><br><span class="line"></span><br><span class="line">    // ç¢°æ’ä½“å°ºå¯¸ (ç«™ç«‹ã€ä¸‹è¹²æ—¶çš„å¤§å°ã€ä½ç½®)</span><br><span class="line">    Vector2 colliderStandSize, colliderStandOffset,colliderCrouchSize, colliderCrouchOffset;</span><br><span class="line"></span><br><span class="line">    // åˆå§‹åŒ–å‚æ•°</span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        // rigidbody,collider</span><br><span class="line">        rb = GetComponent&lt;Rigidbody2D&gt;();</span><br><span class="line">        coll = GetComponent&lt;BoxCollider2D&gt;();</span><br><span class="line"></span><br><span class="line">        // ç¢°æ’ä½“å°ºå¯¸</span><br><span class="line">        colliderStandSize = coll.size;</span><br><span class="line">        colliderStandOffset = coll.offset;</span><br><span class="line">        colliderCrouchSize = new Vector2(coll.size.x, coll.size.y / 2f);</span><br><span class="line">        colliderCrouchOffset = new Vector2(coll.offset.x, coll.offset.y / 2f);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Update is called once per frame</span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // å›ºå®šå¸§é€Ÿç‡ä¸‹æ¯å¸§éƒ½è°ƒç”¨è¯¥å‡½æ•°</span><br><span class="line">    private void FixedUpdate()</span><br><span class="line">    &#123;</span><br><span class="line">        GroundMovement();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ§åˆ¶è§’è‰²å·¦å³ç§»åŠ¨</span><br><span class="line">    void GroundMovement()</span><br><span class="line">    &#123;</span><br><span class="line">        // è·å–é”®ç›˜è¾“å…¥</span><br><span class="line">        xVelocity = Input.GetAxis(&quot;Horizontal&quot;);    // è¿”å›å€¼-1f ~ 1fï¼Œå½“ä¸æŒ‰ä¸‹æ–¹å‘é”®æ—¶ä¸º0</span><br><span class="line"></span><br><span class="line">        // åˆ¤æ–­æ˜¯å¦æŒ‰ä¸‹ä¸‹è¹²æŒ‰é’®ã€æ˜¯å¦æœªæŒ‰ä¸‹æŒ‰é’®å¹¶å¤„äºä¸‹è¹²çŠ¶æ€</span><br><span class="line">        if (Input.GetButton(&quot;Crouch&quot;))</span><br><span class="line">        &#123;</span><br><span class="line">            // æ§åˆ¶è§’è‰²ä¸‹è¹²</span><br><span class="line">            Crouch();</span><br><span class="line">        &#125;else if(isCrouch)</span><br><span class="line">        &#123;</span><br><span class="line">            // æ§åˆ¶è§’è‰²èµ·èº«</span><br><span class="line">            StandUp();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // æ§åˆ¶è§’è‰²é€Ÿåº¦ä»¥ç§»åŠ¨</span><br><span class="line">        rb.velocity = new Vector2(xVelocity * speed, rb.velocity.y);</span><br><span class="line">        // æ§åˆ¶æœå‘</span><br><span class="line">        FlipDiraction();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ§åˆ¶è§’è‰²é¢å‘æ–¹å‘</span><br><span class="line">    void FlipDiraction()</span><br><span class="line">    &#123;</span><br><span class="line">        if(xVelocity &lt; 0)</span><br><span class="line">        &#123;</span><br><span class="line">            transform.localScale = new Vector2(-1, 1);</span><br><span class="line">        &#125;else if(xVelocity &gt; 0)</span><br><span class="line">        &#123;</span><br><span class="line">            transform.localScale = new Vector2(1, 1);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ§åˆ¶è§’è‰²ä¸‹è¹²</span><br><span class="line">    void Crouch()</span><br><span class="line">    &#123;</span><br><span class="line">        isCrouch = true;</span><br><span class="line">        // ä¸‹è¹²æ—¶é€Ÿåº¦å‡ç¼“</span><br><span class="line">        xVelocity /= crouchSpeedDivisor;</span><br><span class="line"></span><br><span class="line">        // æ”¹å˜colliderçš„å°ºå¯¸</span><br><span class="line">        coll.size = colliderCrouchSize;</span><br><span class="line">        coll.offset = colliderCrouchOffset;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ§åˆ¶è§’è‰²èµ·ç«‹</span><br><span class="line">    void StandUp()</span><br><span class="line">    &#123;</span><br><span class="line">        isCrouch = false;</span><br><span class="line"></span><br><span class="line">        // æ”¹å˜colliderçš„å°ºå¯¸</span><br><span class="line">        coll.size = colliderStandSize;</span><br><span class="line">        coll.offset = colliderStandOffset;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Playerè·³è·ƒ"><a href="#Playerè·³è·ƒ" class="headerlink" title="Playerè·³è·ƒ"></a>Playerè·³è·ƒ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class PlayerMovement : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    // é€šè¿‡ â€œHeaderâ€, â€œTooltipâ€ and â€œSpaceâ€ å±æ€§æ¥ç»„ç»‡Inspectorä¸­çš„å±æ€§æ˜¾ç¤ºï¼Œå³åœ¨Inspectorçª—å£ä¸Šæœ‰å°æ ‡é¢˜åˆ†åŒºæ˜¾ç¤º</span><br><span class="line">    </span><br><span class="line">    // rigidbody,collider</span><br><span class="line">    private Rigidbody2D rb;</span><br><span class="line">    private BoxCollider2D coll;     // ä½¿ç”¨BoxColliderå¯ä»¥ç›´æ¥è·å¾—å…¶ä¸­çš„sizeã€offsetå‚æ•°</span><br><span class="line">    </span><br><span class="line">    [Header(&quot;ç§»åŠ¨å‚æ•°&quot;)]</span><br><span class="line">    public float speed = 8f;</span><br><span class="line">    public float crouchSpeedDivisor = 3f;   // è¹²ä¸‹æ—¶çš„é€Ÿåº¦å‡ç¼“é‡</span><br><span class="line"></span><br><span class="line">    [Header(&quot;è·³è·ƒå‚æ•°&quot;)]</span><br><span class="line">    public float jumpForce = 6.3f;          // è·³è·ƒåŠ›</span><br><span class="line">    public float jumpHoldForce = 1.9f;      // é•¿æŒ‰è·³è·ƒçš„åŠ›</span><br><span class="line">    public float jumpHoldDuration = 0.1f;   // é•¿æŒ‰è·³è·ƒåŠ æˆ</span><br><span class="line">    public float crouchJumpBoost = 2.5f;    // ä¸‹è¹²è·³è·ƒçš„åŠ æˆ</span><br><span class="line"></span><br><span class="line">    [Header(&quot;çŠ¶æ€&quot;)]</span><br><span class="line">    public bool isCrouch;   // æ˜¯å¦ä¸‹è¹²</span><br><span class="line">    public bool isOnGround; // æ˜¯å¦æ¥è§¦åœ°é¢</span><br><span class="line">    public bool isJump;     // æ˜¯å¦è·³è·ƒ</span><br><span class="line"></span><br><span class="line">    [Header(&quot;ç¯å¢ƒæ£€æµ‹&quot;)]</span><br><span class="line">    public LayerMask groundLayer;   // åœ°é¢å±‚</span><br><span class="line"></span><br><span class="line">    float xVelocity;    // è½´é€Ÿåº¦</span><br><span class="line">    float jumpTime;     // è·³è·ƒæ—¶é—´ï¼Œä¸durationç›¸å…³</span><br><span class="line"></span><br><span class="line">    // æŒ‰é”®</span><br><span class="line">    bool jumpPressed, jumpHeld, crouchHeld;</span><br><span class="line"></span><br><span class="line">    // ç¢°æ’ä½“å°ºå¯¸ (ç«™ç«‹ã€ä¸‹è¹²æ—¶çš„å¤§å°ã€ä½ç½®)</span><br><span class="line">    Vector2 colliderStandSize, colliderStandOffset,colliderCrouchSize, colliderCrouchOffset;</span><br><span class="line"></span><br><span class="line">    // åˆå§‹åŒ–å‚æ•°</span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        // rigidbody,collider</span><br><span class="line">        rb = GetComponent&lt;Rigidbody2D&gt;();</span><br><span class="line">        coll = GetComponent&lt;BoxCollider2D&gt;();</span><br><span class="line"></span><br><span class="line">        // ç¢°æ’ä½“å°ºå¯¸</span><br><span class="line">        colliderStandSize = coll.size;</span><br><span class="line">        colliderStandOffset = coll.offset;</span><br><span class="line">        colliderCrouchSize = new Vector2(coll.size.x, coll.size.y / 2f);</span><br><span class="line">        colliderCrouchOffset = new Vector2(coll.offset.x, coll.offset.y / 2f);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // è·å–GetButtonæœ€å¥½æ”¾åœ¨æ­¤å‡½æ•°ä¸­</span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        // GetButtonå‚æ•°å¯¹åº”Project Setting -&gt; Input Managerçš„è®¾ç½®</span><br><span class="line">        jumpPressed = Input.GetButtonDown(&quot;Jump&quot;);</span><br><span class="line">        jumpHeld = Input.GetButton(&quot;Jump&quot;);</span><br><span class="line">        crouchHeld = Input.GetButton(&quot;Crouch&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // å›ºå®šå¸§é€Ÿç‡ä¸‹æ¯å¸§éƒ½è°ƒç”¨è¯¥å‡½æ•°</span><br><span class="line">    private void FixedUpdate()</span><br><span class="line">    &#123;</span><br><span class="line">        // ç›¸å…³ç‰©ç†æ§åˆ¶</span><br><span class="line">        GroundMovement();</span><br><span class="line">        PhysicsCheck();</span><br><span class="line">        MidAirMovement();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ç¯å¢ƒæ£€æµ‹</span><br><span class="line">    void PhysicsCheck()</span><br><span class="line">    &#123;</span><br><span class="line">        // æ˜¯å¦æ¥è§¦åœ°é¢å±‚</span><br><span class="line">        if (coll.IsTouchingLayers(groundLayer))</span><br><span class="line">        &#123;</span><br><span class="line">            isOnGround = true;</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            isOnGround = false;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ§åˆ¶è§’è‰²å·¦å³ç§»åŠ¨</span><br><span class="line">    void GroundMovement()</span><br><span class="line">    &#123;</span><br><span class="line">        // è·å–é”®ç›˜è¾“å…¥</span><br><span class="line">        xVelocity = Input.GetAxis(&quot;Horizontal&quot;);    // è¿”å›å€¼-1f ~ 1fï¼Œå½“ä¸æŒ‰ä¸‹æ–¹å‘é”®æ—¶ä¸º0</span><br><span class="line"></span><br><span class="line">        // åˆ¤æ–­æ˜¯å¦</span><br><span class="line">        if (crouchHeld &amp;&amp; !isCrouch &amp;&amp; isOnGround)</span><br><span class="line">        &#123;</span><br><span class="line">            // æŒ‰ä¸‹ä¸‹è¹²æŒ‰é’®ï¼Œä¸å¤„äºä¸‹è¹²çŠ¶æ€ï¼Œæ¥è§¦åœ°é¢  --ã€‹ è§’è‰²ä¸‹è¹²</span><br><span class="line">            Crouch();</span><br><span class="line">        &#125;</span><br><span class="line">        else if(!crouchHeld &amp;&amp; isCrouch)</span><br><span class="line">        &#123;</span><br><span class="line">            // æœªæŒ‰ä¸‹æŒ‰é’®å¹¶å¤„äºä¸‹è¹²çŠ¶æ€ --ã€‹ è§’è‰²èµ·èº«</span><br><span class="line">            StandUp();</span><br><span class="line">        &#125;</span><br><span class="line">        else if(!isOnGround &amp;&amp; isCrouch)</span><br><span class="line">        &#123;</span><br><span class="line">            // ä¸æ¥è§¦åœ°é¢ä½†æ˜¯å¤„äºä¸‹è¹²çŠ¶æ€  â€”â€”ã€‹ å¤„äºç©ºä¸­ --ã€‹ è§’è‰²èµ·èº«</span><br><span class="line">            StandUp();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // æ§åˆ¶è§’è‰²é€Ÿåº¦ä»¥ç§»åŠ¨</span><br><span class="line">        rb.velocity = new Vector2(xVelocity * speed, rb.velocity.y);</span><br><span class="line">        // æ§åˆ¶æœå‘</span><br><span class="line">        FlipDiraction();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ§åˆ¶è§’è‰²è·³è·ƒ</span><br><span class="line">    void MidAirMovement()</span><br><span class="line">    &#123;</span><br><span class="line">        if(jumpPressed &amp;&amp; isOnGround &amp;&amp; !isJump)</span><br><span class="line">        &#123;</span><br><span class="line">            // isOnGround &amp;&amp; !isJump é˜²æ­¢è¹­å¢™æ— é™è·³</span><br><span class="line">            // æŒ‰ä¸‹äº†è·³è·ƒï¼Œæ¥è§¦åœ°é¢ï¼Œæœªå¤„äºè·³è·ƒçŠ¶æ€ â€”â€”ã€‹ æ§åˆ¶è·³è·ƒ</span><br><span class="line"></span><br><span class="line">            // ä¸‹è¹²çŠ¶æ€è·³è·ƒï¼Œæœ‰é¢å¤–åŠ›çš„åŠ æˆ</span><br><span class="line">            if (isCrouch)</span><br><span class="line">            &#123;</span><br><span class="line">                // æ§åˆ¶èµ·èº«</span><br><span class="line">                StandUp();</span><br><span class="line">                // æ·»åŠ é¢å¤–åŠ›</span><br><span class="line">                rb.AddForce(new Vector2(0f, crouchJumpBoost), ForceMode2D.Impulse);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            isJump = true;</span><br><span class="line">            isOnGround = false;</span><br><span class="line"></span><br><span class="line">            // è®¡ç®—è·³è·ƒæ—¶çš„æ—¶é—´ï¼ŒTime.timeè·å–æ¸¸æˆçœŸå®æŒç»­æ—¶é—´(ä¸æ–­å¢é•¿)</span><br><span class="line">            jumpTime = Time.time + jumpHoldDuration;</span><br><span class="line"></span><br><span class="line">            // ä¿®æ”¹rb.velocityä¹Ÿå¯ä»¥å®ç°</span><br><span class="line">            rb.AddForce(new Vector2(0f, jumpForce), ForceMode2D.Impulse);</span><br><span class="line">        &#125;</span><br><span class="line">        else if (isJump)</span><br><span class="line">        &#123;</span><br><span class="line">            // é•¿æŒ‰è·³è·ƒï¼Œè·å¾—é¢å¤–çš„åŠ›jumpHoldForceåŠ æˆ</span><br><span class="line">            if (jumpHeld)</span><br><span class="line">            &#123;</span><br><span class="line">                rb.AddForce(new Vector2(0f, jumpHoldForce), ForceMode2D.Impulse);</span><br><span class="line">            &#125;</span><br><span class="line">            // å½“Time.timeè·å–çš„æ—¶é—´æ¯”jumpTimeå¤§ï¼Œå³ä¹‹é—´çš„æ—¶é—´å·®å·²ç»å¤§äºjumpHoldDurationçš„å€¼æ—¶ï¼Œå³å¯æ¢å¤isJump</span><br><span class="line">            if (jumpTime &lt; Time.time)</span><br><span class="line">            &#123;</span><br><span class="line">                isJump = false;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ§åˆ¶è§’è‰²é¢å‘æ–¹å‘</span><br><span class="line">    void FlipDiraction()</span><br><span class="line">    &#123;</span><br><span class="line">        if(xVelocity &lt; 0)</span><br><span class="line">        &#123;</span><br><span class="line">            transform.localScale = new Vector2(-1, 1);</span><br><span class="line">        &#125;else if(xVelocity &gt; 0)</span><br><span class="line">        &#123;</span><br><span class="line">            transform.localScale = new Vector2(1, 1);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ§åˆ¶è§’è‰²ä¸‹è¹²</span><br><span class="line">    void Crouch()</span><br><span class="line">    &#123;</span><br><span class="line">        isCrouch = true;</span><br><span class="line">        // ä¸‹è¹²æ—¶é€Ÿåº¦å‡ç¼“</span><br><span class="line">        xVelocity /= crouchSpeedDivisor;</span><br><span class="line"></span><br><span class="line">        // æ”¹å˜colliderçš„å°ºå¯¸</span><br><span class="line">        coll.size = colliderCrouchSize;</span><br><span class="line">        coll.offset = colliderCrouchOffset;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ§åˆ¶è§’è‰²èµ·ç«‹</span><br><span class="line">    void StandUp()</span><br><span class="line">    &#123;</span><br><span class="line">        isCrouch = false;</span><br><span class="line"></span><br><span class="line">        // æ”¹å˜colliderçš„å°ºå¯¸</span><br><span class="line">        coll.size = colliderStandSize;</span><br><span class="line">        coll.offset = colliderStandOffset;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Raycastå°„çº¿æ£€æµ‹"><a href="#Raycastå°„çº¿æ£€æµ‹" class="headerlink" title="Raycastå°„çº¿æ£€æµ‹"></a>Raycastå°„çº¿æ£€æµ‹</h2><h3 id="å®ç°ç§»åŠ¨è·³è·ƒä¸‹è¹²æ£€æµ‹"><a href="#å®ç°ç§»åŠ¨è·³è·ƒä¸‹è¹²æ£€æµ‹" class="headerlink" title="å®ç°ç§»åŠ¨è·³è·ƒä¸‹è¹²æ£€æµ‹"></a>å®ç°ç§»åŠ¨è·³è·ƒä¸‹è¹²æ£€æµ‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class PlayerMovement : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    // é€šè¿‡ â€œHeaderâ€, â€œTooltipâ€ and â€œSpaceâ€ å±æ€§æ¥ç»„ç»‡Inspectorä¸­çš„å±æ€§æ˜¾ç¤ºï¼Œå³åœ¨Inspectorçª—å£ä¸Šæœ‰å°æ ‡é¢˜åˆ†åŒºæ˜¾ç¤º</span><br><span class="line">    </span><br><span class="line">    // rigidbody,collider</span><br><span class="line">    private Rigidbody2D rb;</span><br><span class="line">    private BoxCollider2D coll;     // ä½¿ç”¨BoxColliderå¯ä»¥ç›´æ¥è·å¾—å…¶ä¸­çš„sizeã€offsetå‚æ•°</span><br><span class="line">    </span><br><span class="line">    [Header(&quot;ç§»åŠ¨å‚æ•°&quot;)]</span><br><span class="line">    public float speed = 8f;</span><br><span class="line">    public float crouchSpeedDivisor = 3f;   // è¹²ä¸‹æ—¶çš„é€Ÿåº¦å‡ç¼“é‡</span><br><span class="line"></span><br><span class="line">    [Header(&quot;è·³è·ƒå‚æ•°&quot;)]</span><br><span class="line">    public float jumpForce = 6.3f;          // è·³è·ƒåŠ›</span><br><span class="line">    public float jumpHoldForce = 1.9f;      // é•¿æŒ‰è·³è·ƒçš„åŠ›</span><br><span class="line">    public float jumpHoldDuration = 0.1f;   // é•¿æŒ‰è·³è·ƒåŠ æˆ</span><br><span class="line">    public float crouchJumpBoost = 2.5f;    // ä¸‹è¹²è·³è·ƒçš„åŠ æˆ</span><br><span class="line"></span><br><span class="line">    [Header(&quot;çŠ¶æ€&quot;)]</span><br><span class="line">    public bool isCrouch;       // æ˜¯å¦ä¸‹è¹²</span><br><span class="line">    public bool isOnGround;     // æ˜¯å¦æ¥è§¦åœ°é¢</span><br><span class="line">    public bool isHeadBlocked;  // æ˜¯å¦å¤´é¡¶é®æŒ¡</span><br><span class="line">    public bool isJump;         // æ˜¯å¦è·³è·ƒ</span><br><span class="line"></span><br><span class="line">    [Header(&quot;ç¯å¢ƒæ£€æµ‹&quot;)]</span><br><span class="line">    public float footOffset = 0.35f;     // å•è„šçš„åç§»å€¼ï¼Œå³æ•´ä½“xoffsetçš„ä¸€åŠ</span><br><span class="line">    public float headClearance = 0.5f;  </span><br><span class="line">    public float groundDistance = 0.2f; </span><br><span class="line">    public LayerMask groundLayer;       // åœ°é¢å±‚</span><br><span class="line"></span><br><span class="line">    float xVelocity;    // è½´é€Ÿåº¦</span><br><span class="line">    float jumpTime;     // è·³è·ƒæ—¶é—´ï¼Œä¸durationç›¸å…³</span><br><span class="line"></span><br><span class="line">    // æŒ‰é”®</span><br><span class="line">    bool jumpPressed, jumpHeld, crouchHeld;</span><br><span class="line"></span><br><span class="line">    // ç¢°æ’ä½“å°ºå¯¸ (ç«™ç«‹ã€ä¸‹è¹²æ—¶çš„å¤§å°ã€ä½ç½®)</span><br><span class="line">    Vector2 colliderStandSize, colliderStandOffset,colliderCrouchSize, colliderCrouchOffset;</span><br><span class="line"></span><br><span class="line">    // åˆå§‹åŒ–å‚æ•°</span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        // rigidbody,collider</span><br><span class="line">        rb = GetComponent&lt;Rigidbody2D&gt;();</span><br><span class="line">        coll = GetComponent&lt;BoxCollider2D&gt;();</span><br><span class="line"></span><br><span class="line">        // ç¢°æ’ä½“å°ºå¯¸</span><br><span class="line">        colliderStandSize = coll.size;</span><br><span class="line">        colliderStandOffset = coll.offset;</span><br><span class="line">        colliderCrouchSize = new Vector2(coll.size.x, coll.size.y / 2f);</span><br><span class="line">        colliderCrouchOffset = new Vector2(coll.offset.x, coll.offset.y / 2f);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // è·å–GetButtonæœ€å¥½æ”¾åœ¨æ­¤å‡½æ•°ä¸­</span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        // GetButtonå‚æ•°å¯¹åº”Project Setting -&gt; Input Managerçš„è®¾ç½®</span><br><span class="line">        jumpPressed = Input.GetButtonDown(&quot;Jump&quot;);</span><br><span class="line">        jumpHeld = Input.GetButton(&quot;Jump&quot;);</span><br><span class="line">        crouchHeld = Input.GetButton(&quot;Crouch&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // å›ºå®šå¸§é€Ÿç‡ä¸‹æ¯å¸§éƒ½è°ƒç”¨è¯¥å‡½æ•°</span><br><span class="line">    private void FixedUpdate()</span><br><span class="line">    &#123;</span><br><span class="line">        // ç›¸å…³ç‰©ç†æ§åˆ¶</span><br><span class="line">        GroundMovement();</span><br><span class="line">        PhysicsCheck();</span><br><span class="line">        MidAirMovement();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ç¯å¢ƒæ£€æµ‹</span><br><span class="line">    void PhysicsCheck()</span><br><span class="line">    &#123;</span><br><span class="line">        /* // å½“å‰è§’è‰²çš„ä½ç½®å’Œå•è„šå·¦å³ç‚¹çš„offset</span><br><span class="line">         Vector2 pos = transform.position;</span><br><span class="line">         Vector2 offset = new Vector2(-footOffset, 0f);</span><br><span class="line">         // leftCheck/rightCheckå³å•è„šå·¦å³ç‚¹æ£€æµ‹</span><br><span class="line">         RaycastHit2D leftCheck = Physics2D.Raycast(pos+offset,Vector2.down,groundDistance,groundLayer);</span><br><span class="line">         // æ˜¾ç¤ºå°„çº¿</span><br><span class="line">         Debug.DrawRay(pos + offset, Vector2.down, Color.red, 0.2f);</span><br><span class="line"> */</span><br><span class="line">        // 1ã€å·¦å³è„šæ£€æµ‹æ˜¯å¦æ¥è§¦åœ°é¢</span><br><span class="line">        // è·å¾—å°„çº¿æ£€æµ‹</span><br><span class="line">        RaycastHit2D leftCheck = Raycast(new Vector2(-footOffset, 0f), Vector2.down, groundDistance, groundLayer);</span><br><span class="line">        RaycastHit2D rightCheck = Raycast(new Vector2(footOffset, 0f), Vector2.down, groundDistance, groundLayer);</span><br><span class="line"></span><br><span class="line">        // æ˜¯å¦æ¥è§¦åœ°é¢å±‚</span><br><span class="line">        //if (coll.IsTouchingLayers(groundLayer))</span><br><span class="line">        if (leftCheck || rightCheck)</span><br><span class="line">        &#123;</span><br><span class="line">            isOnGround = true;</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            isOnGround = false;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // 2ã€å¤´é¡¶æ£€æµ‹æ˜¯å¦æœ‰é˜»æŒ¡</span><br><span class="line">        RaycastHit2D headCheck = Raycast(new Vector2(0f, coll.size.y), Vector2.up, headClearance, groundLayer);</span><br><span class="line">        if (headCheck)</span><br><span class="line">        &#123;</span><br><span class="line">            isHeadBlocked = true;</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            isHeadBlocked = false;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ§åˆ¶è§’è‰²å·¦å³ç§»åŠ¨</span><br><span class="line">    void GroundMovement()</span><br><span class="line">    &#123;</span><br><span class="line">        // è·å–é”®ç›˜è¾“å…¥</span><br><span class="line">        xVelocity = Input.GetAxis(&quot;Horizontal&quot;);    // è¿”å›å€¼-1f ~ 1fï¼Œå½“ä¸æŒ‰ä¸‹æ–¹å‘é”®æ—¶ä¸º0</span><br><span class="line"></span><br><span class="line">        // åˆ¤æ–­æ˜¯å¦</span><br><span class="line">        if (crouchHeld &amp;&amp; !isCrouch &amp;&amp; isOnGround)</span><br><span class="line">        &#123;</span><br><span class="line">            // æŒ‰ä¸‹ä¸‹è¹²æŒ‰é’®ï¼Œä¸å¤„äºä¸‹è¹²çŠ¶æ€ï¼Œæ¥è§¦åœ°é¢  --ã€‹ è§’è‰²ä¸‹è¹²</span><br><span class="line">            Crouch();</span><br><span class="line">        &#125;</span><br><span class="line">        else if(!crouchHeld &amp;&amp; isCrouch &amp;&amp; !isHeadBlocked)</span><br><span class="line">        &#123;</span><br><span class="line">            // æœªæŒ‰ä¸‹æŒ‰é’®,å¤„äºä¸‹è¹²çŠ¶æ€,å¤´é¡¶æ— é®æŒ¡ --ã€‹ è§’è‰²èµ·èº«</span><br><span class="line">            StandUp();</span><br><span class="line">        &#125;</span><br><span class="line">        else if(!isOnGround &amp;&amp; isCrouch)</span><br><span class="line">        &#123;</span><br><span class="line">            // ä¸æ¥è§¦åœ°é¢ä½†æ˜¯å¤„äºä¸‹è¹²çŠ¶æ€  â€”â€”ã€‹ å¤„äºç©ºä¸­ --ã€‹ è§’è‰²èµ·èº«</span><br><span class="line">            StandUp();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // æ§åˆ¶è§’è‰²é€Ÿåº¦ä»¥ç§»åŠ¨</span><br><span class="line">        rb.velocity = new Vector2(xVelocity * speed, rb.velocity.y);</span><br><span class="line">        // æ§åˆ¶æœå‘</span><br><span class="line">        FlipDiraction();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ§åˆ¶è§’è‰²è·³è·ƒ</span><br><span class="line">    void MidAirMovement()</span><br><span class="line">    &#123;</span><br><span class="line">        if(jumpPressed &amp;&amp; isOnGround &amp;&amp; !isJump)</span><br><span class="line">        &#123;</span><br><span class="line">            // isOnGround &amp;&amp; !isJump é˜²æ­¢è¹­å¢™æ— é™è·³</span><br><span class="line">            // æŒ‰ä¸‹äº†è·³è·ƒï¼Œæ¥è§¦åœ°é¢ï¼Œæœªå¤„äºè·³è·ƒçŠ¶æ€ â€”â€”ã€‹ æ§åˆ¶è·³è·ƒ</span><br><span class="line"></span><br><span class="line">            // ä¸‹è¹²çŠ¶æ€è·³è·ƒï¼Œæœ‰é¢å¤–åŠ›çš„åŠ æˆ</span><br><span class="line">            if (isCrouch)</span><br><span class="line">            &#123;</span><br><span class="line">                // æ§åˆ¶èµ·èº«</span><br><span class="line">                StandUp();</span><br><span class="line">                // æ·»åŠ é¢å¤–åŠ›</span><br><span class="line">                rb.AddForce(new Vector2(0f, crouchJumpBoost), ForceMode2D.Impulse);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            isJump = true;</span><br><span class="line">            isOnGround = false;</span><br><span class="line"></span><br><span class="line">            // è®¡ç®—è·³è·ƒæ—¶çš„æ—¶é—´ï¼ŒTime.timeè·å–æ¸¸æˆçœŸå®æŒç»­æ—¶é—´(ä¸æ–­å¢é•¿)</span><br><span class="line">            jumpTime = Time.time + jumpHoldDuration;</span><br><span class="line"></span><br><span class="line">            // ä¿®æ”¹rb.velocityä¹Ÿå¯ä»¥å®ç°</span><br><span class="line">            rb.AddForce(new Vector2(0f, jumpForce), ForceMode2D.Impulse);</span><br><span class="line">        &#125;</span><br><span class="line">        else if (isJump)</span><br><span class="line">        &#123;</span><br><span class="line">            // é•¿æŒ‰è·³è·ƒï¼Œè·å¾—é¢å¤–çš„åŠ›jumpHoldForceåŠ æˆ</span><br><span class="line">            if (jumpHeld)</span><br><span class="line">            &#123;</span><br><span class="line">                rb.AddForce(new Vector2(0f, jumpHoldForce), ForceMode2D.Impulse);</span><br><span class="line">            &#125;</span><br><span class="line">            // å½“Time.timeè·å–çš„æ—¶é—´æ¯”jumpTimeå¤§ï¼Œå³ä¹‹é—´çš„æ—¶é—´å·®å·²ç»å¤§äºjumpHoldDurationçš„å€¼æ—¶ï¼Œå³å¯æ¢å¤isJump</span><br><span class="line">            if (jumpTime &lt; Time.time)</span><br><span class="line">            &#123;</span><br><span class="line">                isJump = false;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ§åˆ¶è§’è‰²é¢å‘æ–¹å‘</span><br><span class="line">    void FlipDiraction()</span><br><span class="line">    &#123;</span><br><span class="line">        if(xVelocity &lt; 0)</span><br><span class="line">        &#123;</span><br><span class="line">            transform.localScale = new Vector2(-1, 1);</span><br><span class="line">        &#125;else if(xVelocity &gt; 0)</span><br><span class="line">        &#123;</span><br><span class="line">            transform.localScale = new Vector2(1, 1);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ§åˆ¶è§’è‰²ä¸‹è¹²</span><br><span class="line">    void Crouch()</span><br><span class="line">    &#123;</span><br><span class="line">        isCrouch = true;</span><br><span class="line">        // ä¸‹è¹²æ—¶é€Ÿåº¦å‡ç¼“</span><br><span class="line">        xVelocity /= crouchSpeedDivisor;</span><br><span class="line"></span><br><span class="line">        // æ”¹å˜colliderçš„å°ºå¯¸</span><br><span class="line">        coll.size = colliderCrouchSize;</span><br><span class="line">        coll.offset = colliderCrouchOffset;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ§åˆ¶è§’è‰²èµ·ç«‹</span><br><span class="line">    void StandUp()</span><br><span class="line">    &#123;</span><br><span class="line">        isCrouch = false;</span><br><span class="line"></span><br><span class="line">        // æ”¹å˜colliderçš„å°ºå¯¸</span><br><span class="line">        coll.size = colliderStandSize;</span><br><span class="line">        coll.offset = colliderStandOffset;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // å¢å¼ºRaycastå‡½æ•°</span><br><span class="line">    RaycastHit2D Raycast(Vector2 offset, Vector2 rayDirection, float length, LayerMask layer)</span><br><span class="line">    &#123;</span><br><span class="line">        // å½“å‰è§’è‰²çš„ä½ç½®</span><br><span class="line">        Vector2 pos = transform.position;</span><br><span class="line">        // åˆ›å»ºå°„çº¿</span><br><span class="line">        RaycastHit2D hit = Physics2D.Raycast(pos + offset, rayDirection, length, layer);</span><br><span class="line"></span><br><span class="line">        // æ˜¾ç¤ºå°„çº¿,hitè¿”å›æ˜¯å¦ç¢°æ’å¸ƒå°”å€¼</span><br><span class="line">        Color color = hit ? Color.red : Color.green;</span><br><span class="line">        Debug.DrawRay(pos + offset, rayDirection, color);</span><br><span class="line"></span><br><span class="line">        return hit;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å®ç°æ‚¬æŒ‚åŠŸèƒ½ä»¥åŠä¸‹è¹²è·³è·ƒçš„ä¼˜åŒ–"><a href="#å®ç°æ‚¬æŒ‚åŠŸèƒ½ä»¥åŠä¸‹è¹²è·³è·ƒçš„ä¼˜åŒ–" class="headerlink" title="å®ç°æ‚¬æŒ‚åŠŸèƒ½ä»¥åŠä¸‹è¹²è·³è·ƒçš„ä¼˜åŒ–"></a>å®ç°æ‚¬æŒ‚åŠŸèƒ½ä»¥åŠä¸‹è¹²è·³è·ƒçš„ä¼˜åŒ–</h3><blockquote><p>åˆ¤æ–­Raycastå°„çº¿æ˜¯å¦ä¸ºTRUEçš„æ¡ä»¶ï¼šä¸ºå°„çº¿ä¸­æœ‰æ¥è§¦ç¢°æ’ä½“ï¼Œä½†æ˜¯å°„çº¿èµ·ç‚¹æ²¡æœ‰æ¥è§¦ç¢°æ’ä½“ï¼›</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class PlayerMovement : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    // é€šè¿‡ â€œHeaderâ€, â€œTooltipâ€ and â€œSpaceâ€ å±æ€§æ¥ç»„ç»‡Inspectorä¸­çš„å±æ€§æ˜¾ç¤ºï¼Œå³åœ¨Inspectorçª—å£ä¸Šæœ‰å°æ ‡é¢˜åˆ†åŒºæ˜¾ç¤º</span><br><span class="line">    </span><br><span class="line">    // rigidbody,collider</span><br><span class="line">    private Rigidbody2D rb;</span><br><span class="line">    private BoxCollider2D coll;     // ä½¿ç”¨BoxColliderå¯ä»¥ç›´æ¥è·å¾—å…¶ä¸­çš„sizeã€offsetå‚æ•°</span><br><span class="line">    </span><br><span class="line">    [Header(&quot;ç§»åŠ¨å‚æ•°&quot;)]</span><br><span class="line">    public float speed = 8f;</span><br><span class="line">    public float crouchSpeedDivisor = 3f;   // è¹²ä¸‹æ—¶çš„é€Ÿåº¦å‡ç¼“é‡</span><br><span class="line"></span><br><span class="line">    [Header(&quot;è·³è·ƒå‚æ•°&quot;)]</span><br><span class="line">    public float jumpForce = 6.3f;          // è·³è·ƒåŠ›</span><br><span class="line">    public float jumpHoldForce = 1.9f;      // é•¿æŒ‰è·³è·ƒçš„åŠ›</span><br><span class="line">    public float jumpHoldDuration = 0.1f;   // é•¿æŒ‰è·³è·ƒåŠ æˆ</span><br><span class="line">    public float crouchJumpBoost = 2.5f;    // ä¸‹è¹²è·³è·ƒçš„åŠ æˆ</span><br><span class="line">    public float hangingJumpForce = 15f;     // æ‚¬æŒ‚æ—¶è·³è·ƒçš„åŠ›</span><br><span class="line"></span><br><span class="line">    [Header(&quot;çŠ¶æ€&quot;)]</span><br><span class="line">    public bool isCrouch;       // æ˜¯å¦ä¸‹è¹²</span><br><span class="line">    public bool isOnGround;     // æ˜¯å¦æ¥è§¦åœ°é¢</span><br><span class="line">    public bool isHeadBlocked;  // æ˜¯å¦å¤´é¡¶é®æŒ¡</span><br><span class="line">    public bool isJump;         // æ˜¯å¦è·³è·ƒ</span><br><span class="line">    public bool isHanging;      // æ˜¯å¦æ‚¬æŒ‚</span><br><span class="line"></span><br><span class="line">    [Header(&quot;ç¯å¢ƒæ£€æµ‹&quot;)]</span><br><span class="line">    public LayerMask groundLayer;       // åœ°é¢å±‚</span><br><span class="line">    public float headClearance = 0.25f;  </span><br><span class="line">    public float groundDistance = 0.2f; </span><br><span class="line">    public float grabDistance = 0.4f;   // æŠ“å–è·ç¦»</span><br><span class="line">    public float reachOffset = 0.7f;    // æ¥è§¦åç§»å€¼</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    float footOffset;     // å•è„šçš„åç§»å€¼ï¼Œå³æ•´ä½“xsizeçš„ä¸€åŠ</span><br><span class="line">    float xVelocity;    // è½´åŠ é€Ÿåº¦</span><br><span class="line">    float jumpTime;     // è·³è·ƒæ—¶é—´ï¼Œä¸durationç›¸å…³</span><br><span class="line">    float playerHeight; // è§’è‰²é«˜åº¦</span><br><span class="line">    float eyeHeight;      // è§’è‰²çœ¼ç›é«˜åº¦</span><br><span class="line"></span><br><span class="line">    // æŒ‰é”®</span><br><span class="line">    bool jumpPressed, jumpHeld, crouchHeld, crouchPressed;</span><br><span class="line"></span><br><span class="line">    // ç¢°æ’ä½“å°ºå¯¸ (ç«™ç«‹ã€ä¸‹è¹²æ—¶çš„å¤§å°ã€ä½ç½®)</span><br><span class="line">    Vector2 colliderStandSize, colliderStandOffset,colliderCrouchSize, colliderCrouchOffset;</span><br><span class="line"></span><br><span class="line">    // åˆå§‹åŒ–å‚æ•°</span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        // rigidbody,collider</span><br><span class="line">        rb = GetComponent&lt;Rigidbody2D&gt;();</span><br><span class="line">        coll = GetComponent&lt;BoxCollider2D&gt;();</span><br><span class="line"></span><br><span class="line">        footOffset = coll.size.x / 2;</span><br><span class="line">        playerHeight = coll.size.y;</span><br><span class="line">        eyeHeight = playerHeight - 0.4f;</span><br><span class="line"></span><br><span class="line">        // ç¢°æ’ä½“å°ºå¯¸</span><br><span class="line">        colliderStandSize = coll.size;</span><br><span class="line">        colliderStandOffset = coll.offset;</span><br><span class="line">        colliderCrouchSize = new Vector2(coll.size.x, coll.size.y / 2f);</span><br><span class="line">        colliderCrouchOffset = new Vector2(coll.offset.x, coll.offset.y / 2f);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // è·å–GetButtonæœ€å¥½æ”¾åœ¨æ­¤å‡½æ•°ä¸­</span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        // GetButtonå‚æ•°å¯¹åº”Project Setting -&gt; Input Managerçš„è®¾ç½®</span><br><span class="line">        jumpPressed = Input.GetButtonDown(&quot;Jump&quot;);</span><br><span class="line">        jumpHeld = Input.GetButton(&quot;Jump&quot;);</span><br><span class="line">        crouchHeld = Input.GetButton(&quot;Crouch&quot;);</span><br><span class="line">        crouchPressed = Input.GetButtonDown(&quot;Crouch&quot;);</span><br><span class="line"></span><br><span class="line">        playerHeight = coll.size.y;</span><br><span class="line">        eyeHeight = playerHeight - 0.4f;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // å›ºå®šå¸§é€Ÿç‡ä¸‹æ¯å¸§éƒ½è°ƒç”¨è¯¥å‡½æ•°</span><br><span class="line">    private void FixedUpdate()</span><br><span class="line">    &#123;</span><br><span class="line">        // ç›¸å…³ç‰©ç†æ§åˆ¶</span><br><span class="line">        GroundMovement();</span><br><span class="line">        PhysicsCheck();</span><br><span class="line">        MidAirMovement();</span><br><span class="line">        CrouchMovement();</span><br><span class="line">        HangdingMovement();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ç¯å¢ƒæ£€æµ‹</span><br><span class="line">    void PhysicsCheck()</span><br><span class="line">    &#123;</span><br><span class="line">        /* // å½“å‰è§’è‰²çš„ä½ç½®å’Œå•è„šå·¦å³ç‚¹çš„offset</span><br><span class="line">         Vector2 pos = transform.position;</span><br><span class="line">         Vector2 offset = new Vector2(-footOffset, 0f);</span><br><span class="line">         // leftCheck/rightCheckå³å•è„šå·¦å³ç‚¹æ£€æµ‹</span><br><span class="line">         RaycastHit2D leftCheck = Physics2D.Raycast(pos+offset,Vector2.down,groundDistance,groundLayer);</span><br><span class="line">         // æ˜¾ç¤ºå°„çº¿</span><br><span class="line">         Debug.DrawRay(pos + offset, Vector2.down, Color.red, 0.2f);</span><br><span class="line"> */</span><br><span class="line">        // 1ã€å·¦å³è„šå°„çº¿æ£€æµ‹ æ˜¯å¦æ¥è§¦åœ°é¢</span><br><span class="line">        // è·å¾—å°„çº¿æ£€æµ‹</span><br><span class="line">        RaycastHit2D leftCheck = Raycast(new Vector2(-footOffset, 0f), Vector2.down, groundDistance, groundLayer);</span><br><span class="line">        RaycastHit2D rightCheck = Raycast(new Vector2(footOffset, 0f), Vector2.down, groundDistance, groundLayer);</span><br><span class="line"></span><br><span class="line">        // æ˜¯å¦æ¥è§¦åœ°é¢å±‚</span><br><span class="line">        //if (coll.IsTouchingLayers(groundLayer))</span><br><span class="line">        if (leftCheck || rightCheck)</span><br><span class="line">            isOnGround = true;</span><br><span class="line">        else</span><br><span class="line">            isOnGround = false;</span><br><span class="line"></span><br><span class="line">        // 2ã€å¤´é¡¶å°„çº¿æ£€æµ‹ æ˜¯å¦æœ‰é˜»æŒ¡</span><br><span class="line">        RaycastHit2D headCheck = Raycast(new Vector2(0f, playerHeight), Vector2.up, headClearance, groundLayer);</span><br><span class="line">        if (headCheck)</span><br><span class="line">            isHeadBlocked = true;</span><br><span class="line">        else</span><br><span class="line">            isHeadBlocked = false;</span><br><span class="line"></span><br><span class="line">        // 3ã€å¤´å‰æ–¹åŒºåŸŸå°„çº¿æ£€æµ‹ æ˜¯å¦æ‚¬æŒ‚</span><br><span class="line">        float diraction = transform.localScale.x;</span><br><span class="line">        RaycastHit2D blockedCheck = Raycast(new Vector2(footOffset * diraction, playerHeight), new Vector2(diraction,0f), grabDistance, groundLayer);</span><br><span class="line">        RaycastHit2D wallCheck = Raycast(new Vector2(footOffset * diraction, eyeHeight), new Vector2(diraction, 0f), grabDistance, groundLayer);</span><br><span class="line">        RaycastHit2D ledgeCheck = Raycast(new Vector2(reachOffset * diraction, playerHeight), Vector2.down, grabDistance, groundLayer);</span><br><span class="line"></span><br><span class="line">        if (!isOnGround &amp;&amp; rb.velocity.y &lt; 0f &amp;&amp; ledgeCheck &amp;&amp; wallCheck &amp;&amp; !blockedCheck)</span><br><span class="line">        &#123;</span><br><span class="line">            // å°†playerå›ºå®šåœ¨ä¸€ä¸ªä½ç½®</span><br><span class="line">            Vector3 pos = transform.position;</span><br><span class="line">            pos.x += (wallCheck.distance - 0.05f) * diraction;    // RaycastHit2Dä¸‹çš„distanceä¸ºèµ·å§‹ç‚¹åˆ°æ¥è§¦ç‚¹çš„è·ç¦»</span><br><span class="line">            pos.y -= ledgeCheck.distance;</span><br><span class="line">            transform.position = pos;</span><br><span class="line"></span><br><span class="line">            rb.bodyType = RigidbodyType2D.Static;   // è®©è§’è‰²é™æ­¢</span><br><span class="line">            isHanging = true;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ§åˆ¶è§’è‰²å·¦å³ç§»åŠ¨</span><br><span class="line">    void GroundMovement()</span><br><span class="line">    &#123;</span><br><span class="line">        // æ‚¬æŒ‚æ—¶ä¸å…è®¸ç§»åŠ¨</span><br><span class="line">        if (isHanging)</span><br><span class="line">            return;</span><br><span class="line"></span><br><span class="line">        // è·å–é”®ç›˜è¾“å…¥</span><br><span class="line">        xVelocity = Input.GetAxis(&quot;Horizontal&quot;);    // è¿”å›å€¼-1f ~ 1fï¼Œå½“ä¸æŒ‰ä¸‹æ–¹å‘é”®æ—¶ä¸º0</span><br><span class="line">        // æ§åˆ¶è§’è‰²é€Ÿåº¦ä»¥ç§»åŠ¨</span><br><span class="line">        rb.velocity = new Vector2(xVelocity * speed, rb.velocity.y);</span><br><span class="line">        // æ§åˆ¶æœå‘</span><br><span class="line">        FlipDiraction();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ§åˆ¶è§’è‰²ä¸‹è¹²èµ·ç«‹</span><br><span class="line">    void CrouchMovement()</span><br><span class="line">    &#123;</span><br><span class="line">        if (crouchHeld &amp;&amp; !isCrouch &amp;&amp; isOnGround)</span><br><span class="line">        &#123;</span><br><span class="line">            // æŒ‰ä¸‹ä¸‹è¹²æŒ‰é’®ï¼Œä¸å¤„äºä¸‹è¹²çŠ¶æ€ï¼Œæ¥è§¦åœ°é¢  --ã€‹ è§’è‰²ä¸‹è¹²</span><br><span class="line">            Crouch();</span><br><span class="line">        &#125;</span><br><span class="line">        else if (!crouchHeld &amp;&amp; isCrouch &amp;&amp; !isHeadBlocked)</span><br><span class="line">        &#123;</span><br><span class="line">            // æœªæŒ‰ä¸‹æŒ‰é’®,å¤„äºä¸‹è¹²çŠ¶æ€,å¤´é¡¶æ— é®æŒ¡ --ã€‹ è§’è‰²èµ·èº«</span><br><span class="line">            StandUp();</span><br><span class="line">        &#125;</span><br><span class="line">        else if (!isOnGround &amp;&amp; isCrouch)</span><br><span class="line">        &#123;</span><br><span class="line">            // ä¸æ¥è§¦åœ°é¢ä½†æ˜¯å¤„äºä¸‹è¹²çŠ¶æ€  â€”â€”ã€‹ å¤„äºç©ºä¸­ --ã€‹ è§’è‰²èµ·èº«</span><br><span class="line">            StandUp();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ§åˆ¶è§’è‰²è·³è·ƒ</span><br><span class="line">    void MidAirMovement()</span><br><span class="line">    &#123;</span><br><span class="line">        // è·³è·ƒæ£€æµ‹</span><br><span class="line">        if(jumpPressed &amp;&amp; isOnGround &amp;&amp; !isJump &amp;&amp; !isHeadBlocked)</span><br><span class="line">        &#123;</span><br><span class="line">            // isOnGround &amp;&amp; !isJump é˜²æ­¢è¹­å¢™æ— é™è·³</span><br><span class="line">            // æŒ‰ä¸‹äº†è·³è·ƒï¼Œæ¥è§¦åœ°é¢ï¼Œæœªå¤„äºè·³è·ƒçŠ¶æ€ â€”â€”ã€‹ æ§åˆ¶è·³è·ƒ</span><br><span class="line"></span><br><span class="line">            // ä¸‹è¹²çŠ¶æ€è·³è·ƒï¼Œæœ‰é¢å¤–åŠ›çš„åŠ æˆ</span><br><span class="line">            if (isCrouch &amp;&amp; !isHeadBlocked)</span><br><span class="line">            &#123;</span><br><span class="line">                // æ§åˆ¶èµ·èº«</span><br><span class="line">                StandUp();</span><br><span class="line">                // æ·»åŠ é¢å¤–åŠ›</span><br><span class="line">                rb.AddForce(new Vector2(0f, crouchJumpBoost), ForceMode2D.Impulse);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            isJump = true;</span><br><span class="line">            isOnGround = false;</span><br><span class="line"></span><br><span class="line">            // è®¡ç®—è·³è·ƒæ—¶çš„æ—¶é—´ï¼ŒTime.timeè·å–æ¸¸æˆçœŸå®æŒç»­æ—¶é—´(ä¸æ–­å¢é•¿)</span><br><span class="line">            jumpTime = Time.time + jumpHoldDuration;</span><br><span class="line"></span><br><span class="line">            // ä¿®æ”¹rb.velocityä¹Ÿå¯ä»¥å®ç°</span><br><span class="line">            rb.AddForce(new Vector2(0f, jumpForce), ForceMode2D.Impulse);</span><br><span class="line">        &#125;</span><br><span class="line">        else if (isJump)</span><br><span class="line">        &#123;</span><br><span class="line">            // é•¿æŒ‰è·³è·ƒï¼Œè·å¾—é¢å¤–çš„åŠ›jumpHoldForceåŠ æˆ</span><br><span class="line">            if (jumpHeld)</span><br><span class="line">            &#123;</span><br><span class="line">                rb.AddForce(new Vector2(0f, jumpHoldForce), ForceMode2D.Impulse);</span><br><span class="line">            &#125;</span><br><span class="line">            // å½“Time.timeè·å–çš„æ—¶é—´æ¯”jumpTimeå¤§ï¼Œå³ä¹‹é—´çš„æ—¶é—´å·®å·²ç»å¤§äºjumpHoldDurationçš„å€¼æ—¶ï¼Œå³å¯æ¢å¤isJump</span><br><span class="line">            if (jumpTime &lt; Time.time)</span><br><span class="line">            &#123;</span><br><span class="line">                isJump = false;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ§åˆ¶è§’è‰²æ‚¬æŒ‚æ—¶è·³è·ƒä¸ä¸‹è¹²</span><br><span class="line">    void HangdingMovement()</span><br><span class="line">    &#123;</span><br><span class="line">        // æ‚¬æŒ‚æ—¶æ£€æµ‹</span><br><span class="line">        if (isHanging)</span><br><span class="line">        &#123;</span><br><span class="line">            if (jumpPressed)</span><br><span class="line">            &#123;</span><br><span class="line">                rb.bodyType = RigidbodyType2D.Dynamic;</span><br><span class="line">                rb.AddForce(new Vector2(0f, hangingJumpForce), ForceMode2D.Impulse);</span><br><span class="line">                isHanging = false;</span><br><span class="line">            &#125;</span><br><span class="line">            else if (crouchPressed)</span><br><span class="line">            &#123;</span><br><span class="line">                rb.bodyType = RigidbodyType2D.Dynamic;</span><br><span class="line">                isHanging = false;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ§åˆ¶è§’è‰²é¢å‘æ–¹å‘</span><br><span class="line">    void FlipDiraction()</span><br><span class="line">    &#123;</span><br><span class="line">        if(xVelocity &lt; 0)</span><br><span class="line">        &#123;</span><br><span class="line">            transform.localScale = new Vector2(-1, 1);</span><br><span class="line">        &#125;else if(xVelocity &gt; 0)</span><br><span class="line">        &#123;</span><br><span class="line">            transform.localScale = new Vector2(1, 1);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ§åˆ¶è§’è‰²ä¸‹è¹²</span><br><span class="line">    void Crouch()</span><br><span class="line">    &#123;</span><br><span class="line">        isCrouch = true;</span><br><span class="line">        // ä¸‹è¹²æ—¶é€Ÿåº¦å‡ç¼“</span><br><span class="line">        xVelocity /= crouchSpeedDivisor;</span><br><span class="line"></span><br><span class="line">        // æ”¹å˜colliderçš„å°ºå¯¸</span><br><span class="line">        coll.size = colliderCrouchSize;</span><br><span class="line">        coll.offset = colliderCrouchOffset;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ§åˆ¶è§’è‰²èµ·ç«‹</span><br><span class="line">    void StandUp()</span><br><span class="line">    &#123;</span><br><span class="line">        isCrouch = false;</span><br><span class="line"></span><br><span class="line">        // æ”¹å˜colliderçš„å°ºå¯¸</span><br><span class="line">        coll.size = colliderStandSize;</span><br><span class="line">        coll.offset = colliderStandOffset;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // å¢å¼ºRaycastå‡½æ•°</span><br><span class="line">    RaycastHit2D Raycast(Vector2 offset, Vector2 rayDirection, float length, LayerMask layer)</span><br><span class="line">    &#123;</span><br><span class="line">        // å½“å‰è§’è‰²çš„ä½ç½®</span><br><span class="line">        Vector2 pos = transform.position;</span><br><span class="line">        // åˆ›å»ºå°„çº¿</span><br><span class="line">        RaycastHit2D hit = Physics2D.Raycast(pos + offset, rayDirection, length, layer);</span><br><span class="line"></span><br><span class="line">        // æ˜¾ç¤ºå°„çº¿,hitè¿”å›æ˜¯å¦ç¢°æ’å¸ƒå°”å€¼</span><br><span class="line">        Color color = hit ? Color.red : Color.green;</span><br><span class="line">        Debug.DrawRay(pos + offset, rayDirection, color);</span><br><span class="line"></span><br><span class="line">        return hit;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2Dé€è§†æ•ˆæœä¸æ‘„åƒæœº"><a href="#2Dé€è§†æ•ˆæœä¸æ‘„åƒæœº" class="headerlink" title="2Dé€è§†æ•ˆæœä¸æ‘„åƒæœº"></a>2Dé€è§†æ•ˆæœä¸æ‘„åƒæœº</h2><ol><li><code>PackageManager -&gt; CineMachines</code>æ’ä»¶å¯¼å…¥ï¼Œæ·»åŠ <code>Follow</code>é€‰é¡¹</li><li><code>body -&gt; dead zone</code>é”æ­»èŒƒå›´ï¼Œåœ¨è¯¥èŒƒå›´å†…ç§»åŠ¨ä¸ä¼šè·Ÿç€ç§»åŠ¨æ‘„åƒæœº</li><li><code>body -&gt; Screen</code> è®¾ç½®followè§’è‰²åœ¨æ‘„åƒæœºçš„å“ªä¸ªä½ç½®</li><li><code>body -&gt; CameraDistance</code> è®¾ç½®æ‘„åƒæœºåŒ…æ‹¬èŒƒå›´</li><li><code> Main Camera -&gt; Projection -&gt; Perspective</code>ï¼Œå³å¯æ¨¡æ‹Ÿæ­£å¸¸æ‘„åƒæœºæ•ˆæœï¼ˆåˆ‡æ¢Scene 2Då³å¯æŸ¥çœ‹ï¼‰ </li><li><code>Extension -&gt; Confiner</code>æ·»åŠ æ‘„åƒæœºç§»åŠ¨è¾¹ç•Œï¼Œä¸ºBackgroundæ·»åŠ Colliderï¼Œæ³¨æ„ä¸€å®šè¦ç‚¹é€‰<code>is trigger</code>é€‰é¡¹</li></ol><h2 id="ç¯å…‰"><a href="#ç¯å…‰" class="headerlink" title="ç¯å…‰"></a>ç¯å…‰</h2><ol><li>å¯¹Objectå³é”®<code>light -&gt; point light</code> æ·»åŠ ç‚¹å…‰æº</li><li>ä¸ºPlateformã€Backgroundæ·»åŠ materail</li><li><code> Window -&gt; Rendering -&gt;light -&gt;Enviroment -&gt; Ambient Color</code>ï¼Œè®¾ç½®ä¸»åœºæ™¯ç¯å…‰</li></ol><h2 id="åŠ¨ç”»"><a href="#åŠ¨ç”»" class="headerlink" title="åŠ¨ç”»"></a>åŠ¨ç”»</h2><ol><li><code> Window -&gt; Animator/Animation</code>ï¼Œæ‰“å¼€çª—å£ </li><li>æ·»åŠ scriptï¼šPlayerAnimationå¦‚ä¸‹</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class PlayerAnimation : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    Animator animator;</span><br><span class="line">    PlayerMovement movement;</span><br><span class="line">    int groundID;</span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        animator = GetComponent&lt;Animator&gt;();</span><br><span class="line">        groundID = Animator.StringToHash(&quot;isOnGround&quot;);</span><br><span class="line">        // è·å–çˆ¶ç»„ä»¶çš„è„šæœ¬</span><br><span class="line">        movement = GetComponentInParent&lt;PlayerMovement&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        // è®¾ç½®animatiorçš„çŠ¶æ€å€¼</span><br><span class="line">        animator.SetFloat(&quot;speed&quot;, Mathf.Abs(movement.xVelocity));</span><br><span class="line">        // ä½¿ç”¨ç¼–å·å¯¹åº”èµ‹å€¼ã€å­—ç¬¦ä¸²å¯¹åº”èµ‹å€¼</span><br><span class="line">        animator.SetBool(groundID, movement.isOnGround);</span><br><span class="line">        animator.SetBool(&quot;isJumping&quot;, movement.isJump);</span><br><span class="line">        animator.SetBool(&quot;isCrouching&quot;, movement.isCrouch);</span><br><span class="line">        animator.SetBool(&quot;isHanging&quot;, movement.isHanging);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨BlendTree"><a href="#ä½¿ç”¨BlendTree" class="headerlink" title="ä½¿ç”¨BlendTree"></a>ä½¿ç”¨BlendTree</h3><ol><li>åœ¨Animatorçš„BaseLayerä¸­å³é”®<code> Create State -&gt; From New Blend Tree</code></li><li>ç‚¹å‡»æ–°çš„BlendTreeStateï¼Œåœ¨<code>Inspector -&gt; Motion æ·»åŠ Motion</code>ï¼Œæ·»åŠ æ¯ä¸€ä¸ªmotionå¯¹åº”çš„animationï¼Œä¸”å°†Parameterè®¾ç½®ä¸ºè‡ªå®šä¹‰çš„state</li><li><code>Thresholdä¸´ç•Œå€¼</code>é€‰é¡¹ï¼Œå½“å¯¹åº”parameterå€¼å¤åˆæŸä¸€thresholdå€¼æ—¶ä¼šæ’­æ”¾è¯¥animationï¼Œæ³¨æ„å‚ç›´å‘ä¸Šæ°´å¹³å‘å³ä¸ºæ­£</li></ol><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210820202829801.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210820202829801.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210820202829801"></p><p>â€‹    ä¸Šå›¾ä¸­MidAir1~7ä¸ºèµ·è·³åˆ°ä¸‹è½çš„åŠ¨ç”»</p><ol start="4"><li> ä¿®æ”¹åŠ¨ç”»è„šæœ¬å¦‚ä¸‹</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class PlayerAnimation : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    Animator animator;</span><br><span class="line">    PlayerMovement movement;</span><br><span class="line">    Rigidbody2D rb;</span><br><span class="line">    int speedID, groundID, jumpingID, crouchingID, hangingID, fallId;</span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        animator = GetComponent&lt;Animator&gt;();</span><br><span class="line"></span><br><span class="line">        // animatior parameterå¯¹åº”ç¼–å·</span><br><span class="line">        speedID = Animator.StringToHash(&quot;speed&quot;);</span><br><span class="line">        groundID = Animator.StringToHash(&quot;isOnGround&quot;);</span><br><span class="line">        jumpingID = Animator.StringToHash(&quot;isJumping&quot;);</span><br><span class="line">        crouchingID = Animator.StringToHash(&quot;isCrouching&quot;);</span><br><span class="line">        hangingID = Animator.StringToHash(&quot;isHanging&quot;);</span><br><span class="line">        fallId = Animator.StringToHash(&quot;verticalVelocity&quot;);</span><br><span class="line">        // è·å–çˆ¶ç»„ä»¶çš„è„šæœ¬</span><br><span class="line">        movement = GetComponentInParent&lt;PlayerMovement&gt;();</span><br><span class="line">        rb = GetComponentInParent&lt;Rigidbody2D&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        // è®¾ç½®animatiorçš„çŠ¶æ€å€¼ï¼Œä¸¤ç§æ–¹æ³•ï¼ˆä½¿ç”¨ç¼–å·å¯¹åº”èµ‹å€¼ã€å­—ç¬¦ä¸²å¯¹åº”èµ‹å€¼ï¼‰</span><br><span class="line">        // animator.SetFloat(&quot;speed&quot;, Mathf.Abs(movement.xVelocity));</span><br><span class="line">        animator.SetFloat(speedID, Mathf.Abs(movement.xVelocity));</span><br><span class="line">        animator.SetBool(groundID, movement.isOnGround);</span><br><span class="line">        animator.SetBool(jumpingID, movement.isJump);</span><br><span class="line">        animator.SetBool(crouchingID, movement.isCrouch);</span><br><span class="line">        animator.SetBool(hangingID, movement.isHanging);</span><br><span class="line">        animator.SetFloat(fallId, rb.velocity.y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="éŸ³æ•ˆ"><a href="#éŸ³æ•ˆ" class="headerlink" title="éŸ³æ•ˆ"></a>éŸ³æ•ˆ</h2><ol><li>æ³¨æ„Animationçª—å£ä¸­å¯¹åº”åŠ¨ç”»ï¼Œå«æœ‰ç‰¹å®šçš„<code>animation event</code>éœ€è¦æ·»åŠ </li><li>æ·»åŠ <code>AudioManager(Prefab)</code>ï¼Œå¹¶ä¸ºå…¶æ·»åŠ scriptå¦‚ä¸‹</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEngine.Audio;</span><br><span class="line"></span><br><span class="line">public class AudioManager : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    static AudioManager current;</span><br><span class="line"></span><br><span class="line">    [Header(&quot;ç¯å¢ƒå£°éŸ³&quot;)]</span><br><span class="line">    public AudioClip ambientCilip; </span><br><span class="line">    public AudioClip musicClip;</span><br><span class="line"></span><br><span class="line">    [Header(&quot;è§’è‰²éŸ³æ•ˆ&quot;)]</span><br><span class="line">    public AudioClip[] walkStepClips;</span><br><span class="line">    public AudioClip[] crouchStepClips;</span><br><span class="line">    public AudioClip jumpClip;</span><br><span class="line">    public AudioClip jumpVoiceClip;</span><br><span class="line"></span><br><span class="line">    public void Awake()</span><br><span class="line">    &#123;</span><br><span class="line">        current = this;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹        åŒæ—¶åœ¨<code>AudioManager(Prefab)</code>ä¸­é€‰æ‹©ç›¸åº”çš„éŸ³æ•ˆ</p><ol start="3"><li>æ·»åŠ AudioSource</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEngine.Audio;</span><br><span class="line"></span><br><span class="line">public class AudioManager : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    // ...</span><br><span class="line"></span><br><span class="line">    AudioSource ambientSource, musicSource, fxSource, playerSource, voiceSource;</span><br><span class="line"></span><br><span class="line">    public void Awake()</span><br><span class="line">    &#123;</span><br><span class="line">        // å•ä¾‹æ¨¡å¼</span><br><span class="line">        if(current != null)</span><br><span class="line">        &#123;</span><br><span class="line">            Destroy(gameObject);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        // æ–¹ä¾¿åœ¨staticæ–¹æ³•ä¸­ä½¿ç”¨this</span><br><span class="line">        current = this;</span><br><span class="line"></span><br><span class="line">        // é˜²æ­¢åœºæ™¯åŠ è½½æ—¶è¢«é”€æ¯</span><br><span class="line">        DontDestroyOnLoad(gameObject);</span><br><span class="line"></span><br><span class="line">        // ä½¿ç”¨ä»£ç æ·»åŠ AudioSourceç»„ä»¶</span><br><span class="line">        ambientSource = gameObject.AddComponent&lt;AudioSource&gt;();</span><br><span class="line">        musicSource = gameObject.AddComponent&lt;AudioSource&gt;();</span><br><span class="line">        fxSource = gameObject.AddComponent&lt;AudioSource&gt;();</span><br><span class="line">        playerSource = gameObject.AddComponent&lt;AudioSource&gt;();</span><br><span class="line">        voiceSource = gameObject.AddComponent&lt;AudioSource&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void PlayFootstepAudio()</span><br><span class="line">    &#123;</span><br><span class="line">        // è·å¾—éšæœºæ•°</span><br><span class="line">        int index = Random.Range(0, current.walkStepClips.Length);</span><br><span class="line">        // æŒ‡å®šsourceçš„clipå£°éŸ³ç‰‡æ®µ</span><br><span class="line">        current.playerSource.clip = current.walkStepClips[index];</span><br><span class="line">        // æ’­æ”¾</span><br><span class="line">        current.playerSource.Play();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>åœ¨<code>PlayerAnimation</code>ä¸­è°ƒç”¨æ–¹æ³•</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public void StepAudio()</span><br><span class="line">&#123;</span><br><span class="line">    AudioManager.PlayFootstepAudio();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="5"><li>å…¶ä»–éŸ³æ•ˆåŒç†ï¼Œå®Œæ•´å¦‚ä¸‹</li></ol><p><code>AudioManager</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEngine.Audio;</span><br><span class="line"></span><br><span class="line">public class AudioManager : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    static AudioManager current;</span><br><span class="line"></span><br><span class="line">    [Header(&quot;ç¯å¢ƒå£°éŸ³&quot;)]</span><br><span class="line">    public AudioClip ambientClip; </span><br><span class="line">    public AudioClip musicClip;</span><br><span class="line"></span><br><span class="line">    [Header(&quot;è§’è‰²éŸ³æ•ˆ&quot;)]</span><br><span class="line">    public AudioClip[] walkStepClips;</span><br><span class="line">    public AudioClip[] crouchStepClips;</span><br><span class="line">    public AudioClip jumpClip;</span><br><span class="line">    public AudioClip jumpVoiceClip;</span><br><span class="line"></span><br><span class="line">    // clipå£°éŸ³ç‰‡æ®µï¼Œsourceå£°éŸ³æº</span><br><span class="line">    AudioSource ambientSource, musicSource, fxSource, playerSource, voiceSource;</span><br><span class="line"></span><br><span class="line">    public void Awake()</span><br><span class="line">    &#123;</span><br><span class="line">        // å•ä¾‹æ¨¡å¼</span><br><span class="line">        if(current != null)</span><br><span class="line">        &#123;</span><br><span class="line">            Destroy(gameObject);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        // æ–¹ä¾¿åœ¨staticæ–¹æ³•ä¸­ä½¿ç”¨this</span><br><span class="line">        current = this;</span><br><span class="line"></span><br><span class="line">        // é˜²æ­¢åœºæ™¯åŠ è½½æ—¶è¢«é”€æ¯</span><br><span class="line">        DontDestroyOnLoad(gameObject);</span><br><span class="line"></span><br><span class="line">        // ä½¿ç”¨ä»£ç æ·»åŠ AudioSourceç»„ä»¶</span><br><span class="line">        ambientSource = gameObject.AddComponent&lt;AudioSource&gt;();</span><br><span class="line">        musicSource = gameObject.AddComponent&lt;AudioSource&gt;();</span><br><span class="line">        fxSource = gameObject.AddComponent&lt;AudioSource&gt;();</span><br><span class="line">        playerSource = gameObject.AddComponent&lt;AudioSource&gt;();</span><br><span class="line">        voiceSource = gameObject.AddComponent&lt;AudioSource&gt;();</span><br><span class="line"></span><br><span class="line">        // èƒŒæ™¯éŸ³ä¹ä¸éœ€è¦è§¦å‘ï¼Œç›´æ¥æ’­æ”¾</span><br><span class="line">        StartLevelAudio();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // èƒŒæ™¯éŸ³ä¹</span><br><span class="line">    void StartLevelAudio()</span><br><span class="line">    &#123;</span><br><span class="line">        // æ‰“å¼€å¾ªç¯</span><br><span class="line">        current.ambientSource.clip = current.ambientClip;</span><br><span class="line">        current.ambientSource.loop = true;</span><br><span class="line">        current.ambientSource.Play();</span><br><span class="line"></span><br><span class="line">        current.musicSource.clip = current.musicClip;</span><br><span class="line">        current.musicSource.loop = true;</span><br><span class="line">        current.musicSource.Play();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // è§’è‰²èµ°åŠ¨éŸ³æ•ˆ</span><br><span class="line">    public static void PlayFootstepAudio()</span><br><span class="line">    &#123;</span><br><span class="line">        // è·å¾—éšæœºæ•°</span><br><span class="line">        int index = Random.Range(0, current.walkStepClips.Length);</span><br><span class="line">        // æŒ‡å®šsourceçš„clipå£°éŸ³ç‰‡æ®µ</span><br><span class="line">        current.playerSource.clip = current.walkStepClips[index];</span><br><span class="line">        // æ’­æ”¾</span><br><span class="line">        current.playerSource.Play();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // è§’è‰²ä¸‹è¹²éŸ³æ•ˆ</span><br><span class="line">    public static void PlayCrouchFootstepAudio()</span><br><span class="line">    &#123;</span><br><span class="line">        int index = Random.Range(0, current.crouchStepClips.Length);</span><br><span class="line">        current.playerSource.clip = current.crouchStepClips[index];</span><br><span class="line">        current.playerSource.Play();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // è§’è‰²è·³è·ƒéŸ³æ•ˆ</span><br><span class="line">    public static void PlayJumpAudio()</span><br><span class="line">    &#123;</span><br><span class="line">        current.playerSource.clip = current.jumpClip;</span><br><span class="line">        current.playerSource.Play();</span><br><span class="line"></span><br><span class="line">        current.voiceSource.clip = current.jumpVoiceClip;</span><br><span class="line">        current.voiceSource.Play();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>PlayerAnimation</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class PlayerAnimation : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    Animator animator;</span><br><span class="line">    PlayerMovement movement;</span><br><span class="line">    Rigidbody2D rb;</span><br><span class="line">    int speedID, groundID, jumpingID, crouchingID, hangingID, fallId;</span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        animator = GetComponent&lt;Animator&gt;();</span><br><span class="line"></span><br><span class="line">        // animatior parameterå¯¹åº”ç¼–å·</span><br><span class="line">        speedID = Animator.StringToHash(&quot;speed&quot;);</span><br><span class="line">        groundID = Animator.StringToHash(&quot;isOnGround&quot;);</span><br><span class="line">        jumpingID = Animator.StringToHash(&quot;isJumping&quot;);</span><br><span class="line">        crouchingID = Animator.StringToHash(&quot;isCrouching&quot;);</span><br><span class="line">        hangingID = Animator.StringToHash(&quot;isHanging&quot;);</span><br><span class="line">        fallId = Animator.StringToHash(&quot;verticalVelocity&quot;);</span><br><span class="line">        // è·å–çˆ¶ç»„ä»¶çš„è„šæœ¬</span><br><span class="line">        movement = GetComponentInParent&lt;PlayerMovement&gt;();</span><br><span class="line">        rb = GetComponentInParent&lt;Rigidbody2D&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        // è®¾ç½®animatiorçš„çŠ¶æ€å€¼ï¼Œä¸¤ç§æ–¹æ³•ï¼ˆä½¿ç”¨ç¼–å·å¯¹åº”èµ‹å€¼ã€å­—ç¬¦ä¸²å¯¹åº”èµ‹å€¼ï¼‰</span><br><span class="line">        // animator.SetFloat(&quot;speed&quot;, Mathf.Abs(movement.xVelocity));</span><br><span class="line">        animator.SetFloat(speedID, Mathf.Abs(movement.xVelocity));</span><br><span class="line">        animator.SetBool(groundID, movement.isOnGround);</span><br><span class="line">        animator.SetBool(jumpingID, movement.isJump);</span><br><span class="line">        animator.SetBool(crouchingID, movement.isCrouch);</span><br><span class="line">        animator.SetBool(hangingID, movement.isHanging);</span><br><span class="line">        animator.SetFloat(fallId, rb.velocity.y);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void StepAudio()</span><br><span class="line">    &#123;</span><br><span class="line">        AudioManager.PlayFootstepAudio();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void CrouchStepAudio()</span><br><span class="line">    &#123;</span><br><span class="line">        AudioManager.PlayCrouchFootstepAudio();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹        ç”±äºAnimationä¸­æ²¡æœ‰æ·»åŠ jumpçš„eventï¼Œæ‰€ä»¥ç›´æ¥åœ¨playerMovementä¸­è°ƒç”¨éŸ³æ•ˆå³å¯</p><h2 id="æ­»äº¡æœºåˆ¶"><a href="#æ­»äº¡æœºåˆ¶" class="headerlink" title="æ­»äº¡æœºåˆ¶"></a>æ­»äº¡æœºåˆ¶</h2><ol><li>æ·»åŠ æ–°çš„csä»£ç å¦‚ä¸‹ï¼Œåº”ç”¨äºè§’è‰²ï¼Œç”¨äºæ­»äº¡æ¡ä»¶åˆ¤æ–­</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class PlayerHealth : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    // é¢„åˆ¶æ­»äº¡ç‰¹æ•ˆ</span><br><span class="line">    public GameObject deathVFXPrefab;</span><br><span class="line"></span><br><span class="line">    int trapsLayer;</span><br><span class="line"></span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        // è·å¾—å¯¹åº”Layerçš„ç¼–å·</span><br><span class="line">        trapsLayer = LayerMask.NameToLayer(&quot;Traps&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // å¦‚æœä¸€ä¸ªç¢°æ’ä½“è¿›å…¥äº†è§¦å‘å™¨ï¼ˆå½“å‰è§’è‰²å·²ç»è¢«è®¾å®šä¸ºisTriggerï¼‰åˆ™è°ƒç”¨</span><br><span class="line">    private void OnTriggerEnter2D(Collider2D collision)</span><br><span class="line">    &#123;</span><br><span class="line">        if (collision.gameObject.layer == trapsLayer)</span><br><span class="line">        &#123;</span><br><span class="line">            // Instantiateå®ä¾‹åŒ–ï¼Œæ­¤å¤„è®©ç‰¹æ•ˆæ˜¾ç¤º</span><br><span class="line">            Instantiate(deathVFXPrefab,transform.position,transform.rotation);</span><br><span class="line">            // è®©è§’è‰²æ¶ˆå¤±</span><br><span class="line">            gameObject.SetActive(false);</span><br><span class="line">            // æ’­æ”¾æ­»äº¡éŸ³æ•ˆ</span><br><span class="line">            AudioManager.PlayDeathAudio();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>æ·»åŠ æ­»äº¡éŸ³æ•ˆï¼Œæ³¨æ„åœ¨Inspectorçª—å£ä¸­é€‰æ‹©å¯¹åº”ç‰‡æ®µ</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">    [Header(&quot;è§’è‰²éŸ³æ•ˆ&quot;)]</span><br><span class="line">    public AudioClip[] walkStepClips;</span><br><span class="line">    public AudioClip[] crouchStepClips;</span><br><span class="line">    public AudioClip jumpClip;</span><br><span class="line">    public AudioClip jumpVoiceClip;</span><br><span class="line">    public AudioClip deathClip;</span><br><span class="line">    public AudioClip deathVoiceClip;</span><br><span class="line"></span><br><span class="line">    [Header(&quot;ç‰¹æ•ˆéŸ³æ•ˆ&quot;)]</span><br><span class="line">    public AudioClip deathFXClip;</span><br><span class="line"></span><br><span class="line">// æ­»äº¡éŸ³æ•ˆ</span><br><span class="line">public static void PlayDeathAudio()</span><br><span class="line">&#123;</span><br><span class="line">    current.playerSource.clip = current.deathClip;</span><br><span class="line">    current.playerSource.Play();</span><br><span class="line"></span><br><span class="line">    current.voiceSource.clip = current.deathVoiceClip;</span><br><span class="line">    current.voiceSource.Play();</span><br><span class="line"></span><br><span class="line">    current.fxSource.clip = current.deathFXClip;</span><br><span class="line">    current.fxSource.Play();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>è®¾ç½®åœºæ™¯é‡ç½®ï¼Œåœ¨<code>file -&gt; build settings</code> ä¸­è®¾ç½®scene</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">using UnityEngine.SceneManagement;</span><br><span class="line">private void OnTriggerEnter2D(Collider2D collision)</span><br><span class="line">&#123;</span><br><span class="line">// é‡ç½®åœºæ™¯ä¸ºå½“å‰åœºæ™¯</span><br><span class="line">SceneManager.LoadScene(SceneManager.GetActiveScene().buildIndex);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è§†è§‰æ•ˆæœä¸ç›¸æœºæŠ–åŠ¨"><a href="#è§†è§‰æ•ˆæœä¸ç›¸æœºæŠ–åŠ¨" class="headerlink" title="è§†è§‰æ•ˆæœä¸ç›¸æœºæŠ–åŠ¨"></a>è§†è§‰æ•ˆæœä¸ç›¸æœºæŠ–åŠ¨</h2><h3 id="Post-Processing"><a href="#Post-Processing" class="headerlink" title="Post Processing"></a>Post Processing</h3><ol><li><code> Window -&gt; PackageManager -&gt; æœç´¢æ’ä»¶Post Processing</code></li><li>ä¸º Main Camera æ·»åŠ <code>Component -&gt; Post-process Layer</code>ï¼Œåˆ›å»ºä¸€ä¸ªä¸“é—¨çš„Layerå¹¶æ·»åŠ </li><li>åˆ›å»ºä¸€ä¸ªEmpty Objectï¼Œå‘½åä¸º<code>Global Post Processing</code>åŒæ—¶æ·»åŠ ä¸Šä¸€æ­¥éª¤ä¸­çš„Layerï¼Œç”¨äºæ‰¿è½½è§†è§‰æ•ˆæœï¼ˆå¦‚æœæ˜¯å•ç‹¬ç‰©ä»¶æ·»åŠ ç‰¹æ•ˆç›´æ¥æ·»åŠ å³å¯ï¼‰</li><li>ä¸ºè¯¥å¯¹è±¡æ·»åŠ ç»„ä»¶ <code>  Post-process Volume</code>ï¼Œå…¶ä¸­<code>is Global </code>ç”¨äºå½±å“å…¨å±€ï¼Œå¦åˆ™æ·»åŠ <code>collider</code>è®¾ç½®å½±å“èŒƒå›´å³å¯</li><li>ä¸ºè¯¥å¯¹è±¡æ·»åŠ <code>Profile</code>ï¼ŒåŒæ—¶<code>Add effect </code> </li></ol><h3 id="Camera-Shake"><a href="#Camera-Shake" class="headerlink" title="Camera Shake"></a>Camera Shake</h3><ol><li>åœ¨ä¹‹å‰æ·»åŠ çš„<code>Cinemachine</code>ä¸­ï¼Œ<code> Inspector -&gt; Extension -&gt;Cinemachine Impulse Listener</code></li><li>åœ¨è§¦å‘ç›¸æœºæŠ–åŠ¨æ•ˆæœçš„ç‰©ä»¶ä¸Šæ·»åŠ ç»„ä»¶<code>  Cinemachine Collision Impulse Source</code>(æ­¤ä¸ºç¢°æ’è§¦å‘ï¼Œå¯é€‰å…¶ä»–source)ï¼Œ</li><li>ä¸ºè¯¥ç»„ä»¶æ·»åŠ <code>Raw Signal</code>å³è§¦å‘æŠ–åŠ¨æ—¶çš„æ•ˆæœï¼Œå¯ä»¥è‡ªè¡Œè®¾ç½®ï¼Œé€‰æ‹©TriggerObjectFilterä¸­çš„LayerMaskï¼Œå³ç¢°æ’å½“å‰å¯¹è±¡çš„Layer</li><li>å…¶ä½™å¦‚SignalShapeä¸­çš„FrequencyGainè¶Šå¤§é€Ÿåº¦è¶Šå¿«â€¦â€¦</li></ol><h2 id="GameManager"><a href="#GameManager" class="headerlink" title="GameManager"></a>GameManager</h2><h3 id="æ­»äº¡è¿‡æ¸¡ä»¥åŠç›¸å…³è®¡æ•°"><a href="#æ­»äº¡è¿‡æ¸¡ä»¥åŠç›¸å…³è®¡æ•°" class="headerlink" title="æ­»äº¡è¿‡æ¸¡ä»¥åŠç›¸å…³è®¡æ•°"></a>æ­»äº¡è¿‡æ¸¡ä»¥åŠç›¸å…³è®¡æ•°</h3><ol><li>æ·»åŠ Scriptï¼Œä¸€å®šå‘½åä¸º<code>GameManager</code>ï¼Œå¦‚ä¸‹ç¼–å†™</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEngine.SceneManagement;</span><br><span class="line"></span><br><span class="line">public class GameManager : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    static GameManager gm;</span><br><span class="line"></span><br><span class="line">    private void Awake()</span><br><span class="line">    &#123;</span><br><span class="line">        if(gm != null)</span><br><span class="line">        &#123;</span><br><span class="line">            Destroy(gameObject);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        gm = this;</span><br><span class="line">        DontDestroyOnLoad(this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void PlayerDied()</span><br><span class="line">    &#123;</span><br><span class="line">        // ç»è¿‡ä¸€æ®µæ—¶é—´åè°ƒç”¨æ–¹æ³•</span><br><span class="line">        gm.Invoke(&quot;RestartScene&quot;, 1.5f);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // é‡å¯åœºæ™¯</span><br><span class="line">    void RestartScene()</span><br><span class="line">    &#123;</span><br><span class="line">        SceneManager.LoadScene(SceneManager.GetActiveScene().buildIndex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>æ·»åŠ Empty Objectå¹¶åº”ç”¨GameManager Script</li><li>æ·»åŠ SceneFader Scriptï¼Œç¼–å†™å¦‚ä¸‹ï¼Œåº”ç”¨äº<code>Fader</code>(UI -&gt; Imageå¯¹è±¡ï¼Œå«æœ‰è¿‡æ¸¡åŠ¨ç”»ï¼Œå…¶ä¸­Animatorä¸­æœ‰Fadeå‚æ•°)</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class SceneFader : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    Animator anim;</span><br><span class="line">    int faderID;</span><br><span class="line"></span><br><span class="line">    private void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        anim = GetComponent&lt;Animator&gt;();</span><br><span class="line">        faderID = Animator.StringToHash(&quot;Fade&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    public void fadeOut()</span><br><span class="line">    &#123;</span><br><span class="line">        anim.SetTrigger(faderID);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>åœ¨GameManagerä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼Œè¿™é‡Œmarkä¸€ä¸‹ï¼Œä¸Šç½‘æœäº†å…¶ä»–çš„æ¨¡å¼å’Œæ–¹æ³•ï¼Œéƒ½å¯ä»¥å®ç°ï¼Œè§†é¢‘é‡Œè®²çš„æ˜¯è§‚å¯Ÿè€…æ¨¡å¼</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEngine.SceneManagement;</span><br><span class="line"></span><br><span class="line">public class GameManager : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    static GameManager gm;</span><br><span class="line">    SceneFader sceneFader;</span><br><span class="line"></span><br><span class="line">    private void Awake()</span><br><span class="line">    &#123;</span><br><span class="line">        if(gm != null)</span><br><span class="line">        &#123;</span><br><span class="line">            Destroy(gameObject);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        gm = this;</span><br><span class="line">        DontDestroyOnLoad(this);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ç”¨äºé€šçŸ¥GameManageræ¥æ”¶ä¸€ä¸ªSceneFaderå®ä¾‹</span><br><span class="line">    //public static void RegisterSceneFader(SceneFader fader)</span><br><span class="line">    //&#123;</span><br><span class="line">    //    gm.sceneFader = fader;</span><br><span class="line">    //&#125;</span><br><span class="line"></span><br><span class="line">    public static void PlayerDied()</span><br><span class="line">    &#123;</span><br><span class="line">        //SceneFader.sf.fadeOut();</span><br><span class="line">        SceneFader.sf.fadeOut();</span><br><span class="line"></span><br><span class="line">        // ä»¥ä¸‹ä¸ºå¦ä¸€ç§è°ƒç”¨å…¶ä»–ç±»çš„æ–¹æ³•å®ç°æ–¹æ³•ï¼Œè¿˜æœ‰å…¶ä»–æ–¹æ³•æˆ–æ¨¡å¼å¯ä»¥å®ç°</span><br><span class="line">        //GameObject.Find(&quot;Fader&quot;).SendMessage(&quot;fadeOut&quot;);</span><br><span class="line"></span><br><span class="line">        // ç»è¿‡ä¸€æ®µæ—¶é—´åè°ƒç”¨æ–¹æ³•</span><br><span class="line">        gm.Invoke(&quot;RestartScene&quot;, 1.2f);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // é‡å¯åœºæ™¯</span><br><span class="line">    void RestartScene()</span><br><span class="line">    &#123;</span><br><span class="line">        SceneManager.LoadScene(SceneManager.GetActiveScene().buildIndex);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class SceneFader : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    // è¿™é‡Œä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼Œèƒ½è®©å…¶ä»–ç±»è°ƒç”¨</span><br><span class="line">    public static SceneFader sf;</span><br><span class="line"></span><br><span class="line">    Animator anim;</span><br><span class="line">    int faderID;</span><br><span class="line"></span><br><span class="line">    private void Awake()</span><br><span class="line">    &#123;</span><br><span class="line">        if (sf != null)</span><br><span class="line">        &#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        sf = this;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        anim = GetComponent&lt;Animator&gt;();</span><br><span class="line">        faderID = Animator.StringToHash(&quot;Fade&quot;);</span><br><span class="line"></span><br><span class="line">        //GameManager.RegisterSceneFader(this);</span><br><span class="line">    &#125;</span><br><span class="line">    public void fadeOut()</span><br><span class="line">    &#123;</span><br><span class="line">        anim.SetTrigger(faderID);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="5"><li>æ·»åŠ æ”¶é›†ç‰©çš„ç›¸å…³è„šæœ¬</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEngine.SceneManagement;</span><br><span class="line"></span><br><span class="line">public class GameManager : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    static GameManager gm;</span><br><span class="line">    //SceneFader sceneFader;</span><br><span class="line">    List&lt;Orb&gt; orbs;</span><br><span class="line"></span><br><span class="line">    public int orbNum,deathNum;</span><br><span class="line"></span><br><span class="line">    private void Awake()</span><br><span class="line">    &#123;</span><br><span class="line">        if(gm != null)</span><br><span class="line">        &#123;</span><br><span class="line">            Destroy(gameObject);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        gm = this;</span><br><span class="line">        orbs = new List&lt;Orb&gt;();</span><br><span class="line">        DontDestroyOnLoad(this);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        orbNum = gm.orbs.Count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ç”¨äºé€šçŸ¥GameManageræ¥æ”¶ä¸€ä¸ªSceneFaderå®ä¾‹</span><br><span class="line">    //public static void RegisterSceneFader(SceneFader fader)</span><br><span class="line">    //&#123;</span><br><span class="line">    //    gm.sceneFader = fader;</span><br><span class="line">    //&#125;</span><br><span class="line"></span><br><span class="line">    public static void RegisterOrb(Orb orb)</span><br><span class="line">    &#123;</span><br><span class="line">        if (!gm.orbs.Contains(orb))</span><br><span class="line">        &#123;</span><br><span class="line">            gm.orbs.Add(orb);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void PlayerDied()</span><br><span class="line">    &#123;</span><br><span class="line">        //SceneFader.sf.fadeOut();</span><br><span class="line">        SceneFader.sf.fadeOut();</span><br><span class="line"></span><br><span class="line">        // ä»¥ä¸‹ä¸ºå¦ä¸€ç§è°ƒç”¨å…¶ä»–ç±»çš„æ–¹æ³•å®ç°æ–¹æ³•ï¼Œè¿˜æœ‰å…¶ä»–æ–¹æ³•æˆ–æ¨¡å¼å¯ä»¥å®ç°</span><br><span class="line">        //GameObject.Find(&quot;Fader&quot;).SendMessage(&quot;fadeOut&quot;);</span><br><span class="line"></span><br><span class="line">        // ç»è¿‡ä¸€æ®µæ—¶é—´åè°ƒç”¨æ–¹æ³•</span><br><span class="line">        gm.Invoke(&quot;RestartScene&quot;, 1.2f);</span><br><span class="line"></span><br><span class="line">        gm.deathNum++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void PlayerGetOrb(Orb orb)</span><br><span class="line">    &#123;</span><br><span class="line">        if (gm.orbs.Count == 0 || !gm.orbs.Contains(orb))</span><br><span class="line">            return;</span><br><span class="line">        gm.orbs.Remove(orb);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // é‡å¯åœºæ™¯</span><br><span class="line">    void RestartScene()</span><br><span class="line">    &#123;</span><br><span class="line">        gm.orbs.Clear();</span><br><span class="line">        SceneManager.LoadScene(SceneManager.GetActiveScene().buildIndex);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class Orb : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    int playerLayer;</span><br><span class="line"></span><br><span class="line">    public GameObject explosionVFXPrefab;</span><br><span class="line"></span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        playerLayer = LayerMask.NameToLayer(&quot;Player&quot;);</span><br><span class="line">        GameManager.RegisterOrb(this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void OnTriggerEnter2D(Collider2D collision)</span><br><span class="line">    &#123;</span><br><span class="line">        if(collision.gameObject.layer == playerLayer)</span><br><span class="line">        &#123;</span><br><span class="line">            GameManager.PlayerGetOrb(this);</span><br><span class="line">            Instantiate(explosionVFXPrefab, transform.position, transform.rotation);</span><br><span class="line">            gameObject.SetActive(false);</span><br><span class="line">            AudioManager.PlayOrbAudio();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Dooræœºå…³"><a href="#Dooræœºå…³" class="headerlink" title="Dooræœºå…³"></a>Dooræœºå…³</h3><p>æ”¶é›†ç‰©å“åˆ°ä¸€å®šæ•°é‡åæ‰“å¼€æœºå…³</p><ol><li>ç¼–å†™Door Script</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class Door : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    Animator anim;</span><br><span class="line">    int openID;</span><br><span class="line"></span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        anim = GetComponent&lt;Animator&gt;();</span><br><span class="line">        openID = Animator.StringToHash(&quot;Open&quot;);</span><br><span class="line">        GameManager.RegisterDoor(this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void Open()</span><br><span class="line">    &#123;</span><br><span class="line">        anim.SetTrigger(openID);</span><br><span class="line">        AudioManager.PlayOpenDoorAudio();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>ç¼–å†™AudioManager</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// æ‰“å¼€é—¨éŸ³æ•ˆ</span><br><span class="line">    public static void PlayOpenDoorAudio()</span><br><span class="line">    &#123;</span><br><span class="line">        current.fxSource.clip = current.doorFXClip;</span><br><span class="line">        current.fxSource.PlayDelayed(1f);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="UI-Manager"><a href="#UI-Manager" class="headerlink" title="UI Manager"></a>UI Manager</h2><h3 id="æ˜¾ç¤ºtext"><a href="#æ˜¾ç¤ºtext" class="headerlink" title="æ˜¾ç¤ºtext"></a>æ˜¾ç¤ºtext</h3><ol><li>ç¼–å†™ä¸€ä¸ªUI Manager Objectï¼Œæ·»åŠ scriptå¦‚ä¸‹</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using TMPro;</span><br><span class="line"></span><br><span class="line">public class UIManager : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    static UIManager instance;</span><br><span class="line"></span><br><span class="line">    // è·å¾—Textæ–‡æœ¬æ¡†,è®°å¾—åœ¨Inspectorä¸­é€‰æ‹©ç›¸åº”çš„text</span><br><span class="line">    public TextMeshProUGUI orbText, timeText, deathText, gameOverText;</span><br><span class="line"></span><br><span class="line">    private void Awake()</span><br><span class="line">    &#123;</span><br><span class="line">        if(instance != null)</span><br><span class="line">        &#123;</span><br><span class="line">            Destroy(gameObject);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        instance = this;</span><br><span class="line">        DontDestroyOnLoad(this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ›´æ–°Orbæ•°é‡</span><br><span class="line">    public static void UpdateOrbUI(int orbCount)</span><br><span class="line">    &#123;</span><br><span class="line">        // è®¾ç½®text</span><br><span class="line">        instance.orbText.text = orbCount.ToString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // å…¶ä½™textç±»ä¼¼</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨GameManagerä¸­é€‚å½“ä½ç½®è°ƒç”¨UIManagerç›¸åº”æ–¹æ³•å³å¯</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using TMPro;</span><br><span class="line"></span><br><span class="line">public class UIManager : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    static UIManager instance;</span><br><span class="line"></span><br><span class="line">    // è·å¾—Textæ–‡æœ¬æ¡†,è®°å¾—åœ¨Inspectorä¸­é€‰æ‹©ç›¸åº”çš„text</span><br><span class="line">    public TextMeshProUGUI orbText, timeText, deathText, gameOverText;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    private void Awake()</span><br><span class="line">    &#123;</span><br><span class="line">        if(instance != null)</span><br><span class="line">        &#123;</span><br><span class="line">            Destroy(gameObject);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        instance = this;</span><br><span class="line">        DontDestroyOnLoad(this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ›´æ–°Orbæ•°é‡</span><br><span class="line">    public static void UpdateOrbUI(int orbCount)</span><br><span class="line">    &#123;</span><br><span class="line">        // è®¾ç½®text</span><br><span class="line">        instance.orbText.text = orbCount.ToString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ›´æ–°Deathæ•°é‡</span><br><span class="line">    public static void UpdateDeathUI(int deathNum)</span><br><span class="line">    &#123;</span><br><span class="line">        // è®¾ç½®text</span><br><span class="line">        instance.deathText.text = deathNum.ToString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ›´æ–°Time</span><br><span class="line">    public static void UpdateTimeUI(int time)</span><br><span class="line">    &#123;</span><br><span class="line">        int minutes = time / 60;</span><br><span class="line">        int seconds = time % 60;</span><br><span class="line"></span><br><span class="line">        // è®¾ç½®text</span><br><span class="line">        instance.timeText.text = minutes.ToString(&quot;00&quot;)+&quot;:&quot;+seconds.ToString(&quot;00&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Unity </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹  </tag>
            
            <tag> Unity2D </tag>
            
            <tag> æ¸¸æˆå¼€å‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€å­¦ä¹ ç¬”è®°ã€‘Vue</title>
      <link href="/2021/08/04/xue-xi-bi-ji-vue/"/>
      <url>/2021/08/04/xue-xi-bi-ji-vue/</url>
      
        <content type="html"><![CDATA[<h2 id="æ„Ÿè°¢"><a href="#æ„Ÿè°¢" class="headerlink" title="æ„Ÿè°¢"></a>æ„Ÿè°¢</h2><p><a href="https://www.bilibili.com/video/BV1Zy4y1K7SH">ã€å°šç¡…è°·ã€‘2021æœ€æ–°Vueè¿…é€Ÿä¸Šæ‰‹æ•™ç¨‹ä¸¨vue3.0å…¥é—¨åˆ°ç²¾é€š_å¼ å¤©ç¦¹è€å¸ˆ</a></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>â€‹        æ˜¨å¤©çœ‹å®Œspringboot2çš„æ•™å­¦è§†é¢‘ï¼Œè®¡åˆ’ç€æ¥ä¸‹æ¥è¦å­¦ä»€ä¹ˆï¼Œæ¯•ç«Ÿä¼‘æ¯ä¸€å¤©ï¼Œå°±ä¼šä¸€ç›´å·æ‡’ä¸‹å»ã€‚æ—©ä¸Šåˆšçœ‹åˆ°ç¾¤é‡Œå‘ä¼ä¸šé¡¹ç›®è¦æ‰¾ä¸ªä¼švueï¼Œå†ç»“åˆç»“åˆvueçš„çƒ­åº¦ï¼Œè™½ç„¶è‡ªå·±å¹¶ä¸åƒå’Œå‰ç«¯æœ‰å¤ªå¤šçº è‘›<del>ï¼ˆå› ä¸ºå¼ºè¿«ç—‡ï¼‰</del>ï¼Œä½†æ˜¯å¤§åŠ¿æ‰€è¶‹ï¼Œéƒ½å‘ç€å…¨æ ˆé å‘¢ï¼Œè€Œä¸”ä¸ªäººé¡¹ç›®è‚¯å®šä¹Ÿå¾—è‡ªå·±åšï¼Œæ‰€ä»¥å­¦äº†éƒ½æ˜¯å¥½å¤„æ²¡åå¤„ã€‚        å…¶å®ä¸ƒæœˆåˆçš„æ—¶å€™çœ‹è¿‡ä¸¤å¤©çš„vueè¯­æ³•è§†é¢‘<del>ï¼ˆä¸ºäº†æš‘å‡é›†è®­æ•™å­¦ï¼Œå…¶å®å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œè¿˜å¿˜å…‰äº†ï¼‰</del>ï¼Œä¹Ÿæ²¡æœ‰è®°ç¬”è®°ï¼Œç°åœ¨æ­£å¼çš„çœ‹ï¼Œå¥½å¥½å­¦ï¼Œå¥½å¥½è®°ï¼Œç›®æµ‹ä¸¤ä¸ªæ˜ŸæœŸçœ‹å®Œï¼Ÿ<del>ï¼ˆæ¯•ç«Ÿä¹Ÿæ˜¯å­¦äº†ç‚¹vueå’Œå¾®ä¿¡å°ç¨‹åºçš„ï¼Œä¸Šæ‰‹åº”è¯¥å¿«ï¼‰</del>çœ‹å®Œä¹‹åå¾—åšä¸ªé¡¹ç›®äº†ï¼Œvue+springbootï¼Œä¸è¿‡å­¦æœŸå¼€å­¦ä¹Ÿè¦åšä¸ªäººé¡¹ç›®ï¼Œåˆ°æ—¶å€™åšä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p><h2 id="Vueç®€ä»‹"><a href="#Vueç®€ä»‹" class="headerlink" title="Vueç®€ä»‹"></a>Vueç®€ä»‹</h2><h3 id="ä»€ä¹ˆæ˜¯Vue"><a href="#ä»€ä¹ˆæ˜¯Vue" class="headerlink" title="ä»€ä¹ˆæ˜¯Vue"></a>ä»€ä¹ˆæ˜¯Vue</h3><blockquote><p>ä¸€å¥—ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼JavaScriptæ¡†æ¶ã€‚</p><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210804144318448.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210804144318448.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210804144318448"></p></blockquote><h3 id="Vueç‰¹ç‚¹"><a href="#Vueç‰¹ç‚¹" class="headerlink" title="Vueç‰¹ç‚¹"></a>Vueç‰¹ç‚¹</h3><blockquote><ol><li>é‡‡ç”¨<strong>ç»„ä»¶åŒ–</strong>æ¨¡å¼, æé«˜ä»£ç å¤ç”¨ç‡ã€ä¸”è®©ä»£ç æ›´å¥½ç»´æŠ¤ã€‚</li><li><strong>å£°æ˜å¼</strong>ç¼–ç ,è®©ç¼–ç äººå‘˜æ— éœ€ç›´æ¥æ“ä½œDOM, æé«˜å¼€å‘æ•ˆç‡ã€‚</li><li>ä½¿ç”¨è™›æ‹ŸDOM+ä¼˜ç§€çš„Diffç®—æ³•, å°½é‡å¤ç”¨DOMèŠ‚ç‚¹ã€‚</li></ol></blockquote><h2 id="basic"><a href="#basic" class="headerlink" title="basic"></a>basic</h2><h3 id="å®¹å™¨ä¸Vueå®ä¾‹"><a href="#å®¹å™¨ä¸Vueå®ä¾‹" class="headerlink" title="å®¹å™¨ä¸Vueå®ä¾‹"></a>å®¹å™¨ä¸Vueå®ä¾‹</h3><blockquote><p>å…¶å®æ„Ÿè§‰ä¸ç”¨å†™ä»€ä¹ˆï¼Œç›´æ¥çœ‹å®˜æ–¹æ–‡æ¡£æˆ–è€…çœ‹ä»£ç ğŸ‘Œ</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">åˆè¯†Vueï¼š</span></span><br><span class="line"><span class="comment">1.æƒ³è®©Vueå·¥ä½œï¼Œå°±å¿…é¡»åˆ›å»ºä¸€ä¸ªVueå®ä¾‹ï¼Œä¸”è¦ä¼ å…¥ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼›</span></span><br><span class="line"><span class="comment">2.rootå®¹å™¨é‡Œçš„ä»£ç ä¾ç„¶ç¬¦åˆhtmlè§„èŒƒï¼Œåªä¸è¿‡æ··å…¥äº†ä¸€äº›ç‰¹æ®Šçš„Vueè¯­æ³•ï¼›</span></span><br><span class="line"><span class="comment">3.rootå®¹å™¨é‡Œçš„ä»£ç è¢«ç§°ä¸ºã€Vueæ¨¡æ¿ã€‘ï¼›</span></span><br><span class="line"><span class="comment">4.Vueå®ä¾‹å’Œå®¹å™¨æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼›</span></span><br><span class="line"><span class="comment">5.çœŸå®å¼€å‘ä¸­åªæœ‰ä¸€ä¸ªVueå®ä¾‹ï¼Œå¹¶ä¸”ä¼šé…åˆç€ç»„ä»¶ä¸€èµ·ä½¿ç”¨ï¼›</span></span><br><span class="line"><span class="comment">6.&#123;&#123;xxx&#125;&#125;ä¸­çš„xxxè¦å†™jsè¡¨è¾¾å¼ï¼Œä¸”xxxå¯ä»¥è‡ªåŠ¨è¯»å–åˆ°dataä¸­çš„æ‰€æœ‰å±æ€§ï¼›</span></span><br><span class="line"><span class="comment">7.ä¸€æ—¦dataä¸­çš„æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œé‚£ä¹ˆé¡µé¢ä¸­ç”¨åˆ°è¯¥æ•°æ®çš„åœ°æ–¹ä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°ï¼›</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">æ³¨æ„åŒºåˆ†ï¼šjsè¡¨è¾¾å¼ å’Œ jsä»£ç (è¯­å¥)</span></span><br><span class="line"><span class="comment">1.è¡¨è¾¾å¼ï¼šä¸€ä¸ªè¡¨è¾¾å¼ä¼šäº§ç”Ÿä¸€ä¸ªå€¼ï¼Œå¯ä»¥æ”¾åœ¨ä»»ä½•ä¸€ä¸ªéœ€è¦å€¼çš„åœ°æ–¹ï¼š</span></span><br><span class="line"><span class="comment">(1). a</span></span><br><span class="line"><span class="comment">(2). a+b</span></span><br><span class="line"><span class="comment">(3). demo(1)</span></span><br><span class="line"><span class="comment">(4). x === y ? &#x27;a&#x27; : &#x27;b&#x27;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">2.jsä»£ç (è¯­å¥)</span></span><br><span class="line"><span class="comment">(1). if()&#123;&#125;</span></span><br><span class="line"><span class="comment">(2). for()&#123;&#125;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Helloï¼Œ&#123;&#123;name.toUpperCase()&#125;&#125;ï¼Œ&#123;&#123;address&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> &gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">Vue.config.productionTip = <span class="literal">false</span> <span class="comment">//é˜»æ­¢ vue åœ¨å¯åŠ¨æ—¶ç”Ÿæˆç”Ÿäº§æç¤ºã€‚</span></span></span><br><span class="line"><span class="javascript"><span class="comment">//åˆ›å»ºVueå®ä¾‹</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript"><span class="attr">el</span>:<span class="string">&#x27;#demo&#x27;</span>, <span class="comment">//elç”¨äºæŒ‡å®šå½“å‰Vueå®ä¾‹ä¸ºå“ªä¸ªå®¹å™¨æœåŠ¡ï¼Œå€¼é€šå¸¸ä¸ºcssé€‰æ‹©å™¨å­—ç¬¦ä¸²ã€‚</span></span></span><br><span class="line"><span class="javascript"><span class="attr">data</span>:&#123; <span class="comment">//dataä¸­ç”¨äºå­˜å‚¨æ•°æ®ï¼Œæ•°æ®ä¾›elæ‰€æŒ‡å®šçš„å®¹å™¨å»ä½¿ç”¨ï¼Œå€¼æˆ‘ä»¬æš‚æ—¶å…ˆå†™æˆä¸€ä¸ªå¯¹è±¡ã€‚</span></span></span><br><span class="line"><span class="javascript"><span class="attr">name</span>:<span class="string">&#x27;atguigu&#x27;</span>,</span></span><br><span class="line"><span class="javascript"><span class="attr">address</span>:<span class="string">&#x27;åŒ—äº¬&#x27;</span></span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript">&#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å•å‘åŒå‘ç»‘å®š"><a href="#å•å‘åŒå‘ç»‘å®š" class="headerlink" title="å•å‘åŒå‘ç»‘å®š"></a>å•å‘åŒå‘ç»‘å®š</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">Vueæ¨¡æ¿è¯­æ³•æœ‰2å¤§ç±»ï¼š</span></span><br><span class="line"><span class="comment">1.æ’å€¼è¯­æ³•ï¼š</span></span><br><span class="line"><span class="comment">åŠŸèƒ½ï¼šç”¨äºè§£ææ ‡ç­¾ä½“å†…å®¹ã€‚</span></span><br><span class="line"><span class="comment">å†™æ³•ï¼š&#123;&#123;xxx&#125;&#125;ï¼Œxxxæ˜¯jsè¡¨è¾¾å¼ï¼Œä¸”å¯ä»¥ç›´æ¥è¯»å–åˆ°dataä¸­çš„æ‰€æœ‰å±æ€§ã€‚</span></span><br><span class="line"><span class="comment">2.æŒ‡ä»¤è¯­æ³•ï¼š</span></span><br><span class="line"><span class="comment">åŠŸèƒ½ï¼šç”¨äºè§£ææ ‡ç­¾ï¼ˆåŒ…æ‹¬ï¼šæ ‡ç­¾å±æ€§ã€æ ‡ç­¾ä½“å†…å®¹ã€ç»‘å®šäº‹ä»¶.....ï¼‰ã€‚</span></span><br><span class="line"><span class="comment">ä¸¾ä¾‹ï¼šv-bind:href=&quot;xxx&quot; æˆ–  ç®€å†™ä¸º :href=&quot;xxx&quot;ï¼ŒxxxåŒæ ·è¦å†™jsè¡¨è¾¾å¼ï¼Œ</span></span><br><span class="line"><span class="comment"> ä¸”å¯ä»¥ç›´æ¥è¯»å–åˆ°dataä¸­çš„æ‰€æœ‰å±æ€§ã€‚</span></span><br><span class="line"><span class="comment">å¤‡æ³¨ï¼šVueä¸­æœ‰å¾ˆå¤šçš„æŒ‡ä»¤ï¼Œä¸”å½¢å¼éƒ½æ˜¯ï¼šv-????ï¼Œæ­¤å¤„æˆ‘ä»¬åªæ˜¯æ‹¿v-bindä¸¾ä¸ªä¾‹å­ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>æ’å€¼è¯­æ³•<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>ä½ å¥½ï¼Œ&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>æŒ‡ä»¤è¯­æ³•<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:href</span>=<span class="string">&quot;school.url.toUpperCase()&quot;</span> <span class="attr">x</span>=<span class="string">&quot;hello&quot;</span>&gt;</span>ç‚¹æˆ‘å»&#123;&#123;school.name&#125;&#125;å­¦ä¹ 1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">:href</span>=<span class="string">&quot;school.url&quot;</span> <span class="attr">x</span>=<span class="string">&quot;hello&quot;</span>&gt;</span>ç‚¹æˆ‘å»&#123;&#123;school.name&#125;&#125;å­¦ä¹ 2<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">Vue.config.productionTip = <span class="literal">false</span> <span class="comment">//é˜»æ­¢ vue åœ¨å¯åŠ¨æ—¶ç”Ÿæˆç”Ÿäº§æç¤ºã€‚</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript"><span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>,</span></span><br><span class="line"><span class="javascript"><span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="javascript"><span class="attr">name</span>:<span class="string">&#x27;jack&#x27;</span>,</span></span><br><span class="line"><span class="javascript"><span class="attr">school</span>:&#123;</span></span><br><span class="line"><span class="javascript"><span class="attr">name</span>:<span class="string">&#x27;å°šç¡…è°·&#x27;</span>,</span></span><br><span class="line"><span class="javascript"><span class="attr">url</span>:<span class="string">&#x27;http://www.atguigu.com&#x27;</span>,</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript">&#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h3><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210804201111181.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210804201111181.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210804201111181"></p><h2 id="åé¢å†™ä»£ç å»äº†æ²¡å†™ç¬”è®°ï¼Œç¬”è®°éƒ½åœ¨ä»£ç ä¸Š"><a href="#åé¢å†™ä»£ç å»äº†æ²¡å†™ç¬”è®°ï¼Œç¬”è®°éƒ½åœ¨ä»£ç ä¸Š" class="headerlink" title="åé¢å†™ä»£ç å»äº†æ²¡å†™ç¬”è®°ï¼Œç¬”è®°éƒ½åœ¨ä»£ç ä¸Š"></a>åé¢å†™ä»£ç å»äº†æ²¡å†™ç¬”è®°ï¼Œç¬”è®°éƒ½åœ¨ä»£ç ä¸Š</h2>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹  </tag>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€é›†è®­ã€‘å¾®ä¿¡å°ç¨‹åº(äºŒ)</title>
      <link href="/2021/07/22/ji-xun-wei-xin-xiao-cheng-xu-er/"/>
      <url>/2021/07/22/ji-xun-wei-xin-xiao-cheng-xu-er/</url>
      
        <content type="html"><![CDATA[<h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><h3 id="ç³»ç»Ÿä¿¡æ¯"><a href="#ç³»ç»Ÿä¿¡æ¯" class="headerlink" title="ç³»ç»Ÿä¿¡æ¯"></a>ç³»ç»Ÿä¿¡æ¯</h3><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/base/system/wx.getSystemInfoSync.html">Object wx.getSystemInfoSync() | å¾®ä¿¡å¼€æ”¾æ–‡æ¡£ (qq.com)</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–ç³»ç»Ÿä¿¡æ¯</span></span><br><span class="line">wx.getSystemInfo(&#123;</span><br><span class="line">  <span class="attr">success</span>: <span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(result);</span><br><span class="line">    <span class="built_in">console</span>.log(result.model);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="äº¤äº’"><a href="#äº¤äº’" class="headerlink" title="äº¤äº’"></a>äº¤äº’</h3><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/ui/interaction/wx.showToast.html">wx.showToast(Object object) | å¾®ä¿¡å¼€æ”¾æ–‡æ¡£ (qq.com)</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// loadingæç¤ºæ¡†</span></span><br><span class="line">wx.showLoading(&#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;æ•°æ®åŠ è½½ä¸­&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  wx.hideLoading(&#123;</span><br><span class="line">    <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;åŠ è½½å®Œæˆ&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;, <span class="number">2000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¶ˆæ¯æç¤º</span></span><br><span class="line">wx.showToast(&#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;æç¤ºä¿¡æ¯&#x27;</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="è·¯ç”±"><a href="#è·¯ç”±" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h3><h4 id="è·³è½¬é¡µé¢"><a href="#è·³è½¬é¡µé¢" class="headerlink" title="è·³è½¬é¡µé¢"></a>è·³è½¬é¡µé¢</h4><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateTo.html">wx.navigateTo(Object object) | å¾®ä¿¡å¼€æ”¾æ–‡æ¡£ (qq.com)</a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;clickBtn&quot;</span>&gt;</span>è·³è½¬åˆ°demo01<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">clickBtn</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"><span class="comment">// å¯å¸¦å‚æ•°,è°ƒç”¨ navigateTo è·³è½¬æ—¶ï¼Œè°ƒç”¨è¯¥æ–¹æ³•çš„é¡µé¢ä¼šè¢«åŠ å…¥å †æ ˆï¼Œè€Œ redirectTo æ–¹æ³•åˆ™ä¸ä¼š</span></span><br><span class="line">    wx.navigateTo(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/pages/demo05/demo05?id=111&#x27;</span>,</span><br><span class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(res);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h4 id="è¿”å›é¡µé¢"><a href="#è¿”å›é¡µé¢" class="headerlink" title="è¿”å›é¡µé¢"></a>è¿”å›é¡µé¢</h4><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateBack.html">wx.navigateBack(Object object) | å¾®ä¿¡å¼€æ”¾æ–‡æ¡£ (qq.com)</a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;clickBack&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>è¿”å›ä¸Šä¸€é¡µ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">clickBack</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">   wx.navigateBack(&#123;</span><br><span class="line">     <span class="attr">delta</span>: <span class="number">1</span>,</span><br><span class="line">   &#125;)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h4 id="äº‹ä»¶ä¼ å€¼"><a href="#äº‹ä»¶ä¼ å€¼" class="headerlink" title="äº‹ä»¶ä¼ å€¼"></a>äº‹ä»¶ä¼ å€¼</h4><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/route/EventChannel.html">EventChannel | å¾®ä¿¡å¼€æ”¾æ–‡æ¡£ (qq.com)</a></p><p><code>demo04.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">clickBtn</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// å¯å¸¦å‚æ•°,è°ƒç”¨ navigateTo è·³è½¬æ—¶ï¼Œè°ƒç”¨è¯¥æ–¹æ³•çš„é¡µé¢ä¼šè¢«åŠ å…¥å †æ ˆï¼Œè€Œ redirectTo æ–¹æ³•åˆ™ä¸ä¼š</span></span><br><span class="line">    wx.navigateTo(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/pages/demo05/demo05?id=111&#x27;</span>,</span><br><span class="line">      <span class="attr">events</span>: &#123;</span><br><span class="line">        <span class="comment">// ä¸ºæŒ‡å®šäº‹ä»¶æ·»åŠ ä¸€ä¸ªç›‘å¬å™¨</span></span><br><span class="line">        <span class="function"><span class="title">myBackData</span>(<span class="params">data</span>)</span> &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(data);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// æˆåŠŸçš„å›è°ƒå‡½æ•°</span></span><br><span class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// è§¦å‘ä¸€ä¸ªäº‹ä»¶</span></span><br><span class="line">        res.eventChannel.emit(<span class="string">&quot;myGetData&quot;</span>, &#123; <span class="attr">data</span>: <span class="string">&quot;ä¼ é€’çš„æ•°æ®&quot;</span> &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p><code>demo05.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">onLoad</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="comment">// è·å–æ‰€æœ‰æ‰“å¼€çš„EventChanneläº‹ä»¶</span></span><br><span class="line">  <span class="keyword">const</span> eventChannel = <span class="built_in">this</span>.getOpenerEventChannel();</span><br><span class="line">  <span class="comment">// ç›‘å¬indexé¡µé¢çš„myGetDataäº‹ä»¶</span></span><br><span class="line">  eventChannel.on(<span class="string">&quot;myGetData&quot;</span>, <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// è¢«è§¦å‘åçš„æ“ä½œ</span></span><br><span class="line">    <span class="built_in">console</span>.log(res);</span><br><span class="line">  &#125;);</span><br><span class="line">  eventChannel.emit(<span class="string">&quot;myBackData&quot;</span>, &#123; <span class="attr">data</span>: <span class="string">&quot;è¿”å›çš„æ•°æ®&quot;</span> &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">clickBack</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="comment">//const eventChannel = this.getOpenerEventChannel();</span></span><br><span class="line">  <span class="comment">//eventChannel.emit(&quot;myBackData&quot;, &#123; data: &quot;è¿”å›çš„æ•°æ®&quot; &#125;)</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// é€šè¿‡ getCurrentPages è·å–å½“å‰çš„é¡µé¢æ ˆï¼Œå†³å®šéœ€è¦è¿”å›å‡ å±‚ã€‚</span></span><br><span class="line">  wx.navigateBack(&#123;</span><br><span class="line">    <span class="attr">delta</span>: <span class="number">1</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç½‘ç»œ"><a href="#ç½‘ç»œ" class="headerlink" title="ç½‘ç»œ"></a>ç½‘ç»œ</h3><h4 id="ä¸´æ—¶æ•°æ®"><a href="#ä¸´æ—¶æ•°æ®" class="headerlink" title="ä¸´æ—¶æ•°æ®"></a>ä¸´æ—¶æ•°æ®</h4><p><code>demo06.wxml</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/demo06/demo06.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;out&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;dataList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;*this&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;pic&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.url&#125;&#125;&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>&#123;&#123;item.title&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;time&quot;</span>&gt;</span>&#123;&#123;item.time&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>demo06.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">data: &#123;</span><br><span class="line">  <span class="attr">dataList</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;æ ‡é¢˜1&quot;</span>,</span><br><span class="line">      <span class="attr">time</span>: <span class="string">&quot;2020-01-01&quot;</span>,</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&quot;/images/image1.png&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;æ ‡é¢˜2&quot;</span>,</span><br><span class="line">      <span class="attr">time</span>: <span class="string">&quot;2020-01-02&quot;</span>,</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&quot;/images/image1.png&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;æ ‡é¢˜3&quot;</span>,</span><br><span class="line">      <span class="attr">time</span>: <span class="string">&quot;2020-01-03&quot;</span>,</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&quot;/images/image1.png&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h4 id="è¯·æ±‚æ•°æ®"><a href="#è¯·æ±‚æ•°æ®" class="headerlink" title="è¯·æ±‚æ•°æ®"></a>è¯·æ±‚æ•°æ®</h4><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/network/request/wx.request.html">RequestTask | å¾®ä¿¡å¼€æ”¾æ–‡æ¡£ (qq.com)</a></p><p>ä½¿ç”¨wx.requestè·å–æ•°æ®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">onLoad: <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">  wx.request(&#123;</span><br><span class="line">    <span class="comment">// æ¥å£åœ°å€</span></span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;http://edu.newsight.cn/wxList.php&#x27;</span>,</span><br><span class="line">    <span class="comment">// è¯·æ±‚çš„å‚æ•°</span></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="attr">num</span>: <span class="number">5</span>,</span><br><span class="line">      <span class="attr">page</span>: <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// æ¥å£è°ƒç”¨æˆåŠŸçš„å›è°ƒå‡½æ•°</span></span><br><span class="line">    <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(res);</span><br><span class="line">      <span class="built_in">console</span>.log(res.data);</span><br><span class="line">        <span class="comment">// è®¾ç½®æ•°æ®</span></span><br><span class="line">      <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">        <span class="attr">reqData</span>: res.data</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ä¹‹å‰çš„ä»£ç </p><p><code>demo06.wxml</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/demo06/demo06.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;out&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;reqData&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;pic&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.picurl&#125;&#125;&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>&#123;&#123;item.title&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;time&quot;</span>&gt;</span>&#123;&#123;item.posttime&#125;&#125; - &#123;&#123;item.author&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœåŸŸåæ£€éªŒä¸åˆæ³•ï¼Œå¯ä»¥åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°çš„å¼€å‘ä¸­ç®¡ç†æ·»åŠ æ‰€éœ€è¦ä½¿ç”¨çš„åŸŸåï¼Œæˆ–è€…å¼€å‘è€…å·¥å…·åœ¨è®¾ç½®ä¸æ£€æµ‹åˆæ³•ã€‚</p><h4 id="äº‹ä»¶ç»‘å®šåˆ·æ–°æ•°æ®"><a href="#äº‹ä»¶ç»‘å®šåˆ·æ–°æ•°æ®" class="headerlink" title="äº‹ä»¶ç»‘å®šåˆ·æ–°æ•°æ®"></a>äº‹ä»¶ç»‘å®šåˆ·æ–°æ•°æ®</h4><p><code>demo06.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/demo06/demo06.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * é¡µé¢çš„åˆå§‹æ•°æ®</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">reqData</span>: [],</span><br><span class="line">    <span class="attr">scrollTop</span>: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">reqParam</span>: &#123;</span><br><span class="line">    <span class="attr">page</span>: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åŠ è½½</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onLoad</span>: <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.getReqData(<span class="number">1</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¸‹ä¸€é¡µ</span></span><br><span class="line">  <span class="function"><span class="title">clickToNextPage</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.reqParam.page++;</span><br><span class="line">    <span class="built_in">this</span>.getReqData(<span class="built_in">this</span>.reqParam.page)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">getReqData</span>(<span class="params">page</span>)</span> &#123;</span><br><span class="line">    wx.request(&#123;</span><br><span class="line">      <span class="comment">// æ¥å£åœ°å€</span></span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;http://edu.newsight.cn/wxList.php&#x27;</span>,</span><br><span class="line">      <span class="comment">// è¯·æ±‚çš„å‚æ•°</span></span><br><span class="line">      <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">num</span>: <span class="number">4</span>,</span><br><span class="line">        <span class="attr">page</span>: page</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// æ¥å£è°ƒç”¨æˆåŠŸçš„å›è°ƒå‡½æ•°</span></span><br><span class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">        <span class="built_in">console</span>.log(res.data);</span><br><span class="line">        <span class="comment">// è®¾ç½®æ•°æ®</span></span><br><span class="line">        <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">          <span class="attr">reqData</span>: res.data</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>demo06.wxml</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;clickToNextPage&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>ä¸‹ä¸€é¡µ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç”¨æˆ·ä¿¡æ¯"><a href="#ç”¨æˆ·ä¿¡æ¯" class="headerlink" title="ç”¨æˆ·ä¿¡æ¯"></a>ç”¨æˆ·ä¿¡æ¯</h3><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/user-info/wx.getUserProfile.html">wx.getUserProfile(Object object) | å¾®ä¿¡å¼€æ”¾æ–‡æ¡£ (qq.com)</a></p><p><code>demo07.wxml</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;login&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>æˆæƒç™»å½•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;nickName&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;avatar&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>demo07.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">data: &#123;</span><br><span class="line">  <span class="attr">nickName</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">avatar</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆæƒç™»å½•</span></span><br><span class="line"><span class="function"><span class="title">login</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  wx.getUserProfile(&#123;</span><br><span class="line">    <span class="comment">// å£°æ˜è·å–ç”¨æˆ·ä¸ªäººä¿¡æ¯åçš„ç”¨é€”ï¼Œä¸è¶…è¿‡30ä¸ªå­—ç¬¦</span></span><br><span class="line">    <span class="attr">desc</span>: <span class="string">&#x27;å£°æ˜è·å–ç”¨æˆ·ä¿¡æ¯åçš„ç”¨é€”&#x27;</span>,</span><br><span class="line">    <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(res);</span><br><span class="line">      <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">          <span class="attr">nickName</span>: res.userInfo.nickName,</span><br><span class="line">          <span class="attr">avatar</span>: res.userInfo.avatarUrl</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">fail</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(res);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h3><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/storage/wx.setStorageSync.html">wx.setStorageSync(string key, any data) | å¾®ä¿¡å¼€æ”¾æ–‡æ¡£ (qq.com)</a></p><h4 id="å­˜"><a href="#å­˜" class="headerlink" title="å­˜"></a>å­˜</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">login</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  wx.getUserProfile(&#123;</span><br><span class="line">    <span class="comment">// å£°æ˜è·å–ç”¨æˆ·ä¸ªäººä¿¡æ¯åçš„ç”¨é€”ï¼Œä¸è¶…è¿‡30ä¸ªå­—ç¬¦</span></span><br><span class="line">    <span class="attr">desc</span>: <span class="string">&#x27;å£°æ˜è·å–ç”¨æˆ·ä¿¡æ¯åçš„ç”¨é€”&#x27;</span>,</span><br><span class="line">    <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(res);</span><br><span class="line">      <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">        <span class="attr">nickName</span>: res.userInfo.nickName,</span><br><span class="line">        <span class="attr">avatar</span>: res.userInfo.avatarUrl</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="comment">// å­˜ä¿¡æ¯</span></span><br><span class="line">      wx.setStorageSync(<span class="string">&#x27;userInfo&#x27;</span>, res.userInfo);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">fail</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(res);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å–"><a href="#å–" class="headerlink" title="å–"></a>å–</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;login&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;!nickName&#125;&#125;&quot;</span>&gt;</span>æˆæƒç™»å½•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;nickName&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;avatar&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">onLoad: <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å–ç¼“å­˜</span></span><br><span class="line">  <span class="keyword">let</span> userInfo = wx.getStorageSync(<span class="string">&#x27;userInfo&#x27;</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(userInfo);</span><br><span class="line">  <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">    <span class="attr">nickName</span>: userInfo.nickName,</span><br><span class="line">    <span class="attr">avatar</span>: userInfo.avatarUrl</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="æ¨¡å—åŒ–"><a href="#æ¨¡å—åŒ–" class="headerlink" title="æ¨¡å—åŒ–"></a>æ¨¡å—åŒ–</h2><p><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/module.html">Object module | å¾®ä¿¡å¼€æ”¾æ–‡æ¡£ (qq.com)</a></p><p><code>public.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myPublic = &#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">fun1</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;æ‰§è¡Œfun1&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">fun2</span>(<span class="params">p</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;æ‰§è¡Œfun2,å‚æ•°ï¼š&quot;</span> + p);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = myPublic</span><br></pre></td></tr></table></figure><p><code>demo08.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myPublic = <span class="built_in">require</span>(<span class="string">&#x27;../../utils/public.js&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="attr">onLoad</span>: <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">  myPublic.fun1();</span><br><span class="line">  myPublic.fun2(<span class="string">&quot;param&quot;</span>);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="å°ç¨‹åºä¸Šçº¿"><a href="#å°ç¨‹åºä¸Šçº¿" class="headerlink" title="å°ç¨‹åºä¸Šçº¿"></a>å°ç¨‹åºä¸Šçº¿</h2><ul><li><p>ä¿®æ”¹æµ‹è¯•å·ä¸ºAppID</p><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210719105719695.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210719105719695.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210719105719695"></p></li><li><p><a href="https://mp.weixin.qq.com/wxamp/devprofile/get_profile?token=275217971&lang=zh_CN">å°ç¨‹åº (qq.com)</a>ç®¡ç†æœåŠ¡å™¨åŸŸåï¼Œå–æ¶ˆä¸æ£€éªŒåˆæ³•åŸŸå</p></li><li><p>ä¸Šä¼ ä»£ç </p><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210719105623275.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210719105623275.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210719105623275"></p></li><li><p><a href="https://mp.weixin.qq.com/wxamp/wacodepage/getcodepage?token=275217971&lang=zh_CN">å°ç¨‹åº (qq.com)</a>æäº¤å®¡æ ¸</p><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210719105802928.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210719105802928.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210719105802928"></p><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210719105814987.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210719105814987.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210719105814987"></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å¾®ä¿¡å°ç¨‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹  </tag>
            
            <tag> é›†è®­ </tag>
            
            <tag> å¾®ä¿¡å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€é›†è®­ã€‘å¾®ä¿¡å°ç¨‹åº(ä¸€)</title>
      <link href="/2021/07/22/ji-xun-wei-xin-xiao-cheng-xu-yi/"/>
      <url>/2021/07/22/ji-xun-wei-xin-xiao-cheng-xu-yi/</url>
      
        <content type="html"><![CDATA[<h2 id="è‡ªå®šä¹‰ç»„ä»¶"><a href="#è‡ªå®šä¹‰ç»„ä»¶" class="headerlink" title="è‡ªå®šä¹‰ç»„ä»¶"></a>è‡ªå®šä¹‰ç»„ä»¶</h2><p><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Component.html">Component(Object object) | å¾®ä¿¡å¼€æ”¾æ–‡æ¡£ (qq.com)</a></p><blockquote><p>å°†éƒ¨åˆ†é‡å¤ä»£ç æŠ½å–å‡ºæ¥</p><p><a href="https://market.m.taobao.com/app/tbsearchwireless-pages/new-catemap/p/s-nx-categories?spm=a215s.7406091.0.0.3cc36770f1SCN5&utparam=%7B%22ranger_buckets_native%22:%22tsp2584_31920%22%7D&scm=1007.home_icon.fenl.d&wh_weex=true">å•†å“åˆ†ç±» (taobao.com)</a></p></blockquote><h3 id="åˆ›å»ºè‡ªå®šä¹‰ç»„ä»¶"><a href="#åˆ›å»ºè‡ªå®šä¹‰ç»„ä»¶" class="headerlink" title="åˆ›å»ºè‡ªå®šä¹‰ç»„ä»¶"></a>åˆ›å»ºè‡ªå®šä¹‰ç»„ä»¶</h3><blockquote><p>ç±»ä¼¼äºé¡µé¢ï¼Œä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶ç”±jsonã€wxmlã€wxssã€js 4ä¸ªæ–‡ä»¶ç»„æˆ</p></blockquote><p>å¯ä»¥åœ¨å¾®ä¿¡å¼€å‘è€…â¼¯å…·ä¸­å¿«é€Ÿåˆ›å»ºç»„ä»¶çš„â½‚ä»¶ç»“æ„</p><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210718102246185.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210718102246185.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210718102246185"></p><h3 id="å£°æ˜ç»„ä»¶ã€å¼•å…¥ç»„ä»¶"><a href="#å£°æ˜ç»„ä»¶ã€å¼•å…¥ç»„ä»¶" class="headerlink" title="å£°æ˜ç»„ä»¶ã€å¼•å…¥ç»„ä»¶"></a>å£°æ˜ç»„ä»¶ã€å¼•å…¥ç»„ä»¶</h3><p><code>tabs.json</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;component&quot;</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>demo01.json</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;usingComponents&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;Tabs&quot;</span>: <span class="string">&quot;/components/Tabs/Tabs&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç®€å•ç¼–è¾‘ç»„ä»¶"><a href="#ç®€å•ç¼–è¾‘ç»„ä»¶" class="headerlink" title="ç®€å•ç¼–è¾‘ç»„ä»¶"></a>ç®€å•ç¼–è¾‘ç»„ä»¶</h3><p><code>Tabs.wxml</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--components/Tabs/Tabs.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;tabs&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;tabs_title&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;title_item active&quot;</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;title_item&quot;</span>&gt;</span>åŸåˆ›<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;title_item&quot;</span>&gt;</span>åˆ†ç±»<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;title_item&quot;</span>&gt;</span>å…³äº<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;tabs_content&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>Tabs.wxss</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* components/Tabs/Tabs.wxss */</span></span><br><span class="line"><span class="selector-class">.tabs</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tabs_title</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10</span>rpx <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.title_item</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* é€‰ä¸­æ—¶çš„æ ·å¼ */</span></span><br><span class="line"><span class="selector-class">.active</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#b81d24</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">5</span>rpx solid currentColor;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tabs_content</span> &#123;&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šæ•°æ®éƒ½å†™åœ¨ç»„ä»¶çš„wxmlä¸­ï¼Œæ¥ä¸‹æ¥æ¥å®ç°jsåŠ¨æ€æ•°æ®</p><h3 id="å¡«å…¥åˆå§‹æ•°æ®"><a href="#å¡«å…¥åˆå§‹æ•°æ®" class="headerlink" title="å¡«å…¥åˆå§‹æ•°æ®"></a>å¡«å…¥åˆå§‹æ•°æ®</h3><p><code>Tabs.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// components/Tabs/Tabs.js</span></span><br><span class="line">Component(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">properties</span>: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç»„ä»¶çš„åˆå§‹æ•°æ®</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">tabs</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;é¦–é¡µ&quot;</span>,</span><br><span class="line">        <span class="attr">isActive</span>: <span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;åŸåˆ›&quot;</span>,</span><br><span class="line">        <span class="attr">isActive</span>: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">      ,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;åˆ†ç±»&quot;</span>,</span><br><span class="line">        <span class="attr">isActive</span>: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">      ,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;å…³äº&quot;</span>,</span><br><span class="line">        <span class="attr">isActive</span>: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>Tab.wxml</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;tabs&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;tabs_title&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åˆ—è¡¨æ¸²æŸ“ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- classä¸­ä¸‰å…ƒè¡¨è¾¾å¼ï¼Œæ ¹æ®itemçš„isActiveå±æ€§åˆ¤æ–­æ˜¯å¦é€‰ä¸­ï¼Œé€‰ä¸­åˆ™æ·»åŠ ç±»åä»¥æ˜¾ç¤ºæ ·å¼ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;tabs&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span> <span class="attr">class</span>=<span class="string">&quot;title_item &#123;&#123;item.isActive?&#x27;active&#x27;:&#x27;&#x27;&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123;item.name&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;tabs_content&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç»‘å®šç‚¹å‡»äº‹ä»¶"><a href="#ç»‘å®šç‚¹å‡»äº‹ä»¶" class="headerlink" title="ç»‘å®šç‚¹å‡»äº‹ä»¶"></a>ç»‘å®šç‚¹å‡»äº‹ä»¶</h3><p><code>Tab.wxml</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;tabs_title&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- åˆ—è¡¨æ¸²æŸ“ --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- classä¸­ä¸‰å…ƒè¡¨è¾¾å¼ï¼Œæ ¹æ®itemçš„isActiveå±æ€§åˆ¤æ–­æ˜¯å¦é€‰ä¸­ï¼Œé€‰ä¸­åˆ™æ·»åŠ ç±»åä»¥æ˜¾ç¤ºæ ·å¼ --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- data-indexè‡ªå®šä¹‰å±æ€§ï¼Œç”¨äºä¼ é€’å½“å‰çš„ç´¢å¼•å€¼ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;tabs&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span> <span class="attr">class</span>=<span class="string">&quot;title_item &#123;&#123;item.isActive?&#x27;active&#x27;:&#x27;&#x27;&#125;&#125;&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;handleItemTap&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">data-index</span>=<span class="string">&quot;&#123;&#123;index&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;item.name&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„è‡ªå®šä¹‰ç»„ä»¶çš„æ–¹æ³•å†™åœ¨methodsä¸­</p><p><code>Tabs.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    <span class="function"><span class="title">handleItemTap</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">      <span class="comment">// æŸ¥çœ‹ç´¢å¼•æ‰€åœ¨çš„ä½ç½®</span></span><br><span class="line">      <span class="built_in">console</span>.log(e);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 1.è·å–è¢«ç‚¹å‡»çš„ç´¢å¼•</span></span><br><span class="line">      <span class="comment">// ES6å¸¸é‡const,åªè¯»ä¸å¯æ”¹</span></span><br><span class="line">      <span class="comment">// ES6è§£æ„èµ‹å€¼:const &#123; index &#125; = e.currentTarget.dataset;</span></span><br><span class="line">      <span class="keyword">const</span> index = e.currentTarget.dataset.index;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 2.è·å–åŸæ•°ç»„</span></span><br><span class="line">      <span class="comment">// ES6å˜é‡let,å—çº§ä½œç”¨åŸŸ</span></span><br><span class="line">      <span class="comment">// ES6è§£æ„èµ‹å€¼:let &#123; tabs &#125; = this.data;</span></span><br><span class="line">      <span class="keyword">let</span> tabs = <span class="built_in">this</span>.data.tabs;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 3.å¾ªç¯æ•°ç»„ï¼šä¸ºå½“å‰ç´¢å¼•é¡¹è®¾ç½®isActiveï¼štrue,å…¶ä½™false</span></span><br><span class="line">      <span class="comment">// ES6ç®­å¤´å‡½æ•°</span></span><br><span class="line">      tabs.forEach(<span class="function">(<span class="params">v, i</span>) =&gt;</span> &#123;</span><br><span class="line">        i === index ? v.isActive = <span class="literal">true</span> : v.isActive = <span class="literal">false</span></span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// ä¿®æ”¹æ•°æ®</span></span><br><span class="line">      <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">        tabs</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šæ•°æ®éƒ½å†™åœ¨ç»„ä»¶ä¸­ï¼Œæ¥ä¸‹æ¥æ¥å®ç°çˆ¶å‘å­ä¼ é€’æ•°æ®</p><h3 id="çˆ¶å‘å­ä¼ é€’æ•°æ®"><a href="#çˆ¶å‘å­ä¼ é€’æ•°æ®" class="headerlink" title="çˆ¶å‘å­ä¼ é€’æ•°æ®"></a>çˆ¶å‘å­ä¼ é€’æ•°æ®</h3><p><code>demo01.wxml</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">  çˆ¶ç»„ä»¶demo01ï¼Œå­ç»„ä»¶Tabs</span></span><br><span class="line"><span class="comment">  çˆ¶ç»„ä»¶é€šè¿‡æ ‡ç­¾å±æ€§ä¼ é€’æ•°æ®</span></span><br><span class="line"><span class="comment">  å­ç»„ä»¶åœ¨propertiesä¸­æ¥æ”¶</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Tabs</span> <span class="attr">abc</span>=<span class="string">&quot;è¦ä¼ é€’çš„æ•°æ®&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Tabs</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>Tabs.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">properties: &#123;</span><br><span class="line">  <span class="comment">// å±æ€§å</span></span><br><span class="line">  <span class="attr">abc</span>: &#123;</span><br><span class="line">    <span class="comment">// æ¥æ”¶çš„æ•°æ®çš„ç±»å‹</span></span><br><span class="line">    <span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">    <span class="comment">// é»˜è®¤å€¼</span></span><br><span class="line">    <span class="attr">value</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p><code>Tabs.wxml</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç›¸å½“äºdataä¸­çš„æ•°æ®ä½¿ï¼Œç”¨&#123;&#123;&#125;&#125;æ¸²æŸ“ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;abc&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ä¿®æ”¹æ¡ˆä¾‹ä»£ç </p><ol><li><p>å°†è¦ä¼ é€’çš„æ•°æ®æ”¾åœ¨çˆ¶ç»„ä»¶çš„dataä¸­ï¼Œå³åŸå…ˆå†™åœ¨Tabs.jsçš„dataä¸­çš„æ•°æ®æ”¾åœ¨demo01.jsçš„dataä¸­</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">data: &#123;</span><br><span class="line">    <span class="attr">tabs</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;é¦–é¡µ&quot;</span>,</span><br><span class="line">        <span class="attr">isActive</span>: <span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;åŸåˆ›&quot;</span>,</span><br><span class="line">        <span class="attr">isActive</span>: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">      ,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;åˆ†ç±»&quot;</span>,</span><br><span class="line">        <span class="attr">isActive</span>: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">      ,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;å…³äº&quot;</span>,</span><br><span class="line">        <span class="attr">isActive</span>: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li><li><p>çˆ¶ç»„ä»¶é€šè¿‡æ ‡ç­¾å±æ€§ä¼ é€’æ•°æ®</p><p><code>demo01.wxml</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Tabs</span> <span class="attr">tabs</span>=<span class="string">&quot;&#123;&#123;tabs&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Tabs</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>å­ç»„ä»¶åœ¨propertiesä¸­æ¥æ”¶ï¼Œæœ€åæ•ˆæœä¸ä¹‹å‰ç›¸åŒ</p><p><code>Tabs.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">properties: &#123;</span><br><span class="line">  <span class="attr">tabs</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="built_in">Array</span>,</span><br><span class="line">    <span class="attr">value</span>: []</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li></ol><p>æ­¤æ—¶<code>Tabs.js</code>ä¸­ä»£ç ä»ç„¶æ˜¯åœ¨å­ç»„ä»¶å½“ä¸­ä¿®æ”¹tabæ•°ç»„ï¼Œè€Œä¸æ˜¯åœ¨çˆ¶ç»„ä»¶çš„dataä¸­ä¿®æ”¹tabï¼ˆå¯ä»¥åœ¨AppDataçª—å£æŸ¥çœ‹ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// this.dataä¸­æ‰¾ä¸åˆ°æ•°æ®ï¼Œåˆ™åœ¨propertiesä¸­å¯»æ‰¾</span></span><br><span class="line"><span class="keyword">let</span> tabs = <span class="built_in">this</span>.data.tabs;</span><br><span class="line"><span class="comment">// å°†tabsæ”¾å…¥dataå½“ä¸­</span></span><br><span class="line"><span class="built_in">this</span>.setData(&#123;</span><br><span class="line">  tabs</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥éœ€è¦å°†å¤„ç†æ•°æ®æ”¾åœ¨çˆ¶ç»„ä»¶å½“ä¸­ï¼Œè€Œæ‰€éœ€è¦çš„ç´¢å¼•å€¼åˆ™ç”±å­ç»„ä»¶ä¼ é€’ç»™çˆ¶ç»„ä»¶ï¼ˆå­å‘çˆ¶ä¼ é€’æ•°æ®ï¼‰</p><h3 id="å­å‘çˆ¶ä¼ é€’æ•°æ®"><a href="#å­å‘çˆ¶ä¼ é€’æ•°æ®" class="headerlink" title="å­å‘çˆ¶ä¼ é€’æ•°æ®"></a>å­å‘çˆ¶ä¼ é€’æ•°æ®</h3><p><code>Tabs.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  <span class="function"><span class="title">handleItemTap</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 1.è·å–è¢«ç‚¹å‡»çš„ç´¢å¼•</span></span><br><span class="line">    <span class="keyword">const</span> index = e.currentTarget.dataset.index;</span><br><span class="line">    <span class="comment">// 2.è§¦å‘çˆ¶ç»„ä»¶ä¸­çš„è‡ªå®šä¹‰äº‹ä»¶ï¼Œå¹¶ä¼ é€’æ•°æ®</span></span><br><span class="line">    <span class="built_in">this</span>.triggerEvent(<span class="string">&quot;itemChange&quot;</span>, &#123; index &#125;); <span class="comment">//triggerEvent(&quot;è‡ªå®šä¹‰äº‹ä»¶å&quot;, è¦ä¼ é€’çš„æ•°æ®)</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>demo01.wxml</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">  å­ç»„ä»¶Tabs -&gt; çˆ¶ç»„ä»¶demo01</span></span><br><span class="line"><span class="comment">  åœ¨å­ç»„ä»¶çš„æ ‡ç­¾ä¸­æ·»åŠ è‡ªå®šä¹‰äº‹ä»¶</span></span><br><span class="line"><span class="comment">  ç¼–å†™çˆ¶ç»„ä»¶jsäº‹ä»¶æ–¹æ³•</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Tabs</span> <span class="attr">tabs</span>=<span class="string">&quot;&#123;&#123;tabs&#125;&#125;&quot;</span> <span class="attr">binditemChange</span>=<span class="string">&quot;handleItemChange&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Tabs</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>demo01.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªå®šä¹‰äº‹ä»¶æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="title">handleItemChange</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(e);</span><br><span class="line">  <span class="comment">// æ¥æ”¶ä¼ é€’çš„æ•°æ®</span></span><br><span class="line">  <span class="keyword">const</span> index = e.detail.index;</span><br><span class="line">  <span class="comment">// ä»¥ä¸‹ä»£ç ç›¸åŒ</span></span><br><span class="line">  <span class="keyword">let</span> tabs = <span class="built_in">this</span>.data.tabs;</span><br><span class="line">  tabs.forEach(<span class="function">(<span class="params">v, i</span>) =&gt;</span> &#123;</span><br><span class="line">    i === index ? v.isActive = <span class="literal">true</span> : v.isActive = <span class="literal">false</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">    tabs</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>AppDataçª—å£æŸ¥çœ‹å³å¯</p><h3 id="slotæ ‡ç­¾"><a href="#slotæ ‡ç­¾" class="headerlink" title="slotæ ‡ç­¾"></a>slotæ ‡ç­¾</h3><blockquote><p>slotå ä½ç¬¦ï¼ˆæ’æ§½ï¼‰ï¼Œçˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶ä¼ é€’ä¸€äº›æ ‡ç­¾æ¥æ›¿æ¢slotçš„ä½ç½®</p></blockquote><p><code>Tabs.wxml</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;tabs_content&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>demo01.wxml</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Tabs</span> <span class="attr">tabs</span>=<span class="string">&quot;&#123;&#123;tabs&#125;&#125;&quot;</span> <span class="attr">binditemChange</span>=<span class="string">&quot;handleItemChange&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;tabs[0].isActive&#125;&#125;&quot;</span>&gt;</span>å†…å®¹1<span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:elif</span>=<span class="string">&quot;&#123;&#123;tabs[1].isActive&#125;&#125;&quot;</span>&gt;</span>å†…å®¹2<span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:elif</span>=<span class="string">&quot;&#123;&#123;tabs[2].isActive&#125;&#125;&quot;</span>&gt;</span>å†…å®¹3<span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:else</span>&gt;</span>å†…å®¹4<span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Tabs</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h2><h3 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h3><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210718141859157.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210718141859157.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210718141859157"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.js</span></span><br><span class="line">App(&#123;</span><br><span class="line">  <span class="comment">// åº”ç”¨ ç¬¬ä¸€æ¬¡å¯åŠ¨ çš„æ—¶å€™è§¦å‘ï¼Œå¯ç”¨äºæœ€å¼€å§‹è·å–ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯ç­‰</span></span><br><span class="line">  <span class="function"><span class="title">onLaunch</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;onLaunch&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åº”ç”¨ æ˜¾ç¤º çš„æ—¶å€™è§¦å‘ï¼Œå¯ç”¨äºå¯¹é¡µé¢æ•°æ®ã€é¡µé¢æ•ˆæœè¿›è¡Œé‡ç½®</span></span><br><span class="line">  <span class="function"><span class="title">onShow</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;onShow&quot;</span>);</span><br><span class="line">    <span class="comment">// å¯è°ƒç”¨å¤šæ¬¡</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åº”ç”¨ éšè— çš„æ—¶å€™è§¦å‘ï¼Œå¯ç”¨äºæš‚åœæˆ–æ¸…é™¤å®šæ—¶å™¨</span></span><br><span class="line">  <span class="function"><span class="title">onHide</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;onHide&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åº”ç”¨ ä»£ç æŠ¥é”™ çš„æ—¶å€™è§¦å‘ï¼Œå¯ç”¨äºæ”¶é›†é”™è¯¯ä¿¡æ¯å¹¶å‘é€åˆ°åå°</span></span><br><span class="line">  <span class="function"><span class="title">onError</span>(<span class="params">error</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;onError&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åº”ç”¨ ç¬¬ä¸€æ¬¡å¯åŠ¨æ‰¾ä¸åˆ°å…¥å£é¡µé¢ çš„æ—¶å€™è§¦å‘ï¼Œå¯ç”¨äºè·³è½¬</span></span><br><span class="line">  <span class="function"><span class="title">onPageNotFound</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;onPageNotFound&quot;</span>);</span><br><span class="line">    wx.navigateTo(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/pages/demo01/demo01&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="é¡µé¢"><a href="#é¡µé¢" class="headerlink" title="é¡µé¢"></a>é¡µé¢</h3><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210718141908133.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210718141908133.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210718141908133"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/demo02/demo02.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * é¡µé¢çš„åˆå§‹æ•°æ®</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åŠ è½½</span></span><br><span class="line"><span class="comment">   * å‘é€å¼‚æ­¥è¯·æ±‚åˆå§‹åŒ–é¡µé¢æ•°æ®</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onLoad</span>: <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;onLoad&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢æ˜¾ç¤º</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onShow</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;onShow&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆ</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onReady</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;onReady&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢éšè—</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onHide</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;onHide&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢å¸è½½</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onUnload</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;onUnload&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * é¡µé¢ç›¸å…³äº‹ä»¶å¤„ç†å‡½æ•°--ç›‘å¬ç”¨æˆ·ä¸‹æ‹‰åŠ¨ä½œ</span></span><br><span class="line"><span class="comment">   * å¯¹é¡µé¢åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onPullDownRefresh</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;onPullDownRefresh&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * é¡µé¢ä¸Šæ‹‰è§¦åº•äº‹ä»¶çš„å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="comment">   * è§¦åº•åŠ è½½æ›´å¤šæ•°æ®</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onReachBottom</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;onReachBottom&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç”¨æˆ·ç‚¹å‡»å³ä¸Šè§’åˆ†äº«</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onShareAppMessage</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;onShareAppMessage&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * é¡µé¢æ»šåŠ¨</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">onPageScroll</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;onPageScroll&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * é¡µé¢å°ºå¯¸æ”¹å˜</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">onResize</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;onResize&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å½“å‰æ˜¯tabé¡µï¼Œç‚¹å‡»å½“å‰é¡µçš„tabæ—¶è§¦å‘</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">onTabItemTap</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;onTabItemTap&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¾®ä¿¡å°ç¨‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹  </tag>
            
            <tag> é›†è®­ </tag>
            
            <tag> å¾®ä¿¡å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€å­¦ä¹ ç¬”è®°ã€‘SpringBoot2</title>
      <link href="/2021/07/20/xue-xi-bi-ji-springboot2/"/>
      <url>/2021/07/20/xue-xi-bi-ji-springboot2/</url>
      
        <content type="html"><![CDATA[<h2 id="æ•™ç¨‹ä¸æ–‡æ¡£"><a href="#æ•™ç¨‹ä¸æ–‡æ¡£" class="headerlink" title="æ•™ç¨‹ä¸æ–‡æ¡£"></a>æ•™ç¨‹ä¸æ–‡æ¡£</h2><p><a href="https://www.yuque.com/atguigu/springboot">SpringBoot2æ ¸å¿ƒæŠ€æœ¯ä¸å“åº”å¼ç¼–ç¨‹ Â· è¯­é›€ (yuque.com)</a></p><h2 id="Springä¸SpringBoot2"><a href="#Springä¸SpringBoot2" class="headerlink" title="Springä¸SpringBoot2"></a>Springä¸SpringBoot2</h2><p><a href="https://www.yuque.com/atguigu/springboot/na3pfd">01ã€Springä¸SpringBoot Â· è¯­é›€ (yuque.com)</a></p><h2 id="HelloWorld"><a href="#HelloWorld" class="headerlink" title="HelloWorld"></a>HelloWorld</h2><ol><li><p>å¯¼å…¥ä¾èµ– <code>pom.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- çˆ¶é¡¹ç›®é…ç½® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.3.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- webåœºæ™¯å¯åŠ¨å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™controller  <code>HelloController.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @Controller // æ³¨æ˜controller</span></span><br><span class="line"><span class="comment">// @ResponseBody // æ³¨æ˜å°†javaå¯¹è±¡è½¬ä¸ºjsonæ ¼å¼çš„æ•°æ®</span></span><br><span class="line"><span class="meta">@RestController</span><span class="comment">// ä»£æ›¿ä»¥ä¸Šä¸¤è€…</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ˜ å°„è¯·æ±‚çš„åœ°å€</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">handle1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello,SpringBoot2&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™ä¸»ç¨‹åºç±»å¹¶æµ‹è¯• <code>MainApplication.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸»ç¨‹åºç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// è¡¨æ˜è¿™æ˜¯ä¸€ä¸ªSpringBootåº”ç”¨</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// runå£°æ˜ä¸»ç¨‹åºç±»ï¼Œè¿”å›ä¸€ä¸ªIoCå®¹å™¨</span></span><br><span class="line">        SpringApplication.run(MainApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>resourcesæ–‡ä»¶å¤¹ä¸‹application.propertiesï¼Œå¯æ ¹æ®æ–‡æ¡£è‡ªå®šä¹‰é…ç½®</p><p><a href="https://docs.spring.io/spring-boot/docs/2.3.12.RELEASE/reference/html/appendix-application-properties.html#common-application-properties">Common Application properties (spring.io)</a></p></li><li><p>åˆ›å»ºå¯æ‰§è¡ŒjaråŒ…ï¼Œæ·»åŠ buildä¾èµ–ï¼Œç„¶åç‚¹å‡»mavenä¸­çš„lifecycleä¸­çš„cleanä¸packageå¹¶æ‰§è¡Œ  <code>pom.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æ‰§è¡ŒjaråŒ…ï¼Œåœ¨targetç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p><p><code>java -jar åŒ…å.jar</code></p></li></ol><h2 id="ä¾èµ–ç®¡ç†ä¸è‡ªåŠ¨é…ç½®ç‰¹æ€§"><a href="#ä¾èµ–ç®¡ç†ä¸è‡ªåŠ¨é…ç½®ç‰¹æ€§" class="headerlink" title="ä¾èµ–ç®¡ç†ä¸è‡ªåŠ¨é…ç½®ç‰¹æ€§"></a>ä¾èµ–ç®¡ç†ä¸è‡ªåŠ¨é…ç½®ç‰¹æ€§</h2><p><a href="https://www.bilibili.com/video/BV19K4y1L7MT?p=6&spm_id_from=pageDriver">é›·ä¸°é˜³2021ç‰ˆSpringBoot2é›¶åŸºç¡€å…¥é—¨springbootå…¨å¥—å®Œæ•´ç‰ˆï¼ˆspring boot2ï¼‰_å“”å“©å“”å“©_bilibili</a></p><h2 id="åº•å±‚æ³¨è§£"><a href="#åº•å±‚æ³¨è§£" class="headerlink" title="åº•å±‚æ³¨è§£"></a>åº•å±‚æ³¨è§£</h2><h3 id="Configurationã€-Bean-é…ç½®å¯¹è±¡"><a href="#Configurationã€-Bean-é…ç½®å¯¹è±¡" class="headerlink" title="@Configurationã€@Bean é…ç½®å¯¹è±¡"></a>@Configurationã€@Bean é…ç½®å¯¹è±¡</h3><h4 id="åŸ"><a href="#åŸ" class="headerlink" title="åŸ"></a>åŸ</h4><p>åŸSpringä½¿ç”¨xmlé…ç½®æ–‡ä»¶é…ç½®beanå¯¹è±¡å¦‚ä¸‹</p><p><code>bean.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user01&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.myspringboot2.bean.User&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;zhangsan&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;18&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.myspringboot2.bean.Pet&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;mimi&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="ç°"><a href="#ç°" class="headerlink" title="ç°"></a>ç°</h4><p>ç¼–å†™é…ç½®<code>MyConfig.java</code></p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1ã€é…ç½®ç±»é‡Œé¢ä½¿ç”¨<span class="doctag">@Bean</span>æ·»åŠ å¯¹è±¡ï¼Œé»˜è®¤æ˜¯å•å®ä¾‹</span></span><br><span class="line"><span class="comment"> * 2ã€é…ç½®ç±»æœ¬èº«ä¹Ÿæ˜¯å¯¹è±¡</span></span><br><span class="line"><span class="comment"> * 3ã€proxyBeanMethods: ä»£ç†beançš„æ–¹æ³•ã€‚é»˜è®¤ä¸ºtrue(fullæ¨¡å¼)ï¼Œä½¿ç”¨ä»£ç†å¯¹è±¡è°ƒç”¨æ–¹æ³•ï¼Œä¿è¯å¯¹è±¡æ˜¯å•å®ä¾‹ï¼›å¦åˆ™(liteæ¨¡å¼)éå•å®ä¾‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration(proxyBeanMethods = true)</span>  <span class="comment">//å£°æ˜è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼ˆå³æ›¿æ¢æ‰é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ— è®ºå¤–éƒ¨å¯¹è¿™ä¸ªé…ç½®ç±»ä¸­çš„æ–¹æ³•è°ƒç”¨å¤šå°‘æ¬¡ï¼Œè·å¾—çš„éƒ½æ˜¯å®¹å™¨ä¸­çš„å•å®ä¾‹å¯¹è±¡</span></span><br><span class="line">    <span class="meta">@Bean</span>   <span class="comment">//å‘å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ï¼Œidä¸ºæ–¹æ³•å(å¯ä»¥è‡ªå®šä¹‰)ï¼Œç»„ä»¶ç±»å‹ä¸ºè¿”å›ç±»å‹ï¼Œç»„ä»¶åœ¨å®¹å™¨ä¸­çš„å®ä¾‹ä¸ºè¿”å›åœ°å€¼</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">user01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User(<span class="string">&quot;zhangsan&quot;</span>, <span class="number">18</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean(&quot;pet01&quot;)</span>  <span class="comment">//è‡ªå®šä¹‰id</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Pet <span class="title">cat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Pet(<span class="string">&quot;mimi&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»<code>MainApplication.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸»ç¨‹åºç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// è¡¨æ˜è¿™æ˜¯ä¸€ä¸ªSpringBootåº”ç”¨</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–IoCå®¹å™¨,runå£°æ˜ä¸»ç¨‹åºç±»,è¿”å›ä¸€ä¸ªIoCå®¹å™¨</span></span><br><span class="line">        ConfigurableApplicationContext run = SpringApplication.run(MainApplication.class, args);</span><br><span class="line">        <span class="comment">// ä»å®¹å™¨ä¸­è·å–bean,é»˜è®¤æ˜¯å•å®ä¾‹</span></span><br><span class="line">        User user01 = run.getBean(<span class="string">&quot;user01&quot;</span>, User.class);</span><br><span class="line">        Pet pet01 = run.getBean(<span class="string">&quot;pet01&quot;</span>, Pet.class);</span><br><span class="line">        MyConfig myConfig = run.getBean(MyConfig.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Fullæ¨¡å¼ä¸Liteæ¨¡å¼"><a href="#Fullæ¨¡å¼ä¸Liteæ¨¡å¼" class="headerlink" title="Fullæ¨¡å¼ä¸Liteæ¨¡å¼"></a>Fullæ¨¡å¼ä¸Liteæ¨¡å¼</h4><ul><li>é…ç½®ç±»ç»„ä»¶ä¹‹é—´æ— ä¾èµ–å…³ç³»ç”¨Liteæ¨¡å¼åŠ é€Ÿå®¢å™¨å¯åŠ¨è¿‡ç¨‹,å‡å°‘åˆ¤æ–­</li><li>é…ç½®ç±»ç»„ä»¶ä¹‹é—´æœ‰ä¾èµ–å…³ç³»,æ–¹æ³•ä¼šè¢«è°ƒç”¨å¾—åˆ°ä¹‹å‰å•å®ä¾‹ç»„ä»¶,ç”¨Fullæ¨¡å¼</li></ul><h3 id="ComponentScan-åŒ…æ‰«æ"><a href="#ComponentScan-åŒ…æ‰«æ" class="headerlink" title="@ComponentScan åŒ…æ‰«æ"></a>@ComponentScan åŒ…æ‰«æ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸€ä¸‹ä¸‰è€…ç›¸å½“äº@SpringBootApplication</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.myspringboot2&quot;)</span><span class="comment">//åŒ…æ‰«æåœ°å€</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br></pre></td></tr></table></figure><h3 id="Import-æ³¨å…¥å¯¹è±¡"><a href="#Import-æ³¨å…¥å¯¹è±¡" class="headerlink" title="@Import æ³¨å…¥å¯¹è±¡"></a>@Import æ³¨å…¥å¯¹è±¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Import(&#123;User.class, DBHelper.class&#125;)</span>   <span class="comment">//å‘å®¹å™¨ä¸­æ·»åŠ å¯¹åº”ç±»å‹çš„å¯¹è±¡,é»˜è®¤å¯¹è±¡åä¸ºå¯¹åº”ç±»çš„å…¨ç±»å</span></span><br></pre></td></tr></table></figure><h3 id="Conditional-æ¡ä»¶è£…é…"><a href="#Conditional-æ¡ä»¶è£…é…" class="headerlink" title="@Conditional æ¡ä»¶è£…é…"></a>@Conditional æ¡ä»¶è£…é…</h3><p>ä½¿ç”¨ <code>MyConfig.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span>  <span class="comment">//å£°æ˜è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼ˆå³æ›¿æ¢æ‰é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ConditionalOnBean(name = &quot;pet02&quot;)</span>    <span class="comment">// æŒ‰æ¡ä»¶æ‰§è¡Œå‘å®¹å™¨ä¸­æ³¨å…¥å¯¹è±¡,å¯æ”¾åœ¨ç±»ä¸Š(åˆ™æŒ‰æ¡ä»¶æ‰§è¡Œæ˜¯å¦æ³¨å…¥ç±»ä¸­æ‰€æœ‰çš„å¯¹è±¡)</span></span><br><span class="line">    <span class="meta">@Bean</span>   <span class="comment">//å‘å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ï¼Œidä¸ºæ–¹æ³•å(å¯ä»¥è‡ªå®šä¹‰)ï¼Œç»„ä»¶ç±»å‹ä¸ºè¿”å›ç±»å‹ï¼Œç»„ä»¶åœ¨å®¹å™¨ä¸­çš„å®ä¾‹ä¸ºè¿”å›åœ°å€¼</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">user01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User(<span class="string">&quot;zhangsan&quot;</span>, <span class="number">18</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯• <code>MainApplication.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–IoCå®¹å™¨,runå£°æ˜ä¸»ç¨‹åºç±»ï¼Œè¿”å›ä¸€ä¸ªIoCå®¹å™¨</span></span><br><span class="line">        ConfigurableApplicationContext run = SpringApplication.run(MainApplication.class, args);</span><br><span class="line">        <span class="comment">// ç”±äºuser01é…ç½®çš„æ˜¯ç”±æ·»åŠ äº†ConditinalOnBean,è€Œå…¶ä¸­çš„æ¡ä»¶pet02å¯¹è±¡å¹¶ä¸åœ¨å®¹å™¨å½“ä¸­ï¼Œæ‰€ä»¥æœªæ³¨å…¥user01</span></span><br><span class="line">        System.out.println(run.containsBean(<span class="string">&quot;user01&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ImportResource-å¯¼å…¥xmlé…ç½®æ–‡ä»¶"><a href="#ImportResource-å¯¼å…¥xmlé…ç½®æ–‡ä»¶" class="headerlink" title="@ImportResource å¯¼å…¥xmlé…ç½®æ–‡ä»¶"></a>@ImportResource å¯¼å…¥xmlé…ç½®æ–‡ä»¶</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ImportResource(&quot;classpath:beans.xml&quot;)</span>  <span class="comment">//å…¼å®¹xmlé…ç½®</span></span><br><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span>  <span class="comment">//å£°æ˜è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼ˆå³æ›¿æ¢æ‰é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–IoCå®¹å™¨,runå£°æ˜ä¸»ç¨‹åºç±»ï¼Œè¿”å›ä¸€ä¸ªIoCå®¹å™¨</span></span><br><span class="line">        ConfigurableApplicationContext run = SpringApplication.run(MainApplication.class, args);</span><br><span class="line">        <span class="comment">// ä½¿ç”¨@ImportResourceæˆåŠŸæ³¨å…¥beans.xmlä¸­çš„å¯¹è±¡</span></span><br><span class="line">        System.out.println(run.containsBean(<span class="string">&quot;user01&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ConfigurationProperties-é…ç½®ç»‘å®š"><a href="#ConfigurationProperties-é…ç½®ç»‘å®š" class="headerlink" title="@ConfigurationProperties é…ç½®ç»‘å®š"></a>@ConfigurationProperties é…ç½®ç»‘å®š</h3><p>ç¼–å†™å±æ€§ï¼Œ <code>application.properties</code>ï¼Œæ³¨æ„ä½¿ç”¨å…¨å°å†™</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">mycar.brand</span>=<span class="string">ABC</span></span><br><span class="line"><span class="meta">mycar.price</span>=<span class="string">100000</span></span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€ç§æ–¹æ³•ï¼šéœ€è¦åœ¨å®¹å™¨ä¸­çš„ç»„ä»¶ä¸Šä½¿ç”¨ï¼Œ  <code>Car.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>  <span class="comment">//å£°æ˜ä¸ºç»„ä»¶ï¼Œåªæœ‰å®¹å™¨ä¸­çš„ç»„ä»¶æ‰èƒ½ä½¿ç”¨</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;mycar&quot;)</span>  <span class="comment">//ç»‘å®šé…ç½®æ–‡ä»¶ä¸­çš„å±æ€§ï¼ŒprefixæŒ‡å®šå¯¹åº”å‰ç¼€</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    String brand;</span><br><span class="line">    Integer price;</span><br><span class="line"><span class="comment">// â€¦â€¦</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§æ–¹æ³•ï¼šä¸ä½¿ç”¨@Componentå£°æ˜Carä¸ºç»„ä»¶ï¼Œè€Œæ˜¯åœ¨é…ç½®ç±»ç§å¼€å¯æŒ‡å®šå¯¹è±¡çš„å±æ€§é…ç½®åŠŸèƒ½</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableConfigurationProperties(Car.class)</span>  <span class="comment">//å¼€å¯æŒ‡å®šå¯¹è±¡çš„å±æ€§é…ç½®åŠŸèƒ½</span></span><br><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span>  <span class="comment">//å£°æ˜è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼ˆå³æ›¿æ¢æ‰é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>&#123;</span><br><span class="line">    <span class="comment">// â€¦â€¦</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ï¼Œ <code>HelloController.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    Car car;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/car&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Car <span class="title">car</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> car;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è‡ªåŠ¨é…ç½®åŸç†ï¼ˆæºç åˆ†æ"><a href="#è‡ªåŠ¨é…ç½®åŸç†ï¼ˆæºç åˆ†æ" class="headerlink" title="è‡ªåŠ¨é…ç½®åŸç†ï¼ˆæºç åˆ†æ"></a>è‡ªåŠ¨é…ç½®åŸç†ï¼ˆæºç åˆ†æ</h2><p><a href="https://www.bilibili.com/video/BV19K4y1L7MT?p=13&spm_id_from=pageDriver">é›·ä¸°é˜³2021ç‰ˆSpringBoot2é›¶åŸºç¡€å…¥é—¨springbootå…¨å¥—å®Œæ•´ç‰ˆï¼ˆspring boot2ï¼‰_å“”å“©å“”å“©_bilibili</a></p><h3 id="SpringBootApplication"><a href="#SpringBootApplication" class="headerlink" title="@SpringBootApplication"></a>@SpringBootApplication</h3><blockquote><p>å£°æ˜å½“å‰æ˜¯ä¸€ä¸ªé…ç½®ç±»</p></blockquote><h3 id="ComponentScan"><a href="#ComponentScan" class="headerlink" title="@ComponentScan"></a>@ComponentScan</h3><blockquote><p>æŒ‡å®šæ‰«æè·¯å¾„</p></blockquote><h3 id="EnableAutoConfiguration"><a href="#EnableAutoConfiguration" class="headerlink" title="@EnableAutoConfiguration"></a>@EnableAutoConfiguration</h3><h4 id="AutoConfigurationPackage"><a href="#AutoConfigurationPackage" class="headerlink" title="@AutoConfigurationPackage"></a>@AutoConfigurationPackage</h4><blockquote><p>åˆ©ç”¨Registrarå°†å½“å‰åŒ…ä¸‹çš„æ‰€æœ‰ç»„ä»¶å…¨éƒ¨å¯¼å…¥è¿›å®¹å™¨</p></blockquote><h4 id="Import"><a href="#Import" class="headerlink" title="@Import"></a>@Import</h4><blockquote><p>å¯¼å…¥é»˜è®¤ç»„ä»¶</p></blockquote><h2 id="ä¾¿æ·ä½¿ç”¨"><a href="#ä¾¿æ·ä½¿ç”¨" class="headerlink" title="ä¾¿æ·ä½¿ç”¨"></a>ä¾¿æ·ä½¿ç”¨</h2><h3 id="Lombok"><a href="#Lombok" class="headerlink" title="Lombok"></a>Lombok</h3><blockquote><p>ç®€åŒ–JavaBeanç¼–å†™ç­‰</p></blockquote><ol><li><p>å¼•å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™JavaBean</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@NoArgsConstructor</span>  <span class="comment">//è‡ªåŠ¨ç¼–å†™æ— å‚æ„é€ å™¨</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span>  <span class="comment">//è‡ªåŠ¨ç¼–å†™å…¨å‚æ„é€ å™¨</span></span><br><span class="line"><span class="meta">@Data</span>   <span class="comment">//è‡ªåŠ¨ç¼–å†™set/get/toStringæ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    String brand;</span><br><span class="line">    Integer price;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™controllerçš„æ—¥å¿—æ‰“å°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Slf4j//å¼•å…¥æ—¥å¿—æ¥å£</span><br><span class="line">@RestController</span><br><span class="line">public class HelloController &#123;</span><br><span class="line">    // æ˜ å°„è¯·æ±‚çš„åœ°å€</span><br><span class="line">    @RequestMapping(&quot;/hello&quot;)</span><br><span class="line">    public String handle1() &#123;</span><br><span class="line">        log.info(&quot;hello&quot;);//æ—¥å¿—æ‰“å°ä¿¡æ¯</span><br><span class="line">        return &quot;Hello,SpringBoot2&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="Dev-toolsã€JRebel"><a href="#Dev-toolsã€JRebel" class="headerlink" title="Dev-toolsã€JRebel"></a>Dev-toolsã€JRebel</h3><blockquote><p>è‡ªåŠ¨é‡å¯ã€çƒ­æ›´æ–°</p></blockquote><ol><li><p>å¼•å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨ Ctrl+F9 æ›´æ–°</p></li></ol><h3 id="Spring-Initializr"><a href="#Spring-Initializr" class="headerlink" title="Spring Initializr"></a>Spring Initializr</h3><blockquote><p>å¿«é€Ÿåˆ›å»ºspringbootåº”ç”¨ï¼Œåˆ›å»ºåº”ç”¨æ—¶é€‰æ‹©å³å¯</p></blockquote><h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><h3 id="properties"><a href="#properties" class="headerlink" title="properties"></a>properties</h3><h3 id="yaml"><a href="#yaml" class="headerlink" title="yaml"></a>yaml</h3><h4 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h4><ul><li>key: value    #æ³¨æ„ç©ºæ ¼</li><li>å¤§å°å†™æ•æ„Ÿ</li><li>ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»</li><li>ç¼©è¿›ä¸å…è®¸ä½¿ç”¨tabï¼Œåªå…è®¸ç©ºæ ¼</li><li>ç¼©è¿›ç©ºæ ¼æ•°æ— å½±å“ï¼ŒåŒå±‚çº§çš„å…ƒç´ éœ€è¦å·¦å¯¹é½</li><li>#ç¼–å†™æ³¨é‡Š</li><li>â€œâ€åŒå¼•å·å†…\nç­‰ä¸è½¬ä¹‰ï¼Œä»ç„¶æ˜¯å›è½¦çš„æœ¬æ„æ˜¾ç¤ºä¸ºå›è½¦ï¼Œâ€™â€™å•å¼•å·å†…è½¬ä¹‰ï¼Œ\næ˜¾ç¤ºä¸ºå­—ç¬¦ä¸²</li></ul><h4 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h4><ul><li><p>å­—é¢é‡</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">key:</span> <span class="string">value</span></span><br></pre></td></tr></table></figure></li><li><p>å¯¹è±¡</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">k:</span> &#123;<span class="attr">k1:</span> <span class="string">v1</span>,<span class="attr">k2:</span> <span class="string">v2</span>,<span class="attr">k3:</span> <span class="string">v3</span>&#125;</span><br><span class="line"><span class="comment"># æˆ–</span></span><br><span class="line"><span class="attr">k:</span></span><br><span class="line">  <span class="attr">k1:</span> <span class="string">v1</span></span><br><span class="line">  <span class="attr">k2:</span> <span class="string">v2</span></span><br><span class="line">  <span class="attr">k3:</span> <span class="string">v3</span></span><br></pre></td></tr></table></figure></li><li><p>æ•°ç»„</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">k:</span> [<span class="string">v1</span>,<span class="string">v2</span>,<span class="string">v3</span>]</span><br><span class="line"><span class="comment"># æˆ–</span></span><br><span class="line"><span class="attr">k:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">v1</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">v2</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">v3</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><p><a href="https://www.bilibili.com/video/BV19K4y1L7MT?p=20&spm_id_from=pageDriver">é›·ä¸°é˜³2021ç‰ˆSpringBoot2é›¶åŸºç¡€å…¥é—¨springbootå…¨å¥—å®Œæ•´ç‰ˆï¼ˆspring boot2ï¼‰_å“”å“©å“”å“©_bilibili</a></p><h4 id="configuration-processor"><a href="#configuration-processor" class="headerlink" title="configuration-processor"></a>configuration-processor</h4><blockquote><p>é…ç½®å¤„ç†å™¨</p></blockquote><ol><li><p>æ·»åŠ ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">             <span class="comment">&lt;!-- æ‰“åŒ…çš„æ—¶å€™ä¸å¸¦è¿™ä¸ªåŒ… --&gt;</span>   </span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">exclude</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="webå¼€å‘"><a href="#webå¼€å‘" class="headerlink" title="webå¼€å‘"></a>webå¼€å‘</h2><h3 id="ç®€å•åŠŸèƒ½"><a href="#ç®€å•åŠŸèƒ½" class="headerlink" title="ç®€å•åŠŸèƒ½"></a>ç®€å•åŠŸèƒ½</h3><h4 id="é™æ€èµ„æºè®¿é—®"><a href="#é™æ€èµ„æºè®¿é—®" class="headerlink" title="é™æ€èµ„æºè®¿é—®"></a>é™æ€èµ„æºè®¿é—®</h4><ul><li><p>é™æ€èµ„æºç›®å½•</p><ul><li>å­˜æ”¾è·¯å¾„ï¼šç±»è·¯å¾„(resourcesèµ„æºæ ¹ç›®å½•)ä¸‹çš„<code>/static</code> or <code>/public</code> or <code>/resources</code> or <code>/META-INF/resources</code></li><li>è®¿é—®è·¯å¾„ï¼šé¡¹ç›®æ ¹è·¯å¾„/é™æ€èµ„æºå</li></ul></li><li><blockquote><p>åŸç†ï¼š é™æ€æ˜ å°„/**ã€‚<br>è¯·æ±‚è¿›æ¥ï¼Œå…ˆå»æ‰¾Controllerçœ‹èƒ½ä¸èƒ½å¤„ç†ã€‚ä¸èƒ½å¤„ç†çš„æ‰€æœ‰è¯·æ±‚åˆéƒ½äº¤ç»™é™æ€èµ„æºå¤„ç†å™¨ã€‚é™æ€èµ„æºä¹Ÿæ‰¾ä¸åˆ°åˆ™å“åº”404é¡µé¢</p></blockquote></li><li><p>æ”¹å˜é»˜è®¤çš„é™æ€èµ„æºè®¿é—®è·¯å¾„å’Œå­˜æ”¾è·¯å¾„ï¼Œåœ¨é…ç½®æ–‡ä»¶<code>application.yaml</code>ä¸­ç¼–å†™</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">mvc:</span></span><br><span class="line">    <span class="attr">static-path-pattern:</span> <span class="string">/res/**</span><span class="comment">#resä¸ºè‡ªå®šä¹‰å‰ç¼€ï¼Œå³è®¿é—®åœ°å€é¡»åœ¨é¡¹ç›®æ ¹è·¯å¾„/res/é™æ€èµ„æºå</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">    <span class="attr">static-locations:</span> [<span class="string">classpath:/è‡ªå®šä¹‰æ–‡ä»¶å¤¹å/</span>]</span><br></pre></td></tr></table></figure></li></ul><h4 id="æ¬¢è¿é¡µ"><a href="#æ¬¢è¿é¡µ" class="headerlink" title="æ¬¢è¿é¡µ"></a>æ¬¢è¿é¡µ</h4><p>å‘½åä¸ºindex.htmlæ”¾åœ¨é™æ€èµ„æºç›®å½•ä¸‹å³å¯ã€‚</p><h4 id="è‡ªå®šä¹‰Favicon"><a href="#è‡ªå®šä¹‰Favicon" class="headerlink" title="è‡ªå®šä¹‰Favicon"></a>è‡ªå®šä¹‰Favicon</h4><p>å‘½åä¸ºfavicon.ico æ”¾åœ¨é™æ€èµ„æºç›®å½•ä¸‹å³å¯ã€‚</p><h4 id="æºç åˆ†æ"><a href="#æºç åˆ†æ" class="headerlink" title="æºç åˆ†æ"></a>æºç åˆ†æ</h4><p><a href="https://www.bilibili.com/video/BV19K4y1L7MT?p=25">é›·ä¸°é˜³2021ç‰ˆSpringBoot2é›¶åŸºç¡€å…¥é—¨springbootå…¨å¥—å®Œæ•´ç‰ˆï¼ˆspring boot2ï¼‰_å“”å“©å“”å“©_bilibili</a></p><h3 id="è¯·æ±‚å¤„ç†"><a href="#è¯·æ±‚å¤„ç†" class="headerlink" title="è¯·æ±‚å¤„ç†"></a>è¯·æ±‚å¤„ç†</h3><h4 id="xxxMapping-è¯·æ±‚æ˜ å°„"><a href="#xxxMapping-è¯·æ±‚æ˜ å°„" class="headerlink" title="@xxxMapping è¯·æ±‚æ˜ å°„"></a>@xxxMapping è¯·æ±‚æ˜ å°„</h4><blockquote><p>Resté£æ ¼æ”¯æŒï¼ˆä½¿ç”¨HTTPè¯·æ±‚æ–¹å¼åŠ¨è¯æ¥è¡¨ç¤ºå¯¹èµ„æºçš„æ“ä½œï¼‰</p><ul><li>ä»¥å‰ï¼š**/getUser  è·å–ç”¨æˆ·    /deleteUser åˆ é™¤ç”¨æˆ·   /editUser  ä¿®æ”¹ç”¨æˆ·      /saveUser ä¿å­˜ç”¨æˆ·</li><li>ç°åœ¨ï¼š /user    GET-è·å–ç”¨æˆ·    DELETE-åˆ é™¤ç”¨æˆ·     PUT-ä¿®æ”¹ç”¨æˆ·      POST-ä¿å­˜ç”¨æˆ·</li></ul></blockquote><ol><li><p>ç¼–å†™controllerç±»</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"><span class="meta">@GetMapping(&quot;/user&quot;)</span>    </span><br><span class="line">    <span class="comment">// å³@RequestMapping(value = &quot;/user&quot;,method = RequestMethod.GET)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;getUser GET&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@PostMapping(&quot;/user&quot;)</span>   </span><br><span class="line">    <span class="comment">// å³@RequestMapping(value = &quot;/user&quot;,method = RequestMethod.POST)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">saveUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;saveUser POST&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@PutMapping(&quot;/user&quot;)</span>    </span><br><span class="line">    <span class="comment">// å³@RequestMapping(value = &quot;/user&quot;,method = RequestMethod.PUT)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">modifiedUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;modifiedUser PUT&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/user&quot;)</span> </span><br><span class="line">    <span class="comment">// å³@RequestMapping(value = &quot;/user&quot;,method = RequestMethod.DELETE)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">deleteUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;deleteUser DELETE&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™é¡µé¢</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/user&quot;</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;getæäº¤&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/user&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;postæäº¤&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- formè¡¨å•ä¸­methodåªèƒ½å†™get/post --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨éšè—åŸŸä¼ é€’_methodæ–¹æ³•å‚æ•°çš„å€¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/user&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;_method&quot;</span> <span class="attr">value</span>=<span class="string">&quot;PUT&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;PUTæäº¤&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/user&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;_method&quot;</span> <span class="attr">value</span>=<span class="string">&quot;DELETE&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;DELETEæäº¤&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨é…ç½®æ–‡ä»¶ä¸­å¼€å¯hiddenmethod-filter(é»˜è®¤ä¸ºfalse)ï¼Œå¦‚æœå‰ç«¯ä¸æ˜¯ä½¿ç”¨è¡¨å•å‘é€è¯·æ±‚åˆ™ä¸éœ€è¦å¼€å¯filter</p> <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">mvc:</span></span><br><span class="line">    <span class="attr">hiddenmethod:</span></span><br><span class="line">      <span class="attr">filter:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="è‡ªå®šä¹‰HiddenMethodFilter"><a href="#è‡ªå®šä¹‰HiddenMethodFilter" class="headerlink" title="è‡ªå®šä¹‰HiddenMethodFilter"></a>è‡ªå®šä¹‰HiddenMethodFilter</h4><p>ç¼–å†™é…ç½®ç±»ï¼Œè‡ªå®šä¹‰filter</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyWebConfig</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> HiddenHttpMethodFilter <span class="title">hiddenHttpMethodFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        HiddenHttpMethodFilter filter = <span class="keyword">new</span> HiddenHttpMethodFilter();</span><br><span class="line">        filter.setMethodParam(<span class="string">&quot;_m&quot;</span>);    <span class="comment">//ä¿®æ”¹æ–¹æ³•å‚æ•°åä¸º_m</span></span><br><span class="line">        <span class="keyword">return</span> filter;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è¯·æ±‚æ˜ å°„åŸç†"><a href="#è¯·æ±‚æ˜ å°„åŸç†" class="headerlink" title="è¯·æ±‚æ˜ å°„åŸç†"></a>è¯·æ±‚æ˜ å°„åŸç†</h4><p><a href="https://www.bilibili.com/video/BV19K4y1L7MT?p=28&spm_id_from=pageDriver">é›·ä¸°é˜³2021ç‰ˆSpringBoot2é›¶åŸºç¡€å…¥é—¨springbootå…¨å¥—å®Œæ•´ç‰ˆï¼ˆspring boot2ï¼‰_å“”å“©å“”å“©_bilibili</a></p><h4 id="å‚æ•°æ³¨è§£"><a href="#å‚æ•°æ³¨è§£" class="headerlink" title="å‚æ•°æ³¨è§£"></a>å‚æ•°æ³¨è§£</h4><h5 id="PathVariableã€-RequestHeaderã€-RequestParamã€-CookieValueã€-RequestBody"><a href="#PathVariableã€-RequestHeaderã€-RequestParamã€-CookieValueã€-RequestBody" class="headerlink" title="@PathVariableã€@RequestHeaderã€@RequestParamã€@CookieValueã€@RequestBody"></a>@PathVariableã€@RequestHeaderã€@RequestParamã€@CookieValueã€@RequestBody</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ParamTestController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æµ‹è¯•url: http://localhost:8080/test1/1/lisi?age=10&amp;inters=%E5%90%83%E9%A5%AD&amp;inters=%E7%9D%A1%E8%A7%89</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/test1/&#123;id&#125;/&#123;username&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">test1</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id,</span></span></span><br><span class="line"><span class="params"><span class="function">                                      <span class="meta">@PathVariable(&quot;username&quot;)</span> String name,</span></span></span><br><span class="line"><span class="params"><span class="function">                                      <span class="meta">@PathVariable</span> Map&lt;String, String&gt; variables,</span></span></span><br><span class="line"><span class="params"><span class="function">                                      <span class="meta">@RequestHeader(&quot;User-Agent&quot;)</span> String userAgent,</span></span></span><br><span class="line"><span class="params"><span class="function">                                      <span class="meta">@RequestHeader</span> Map&lt;String, String&gt; headers,</span></span></span><br><span class="line"><span class="params"><span class="function">                                      <span class="meta">@RequestParam(&quot;age&quot;)</span> Integer age,</span></span></span><br><span class="line"><span class="params"><span class="function">                                      <span class="meta">@RequestParam(&quot;inters&quot;)</span> List&lt;String&gt; inters,</span></span></span><br><span class="line"><span class="params"><span class="function">                                      <span class="meta">@RequestParam</span> Map&lt;String,String&gt; params1,</span></span></span><br><span class="line"><span class="params"><span class="function">                                      <span class="meta">@RequestParam</span> MultiValueMap&lt;String, String&gt; params2,</span></span></span><br><span class="line"><span class="params"><span class="function">                                      <span class="meta">@CookieValue(&quot;_xsrf&quot;)</span> String _xsrf,</span></span></span><br><span class="line"><span class="params"><span class="function">                                      <span class="meta">@CookieValue(&quot;_xsrf&quot;)</span> Cookie cookie)</span> </span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@PathVariable</span>(&quot;&quot;) è·å¾—æŒ‡å®šè·¯å¾„å˜é‡åçš„å€¼</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@PathVariable</span> è·å¾—æ‰€æœ‰è·¯å¾„å˜é‡åä»¥åŠå€¼ï¼Œå­˜æ”¾åˆ°Map&lt;String, String&gt;ä¸­</span></span><br><span class="line"><span class="comment">         * æ³¨æ„åè€…é”®å€¼å¯¹å¯¹åº”çš„æ˜¯åœ°å€æ ä¸­çš„usernameå‚æ•°åï¼Œè€Œå‰è€…æ˜¯å½¢å‚åname</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@RequestHeader</span>(&quot;&quot;) è·å¾—è¯·æ±‚å¤´ä¸­æŒ‡å®škeyçš„å€¼</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@RequestHeader</span> è·å¾—è¯·æ±‚å¤´ä¸­æ‰€æœ‰çš„keyåŠå…¶å€¼</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@RequestParam</span>(&quot;&quot;) è·å¾—æŒ‡å®šè¯·æ±‚å‚æ•°åçš„å€¼</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@RequestParam</span> è·å¾—æ‰€æœ‰è¯·æ±‚å‚æ•°åä»¥åŠå€¼ï¼Œå­˜æ”¾åˆ°Map&lt;String, String&gt;ä¸­</span></span><br><span class="line"><span class="comment">         * æ³¨æ„åè€…å­˜æ”¾åœ¨mapä¸­ï¼Œkvåªæœ‰ä¸€å¯¹ï¼Œå¯ä½¿ç”¨MultiValueMapè·å–åˆ°ä¸€å¯¹å¤šçš„é”®å€¼å¯¹ã€‚</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="comment">// ä»¥ä¸‹æ˜¯æµ‹è¯•</span></span><br><span class="line">        map.put(<span class="string">&quot;id&quot;</span>, id);</span><br><span class="line">        map.put(<span class="string">&quot;name&quot;</span>, name);</span><br><span class="line">        map.put(<span class="string">&quot;pv&quot;</span>, variables);</span><br><span class="line">        map.put(<span class="string">&quot;userAgent&quot;</span>, userAgent);</span><br><span class="line">        map.put(<span class="string">&quot;rh&quot;</span>, headers);</span><br><span class="line">        map.put(<span class="string">&quot;age&quot;</span>,age);</span><br><span class="line">        map.put(<span class="string">&quot;inters&quot;</span>,inters);</span><br><span class="line">        map.put(<span class="string">&quot;params1&quot;</span>,params1);</span><br><span class="line">        map.put(<span class="string">&quot;params2&quot;</span>,params2);</span><br><span class="line">        map.put(<span class="string">&quot;_xsrf&quot;</span>,_xsrf);</span><br><span class="line">        System.out.println(cookie.getName()+<span class="string">&quot;===&gt;&quot;</span>+cookie.getValue());</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/test2&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">test2</span><span class="params">(<span class="meta">@RequestBody</span> String content)</span></span>&#123;</span><br><span class="line">       <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@RequestBody</span> è·å¾—è¯·æ±‚ä½“ä¸­æ‰€æœ‰çš„keyåŠå¯¹åº”å€¼</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="comment">// ä»¥ä¸‹æ˜¯æµ‹è¯•</span></span><br><span class="line">        map.put(<span class="string">&quot;content&quot;</span>, content);</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="RequestAttribute-è·å–åŸŸå¯¹è±¡å‚æ•°å€¼"><a href="#RequestAttribute-è·å–åŸŸå¯¹è±¡å‚æ•°å€¼" class="headerlink" title="@RequestAttribute è·å–åŸŸå¯¹è±¡å‚æ•°å€¼"></a>@RequestAttribute è·å–åŸŸå¯¹è±¡å‚æ•°å€¼</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span> <span class="comment">//æ³¨æ„RestControllerå†™return &quot;forward:/success&quot;åªä¼šè§£ææˆå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/goto&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">gotoPage</span><span class="params">(HttpServletRequest req)</span> </span>&#123;</span><br><span class="line">        req.setAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;ä¿¡æ¯&quot;</span>);</span><br><span class="line">        req.setAttribute(<span class="string">&quot;code&quot;</span>, <span class="string">&quot;ä¿¡æ¯123123&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;forward:/success&quot;</span>;  <span class="comment">//è½¬å‘åˆ°/successè¯·æ±‚</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/success&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">success</span><span class="params">(<span class="meta">@RequestAttribute(&quot;msg&quot;)</span> String msg,</span></span></span><br><span class="line"><span class="params"><span class="function">                                       <span class="meta">@RequestAttribute(&quot;code&quot;)</span> String code)</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@RequestAttribute</span> è·å¾—requeståŸŸå¯¹è±¡ä¸­çš„æŒ‡å®šå€¼</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;msg&quot;</span>, msg);</span><br><span class="line">        map.put(<span class="string">&quot;code&quot;</span>, code);</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="MatrixVariable-è·å–çŸ©é˜µå˜é‡"><a href="#MatrixVariable-è·å–çŸ©é˜µå˜é‡" class="headerlink" title="@MatrixVariable è·å–çŸ©é˜µå˜é‡"></a>@MatrixVariable è·å–çŸ©é˜µå˜é‡</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1ã€çŸ©é˜µå˜é‡è¯­æ³•ï¼š è¯·æ±‚è·¯å¾„ï¼š/cars/sell;low=34;brand=byd,audi,yd</span></span><br><span class="line">   <span class="comment">//2ã€SpringBooté»˜è®¤æ˜¯ç¦ç”¨äº†çŸ©é˜µå˜é‡çš„åŠŸèƒ½</span></span><br><span class="line">   <span class="comment">//      æ‰‹åŠ¨å¼€å¯ï¼šåŸç†ã€‚å¯¹äºè·¯å¾„çš„å¤„ç†ã€‚UrlPathHelperè¿›è¡Œè§£æã€‚</span></span><br><span class="line">   <span class="comment">//              removeSemicolonContentï¼ˆç§»é™¤åˆ†å·å†…å®¹ï¼‰æ”¯æŒçŸ©é˜µå˜é‡çš„</span></span><br><span class="line">   <span class="comment">//3ã€çŸ©é˜µå˜é‡å¿…é¡»æœ‰urlè·¯å¾„å˜é‡æ‰èƒ½è¢«è§£æ</span></span><br><span class="line">   <span class="meta">@GetMapping(&quot;/cars/&#123;path&#125;&quot;)</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Map <span class="title">carsSell</span><span class="params">(<span class="meta">@MatrixVariable(&quot;low&quot;)</span> Integer low,</span></span></span><br><span class="line"><span class="params"><span class="function">                       <span class="meta">@MatrixVariable(&quot;brand&quot;)</span> List&lt;String&gt; brand,</span></span></span><br><span class="line"><span class="params"><span class="function">                       <span class="meta">@PathVariable(&quot;path&quot;)</span> String path)</span></span>&#123;</span><br><span class="line">       Map&lt;String,Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">       map.put(<span class="string">&quot;low&quot;</span>,low);</span><br><span class="line">       map.put(<span class="string">&quot;brand&quot;</span>,brand);</span><br><span class="line">       map.put(<span class="string">&quot;path&quot;</span>,path);</span><br><span class="line">       <span class="keyword">return</span> map;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// /boss/1;age=20/2;age=10</span></span><br><span class="line">   <span class="meta">@GetMapping(&quot;/boss/&#123;bossId&#125;/&#123;empId&#125;&quot;)</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Map <span class="title">boss</span><span class="params">(<span class="meta">@MatrixVariable(value = &quot;age&quot;,pathVar = &quot;bossId&quot;)</span> Integer bossAge,</span></span></span><br><span class="line"><span class="params"><span class="function">                   <span class="meta">@MatrixVariable(value = &quot;age&quot;,pathVar = &quot;empId&quot;)</span> Integer empAge)</span></span>&#123;</span><br><span class="line">       Map&lt;String,Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">       map.put(<span class="string">&quot;bossAge&quot;</span>,bossAge);</span><br><span class="line">       map.put(<span class="string">&quot;empAge&quot;</span>,empAge);</span><br><span class="line">       <span class="keyword">return</span> map;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyWebConfig</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> HiddenHttpMethodFilter <span class="title">hiddenHttpMethodFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        HiddenHttpMethodFilter filter = <span class="keyword">new</span> HiddenHttpMethodFilter();</span><br><span class="line">        filter.setMethodParam(<span class="string">&quot;_m&quot;</span>);    <span class="comment">//ä¿®æ”¹_method</span></span><br><span class="line">        <span class="keyword">return</span> filter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="comment">// è‡ªå®šä¹‰å…¶ä¸­çš„åŠŸèƒ½,æ­¤å¤„æ¼”ç¤ºå¯ç”¨çŸ©é˜µå˜é‡åŠŸèƒ½</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> WebMvcConfigurer <span class="title">webMvcConfigurer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> WebMvcConfigurer() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configurePathMatch</span><span class="params">(PathMatchConfigurer configurer)</span> </span>&#123;</span><br><span class="line">                UrlPathHelper urlPathHelper = <span class="keyword">new</span> UrlPathHelper();</span><br><span class="line">                <span class="comment">// è®¾ç½®ä¸åˆ é™¤åˆ†å·å†…å®¹</span></span><br><span class="line">                urlPathHelper.setRemoveSemicolonContent(<span class="keyword">false</span>);</span><br><span class="line">                configurer.setUrlPathHelper(urlPathHelper);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ServletAPI"><a href="#ServletAPI" class="headerlink" title="ServletAPI"></a>ServletAPI</h4><blockquote><p>WebRequestã€ServletRequestã€MultipartRequestã€ HttpSessionã€javax.servlet.http.PushBuilderã€Principalã€InputStreamã€Readerã€HttpMethodã€Localeã€TimeZoneã€ZoneId</p></blockquote><h4 id="å‚æ•°æ³¨è§£æºç åˆ†æ"><a href="#å‚æ•°æ³¨è§£æºç åˆ†æ" class="headerlink" title="å‚æ•°æ³¨è§£æºç åˆ†æ"></a>å‚æ•°æ³¨è§£æºç åˆ†æ</h4><p><a href="https://www.bilibili.com/video/BV19K4y1L7MT?p=32">é›·ä¸°é˜³2021ç‰ˆSpringBoot2é›¶åŸºç¡€å…¥é—¨springbootå…¨å¥—å®Œæ•´ç‰ˆï¼ˆspring boot2ï¼‰_å“”å“©å“”å“©_bilibili</a></p><p>ç›´æ¥çœ‹å›°äº†ï¼Œä»¥åå†çœ‹å§ã€‚</p><h4 id="è‡ªå®šä¹‰å‚æ•°ç»‘å®š"><a href="#è‡ªå®šä¹‰å‚æ•°ç»‘å®š" class="headerlink" title="è‡ªå®šä¹‰å‚æ•°ç»‘å®š"></a>è‡ªå®šä¹‰å‚æ•°ç»‘å®š</h4><ol><li><p>ç¼–å†™ä¸¤ä¸ªbean</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    String username;</span><br><span class="line">    String password;</span><br><span class="line">    Integer age;</span><br><span class="line">    Date birthday;</span><br><span class="line">    Pet pet;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Pet</span> </span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    Integer age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™è¡¨å•</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/saveuser&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    å§“åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">    å¹´é¾„ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span>&gt;</span></span><br><span class="line">    ç”Ÿæ—¥ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;date&quot;</span> <span class="attr">name</span>=<span class="string">&quot;birthday&quot;</span>&gt;</span></span><br><span class="line">    å® ç‰©åå­—ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pet.name&quot;</span>&gt;</span></span><br><span class="line">    å® ç‰©å¹´é¾„ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pet.age&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;POSTæäº¤&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™controlleræµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/saveuser&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">saveuser</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="è‡ªå®šä¹‰è½¬æ¢å™¨"><a href="#è‡ªå®šä¹‰è½¬æ¢å™¨" class="headerlink" title="è‡ªå®šä¹‰è½¬æ¢å™¨"></a>è‡ªå®šä¹‰è½¬æ¢å™¨</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyWebConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="comment">// è‡ªå®šä¹‰å…¶ä¸­çš„åŠŸèƒ½</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> WebMvcConfigurer <span class="title">webMvcConfigurer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> WebMvcConfigurer() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addFormatters</span><span class="params">(FormatterRegistry registry)</span> </span>&#123;</span><br><span class="line">                registry.addConverter(<span class="keyword">new</span> Converter&lt;String, Date&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> Date <span class="title">convert</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">                        SimpleDateFormat sf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">                        Date date = <span class="keyword">null</span>;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            date = sf.parse(s);</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">return</span> date;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ•°æ®å“åº”ä¸å†…å®¹åå•†"><a href="#æ•°æ®å“åº”ä¸å†…å®¹åå•†" class="headerlink" title="æ•°æ®å“åº”ä¸å†…å®¹åå•†"></a>æ•°æ®å“åº”ä¸å†…å®¹åå•†</h3><h4 id="å“åº”JSONæ•°æ®"><a href="#å“åº”JSONæ•°æ®" class="headerlink" title="å“åº”JSONæ•°æ®"></a>å“åº”JSONæ•°æ®</h4><ol><li>å¼•å…¥jackson.jarï¼Œå·²åŒ…å«åœ¨starter-webåœºæ™¯å¯åŠ¨å™¨ä¸­</li><li>ä½¿ç”¨æ³¨è§£@ResponseBody</li></ol><h4 id="å“åº”åŸç†"><a href="#å“åº”åŸç†" class="headerlink" title="å“åº”åŸç†"></a>å“åº”åŸç†</h4><p><a href="https://www.bilibili.com/video/BV19K4y1L7MT?p=37">é›·ä¸°é˜³2021ç‰ˆSpringBoot2é›¶åŸºç¡€å…¥é—¨springbootå…¨å¥—å®Œæ•´ç‰ˆï¼ˆspring boot2ï¼‰_å“”å“©å“”å“©_bilibili</a></p><h4 id="å†…å®¹åå•†"><a href="#å†…å®¹åå•†" class="headerlink" title="å†…å®¹åå•†"></a>å†…å®¹åå•†</h4><blockquote><p>æ ¹æ®å®¢æˆ·ç«¯æ¥æ”¶èƒ½åŠ›ä¸åŒï¼Œè¿”å›ä¸åŒåª’ä½“ç±»å‹çš„æ•°æ®ã€‚</p></blockquote><ol><li><p>ä»¥xmlä¸ºç¤ºä¾‹ï¼Œå¼•å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.dataformat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-dataformat-xml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>è¯·æ±‚å¤´é‡Œacceptå­—æ®µï¼Œè®¾ç½®äº†æ¥æ”¶æ•°æ®ä»¥xmlæ ¼å¼ä¸ºä¼˜å…ˆ</p></li><li><p>å¼€å¯åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†åŸç†ï¼ŒåŒæ—¶urlä¸­æ·»åŠ è¯·æ±‚å‚æ•°format=xxxå³å¯</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">mvc:</span></span><br><span class="line">    <span class="attr">contentnegotiation:</span></span><br><span class="line">      <span class="attr">favor-parameter:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="å†…å®¹åå•†åŸç†"><a href="#å†…å®¹åå•†åŸç†" class="headerlink" title="å†…å®¹åå•†åŸç†"></a>å†…å®¹åå•†åŸç†</h4><p><a href="https://www.bilibili.com/video/BV19K4y1L7MT?p=39">é›·ä¸°é˜³2021ç‰ˆSpringBoot2é›¶åŸºç¡€å…¥é—¨springbootå…¨å¥—å®Œæ•´ç‰ˆï¼ˆspring boot2ï¼‰_å“”å“©å“”å“©_bilibili</a></p><h4 id="è‡ªå®šä¹‰MessageConvertor"><a href="#è‡ªå®šä¹‰MessageConvertor" class="headerlink" title="è‡ªå®šä¹‰MessageConvertor"></a>è‡ªå®šä¹‰MessageConvertor</h4><p><a href="https://www.bilibili.com/video/BV19K4y1L7MT?p=41">é›·ä¸°é˜³2021ç‰ˆSpringBoot2é›¶åŸºç¡€å…¥é—¨springbootå…¨å¥—å®Œæ•´ç‰ˆï¼ˆspring boot2ï¼‰_å“”å“©å“”å“©_bilibili</a></p><h3 id="è§†å›¾è§£æä¸æ¨¡æ¿å¼•æ“"><a href="#è§†å›¾è§£æä¸æ¨¡æ¿å¼•æ“" class="headerlink" title="è§†å›¾è§£æä¸æ¨¡æ¿å¼•æ“"></a>è§†å›¾è§£æä¸æ¨¡æ¿å¼•æ“</h3><h4 id="thymeleaf"><a href="#thymeleaf" class="headerlink" title="thymeleaf"></a>thymeleaf</h4><blockquote><p>javaæ¨¡æ¿å¼•æ“</p></blockquote><ol start="0"><li><p><a href="https://www.yuque.com/atguigu/springboot/vgzmgh#E21jG">åŸºæœ¬è¯­æ³•</a></p></li><li><p>å¼•å…¥ä¾èµ–</p></li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>ç¼–å†™æ¨¡æ¿</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;msg&#125;&quot;</span>&gt;</span>é»˜è®¤çš„å€¼<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;www.google.com&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;$&#123;link&#125;&quot;</span>&gt;</span>è·³è½¬ç™¾åº¦<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;www.google.com&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;link&#125;&quot;</span>&gt;</span>è·³è½¬ç™¾åº¦<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>ç¼–å†™controller</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewTestController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/testsuccess&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">(Model model)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// modelä¸­çš„æ•°æ®ä¼šè¢«æ”¾åœ¨è¯·æ±‚åŸŸä¸­</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;msgTest&quot;</span>);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;link&quot;</span>, <span class="string">&quot;https://www.baidu.com&quot;</span>);</span><br><span class="line">        <span class="comment">// è·³è½¬é¡µé¢å†™é¡µé¢çš„å‰å</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" class="headerlink" title="æ‹¦æˆªå™¨"></a>æ‹¦æˆªå™¨</h3><p><a href="https://www.bilibili.com/video/BV19K4y1L7MT?p=49&spm_id_from=pageDriver">é›·ä¸°é˜³2021ç‰ˆSpringBoot2é›¶åŸºç¡€å…¥é—¨springbootå…¨å¥—å®Œæ•´ç‰ˆï¼ˆspring boot2ï¼‰_å“”å“©å“”å“©_bilibili</a></p><ol><li>ç¼–å†™Interceptor</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç™»é™†æ£€æŸ¥</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;Run LoginInterceptor.preHandle&quot;</span>);</span><br><span class="line">        HttpSession session = request.getSession();</span><br><span class="line">        Object loginUser = session.getAttribute(<span class="string">&quot;loginUser&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (loginUser != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            session.setAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;å½“å‰å°šæœªç™»å½•&quot;</span>);</span><br><span class="line">            response.sendRedirect(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;Run LoginInterceptor.postHandle&quot;</span>,modelAndView);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é¡µé¢æ¸²æŸ“ä»¥å</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;Run LoginInterceptor.afterCompletion&quot;</span>,ex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>ç¼–å†™WebConfigç±»ï¼Œæ·»åŠ interceptor</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AdminWebConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ·»åŠ æ‹¦æˆªå™¨ï¼Œå¹¶ä¸”è®¾ç½®æ‹¦æˆªåœ°å€ä¸ä¸æ‹¦æˆªåœ°å€</span></span><br><span class="line">        <span class="comment">// /**æ‹¦æˆªç›®å½•ä¸‹æ‰€æœ‰èµ„æºï¼Œé™æ€èµ„æºä¹Ÿä¼šè¢«æ‹¦æˆª</span></span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> LoginInterceptor()).addPathPatterns(<span class="string">&quot;/**&quot;</span>).excludePathPatterns(<span class="string">&quot;/&quot;</span>,<span class="string">&quot;/login&quot;</span>,<span class="string">&quot;/css/**&quot;</span>,<span class="string">&quot;/js/**&quot;</span>,<span class="string">&quot;/font/**&quot;</span>,<span class="string">&quot;/images/**&quot;</span>);</span><br><span class="line">        <span class="comment">// è®¾ç½®exlucdeä¸æ‹¦æˆªï¼Œæˆ–è€…åœ¨é…ç½®æ–‡ä»¶ä¸­ç¼–å†™static-path-pattern=/static/**ï¼Œæ³¨æ„æ­¤æ—¶éœ€è¦ä¿®æ”¹æ ‡ç­¾ä¸­çš„href</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h3><p><a href="https://www.bilibili.com/video/BV19K4y1L7MT?p=51">é›·ä¸°é˜³2021ç‰ˆSpringBoot2é›¶åŸºç¡€å…¥é—¨springbootå…¨å¥—å®Œæ•´ç‰ˆï¼ˆspring boot2ï¼‰_å“”å“©å“”å“©_bilibili</a></p><ol><li>ç¼–å†™controller</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ–‡ä»¶ä¸Šä¼ æµ‹è¯•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FormTestController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/form_layouts&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">formLayouts</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;form/form_layouts&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * MultipartFileè‡ªåŠ¨å°è£…ä¸Šä¼ è¿‡æ¥çš„æ–‡ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">upload</span><span class="params">(<span class="meta">@RequestParam(&quot;email&quot;)</span> String email,</span></span></span><br><span class="line"><span class="params"><span class="function">                         <span class="meta">@RequestParam(&quot;name&quot;)</span> String name,</span></span></span><br><span class="line"><span class="params"><span class="function">                         <span class="meta">@RequestPart(&quot;headImg&quot;)</span> MultipartFile headImg,</span></span></span><br><span class="line"><span class="params"><span class="function">                         <span class="meta">@RequestPart(&quot;photos&quot;)</span> MultipartFile[] photos)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–çš„ä¿¡æ¯</span></span><br><span class="line">        log.info(<span class="string">&quot;ä¸Šä¼ çš„ä¿¡æ¯ï¼šemail=&#123;&#125;,name=&#123;&#125;,headImg=&#123;&#125;,photos=&#123;&#125;&quot;</span>, email, name, headImg.getSize(), photos.length);</span><br><span class="line">        <span class="keyword">if</span> (!headImg.isEmpty()) &#123;</span><br><span class="line">            <span class="comment">// è·å–åŸæ–‡ä»¶åã€ä¿å­˜åˆ°æœåŠ¡å™¨</span></span><br><span class="line">            headImg.transferTo(<span class="keyword">new</span> File(<span class="string">&quot;C:\\Users\\å¢èŸ\\Desktop\\test1\\&quot;</span>+headImg.getOriginalFilename()));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (photos.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (MultipartFile photo : photos) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!photo.isEmpty()) &#123;</span><br><span class="line">                    photo.transferTo(<span class="keyword">new</span> File(<span class="string">&quot;C:\\Users\\å¢èŸ\\Desktop\\test2\\&quot;</span>+photo.getOriginalFilename()));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>ç¼–å†™é…ç½®æ–‡ä»¶</li></ol><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¿®æ”¹ä¸Šä¼ æ–‡ä»¶çš„æœ€å¤§å¤§å°</span></span><br><span class="line"><span class="meta">spring.servlet.multipart.max-file-size</span>=<span class="string">10MB</span></span><br><span class="line"><span class="meta">spring.servlet.multipart.max-request-size</span>=<span class="string">100MB</span></span><br></pre></td></tr></table></figure><h3 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h3><blockquote><ul><li>é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring Bootæä¾›<code>/error</code>å¤„ç†æ‰€æœ‰é”™è¯¯çš„æ˜ å°„</li><li>å¯¹äºæœºå™¨å®¢æˆ·ç«¯ï¼Œå®ƒå°†ç”ŸæˆJSONå“åº”ï¼Œå…¶ä¸­åŒ…å«é”™è¯¯ï¼ŒHTTPçŠ¶æ€å’Œå¼‚å¸¸æ¶ˆæ¯çš„è¯¦ç»†ä¿¡æ¯ã€‚</li><li>å¯¹äºæµè§ˆå™¨å®¢æˆ·ç«¯ï¼Œå“åº”ä¸€ä¸ªâ€œ whitelabelâ€é”™è¯¯è§†å›¾ï¼Œä»¥HTMLæ ¼å¼å‘ˆç°ç›¸åŒçš„æ•°æ®</li></ul></blockquote><h4 id="è‡ªå®šä¹‰é”™è¯¯é¡µ"><a href="#è‡ªå®šä¹‰é”™è¯¯é¡µ" class="headerlink" title="è‡ªå®šä¹‰é”™è¯¯é¡µ"></a>è‡ªå®šä¹‰é”™è¯¯é¡µ</h4><p>åœ¨å°†400.htmlã€500.htmlç­‰é¡µé¢æ”¾åœ¨resources &gt; templates &gt;errorä¸‹å³å¯</p><h4 id="è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†"><a href="#è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†" class="headerlink" title="è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†"></a>è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†</h4><h5 id="ControllerAdvice-ExceptionHandler"><a href="#ControllerAdvice-ExceptionHandler" class="headerlink" title="@ControllerAdvice+@ExceptionHandler"></a>@ControllerAdvice+@ExceptionHandler</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¤„ç†æ•´ä¸ªweb controllerçš„å¼‚å¸¸</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@ControllerAdvice</span>   <span class="comment">//æ³¨æ˜è¿™æ˜¯ä¸€ä¸ªå¢å¼ºçš„controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalExceptionHandler</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤„ç†æ•°å­¦å¼‚å¸¸ã€ç©ºæŒ‡é’ˆå¼‚å¸¸</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> e</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(&#123;ArithmeticException.class, NullPointerException.class&#125;)</span>   <span class="comment">// è¡¨æ˜ç”¨äºå¤„ç†æŒ‡å®šå¼‚å¸¸</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">handleArithException</span><span class="params">(Exception e)</span> </span>&#123;</span><br><span class="line">        log.error(<span class="string">&quot;å¼‚å¸¸æ˜¯ï¼š&#123;&#125;&quot;</span>, e);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;error/404&quot;</span>;      <span class="comment">// æŒ‡å®šè¿”å›è§†å›¾çš„åœ°å€</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ResponseStatus-è‡ªå®šä¹‰Exception"><a href="#ResponseStatus-è‡ªå®šä¹‰Exception" class="headerlink" title="@ResponseStatus+è‡ªå®šä¹‰Exception"></a>@ResponseStatus+è‡ªå®šä¹‰Exception</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ResponseStatus(value = HttpStatus.FORBIDDEN,reason = &quot;ç”¨æˆ·æ•°é‡å¤ªå¤š&quot;)</span>     <span class="comment">//æ³¨æ˜å¼‚å¸¸è¿”å›çŠ¶æ€ç å’ŒåŸå› </span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserTooManyException</span> <span class="keyword">extends</span> <span class="title">RuntimeException</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UserTooManyException</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UserTooManyException</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="è‡ªå®šä¹‰HandlerExceptionResolver"><a href="#è‡ªå®šä¹‰HandlerExceptionResolver" class="headerlink" title="è‡ªå®šä¹‰HandlerExceptionResolver"></a>è‡ªå®šä¹‰HandlerExceptionResolver</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerHandlerExceptionResolver</span> <span class="keyword">implements</span> <span class="title">HandlerExceptionResolver</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">resolveException</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, Exception e)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            httpServletResponse.sendError(<span class="number">511</span>, <span class="string">&quot;è‡ªå®šä¹‰é”™è¯¯&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException ex) &#123;</span><br><span class="line">            ex.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ModelAndView();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åŸç”Ÿç»„ä»¶æ³¨å…¥"><a href="#åŸç”Ÿç»„ä»¶æ³¨å…¥" class="headerlink" title="åŸç”Ÿç»„ä»¶æ³¨å…¥"></a>åŸç”Ÿç»„ä»¶æ³¨å…¥</h3><h4 id="ServletAPI-1"><a href="#ServletAPI-1" class="headerlink" title="ServletAPI"></a>ServletAPI</h4><h5 id="ServletComponentScan"><a href="#ServletComponentScan" class="headerlink" title="@ServletComponentScan"></a>@ServletComponentScan</h5><p>ä¸»åº”ç”¨ç±»ä¸­ä½¿ç”¨@ServletComponentScané…ç½®æ‰«æè·¯å¾„</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@ServletComponentScan(basePackages = &quot;com.spb_adminex.servlet&quot;)//é…ç½®servletã€filterã€listeneræ‰«æåœ°å€</span><br><span class="line">@SpringBootApplication</span><br><span class="line">public class SpbAdminexApplication &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(SpbAdminexApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="WebServlet"><a href="#WebServlet" class="headerlink" title="@WebServlet"></a>@WebServlet</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/my&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        resp.getWriter().write(<span class="string">&quot;MyServlet running&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="WebFilter"><a href="#WebFilter" class="headerlink" title="@WebFilter"></a>@WebFilter</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@WebFilter(urlPatterns = &#123;&quot;/css/*&quot;,&quot;/images/*&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;MyFilteråˆå§‹åŒ–&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;MyFilteré”€æ¯&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;MyFilter running&quot;</span>);</span><br><span class="line">        filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="WebListener"><a href="#WebListener" class="headerlink" title="@WebListener"></a>@WebListener</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyListener</span> <span class="keyword">implements</span> <span class="title">ServletContextListener</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextInitialized</span><span class="params">(ServletContextEvent sce)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;MyListenerç›‘å¬åˆ°é¡¹ç›®åˆå§‹åŒ–å®Œæˆ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextDestroyed</span><span class="params">(ServletContextEvent sce)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;MyListenerç›‘å¬åˆ°é¡¹ç›®é”€æ¯&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="RegisterBean"><a href="#RegisterBean" class="headerlink" title="RegisterBean"></a>RegisterBean</h4><p>ç¼–å†™ä¸€ä¸ªé…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyRegisterConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletRegistrationBean <span class="title">myServlet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ServletRegistrationBean(<span class="keyword">new</span> MyServlet(), <span class="string">&quot;/my&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> FilterRegistrationBean <span class="title">myFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        FilterRegistrationBean filterRegistrationBean = <span class="keyword">new</span> FilterRegistrationBean(<span class="keyword">new</span> MyFilter());</span><br><span class="line">        filterRegistrationBean.setUrlPatterns(Arrays.asList(<span class="string">&quot;/my&quot;</span>,<span class="string">&quot;/css/*&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> filterRegistrationBean;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletListenerRegistrationBean <span class="title">myListener</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ServletListenerRegistrationBean(<span class="keyword">new</span> MyListener());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ•°æ®è®¿é—®"><a href="#æ•°æ®è®¿é—®" class="headerlink" title="æ•°æ®è®¿é—®"></a>æ•°æ®è®¿é—®</h2><h3 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h3><h4 id="ä½¿ç”¨é»˜è®¤æ•°æ®æºã€jdbcTemplate"><a href="#ä½¿ç”¨é»˜è®¤æ•°æ®æºã€jdbcTemplate" class="headerlink" title="ä½¿ç”¨é»˜è®¤æ•°æ®æºã€jdbcTemplate"></a>ä½¿ç”¨é»˜è®¤æ•°æ®æºã€jdbcTemplate</h4><ol><li>å¯¼å…¥starteråœºæ™¯å’Œæ•°æ®åº“é©±åŠ¨</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>ç¼–å†™é…ç½®æ–‡ä»¶application.yaml</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/online_bookstore</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456789</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br></pre></td></tr></table></figure><ol start="3"><li>ä½¿ç”¨jdbcTemplateæµ‹è¯•</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SpbAdminexApplicationTests</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    JdbcTemplate jdbcTemplate;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Long count = jdbcTemplate.queryForObject(<span class="string">&quot;select count(*) from admin&quot;</span>, Long.class);</span><br><span class="line">        log.info(<span class="string">&quot;å½“å‰è¡¨çš„è®°å½•æ•°ä¸º&quot;</span> + count);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨Druidæ•°æ®æº"><a href="#ä½¿ç”¨Druidæ•°æ®æº" class="headerlink" title="ä½¿ç”¨Druidæ•°æ®æº"></a>ä½¿ç”¨Druidæ•°æ®æº</h4><ol><li>å¼•å…¥æ•°æ®æº</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>ç¼–å†™æ•°æ®æºé…ç½®ç±»</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyDataSourceConfig</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å¼•å…¥è‡ªå·±çš„æ•°æ®æºä¹‹åï¼Œè‡ªåŠ¨é…ç½®çš„é»˜è®¤DataSourceå¤±æ•ˆ</span></span><br><span class="line">    <span class="meta">@ConfigurationProperties(&quot;spring.datasource&quot;)</span>    <span class="comment">//å°†ç»„ä»¶ä¸é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§ç»‘å®š</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSource <span class="title">dataSource</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        DruidDataSource druidDataSource = <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">        <span class="keyword">return</span> druidDataSource;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>æµ‹è¯•</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SpbAdminexApplicationTests</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    DataSource dataSource;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;å½“å‰æ•°æ®æºç±»å‹ä¸º&#123;&#125;&quot;</span>, dataSource.getClass());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>å…¶ä»–ğŸ‘‰<a href="https://www.bilibili.com/video/BV19K4y1L7MT?p=61&spm_id_from=pageDriver">é›·ä¸°é˜³2021ç‰ˆSpringBoot2é›¶åŸºç¡€å…¥é—¨springbootå…¨å¥—å®Œæ•´ç‰ˆï¼ˆspring boot2ï¼‰_å“”å“©å“”å“©_bilibili</a></li></ol><h4 id="ä½¿ç”¨xmlé…ç½®æ–‡ä»¶æ•´åˆMyBatis"><a href="#ä½¿ç”¨xmlé…ç½®æ–‡ä»¶æ•´åˆMyBatis" class="headerlink" title="ä½¿ç”¨xmlé…ç½®æ–‡ä»¶æ•´åˆMyBatis"></a>ä½¿ç”¨xmlé…ç½®æ–‡ä»¶æ•´åˆMyBatis</h4><ol><li>å¯¼å…¥ä¾èµ–</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>ç¼–å†™application.yamlé…ç½®æ–‡ä»¶</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">config-location:</span> <span class="string">classpath:mybatis/mybatis-config.xml</span> <span class="comment">#å…¨å±€é…ç½®æ–‡ä»¶ä½ç½®</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mybatis/mapper/*.xml</span>      <span class="comment">#sqlæ˜ å°„æ–‡ä»¶ä½ç½®</span></span><br></pre></td></tr></table></figure><ol start="3"><li>ç¼–å†™mybatis-config.xmlå…¨å±€é…ç½®æ–‡ä»¶/æˆ–è€…ç¼–å†™applicationé…ç½®æ–‡ä»¶(æ­¤æ—¶ä¸èƒ½åŒæ—¶é…ç½®å…¨å±€é…ç½®æ–‡ä»¶ä½ç½®)</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span> <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼€å¯ä¸‹åˆ’çº¿è½¬é©¼å³°å‘½åæ³• --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mybatis/mapper/*.xml</span>      <span class="comment">#sqlæ˜ å°„æ–‡ä»¶ä½ç½®</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span><span class="comment">#å¼€å¯ä¸‹åˆ’çº¿è½¬é©¼å³°å‘½åæ³•</span></span><br></pre></td></tr></table></figure><ol start="4"><li>ç¼–å†™beanMapperæ¥å£</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span> <span class="comment">//æ³¨æ˜è¿™æ˜¯ä¸€ä¸ªmapperæ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AdminMapper</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Admin <span class="title">getAdmin</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Boolean <span class="title">insertAdmin</span><span class="params">(Admin admin)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="5"><li>ç¼–å†™beanMapper.xmlé…ç½®æ–‡ä»¶</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.spb_adminex.mapper.AdminMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getAdmin&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.spb_adminex.bean.Admin&quot;</span> &gt;</span></span><br><span class="line">        select * from admin where  id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertAdmin&quot;</span> <span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">        insert into admin(`account`,`password`) values(#&#123;account&#125;,#&#123;password&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="6"><li>ç¼–å†™serviceå±‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AdminService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    AdminMapper adminMapper;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Admin <span class="title">getAdminById</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> adminMapper.getAdmin(id);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Boolean <span class="title">insertAdmin</span><span class="params">(Admin admin)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> adminMapper.insertAdmin(admin);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="7"><li>ç¼–å†™controllerå±‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AdminController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    AdminService adminService;</span><br><span class="line">    </span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/getAdmin&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Admin <span class="title">getAdminById</span><span class="params">(<span class="meta">@RequestParam(&quot;id&quot;)</span> Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> adminService.getAdminById(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨æ³¨è§£æ•´åˆMyBatis"><a href="#ä½¿ç”¨æ³¨è§£æ•´åˆMyBatis" class="headerlink" title="ä½¿ç”¨æ³¨è§£æ•´åˆMyBatis"></a>ä½¿ç”¨æ³¨è§£æ•´åˆMyBatis</h4><ol><li>å…¶ä½™æ–‡ä»¶ï¼Œä¸”ä¸éœ€è¦beanMapper.xml</li><li>ç¼–å†™beanMapperæ¥å£</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span> <span class="comment">//æ³¨æ˜è¿™æ˜¯ä¸€ä¸ªmapperæ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AdminMapper</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Select(&quot;select * from admin where id=#&#123;id&#125;&quot;)</span>   <span class="comment">//æ³¨è§£æ›¿æ¢beanMapper.xmlæ–‡ä»¶</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Admin <span class="title">getAdmin</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ•´åˆMyBatis-Plus"><a href="#æ•´åˆMyBatis-Plus" class="headerlink" title="æ•´åˆMyBatis-Plus"></a>æ•´åˆMyBatis-Plus</h4><p><a href="https://mp.baomidou.com/guide/quick-start.html#%E7%BC%96%E7%A0%81">å¿«é€Ÿå¼€å§‹ | MyBatis-Plus (baomidou.com)</a></p><h5 id="è·å–æ•°æ®"><a href="#è·å–æ•°æ®" class="headerlink" title="è·å–æ•°æ®"></a>è·å–æ•°æ®</h5><ol><li>å¯¼å…¥ä¾èµ–</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>ä¸ºå¯åŠ¨ç±»æ·»åŠ @MapperScanï¼Œæ³¨æ˜æ‰«æMapperæ–‡ä»¶çš„åœ°å€</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.baomidou.mybatisplus.samples.quickstart.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Application</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(QuickStartApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>ç¼–å†™å…¨å±€é…ç½®æ–‡ä»¶</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/spb_adminex</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456789</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br></pre></td></tr></table></figure><ol start="4"><li>ç¼–å†™Beanç±»</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;user&quot;)</span>  <span class="comment">//å¯ä»¥æŒ‡å®šè¡¨åï¼Œä¸çŸ¥é“åˆ™é»˜è®¤ä¸ºç±»å</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@TableField(exist = false)</span>  <span class="comment">//æ³¨æ˜å½“å‰å­—æ®µåœ¨è¡¨ä¸­ä¸å­˜åœ¨</span></span><br><span class="line">    <span class="keyword">private</span> String test;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="5"><li>ç¼–å†™BeanMapperæ¥å£</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public interface UserMapper extends BaseMapper&lt;User&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="6"><li>ç¼–å†™BeanServiceæ¥å£</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> <span class="keyword">extends</span> <span class="title">IService</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="7"><li>ç¼–å†™BeanServiceImplå®ç°ç±»</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">UserMapper</span>,<span class="title">User</span>&gt; <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="8"><li>ç¼–å†™controller</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TableController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserService userService = <span class="keyword">new</span> UserServiceImpl();</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/dynamic_table&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">dynamicTable</span><span class="params">(Model model)</span> </span>&#123;</span><br><span class="line">        List&lt;User&gt; userList = userService.list();</span><br><span class="line">        model.addAttribute(<span class="string">&quot;userList&quot;</span>, userList);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;table/dynamic_table&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/responsive_table&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">responsiveTable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;table/responsive_table&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/editable_table&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">editableTable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;table/editable_table&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="åˆ†é¡µæ“ä½œ"><a href="#åˆ†é¡µæ“ä½œ" class="headerlink" title="åˆ†é¡µæ“ä½œ"></a>åˆ†é¡µæ“ä½œ</h5><ol><li>ç¼–å†™MybatisPlugConfig</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisPlusConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MybatisPlusInterceptor <span class="title">mybatisPlusInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºMybatisPlusInterceptor</span></span><br><span class="line">        MybatisPlusInterceptor interceptor = <span class="keyword">new</span> MybatisPlusInterceptor();</span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> PaginationInnerInterceptor(DbType.MYSQL));</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>ç¼–å†™controller</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TableController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserService userService = <span class="keyword">new</span> UserServiceImpl();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è¿›å…¥dynamic_tableå¹¶å±•ç¤ºåˆ†é¡µæ•°æ®</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/dynamic_table&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">dynamicTable</span><span class="params">(<span class="meta">@RequestParam(value = &quot;pn&quot;,defaultValue = &quot;1&quot;)</span>Integer pn, Model model)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è·å¾—åˆ†é¡µç»“æœå¯¹è±¡ï¼Œå¹¶è®¾ç½®åˆ†é¡µ</span></span><br><span class="line">        Page&lt;User&gt; page = userService.page(<span class="keyword">new</span> Page&lt;User&gt;(pn, <span class="number">2</span>));</span><br><span class="line">        model.addAttribute(<span class="string">&quot;page&quot;</span>, page);</span><br><span class="line">        <span class="comment">// page.getRecordsè·å¾—æ‰€æœ‰è®°å½•ï¼Œpage.currentè·å¾—å½“å‰é¡µæ•°ï¼Œpage.pagesè·å¾—æ€»é¡µæ•°ï¼Œpage.getTotalè·å¾—æ€»æ¡æ•°â€¦â€¦</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;table/dynamic_table&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping(&quot;/user/delete/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="comment">// åˆ é™¤ç”¨æˆ·åŠŸèƒ½</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">deleteUser</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id,</span></span></span><br><span class="line"><span class="params"><span class="function">                             <span class="meta">@RequestParam(value = &quot;pn&quot;,defaultValue = &quot;1&quot;)</span> Integer pn,</span></span></span><br><span class="line"><span class="params"><span class="function">                             RedirectAttributes ra)</span> </span>&#123;</span><br><span class="line">        userService.removeById(id);</span><br><span class="line">        ra.addAttribute(<span class="string">&quot;pn&quot;</span>, pn);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/dynamic_table&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>ç¼–å†™htmlé¡µé¢ï¼Œthymeleafè¯­æ³•è¯¦è§<a href="https://www.bilibili.com/video/BV19K4y1L7MT?p=67&spm_id_from=pageDriver">é›·ä¸°é˜³2021ç‰ˆSpringBoot2é›¶åŸºç¡€å…¥é—¨springbootå…¨å¥—å®Œæ•´ç‰ˆï¼ˆspring boot2ï¼‰_å“”å“©å“”å“©_bilibili</a></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>id<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>ç”¨æˆ·å<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>å¹´é¾„<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>é‚®ç®±<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>æ“ä½œ<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">&quot;gradeX&quot;</span> <span class="attr">th:each</span>=<span class="string">&quot;user,status:$&#123;page.getRecords()&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;status.count&#125;&quot;</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;user.name&#125;&quot;</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;user.age&#125;&quot;</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;user.email&#125;&quot;</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/user/delete/&#123;id&#125;(id=$&#123;user.id&#125;,pn=$&#123;page.current&#125;)&#125;&quot;</span>  <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row-fluid&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dataTables_info&quot;</span>&gt;</span>å½“å‰ç¬¬[[$&#123;page.current&#125;]]é¡µ æ€»è®¡[[$&#123;page.pages&#125;]]é¡µ æ€»[[$&#123;page.getTotal&#125;]]æ¡è®°å½•</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dataTables_paginate paging_bootstrap pagination&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;prev disabled&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>â† Previous<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">th:class</span>=<span class="string">&quot;$&#123;num == page.current?&#x27;active&#x27;:&#x27;&#x27;&#125;&quot;</span> <span class="attr">th:each</span>=<span class="string">&quot;num:$&#123;#numbers.sequence(1,page.pages)&#125;&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/dynamic_table(pn=$&#123;num&#125;)&#125;&quot;</span>&gt;</span>[[$&#123;num&#125;]]<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;next disabled&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Next â†’ <span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="NoSQL-Redis"><a href="#NoSQL-Redis" class="headerlink" title="NoSQL(Redis)"></a>NoSQL(Redis)</h3><p>ä¸å°è¯•äº†æ²¡é’±</p><h2 id="å•å…ƒæµ‹è¯•"><a href="#å•å…ƒæµ‹è¯•" class="headerlink" title="å•å…ƒæµ‹è¯•"></a>å•å…ƒæµ‹è¯•</h2><h3 id="SpringBootTest"><a href="#SpringBootTest" class="headerlink" title="@SpringBootTest"></a>@SpringBootTest</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¸¸ç”¨æ³¨è§£"><a href="#å¸¸ç”¨æ³¨è§£" class="headerlink" title="å¸¸ç”¨æ³¨è§£"></a>å¸¸ç”¨æ³¨è§£</h3><ul><li>**@Test :**è¡¨ç¤ºæ–¹æ³•æ˜¯æµ‹è¯•æ–¹æ³•ã€‚ä½†æ˜¯ä¸JUnit4çš„@Testä¸åŒï¼Œä»–çš„èŒè´£éå¸¸å•ä¸€ä¸èƒ½å£°æ˜ä»»ä½•å±æ€§ï¼Œæ‹“å±•çš„æµ‹è¯•å°†ä¼šç”±Jupiteræä¾›é¢å¤–æµ‹è¯•</li><li>**@ParameterizedTest :**è¡¨ç¤ºæ–¹æ³•æ˜¯å‚æ•°åŒ–æµ‹è¯•ï¼Œä¸‹æ–¹ä¼šæœ‰è¯¦ç»†ä»‹ç»</li><li>**@RepeatedTest :**è¡¨ç¤ºæ–¹æ³•å¯é‡å¤æ‰§è¡Œï¼Œä¸‹æ–¹ä¼šæœ‰è¯¦ç»†ä»‹ç»</li><li>**@DisplayName :**ä¸ºæµ‹è¯•ç±»æˆ–è€…æµ‹è¯•æ–¹æ³•è®¾ç½®å±•ç¤ºåç§°</li><li>**@BeforeEach :**è¡¨ç¤ºåœ¨æ¯ä¸ªå•å…ƒæµ‹è¯•ä¹‹å‰æ‰§è¡Œ</li><li>**@AfterEach :**è¡¨ç¤ºåœ¨æ¯ä¸ªå•å…ƒæµ‹è¯•ä¹‹åæ‰§è¡Œ</li><li>**@BeforeAll :**è¡¨ç¤ºåœ¨æ‰€æœ‰å•å…ƒæµ‹è¯•ä¹‹å‰æ‰§è¡Œ</li><li>**@AfterAll :**è¡¨ç¤ºåœ¨æ‰€æœ‰å•å…ƒæµ‹è¯•ä¹‹åæ‰§è¡Œ</li><li>**@Tag :**è¡¨ç¤ºå•å…ƒæµ‹è¯•ç±»åˆ«ï¼Œç±»ä¼¼äºJUnit4ä¸­çš„@Categories</li><li>**@Disabled :**è¡¨ç¤ºæµ‹è¯•ç±»æˆ–æµ‹è¯•æ–¹æ³•ä¸æ‰§è¡Œï¼Œç±»ä¼¼äºJUnit4ä¸­çš„@Ignore</li><li>**@Timeout :**è¡¨ç¤ºæµ‹è¯•æ–¹æ³•è¿è¡Œå¦‚æœè¶…è¿‡äº†æŒ‡å®šæ—¶é—´å°†ä¼šè¿”å›é”™è¯¯</li><li>**@ExtendWith :**ä¸ºæµ‹è¯•ç±»æˆ–æµ‹è¯•æ–¹æ³•æä¾›æ‰©å±•ç±»å¼•ç”¨</li></ul><h3 id="æ–­è¨€æœºåˆ¶"><a href="#æ–­è¨€æœºåˆ¶" class="headerlink" title="æ–­è¨€æœºåˆ¶"></a>æ–­è¨€æœºåˆ¶</h3><p><a href="https://www.bilibili.com/video/BV19K4y1L7MT?p=73">é›·ä¸°é˜³2021ç‰ˆSpringBoot2é›¶åŸºç¡€å…¥é—¨springbootå…¨å¥—å®Œæ•´ç‰ˆï¼ˆspring boot2ï¼‰_å“”å“©å“”å“©_bilibili</a></p><h3 id="â€¦â€¦"><a href="#â€¦â€¦" class="headerlink" title="â€¦â€¦"></a>â€¦â€¦</h3><h2 id="æŒ‡æ ‡ç›‘æ§"><a href="#æŒ‡æ ‡ç›‘æ§" class="headerlink" title="æŒ‡æ ‡ç›‘æ§"></a>æŒ‡æ ‡ç›‘æ§</h2><p><a href="https://www.bilibili.com/video/BV19K4y1L7MT?p=77">é›·ä¸°é˜³2021ç‰ˆSpringBoot2é›¶åŸºç¡€å…¥é—¨springbootå…¨å¥—å®Œæ•´ç‰ˆï¼ˆspring boot2ï¼‰_å“”å“©å“”å“©_bilibili</a></p><h2 id="é«˜çº§ç‰¹æ€§"><a href="#é«˜çº§ç‰¹æ€§" class="headerlink" title="é«˜çº§ç‰¹æ€§"></a>é«˜çº§ç‰¹æ€§</h2><h2 id="åä¼šæœ‰æœŸ"><a href="#åä¼šæœ‰æœŸ" class="headerlink" title="åä¼šæœ‰æœŸ"></a>åä¼šæœ‰æœŸ</h2><p>æºç å’Œå…¶ä»–éƒ¨åˆ†åˆ°æ—¶å€™<del>(ä¹Ÿä¸çŸ¥é“å•¥æ—¶å€™)</del>ä¼šå†å»çœ‹çš„ï¼Œbut not today</p>]]></content>
      
      
      <categories>
          
          <category> ssm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹  </tag>
            
            <tag> ssm </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> javaEE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€å­¦ä¹ ç¬”è®°ã€‘MyBatis</title>
      <link href="/2021/07/16/xue-xi-bi-ji-mybatis/"/>
      <url>/2021/07/16/xue-xi-bi-ji-mybatis/</url>
      
        <content type="html"><![CDATA[<h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><blockquote><p>mybatisæ˜¯ä¸€ä¸ªä¼˜ç§€çš„åŸºäºjavaçš„æŒä¹…å±‚æ¡†æ¶,å®ƒå†…éƒ¨å°è£…äº†<br>jdbc,ä½¿å¼€å‘è€…åªéœ€è¦å…³æ³¨sqè¯­å¥æœ¬èº«,è€Œä¸éœ€è¦èŠ±è´¹ç²¾åŠ›<br>å»å¤„ç†åŠ è½½é©±åŠ¨ã€åˆ›å»ºè¿æ¥ã€åˆ›å»º statementç­‰ç¹æ‚çš„è¿‡ç¨‹ã€‚</p><p>mybatisé€šè¿‡xmæˆ–æ³¨è§£çš„æ–¹å¼å°†è¦æ‰§è¡Œçš„å„ç§ statementé…<br>ç½®èµ·æ¥,å¹¶é€šè¿‡javaå¯¹è±¡å’Œ statementä¸­sqçš„åŠ¨æ€å‚æ•°è¿›è¡Œ<br>æ˜ å°„ç”Ÿæˆæœ€ç»ˆæ‰§è¡Œçš„sqè¯­å¥ã€‚</p><p>æœ€å mybatisæ¡†æ¶æ‰§è¡Œsqlå¹¶å°†ç»“æœæ˜ å°„ä¸ºjavaå¯¹è±¡å¹¶è¿”å›ã€‚é‡‡ç”¨ORMæ€æƒ³è§£å†³äº†å®ä½“å’Œæ•°æ®åº“æ˜ å°„çš„é—®é¢˜,å¯¹jdbcè¿›è¡Œäº†å°è£…,å±è”½äº† jdbc apiåº•å±‚è®¿é—®ç»†èŠ‚,ä½¿æˆ‘ä»¬ä¸ç”¨ä¸ jdbc apiæ‰“äº¤é“,å°±å¯ä»¥å®Œæˆå¯¹æ•°æ®åº“çš„æŒä¹…åŒ–æ“ä½œã€‚</p></blockquote><h2 id="å¼€å‘æ­¥éª¤"><a href="#å¼€å‘æ­¥éª¤" class="headerlink" title="å¼€å‘æ­¥éª¤"></a>å¼€å‘æ­¥éª¤</h2><ol><li><p>æ·»åŠ ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.46<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™æ•°æ®è¡¨ä¸Beanç±»</p></li><li><p>åˆ›å»ºå¹¶ç¼–å†™mapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;userMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.myspring.bean.User&quot;</span>&gt;</span></span><br><span class="line">        select *</span><br><span class="line">        from user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºå¹¶ç¼–å†™sqlMapConfig.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span> <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®æ•°æ®æºç¯å¢ƒ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/test&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456789&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>è°ƒç”¨æ“ä½œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å¾—æ ¸å¿ƒé…ç½®æ–‡ä»¶</span></span><br><span class="line">InputStream resourceAsStream = Resources.getResourceAsStream(<span class="string">&quot;mybatis/sqlMapConfig.xml&quot;</span>);</span><br><span class="line"><span class="comment">// è·å¾—sessionå·¥å‚å¯¹è±¡</span></span><br><span class="line">SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(resourceAsStream);</span><br><span class="line"><span class="comment">// è·å¾—sessionä¼šè¯å¯¹è±¡</span></span><br><span class="line">SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line"><span class="comment">// æ‰§è¡Œæ“ä½œ,å‚æ•°å³mapper.xmlä¸­çš„namespace.id</span></span><br><span class="line">List&lt;User&gt; userList = sqlSession.selectList(<span class="string">&quot;userMapper.findAll&quot;</span>);</span><br><span class="line"><span class="comment">// æµ‹è¯•</span></span><br><span class="line">System.out.println(userList);</span><br><span class="line"><span class="comment">// é‡Šæ”¾èµ„æº</span></span><br><span class="line">sqlSession.close();</span><br></pre></td></tr></table></figure></li></ol><h2 id="å¢åˆ æ”¹æŸ¥æ“ä½œä»£ç "><a href="#å¢åˆ æ”¹æŸ¥æ“ä½œä»£ç " class="headerlink" title="å¢åˆ æ”¹æŸ¥æ“ä½œä»£ç "></a>å¢åˆ æ”¹æŸ¥æ“ä½œä»£ç </h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;userMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æŸ¥è¯¢ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.myspring.bean.User&quot;</span>&gt;</span></span><br><span class="line">        select *</span><br><span class="line">        from user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ’å…¥ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;save&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.myspring.bean.User&quot;</span>&gt;</span></span><br><span class="line">        insert into user</span><br><span class="line">        values (#&#123;name&#125;, #&#123;age&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¿®æ”¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.myspring.bean.User&quot;</span>&gt;</span></span><br><span class="line">        update user</span><br><span class="line">        set age=#&#123;age&#125;</span><br><span class="line">        where name = #&#123;name&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å¾—æ ¸å¿ƒé…ç½®æ–‡ä»¶</span></span><br><span class="line">InputStream resourceAsStream = Resources.getResourceAsStream(<span class="string">&quot;mybatis/sqlMapConfig.xml&quot;</span>);</span><br><span class="line"><span class="comment">// è·å¾—sessionå·¥å‚å¯¹è±¡</span></span><br><span class="line">SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(resourceAsStream);</span><br><span class="line"><span class="comment">// è·å¾—sessionä¼šè¯å¯¹è±¡</span></span><br><span class="line">SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢</span></span><br><span class="line">List&lt;User&gt; userList = sqlSession.selectList(<span class="string">&quot;userMapper.findAll&quot;</span>);</span><br><span class="line"><span class="comment">// æ’å…¥</span></span><br><span class="line">sqlSession.insert(<span class="string">&quot;userMapper.save&quot;</span>, <span class="keyword">new</span> User(<span class="string">&quot;æ52å››&quot;</span>, <span class="number">11</span>));</span><br><span class="line"><span class="comment">// ä¿®æ”¹</span></span><br><span class="line">sqlSession.update(<span class="string">&quot;userMapper.update&quot;</span>, <span class="keyword">new</span> User(<span class="string">&quot;æ52å››&quot;</span>, <span class="number">110</span>));</span><br><span class="line"><span class="comment">// åˆ é™¤</span></span><br><span class="line">sqlSession.delete(<span class="string">&quot;userMapper.delete&quot;</span>, <span class="string">&quot;æ52å››&quot;</span>);</span><br><span class="line"><span class="comment">// æ‰§è¡Œæ›´æ–°æ“ä½œéœ€è¦æäº¤äº‹åŠ¡</span></span><br><span class="line">sqlSession.commit();</span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡Šæ”¾èµ„æº</span></span><br><span class="line">sqlSession.close();</span><br></pre></td></tr></table></figure><h2 id="é…ç½®æ–‡ä»¶å¸¸ç”¨æ ‡ç­¾"><a href="#é…ç½®æ–‡ä»¶å¸¸ç”¨æ ‡ç­¾" class="headerlink" title="é…ç½®æ–‡ä»¶å¸¸ç”¨æ ‡ç­¾"></a>é…ç½®æ–‡ä»¶å¸¸ç”¨æ ‡ç­¾</h2><h3 id="environmentsæ ‡ç­¾"><a href="#environmentsæ ‡ç­¾" class="headerlink" title="environmentsæ ‡ç­¾"></a>environmentsæ ‡ç­¾</h3><blockquote><p>é…ç½®æ•°æ®åº“ç¯å¢ƒï¼Œæ”¯æŒå¤šç¯å¢ƒ</p></blockquote><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210717113103566.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210717113103566.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210717113103566"></p><h4 id="transactionManageräº‹åŠ¡ç®¡ç†å™¨å±æ€§"><a href="#transactionManageräº‹åŠ¡ç®¡ç†å™¨å±æ€§" class="headerlink" title="transactionManageräº‹åŠ¡ç®¡ç†å™¨å±æ€§"></a>transactionManageräº‹åŠ¡ç®¡ç†å™¨å±æ€§</h4><ul><li>JDBC: è¿™ä¸ªé…ç½®å°±æ˜¯ç›´æ¥ä½¿ç”¨äº†JDBCçš„æäº¤å’Œå›æ»šè®¾ç½®,å®ƒä¾èµ–äºä»æ•°æ®æºå¾—åˆ°çš„è¿æ¥æ¥ç®¡ç†äº‹åŠ¡ä½œç”¨åŸŸ</li><li>MANAGED: è¿™ä¸ªé…ç½®å‡ ä¹æ²¡åšä»€ä¹ˆã€‚å®ƒä»æ¥ä¸æäº¤æˆ–å›æ»šä¸€ä¸ªè¿æ¥,è€Œæ˜¯è®©å®¹å™¨æ¥ç®¡ç†äº‹åŠ¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸ(æ¯”å¦‚JEEåº”ç”¨æœåŠ¡å™¨çš„ä¸Šä¸‹æ–‡)ã€‚é»˜è®¤æƒ…å†µä¸‹å®ƒä¼šå…³é—­è¿æ¥,ç„¶è€Œä¸€äº›å®¹å™¨å¹¶ä¸å¸Œæœ›è¿™æ ·,å› æ­¤éœ€è¦å°†closeConnectionå±æ€§è®¾ç½®ä¸ºfalseæ¥é˜»æ­¢å®ƒé»˜è®¤çš„å…³é—­è¡Œä¸ºã€‚</li></ul><h4 id="daraSourceæ•°æ®æºå±æ€§"><a href="#daraSourceæ•°æ®æºå±æ€§" class="headerlink" title="daraSourceæ•°æ®æºå±æ€§"></a>daraSourceæ•°æ®æºå±æ€§</h4><ul><li>UNPOOLED:è¿™ä¸ªæ•°æ®æºçš„å®ç°åªæ˜¯æ¯æ¬¡è¢«è¯·æ±‚æ—¶æ‰“å¼€å’Œå…³é—­è¿æ¥ã€‚</li><li>POOLED:è¿™ç§æ•°æ®æºçš„å®ç°åˆ©ç”¨â€œæ± â€çš„æ¦‚å¿µå°†JDBCè¿æ¥å¯¹è±¡ç»„ç»‡èµ·æ¥ã€‚</li><li>JNDI:è¿™ä¸ªæ•°æ®æºçš„å®ç°æ˜¯ä¸ºäº†èƒ½åœ¨å¦‚EJBæˆ–åº”ç”¨æœåŠ¡å™¨è¿™ç±»å®¹å™¨ä¸­ä½¿ç”¨,å®¹å™¨å¯ä»¥é›†ä¸­æˆ–åœ¨å¤–éƒ¨é…ç½®æ•°æ®æº,ç„¶åæ”¾ç½®ä¸€ä¸ªJNDIä¸Šä¸‹æ–‡çš„å¼•ç”¨ã€‚</li></ul><h3 id="Mapperæ ‡ç­¾"><a href="#Mapperæ ‡ç­¾" class="headerlink" title="Mapperæ ‡ç­¾"></a>Mapperæ ‡ç­¾</h3><blockquote><p>åŠ è½½æ˜ å°„ï¼ŒåŠ è½½æ–¹å¼æœ‰å¤šç§ã€‚</p></blockquote><ul><li>ä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨,ä¾‹å¦‚:&lt; mapper resource=â€org/ mybatis/ builder/ AuthorMapperxmâ€/&gt;</li><li>ä½¿ç”¨å®Œå…¨é™å®šèµ„æºå®šä½ç¬¦(URL),ä¾‹å¦‚:&lt; mapper url=â€file//ar/ mappers/ Author Mapper.xmâ€/</li><li>ä½¿ç”¨æ˜ å°„å™¨æ¥å£å®ç°ç±»çš„å®Œå…¨é™å®šç±»å,ä¾‹å¦‚:&lt; mapper class=â€ org. mybatis builder. AuthorMapperâ€/&gt;</li><li>å°†åŒ…å†…çš„æ˜ å°„å™¨æ¥å£å®ç°å…¨éƒ¨æ³¨ä¸»å†Œä¸ºæ˜ å°„å™¨,ä¾‹å¦‚:&lt; package name=â€ org. mybatis. builderâ€/&gt;</li></ul><h3 id="Propertiesæ ‡ç­¾"><a href="#Propertiesæ ‡ç­¾" class="headerlink" title="Propertiesæ ‡ç­¾"></a>Propertiesæ ‡ç­¾</h3><blockquote><p>å®é™…å¼€å‘ä¸­,ä¹ æƒ¯å°†æ•°æ®æºçš„é…ç½®ä¿¡æ¯å•ç‹¬æŠ½å–æˆä¸ª propertiesæ–‡ä»¶,è¯¥æ ‡ç­¾å¯ä»¥åŠ è½½é¢å¤–é…ç½®çš„ propertiesæ–‡ä»¶</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span> <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åŠ è½½propertiesæ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®æ•°æ®æºç¯å¢ƒ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åŠ è½½æ˜ å°„æ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mybatis/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="typeAliasesæ ‡ç­¾"><a href="#typeAliasesæ ‡ç­¾" class="headerlink" title="typeAliasesæ ‡ç­¾"></a>typeAliasesæ ‡ç­¾</h3><blockquote><p>èµ·åˆ«åï¼Œæœ‰å·²ç»è®¾ç½®å¥½çš„å¸¸ç”¨çš„ç±»å‹çš„åˆ«åï¼Œä¹Ÿå¯è‡ªå®šä¹‰</p></blockquote><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210717115049996.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210717115049996.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210717115049996"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è‡ªå®šä¹‰åˆ«åï¼Œæ³¨æ„æ ‡ç­¾åœ¨config.xmlä¸­çš„é¡ºåº --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;com.myspring.bean.User&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;user&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="MyBatisç›¸å…³API"><a href="#MyBatisç›¸å…³API" class="headerlink" title="MyBatisç›¸å…³API"></a>MyBatisç›¸å…³API</h2><h3 id="SqlSessionå·¥å‚æ„å»ºå™¨SqlSessionFactoryBuilder"><a href="#SqlSessionå·¥å‚æ„å»ºå™¨SqlSessionFactoryBuilder" class="headerlink" title="SqlSessionå·¥å‚æ„å»ºå™¨SqlSessionFactoryBuilder"></a>SqlSessionå·¥å‚æ„å»ºå™¨SqlSessionFactoryBuilder</h3><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210717115904738.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210717115904738.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210717115904738"></p><h3 id="SqlSessionå·¥å‚å¯¹è±¡SqlSessionFactory"><a href="#SqlSessionå·¥å‚å¯¹è±¡SqlSessionFactory" class="headerlink" title="SqlSessionå·¥å‚å¯¹è±¡SqlSessionFactory"></a>SqlSessionå·¥å‚å¯¹è±¡SqlSessionFactory</h3><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210717120144619.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210717120144619.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210717120144619"></p><h3 id="SqlSessionä¼šè¯å¯¹è±¡"><a href="#SqlSessionä¼šè¯å¯¹è±¡" class="headerlink" title="SqlSessionä¼šè¯å¯¹è±¡"></a>SqlSessionä¼šè¯å¯¹è±¡</h3><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210717120625651.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210717120625651.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210717120625651"></p><h2 id="DAOå±‚å®ç°"><a href="#DAOå±‚å®ç°" class="headerlink" title="DAOå±‚å®ç°"></a>DAOå±‚å®ç°</h2><blockquote><p>é‡‡ç”¨ Mybatisçš„ä»£ç†å¼€å‘æ–¹å¼å®ç°DAOå±‚çš„å¼€å‘,è¿™ç§æ–¹å¼æ˜¯æˆ‘ä»¬åé¢è¿›å…¥ä¼ä¸šçš„ä¸»æµã€‚</p><p>Mapperæ¥å£å¼€å‘æ–¹æ³•åªéœ€è¦ç¨‹åºå‘˜ç¼–å†™ Mapperæ¥å£(ç›¸å½“äºDaoæ¥å£),ç”± Mybatisæ¡†æ¶æ ¹æ®æ¥å£å®šä¹‰åˆ›å»ºæ¥å£çš„åŠ¨æ€ä»£ç†å¯¹è±¡,ä»£ç†å¯¹è±¡çš„æ–¹æ³•ä½“åŒä¸Šè¾¹Daoæ¥å£å®ç°ç±»æ–¹æ³•ã€‚</p></blockquote><p> <img src="https://gitee.com/ReRia/images/raw/master/img/image-20210717123055155.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210717123055155.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210717123055155"></p><ul><li>Mapper.xmæ–‡ä»¶ä¸­çš„ namespaceä¸ mapperæ¥å£çš„å…¨é™å®šåç›¸åŒ</li><li>Mapperæ¥å£æ–¹æ³•åå’Œ Mapper. xmä¸­å®šä¹‰çš„æ¯ä¸ª statementçš„idç›¸åŒ</li><li>Mapperæ¥å£æ–¹æ³•çš„è¾“å…¥å‚æ•°ç±»å‹å’Œ mapper. xnä¸­å®šä¹‰çš„æ¯ä¸ªsqlçš„ parameter Typeçš„ç±»å‹ç›¸åŒ</li><li>Mapperæ¥å£æ–¹æ³•çš„è¾…å‡ºå‚æ•°ç±»å‹å’Œ mapper. xmä¸­å®šä¹‰çš„æ¯ä¸ªsqçš„ resultTypeçš„ç±»å‹ç›¸åŒ</li></ul><ol><li><p>åˆ›å»ºå¹¶ç¼–å†™Mapper.xmlæ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.myspring.dao.UserMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æŸ¥è¯¢æ‰€æœ‰ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">        select *</span><br><span class="line">        from user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ ¹æ®nameæŸ¥è¯¢æ‰€æœ‰ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByName&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">        select *</span><br><span class="line">        from user</span><br><span class="line">        where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºå¹¶ç¼–å†™Mapperæ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢æ‰€æœ‰</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line">    <span class="comment">// æ ¹æ®idæŸ¥è¯¢æ‰€æœ‰</span></span><br><span class="line">     <span class="function">User <span class="title">findById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è°ƒç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">InputStream resourceAsStream = Resources.getResourceAsStream(<span class="string">&quot;myBatis/sqlMapConfig.xml&quot;</span>);</span><br><span class="line">SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(resourceAsStream);</span><br><span class="line">SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">List&lt;User&gt; all = mapper.findAll();</span><br><span class="line">User user = mapper.findById(<span class="number">2</span>);</span><br></pre></td></tr></table></figure></li></ol><h2 id="æ˜ å°„æ–‡ä»¶ï¼šåŠ¨æ€sqlè¯­å¥"><a href="#æ˜ å°„æ–‡ä»¶ï¼šåŠ¨æ€sqlè¯­å¥" class="headerlink" title="æ˜ å°„æ–‡ä»¶ï¼šåŠ¨æ€sqlè¯­å¥"></a>æ˜ å°„æ–‡ä»¶ï¼šåŠ¨æ€sqlè¯­å¥</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- sqlè¯­å¥æŠ½å– --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;selectUser&quot;</span>&gt;</span></span><br><span class="line">    select *</span><br><span class="line">    from user</span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åŠ¨æ€æ¡ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByCondition&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;user&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;selectUser&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id!=0&quot;</span>&gt;</span></span><br><span class="line">            and id=#&#123;id&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name!=null&quot;</span>&gt;</span></span><br><span class="line">            and name=#&#123;name&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age!=0&quot;</span>&gt;</span></span><br><span class="line">            and age=#&#123;age&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åŠ¨æ€æ¡ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByIds&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;list&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;selectUser&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        -- select * from user where id in(?,?)</span><br><span class="line">        -- collectionå†™listæˆ–arrayç­‰</span><br><span class="line">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">open</span>=<span class="string">&quot;id in(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">            #&#123;id&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><h3 id="ç±»å‹è½¬æ¢TypeHandleræ ‡ç­¾"><a href="#ç±»å‹è½¬æ¢TypeHandleræ ‡ç­¾" class="headerlink" title="ç±»å‹è½¬æ¢TypeHandleræ ‡ç­¾"></a>ç±»å‹è½¬æ¢TypeHandleræ ‡ç­¾</h3><p><a href="https://www.bilibili.com/video/BV1WZ4y1P7Bp?p=173">é»‘é©¬ç¨‹åºå‘˜æœ€å…¨SSMæ¡†æ¶æ•™ç¨‹|Spring+SpringMVC+MyBatiså…¨è¦†ç›–_SSMæ•´åˆ_å“”å“©å“”å“©_bilibili</a></p><h3 id="æ’ä»¶pluginsæ ‡ç­¾"><a href="#æ’ä»¶pluginsæ ‡ç­¾" class="headerlink" title="æ’ä»¶pluginsæ ‡ç­¾"></a>æ’ä»¶pluginsæ ‡ç­¾</h3><ol><li><p>æ·»åŠ ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.jsqlparser<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsqlparser<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ æ ‡ç­¾</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">&quot;com.github.pagehelper.PageHelper&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dialect&quot;</span> <span class="attr">value</span>=<span class="string">&quot;mysql&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>è°ƒç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ†é¡µåŠ©æ‰‹ï¼Œè®¾ç½®åˆ†é¡µä¿¡æ¯ä»¥åˆ†é¡µï¼ŒstartPage(pageNum,pageSize)</span></span><br><span class="line">PageHelper.startPage(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line"><span class="comment">// å½“å‰é¡µ</span></span><br><span class="line">List&lt;User&gt; userList = mapper.findAll();</span><br><span class="line"><span class="comment">// åˆ†é¡µä¿¡æ¯</span></span><br><span class="line">PageInfo&lt;User&gt; userPageInfo = <span class="keyword">new</span> PageInfo&lt;&gt;(userList);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;ä¸Šä¸€é¡µï¼š&quot;</span> + userPageInfo.getPrePage());</span><br><span class="line">System.out.println(<span class="string">&quot;å½“å‰é¡µï¼š&quot;</span> + userPageInfo.getPageNum());</span><br><span class="line">System.out.println(<span class="string">&quot;ä¸‹ä¸€é¡µï¼š&quot;</span> + userPageInfo.getNextPage());</span><br><span class="line">System.out.println(<span class="string">&quot;æ€»é¡µæ•°ï¼š&quot;</span> + userPageInfo.getPages());</span><br><span class="line">System.out.println(<span class="string">&quot;å½“å‰æ¡æ•°ï¼š&quot;</span> + userPageInfo.getPageSize());</span><br><span class="line">System.out.println(<span class="string">&quot;æ€»æ¡æ•°ï¼š&quot;</span> + userPageInfo.getTotal());</span><br><span class="line">System.out.println(<span class="string">&quot;æ˜¯å¦ç¬¬ä¸€é¡µï¼š&quot;</span> + userPageInfo.isIsFirstPage());</span><br><span class="line">System.out.println(<span class="string">&quot;æ˜¯å¦æœ«é¡µï¼š&quot;</span> + userPageInfo.isIsLastPage());</span><br><span class="line">    </span><br></pre></td></tr></table></figure></li></ol><h2 id="å¤šè¡¨æ“ä½œ"><a href="#å¤šè¡¨æ“ä½œ" class="headerlink" title="å¤šè¡¨æ“ä½œ"></a>å¤šè¡¨æ“ä½œ</h2><p><a href="https://www.bilibili.com/video/BV1WZ4y1P7Bp?p=181">é»‘é©¬ç¨‹åºå‘˜æœ€å…¨SSMæ¡†æ¶æ•™ç¨‹|Spring+SpringMVC+MyBatiså…¨è¦†ç›–_SSMæ•´åˆ_å“”å“©å“”å“©_bilibili</a></p><h2 id="æ³¨è§£å¼€å‘"><a href="#æ³¨è§£å¼€å‘" class="headerlink" title="æ³¨è§£å¼€å‘"></a>æ³¨è§£å¼€å‘</h2><h3 id="ä½¿ç”¨xmlå¼€å‘crud"><a href="#ä½¿ç”¨xmlå¼€å‘crud" class="headerlink" title="ä½¿ç”¨xmlå¼€å‘crud"></a>ä½¿ç”¨xmlå¼€å‘crud</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åŠ è½½æ˜ å°„æ–‡ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mybatis/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.myspring.dao.UserMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- sqlè¯­å¥æŠ½å– --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;selectUser&quot;</span>&gt;</span></span><br><span class="line">        select *</span><br><span class="line">        from user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æŸ¥è¯¢ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;selectUser&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">        select *</span><br><span class="line">        from user</span><br><span class="line">        where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByIds&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;list&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;selectUser&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            -- select * from user where id in(?,?)</span><br><span class="line">            -- collectionå†™listæˆ–arrayç­‰</span><br><span class="line">            <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">open</span>=<span class="string">&quot;id in(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">                #&#123;id&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByCondition&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;user&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;selectUser&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id!=0&quot;</span>&gt;</span></span><br><span class="line">                and id=#&#123;id&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name!=null&quot;</span>&gt;</span></span><br><span class="line">                and name=#&#123;name&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age!=0&quot;</span>&gt;</span></span><br><span class="line">                and age=#&#123;age&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ’å…¥ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;save&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.myspring.bean.User&quot;</span>&gt;</span></span><br><span class="line">        insert into user (name, age)</span><br><span class="line">        values (#&#123;name&#125;, #&#123;age&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¿®æ”¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.myspring.bean.User&quot;</span>&gt;</span></span><br><span class="line">        update user</span><br><span class="line">        set age=#&#123;age&#125;,</span><br><span class="line">            name=#&#123;name&#125;</span><br><span class="line">        where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åˆ é™¤ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;delete&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">        delete</span><br><span class="line">        from user</span><br><span class="line">        where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">User <span class="title">findById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findByCondition</span><span class="params">(User user)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findByIds</span><span class="params">(List&lt;Integer&gt; ids)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">save</span><span class="params">(User user)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(User user)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">delete</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserMapperTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        InputStream resourceAsStream = Resources.getResourceAsStream(<span class="string">&quot;myBatis/sqlMapConfig.xml&quot;</span>);</span><br><span class="line">        SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(resourceAsStream);</span><br><span class="line">        SqlSession sqlSession = sqlSessionFactory.openSession(<span class="keyword">true</span>);</span><br><span class="line">        userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSave</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setName(<span class="string">&quot;é’±è€æ¿&quot;</span>);</span><br><span class="line">        user.setAge(<span class="number">90</span>);</span><br><span class="line">        userMapper.save(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdate</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        User user = userMapper.findById(<span class="number">3</span>);</span><br><span class="line">        user.setAge(<span class="number">99</span>);</span><br><span class="line">        userMapper.update(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDelete</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        userMapper.delete(<span class="number">4</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindById</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        User user = userMapper.findById(<span class="number">3</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ³¨è§£å¼€å‘CRUD"><a href="#æ³¨è§£å¼€å‘CRUD" class="headerlink" title="æ³¨è§£å¼€å‘CRUD"></a>æ³¨è§£å¼€å‘CRUD</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function">User <span class="title">findById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into user (name, age) values (#&#123;name&#125;, #&#123;age&#125;)&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">save</span><span class="params">(User user)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update(&quot;update user set age=#&#123;age&#125;, name=#&#123;name&#125; where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(User user)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update(&quot; delete from user where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">delete</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åŠ è½½æ˜ å°„å…³ç³» --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æŒ‡å®šæ¥å£æ‰€åœ¨çš„åŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.myspring.dao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è°ƒç”¨ä¸å˜</p>]]></content>
      
      
      <categories>
          
          <category> ssm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹  </tag>
            
            <tag> ssm </tag>
            
            <tag> MyBatis </tag>
            
            <tag> javaEE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€é¡¹ç›®ç¬”è®°ã€‘ssmæ•´åˆç»ƒä¹ ç®€å•CRUDé¡¹ç›®</title>
      <link href="/2021/07/16/xiang-mu-bi-ji-ssm-zheng-he-lian-xi/"/>
      <url>/2021/07/16/xiang-mu-bi-ji-ssm-zheng-he-lian-xi/</url>
      
        <content type="html"><![CDATA[<h2 id="é¡¹ç›®ç®€ä»‹"><a href="#é¡¹ç›®ç®€ä»‹" class="headerlink" title="é¡¹ç›®ç®€ä»‹"></a>é¡¹ç›®ç®€ä»‹</h2><h3 id="åŠŸèƒ½ç‚¹"><a href="#åŠŸèƒ½ç‚¹" class="headerlink" title="åŠŸèƒ½ç‚¹"></a>åŠŸèƒ½ç‚¹</h3><ol><li>åˆ†é¡µ</li><li>æ•°æ®æ ¡éªŒ<ul><li>jQueryå‰ç«¯æ ¡éªŒ</li><li>JSR303åç«¯æ ¡éªŒ</li></ul></li><li>AJAX</li><li>RESTé£æ ¼</li></ol><h3 id="æŠ€æœ¯ç‚¹"><a href="#æŠ€æœ¯ç‚¹" class="headerlink" title="æŠ€æœ¯ç‚¹"></a>æŠ€æœ¯ç‚¹</h3><ol><li>åŸºç¡€æ¡†æ¶ssm</li><li>æ•°æ®åº“MySQL</li><li>è¯·é˜¿ä¸¹æ¡†æ¶bootstrap</li><li>é¡¹ç›®ç®¡ç†maven</li><li>åˆ†é¡µæ’ä»¶pagehelper</li><li>é€†å‘å·¥ç¨‹mybatis generator</li></ol><h2 id="åŸºç¡€ç¯å¢ƒæ­å»º"><a href="#åŸºç¡€ç¯å¢ƒæ­å»º" class="headerlink" title="åŸºç¡€ç¯å¢ƒæ­å»º"></a>åŸºç¡€ç¯å¢ƒæ­å»º</h2><h3 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h3><p>â€‹    åˆ›å»ºmavené¡¹ç›®ï¼Œæ·»åŠ javaee-web application framework support</p><h3 id="å¼•å…¥mavenç›¸å…³ä¾èµ–"><a href="#å¼•å…¥mavenç›¸å…³ä¾èµ–" class="headerlink" title="å¼•å…¥mavenç›¸å…³ä¾èµ–"></a>å¼•å…¥mavenç›¸å…³ä¾èµ–</h3><p>â€‹    å¼•å…¥spring springmvc mybatisç­‰ç›¸å…³ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ssm_crud<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- spring springmvc --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- springmvc --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.16.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- spring jdbc --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.16.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- spring aspects aopé¢å‘åˆ‡é¢ç¼–ç¨‹ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.16.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- mybatis --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ•°æ®åº“è¿æ¥æ± ã€é©±åŠ¨ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.46<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å…¶ä»– --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å¼•å…¥å‰ç«¯æ¡†æ¶"><a href="#å¼•å…¥å‰ç«¯æ¡†æ¶" class="headerlink" title="å¼•å…¥å‰ç«¯æ¡†æ¶"></a>å¼•å…¥å‰ç«¯æ¡†æ¶</h3><p>â€‹    å¼•å…¥jQueryã€Bootstrap</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;!-- æœ€æ–°ç‰ˆæœ¬çš„ Bootstrap æ ¸å¿ƒ CSS æ–‡ä»¶ --&gt;</span><br><span class="line">&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css&quot;</span></span><br><span class="line">      integrity=<span class="string">&quot;sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu&quot;</span> crossorigin=<span class="string">&quot;anonymous&quot;</span>&gt;</span><br><span class="line">&lt;!-- æœ€æ–°çš„ Bootstrap æ ¸å¿ƒ JavaScript æ–‡ä»¶ --&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js&quot;</span></span><br><span class="line">        integrity=<span class="string">&quot;sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd&quot;</span></span><br><span class="line">        crossorigin=<span class="string">&quot;anonymous&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="ssmæ•´åˆé…ç½®æ–‡ä»¶"><a href="#ssmæ•´åˆé…ç½®æ–‡ä»¶" class="headerlink" title="ssmæ•´åˆé…ç½®æ–‡ä»¶"></a>ssmæ•´åˆé…ç½®æ–‡ä»¶</h2><h3 id="web-xml"><a href="#web-xml" class="headerlink" title="web.xml"></a>web.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 1ã€å¯åŠ¨springçš„å®¹å™¨ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è®¾ç½®å…¨å±€å‚æ•° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®ç›‘å¬å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 2ã€springmvcå‰ç«¯æ§åˆ¶å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®xmlåœ°å€ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring-mvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 3ã€å…¨å±€å­—ç¬¦ç¼–ç è¿‡æ»¤å™¨ï¼Œæ³¨æ„è¿™ä¸ªè¿‡æ»¤å™¨ä¸€å®šè¦æ”¾åœ¨æ‰€æœ‰è¿‡æ»¤å™¨ä¹‹å‰ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceRequestEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceResponseEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 4ã€è¿‡æ»¤å™¨ï¼šä½¿ç”¨RESTé£æ ¼çš„URI å°†é¡µé¢æ™®é€šçš„POSTè¯·æ±‚è½¬ä¸ºæŒ‡å®šçš„deleteæˆ–è€…putè¯·æ±‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="spring-mvc-xml"><a href="#spring-mvc-xml" class="headerlink" title="spring-mvc.xml"></a>spring-mvc.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- springMVCçš„é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®ç»„ä»¶æ‰«æè·¯å¾„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.sss_crud&quot;</span> <span class="attr">use-default-filters</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åªæ‰«æcontroller(å³æ‰€æœ‰æ³¨é‡Šcontrollerçš„ç±») --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®è§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/views&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- è¿‡æ»¤é™æ€èµ„æº ï¼ˆå°†springmvcä¸èƒ½å¤„ç†çš„è¯·æ±‚äº¤ç»™Tomcatï¼Œè¯¥æ ‡ç­¾è¡¨ç¤ºå½“springæ‰¾ä¸åˆ°èµ„æºæ—¶äº¤ç”±åŸå§‹å®¹å™¨(tomcat)å¯»æ‰¾ï¼‰ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- mvcæ³¨è§£é©±åŠ¨ ä»¥åŠå…¶ä»–ä¸€äº›åŠŸèƒ½æ”¯æŒ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="applicationContext-xml"><a href="#applicationContext-xml" class="headerlink" title="applicationContext.xml"></a>applicationContext.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span> <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop https://www.springframework.org/schema/aop/spring-aop.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- springé…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®ç»„ä»¶æ‰«æè·¯å¾„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.sss_crud&quot;</span> <span class="attr">use-default-filters</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ä¸æ‰«æcontroller(å³æ‰€æœ‰æ³¨é‡Šcontrollerçš„ç±») --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- åŠ è½½å¤–éƒ¨çš„propertiesæ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®æ•°æ®æºï¼Œäº‹åŠ¡æ§åˆ¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- mybatisæ•´åˆ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- sqlSessionFactory --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- mybatiså…¨å±€é…ç½®æ–‡ä»¶ã€æ•°æ®æºã€mapperé…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mapper/*.xml&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®æ‰«æå™¨ï¼Œå°†mybatisæ¥å£çš„å®ç°åŠ å…¥åˆ°IOCå®¹å™¨ä¸­ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.sss_crud.mapper&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- äº‹åŠ¡æ§åˆ¶ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼€å¯åŸºäºæ³¨è§£çš„äº‹åŠ¡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;txPoint&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.sss_crud.service..*(..))&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®äº‹åŠ¡å¢å¼º --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;txPoint&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®äº‹åŠ¡å¢å¼ºï¼Œäº‹åŠ¡å¦‚ä½•åˆ‡å…¥ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txAdvice&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- åˆ‡å…¥ç‚¹åˆ‡å…¥çš„æ‰€æœ‰æ–¹æ³•ï¼ˆè¿æ¥ç‚¹ï¼‰éƒ½æ˜¯äº‹åŠ¡æ–¹æ³• --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;*&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;get*&quot;</span> <span class="attr">read-only</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="jdbc-properties"><a href="#jdbc-properties" class="headerlink" title="jdbc.properties"></a>jdbc.properties</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="meta">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/ssm</span></span><br><span class="line"><span class="meta">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">jdbc.password</span>=<span class="string">123456789</span></span><br></pre></td></tr></table></figure><h3 id="mybatis-config-xml"><a href="#mybatis-config-xml" class="headerlink" title="mybatis-config.xml"></a>mybatis-config.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼€å¯é©¼å³°å‘½å --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®åˆ«å --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è‡ªåŠ¨æ‰«æè·¯å¾„ä¸‹çš„ç±»å¹¶ä¸”èµ·åˆ«å --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.sss_crud.bean&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="æ•°æ®åº“æ„å»º"><a href="#æ•°æ®åº“æ„å»º" class="headerlink" title="æ•°æ®åº“æ„å»º"></a>æ•°æ®åº“æ„å»º</h2><h3 id="ssm-crud-sql"><a href="#ssm-crud-sql" class="headerlink" title="ssm_crud.sql"></a>ssm_crud.sql</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> NAMES utf8mb4;</span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for tbl_dept</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `tbl_dept`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tbl_dept`  (</span><br><span class="line">  `dept_id` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;éƒ¨é—¨id&#x27;</span>,</span><br><span class="line">  `dept_name` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`dept_id`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8_general_ci ROW_FORMAT <span class="operator">=</span> <span class="keyword">Dynamic</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for tbl_emp</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `tbl_emp`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tbl_emp`  (</span><br><span class="line">  `emp_id` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;å‘˜å·¥id&#x27;</span>,</span><br><span class="line">  `emp_name` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `gender` <span class="type">char</span>(<span class="number">1</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `email` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `d_id` <span class="type">int</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`emp_id`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  INDEX `fk_emp_dept`(`d_id`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `fk_emp_dept` <span class="keyword">FOREIGN</span> KEY (`d_id`) <span class="keyword">REFERENCES</span> `tbl_dept` (`dept_id`) <span class="keyword">ON</span> <span class="keyword">DELETE</span> RESTRICT <span class="keyword">ON</span> UPDATE RESTRICT</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8_general_ci ROW_FORMAT <span class="operator">=</span> <span class="keyword">Dynamic</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure><h2 id="åŸºç¡€æ¨¡å—"><a href="#åŸºç¡€æ¨¡å—" class="headerlink" title="åŸºç¡€æ¨¡å—"></a>åŸºç¡€æ¨¡å—</h2><h3 id="mybatisé€†å‘å·¥ç¨‹ç”Ÿæˆbeanã€mapper"><a href="#mybatisé€†å‘å·¥ç¨‹ç”Ÿæˆbeanã€mapper" class="headerlink" title="mybatisé€†å‘å·¥ç¨‹ç”Ÿæˆbeanã€mapper"></a>mybatisé€†å‘å·¥ç¨‹ç”Ÿæˆbeanã€mapper</h3><h4 id="generatorConfig-xml"><a href="#generatorConfig-xml" class="headerlink" title="generatorConfig.xml"></a>generatorConfig.xml</h4><blockquote><p>mybatis generatorçš„é…ç½®æ–‡ä»¶</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">generatorConfiguration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--æ³¨æ„targetProjectä¸­ä½¿ç”¨åæ–œæ ï¼ŒconnectionURLéœ€è¦æ·»åŠ useSSL=true--&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--é…ç½®è¦é“¾æ¥çš„æ•°æ®åº“çš„æ•°æ®æº--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    &lt;classPathEntry location=&quot;E:/GARBAGE_TEMP_SPACE/mysql-connector-java-5.1.46.jar&quot; /&gt;--&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!---Mybatisä¸Šä¸‹æ–‡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">&quot;MySqlContext&quot;</span> <span class="attr">targetRuntime</span>=<span class="string">&quot;MyBatis3&quot;</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- å–æ¶ˆç”Ÿæˆçš„æ–‡ä»¶çš„å…¨éƒ¨è‡ªåŠ¨æ³¨é‡Š --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suppressAllComments&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--é…ç½®æ•°æ®åº“çš„é“¾æ¥ä¿¡æ¯--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">driverClass</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">connectionURL</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/ssm_crud?useSSL=false&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">userId</span>=<span class="string">&quot;root&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">password</span>=<span class="string">&quot;123456789&quot;</span> /&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--æ•°æ®åº“BigDecimalså­—æ®µåœ¨javaä¸­å®šä¹‰--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;forceBigDecimals&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--å®ä½“ç±»ç”Ÿæˆä¿¡æ¯ æŒ‡å®šjavabeanç”Ÿæˆä½ç½®--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.sss_crud.bean&quot;</span> <span class="attr">targetProject</span>=<span class="string">&quot;src\main\java&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;trimStrings&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--æŒ‡å®šmybatisçš„mapper.xmlæ˜ å°„æ–‡ä»¶åœ°å€--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;mapper&quot;</span> <span class="attr">targetProject</span>=<span class="string">&quot;src\main\resources&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--æŒ‡å®šmybatisçš„mapperæ¥å£ç”Ÿæˆåœ°å€--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.sss_crud.mapper&quot;</span> <span class="attr">targetProject</span>=<span class="string">&quot;src\main\java&quot;</span> <span class="attr">type</span>=<span class="string">&quot;XMLMAPPER&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--è¦ç”Ÿæˆçš„è¡¨ç»“æ„--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;tbl_emp&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Employee&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;tbl_dept&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Department&quot;</span> /&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="MBGTest-class"><a href="#MBGTest-class" class="headerlink" title="MBGTest.class"></a>MBGTest.class</h4><blockquote><p>è¿è¡Œmybatis generatorä»¥è‡ªåŠ¨ç”Ÿæˆbeanå’Œmapperï¼Œå¯èƒ½éœ€è¦æ‰‹åŠ¨æ·»åŠ æ„é€ å™¨</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.mybatis.generator.api.MyBatisGenerator;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.config.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.config.xml.ConfigurationParser;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.internal.DefaultShellCallback;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MBGTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        List&lt;String&gt; warnings = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">        <span class="keyword">boolean</span> overwrite = <span class="keyword">true</span>;</span><br><span class="line">        File configFile = <span class="keyword">new</span> File(<span class="string">&quot;generatorConfig.xml&quot;</span>);</span><br><span class="line">        ConfigurationParser cp = <span class="keyword">new</span> ConfigurationParser(warnings);</span><br><span class="line">        Configuration config = cp.parseConfiguration(configFile);</span><br><span class="line">        DefaultShellCallback callback = <span class="keyword">new</span> DefaultShellCallback(overwrite);</span><br><span class="line">        MyBatisGenerator myBatisGenerator = <span class="keyword">new</span> MyBatisGenerator(config, callback, warnings);</span><br><span class="line">        myBatisGenerator.generate(<span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å½“å‰é¡¹ç›®ç»“æ„"><a href="#å½“å‰é¡¹ç›®ç»“æ„" class="headerlink" title="å½“å‰é¡¹ç›®ç»“æ„"></a>å½“å‰é¡¹ç›®ç»“æ„</h4><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210919161803065.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210919161803065.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210919161802860"></p><h3 id="MapperTestå•å…ƒæµ‹è¯•"><a href="#MapperTestå•å…ƒæµ‹è¯•" class="headerlink" title="MapperTestå•å…ƒæµ‹è¯•"></a>MapperTestå•å…ƒæµ‹è¯•</h3><h4 id="å¼•å…¥maven"><a href="#å¼•å…¥maven" class="headerlink" title="å¼•å…¥maven"></a>å¼•å…¥maven</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- spring test --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.16.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ·»åŠ å¯ä»¥æ‰¹é‡æ“ä½œçš„sqlSession"><a href="#æ·»åŠ å¯ä»¥æ‰¹é‡æ“ä½œçš„sqlSession" class="headerlink" title="æ·»åŠ å¯ä»¥æ‰¹é‡æ“ä½œçš„sqlSession"></a>æ·»åŠ å¯ä»¥æ‰¹é‡æ“ä½œçš„sqlSession</h4><blockquote><p>æ³¨æ„åœ¨applicationContext.xmlæ–‡ä»¶ä¸­æ·»åŠ å¯ä»¥æ‰¹é‡æ“ä½œçš„sqlSession</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ä¸€ä¸ªå¯ä»¥æ‰§è¡Œæ‰¹é‡æ“ä½œçš„SQLSession --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;executorType&quot;</span> <span class="attr">value</span>=<span class="string">&quot;BATCH&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="MapperTestç±»ç¼–å†™"><a href="#MapperTestç±»ç¼–å†™" class="headerlink" title="MapperTestç±»ç¼–å†™"></a>MapperTestç±»ç¼–å†™</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.sss_crud.bean.Employee;</span><br><span class="line"><span class="keyword">import</span> com.sss_crud.mapper.DepartmentMapper;</span><br><span class="line"><span class="keyword">import</span> com.sss_crud.mapper.EmployeeMapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(locations = &#123;&quot;classpath:applicationContext.xml&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MapperTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    DepartmentMapper departmentMapper;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    EmployeeMapper employeeMapper;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    SqlSession session;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// departmentMapper.insertSelective(new Department(null, &quot;å¼€å‘&quot;));</span></span><br><span class="line">        <span class="comment">// departmentMapper.insertSelective(new Department(null, &quot;æµ‹è¯•&quot;));</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// employeeMapper.insertSelective(new Employee(null, &quot;Jerry&quot;, &quot;M&quot;, &quot;Jerry@qq.com&quot;, 1));</span></span><br><span class="line">        <span class="comment">// employeeMapper.insertSelective(new Employee(null, &quot;Cat&quot;, &quot;W&quot;, &quot;Cat@qq.com&quot;, 2));</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨å¯ä»¥æ‰¹é‡æ“ä½œçš„sessionè·å¾—mapper,ä»è€Œè¿›è¡Œæ‰¹é‡æ“ä½œ</span></span><br><span class="line">        EmployeeMapper mapper = session.getMapper(EmployeeMapper.class);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">            String uid = UUID.randomUUID().toString().substring(<span class="number">0</span>, <span class="number">5</span>) + i;</span><br><span class="line">            mapper.insertSelective(<span class="keyword">new</span> Employee(<span class="keyword">null</span>, uid, <span class="string">&quot;M&quot;</span>, uid + <span class="string">&quot;@qq.com&quot;</span>, <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æŸ¥è¯¢åŠŸèƒ½"><a href="#æŸ¥è¯¢åŠŸèƒ½" class="headerlink" title="æŸ¥è¯¢åŠŸèƒ½"></a>æŸ¥è¯¢åŠŸèƒ½</h2><blockquote><p>æ­¤åŠŸèƒ½éœ€è¦ä½¿ç”¨åˆ†é¡µæ’ä»¶pageHelper</p></blockquote><h3 id="pagehelperåˆ†é¡µæ’ä»¶"><a href="#pagehelperåˆ†é¡µæ’ä»¶" class="headerlink" title="pagehelperåˆ†é¡µæ’ä»¶"></a>pagehelperåˆ†é¡µæ’ä»¶</h3><h4 id="å¼•å…¥mavenä¾èµ–"><a href="#å¼•å…¥mavenä¾èµ–" class="headerlink" title="å¼•å…¥mavenä¾èµ–"></a>å¼•å…¥mavenä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="é…ç½®mybatis-config-xmlä»¥ä½¿ç”¨æ’ä»¶"><a href="#é…ç½®mybatis-config-xmlä»¥ä½¿ç”¨æ’ä»¶" class="headerlink" title="é…ç½®mybatis-config.xmlä»¥ä½¿ç”¨æ’ä»¶"></a>é…ç½®mybatis-config.xmlä»¥ä½¿ç”¨æ’ä»¶</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ...... --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ’ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">&quot;com.github.pagehelper.PageInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="views"><a href="#views" class="headerlink" title="views"></a>views</h3><h4 id="index-jsp"><a href="#index-jsp" class="headerlink" title="index.jsp"></a>index.jsp</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;$Title$&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script src=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">    &lt;!-- æœ€æ–°ç‰ˆæœ¬çš„ Bootstrap æ ¸å¿ƒ CSS æ–‡ä»¶ --&gt;</span><br><span class="line">    &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css&quot;</span></span><br><span class="line">          integrity=<span class="string">&quot;sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu&quot;</span> crossorigin=<span class="string">&quot;anonymous&quot;</span>&gt;</span><br><span class="line">    &lt;!-- æœ€æ–°çš„ Bootstrap æ ¸å¿ƒ JavaScript æ–‡ä»¶ --&gt;</span><br><span class="line">    &lt;script src=<span class="string">&quot;https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js&quot;</span></span><br><span class="line">            integrity=<span class="string">&quot;sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd&quot;</span></span><br><span class="line">            crossorigin=<span class="string">&quot;anonymous&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;%-- è·³è½¬è‡³å±•ç¤ºæ‰€æœ‰å‘˜å·¥ä¿¡æ¯ --%&gt;</span><br><span class="line">    &lt;jsp:forward page=<span class="string">&quot;/emps&quot;</span>&gt;&lt;/jsp:forward&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h3 id="service"><a href="#service" class="headerlink" title="service"></a>service</h3><h4 id="EmployeeServiceImpl-java"><a href="#EmployeeServiceImpl-java" class="headerlink" title="EmployeeServiceImpl.java"></a>EmployeeServiceImpl.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sss_crud.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.sss_crud.bean.Employee;</span><br><span class="line"><span class="keyword">import</span> com.sss_crud.mapper.EmployeeMapper;</span><br><span class="line"><span class="keyword">import</span> com.sss_crud.service.EmployeeService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmployeeServiceImpl</span> <span class="keyword">implements</span> <span class="title">EmployeeService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    EmployeeMapper employeeMapper;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title">getAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> employeeMapper.selectByExampleWithDept(<span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="controller"><a href="#controller" class="headerlink" title="controller"></a>controller</h3><h4 id="EmployeeController-java"><a href="#EmployeeController-java" class="headerlink" title="EmployeeController.java"></a>EmployeeController.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sss_crud.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageHelper;</span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageInfo;</span><br><span class="line"><span class="keyword">import</span> com.sss_crud.bean.Employee;</span><br><span class="line"><span class="keyword">import</span> com.sss_crud.service.EmployeeService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¤„ç†å‘˜å·¥CRUDè¯·æ±‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmployeeController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    EmployeeService employeeService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢å‘˜å·¥æ•°æ®ï¼ˆåˆ†é¡µï¼‰</span></span><br><span class="line"><span class="comment">     * urlè¯·æ±‚å‚æ•°â€œpnâ€ä¸ºè¯·æ±‚é¡µæ•°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/emps&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">getEmps</span><span class="params">(<span class="meta">@RequestParam(value = &quot;pn&quot;, defaultValue = &quot;1&quot;)</span> Integer pn)</span> </span>&#123;</span><br><span class="line">        ModelAndView mav = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">        <span class="comment">// ä½¿ç”¨pageHelperå®ç°åˆ†é¡µåŠŸèƒ½</span></span><br><span class="line">        PageHelper.startPage(pn, <span class="number">5</span>);</span><br><span class="line">        <span class="comment">// æŸ¥è¯¢ï¼ˆæ­¤æ—¶çš„æ•°æ®å·²ç»æ˜¯åˆ†é¡µåçš„æ•°æ®ï¼‰</span></span><br><span class="line">        List&lt;Employee&gt; emps = employeeService.getAll();</span><br><span class="line">        <span class="comment">// ä½¿ç”¨pageInfoåŒ…è£…ï¼ˆåŠ å…¥å…¶ä»–æ›´å¤šçš„ä¿¡æ¯ï¼Œæ‰€æœ‰é¡µï¼Œå½“å‰é¡µç­‰ç­‰ï¼‰</span></span><br><span class="line">        PageInfo pageInfo = <span class="keyword">new</span> PageInfo(emps, <span class="number">5</span>);</span><br><span class="line">        mav.addObject(<span class="string">&quot;pageInfo&quot;</span>, pageInfo);</span><br><span class="line">        mav.setViewName(<span class="string">&quot;list&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mav;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Testå•å…ƒæµ‹è¯•"><a href="#Testå•å…ƒæµ‹è¯•" class="headerlink" title="Testå•å…ƒæµ‹è¯•"></a>Testå•å…ƒæµ‹è¯•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageInfo;</span><br><span class="line"><span class="keyword">import</span> org.junit.Before;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mock.web.MockHttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.web.WebAppConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.web.servlet.MockMvc;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.web.servlet.MvcResult;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.web.servlet.request.MockMvcRequestBuilders;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.web.servlet.setup.MockMvcBuilders;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.WebApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebAppConfiguration(value = &quot;src/main/web&quot;)</span></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(locations = &#123;&quot;classpath:applicationContext.xml&quot;, &quot;classpath:spring-mvc.xml&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MvcTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¼ å…¥springmvcçš„ioc</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    WebApplicationContext context;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è™šæ‹ŸMVCè¯·æ±‚ è·å¾—è¯·æ±‚ç»“æœ</span></span><br><span class="line">    MockMvc mockMvc;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initMockMvc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        mockMvc = MockMvcBuilders.webAppContextSetup(context).build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        MvcResult result = mockMvc.perform(MockMvcRequestBuilders.get(<span class="string">&quot;/emps&quot;</span>).param(<span class="string">&quot;pn&quot;</span>, <span class="string">&quot;1&quot;</span>)).andReturn();</span><br><span class="line">        MockHttpServletRequest request = result.getRequest();</span><br><span class="line">        PageInfo pageInfo = (PageInfo) request.getAttribute(<span class="string">&quot;pageInfo&quot;</span>);</span><br><span class="line">        System.out.println(pageInfo);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ²¡æœ‰æˆåŠŸï¼Œè¿”å›ä¸ºnullï¼Œæˆ‘ä¸ç†è§£ï¼Œéƒ½springäº†è¿˜ç”¨nmçš„jspå‘¢ï¼Œä¸å¼„äº†ï¼åæ­£ç»“æ„éƒ½å·®ä¸å¤šäº†å®ç°é€»è¾‘ä¹Ÿå°±é‚£æ ·ï¼Œæ‹œæ‹œäº†æ‚¨å˜ï¼</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ssm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ssm </tag>
            
            <tag> é¡¹ç›® </tag>
            
            <tag> javaEE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€å­¦ä¹ ç¬”è®°ã€‘SpringMVC</title>
      <link href="/2021/07/15/xue-xi-bi-ji-springmvc/"/>
      <url>/2021/07/15/xue-xi-bi-ji-springmvc/</url>
      
        <content type="html"><![CDATA[<h2 id="SpringMVCæ¦‚è¿°"><a href="#SpringMVCæ¦‚è¿°" class="headerlink" title="SpringMVCæ¦‚è¿°"></a>SpringMVCæ¦‚è¿°</h2><blockquote><p>SpringMVCæ˜¯ç§åŸºäºJavaçš„å®ç°MVcè®¾è®¡æ¨¡å‹çš„è¯·æ±‚é©±åŠ¨ç±»å‹çš„è½»é‡çº§Webæ¡†æ¶,å±äºSpring FrameWorkçš„åç»­äº§å“,å·²ç»èåˆåœ¨ Spring Web Flowä¸­ã€‚</p><p>SpringMvCå·²ç»æˆä¸ºç›®å‰æœ€ä¸»æµçš„MVCæ¡†æ¶ä¹‹ä¸€,å¹¶ä¸”éšç€ Spring30çš„å‘å¸ƒ,å…¨é¢è¶…è¶Š Struts2,æˆä¸ºæœ€ä¼˜ç§€çš„MVCæ¡†æ¶ã€‚å®ƒé€šè¿‡ä¸€å¥—æ³¨è§£,è®©ä¸€ä¸ªç®€å•çš„Javaç±»æˆä¸ºå¤„ç†è¯·æ±‚çš„æ§åˆ¶å™¨,è€Œæ— é¡»å®ç°ä»»ä½•æ¥å£ã€‚åŒæ—¶å®ƒè¿˜æ”¯æŒRESTfulç¼–ç¨‹é£æ ¼çš„è¯·æ±‚ã€‚</p></blockquote><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210715135214321.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210715135214321.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210715135214321"></p><h2 id="SpringMVCå¿«é€Ÿå¼€å‘æ­¥éª¤"><a href="#SpringMVCå¿«é€Ÿå¼€å‘æ­¥éª¤" class="headerlink" title="SpringMVCå¿«é€Ÿå¼€å‘æ­¥éª¤"></a>SpringMVCå¿«é€Ÿå¼€å‘æ­¥éª¤</h2><ol><li><p>å¯¼å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>é…ç½®web.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- springMVCå‰ç«¯æ§åˆ¶å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®xmlåœ°å€ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring-mvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™controller</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨RequestMappingæ˜ å°„controlleråœ°å€</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/myController&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Controller save running&quot;</span>);</span><br><span class="line">        <span class="comment">// returnè¦è·³è½¬çš„è§†å›¾é¡µé¢</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨resourcesä¸‹æ–°å¢spring-mvc.xmldçš„spring configæ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context  http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- controllerçš„ç»„ä»¶æ‰«æ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.myspring.controller&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="SpringMVCç»„ä»¶è§£æ"><a href="#SpringMVCç»„ä»¶è§£æ" class="headerlink" title="SpringMVCç»„ä»¶è§£æ"></a>SpringMVCç»„ä»¶è§£æ</h2><h3 id="RequestMapping"><a href="#RequestMapping" class="headerlink" title="@RequestMapping"></a>@RequestMapping</h3><p>ç”¨äºå»ºç«‹è¯·æ±‚URLå’Œå¤„ç†è¯·æ±‚æ–¹æ³•ä¹‹é—´çš„å¯¹åº”å…³ç³»</p><h4 id="ä½ç½®"><a href="#ä½ç½®" class="headerlink" title="ä½ç½®"></a>ä½ç½®</h4><ul><li>ç±»ä¸Š,è¯·æ±‚URLçš„ç¬¬ä¸€çº§è®¿é—®ç›®å½•ã€‚æ­¤å¤„ä¸å†™çš„è¯,å°±ç›¸å½“äºåº”ç”¨çš„æ ¹ç›®å½•</li><li>æ–¹æ³•ä¸Š,è¯·æ±‚URLçš„ç¬¬äºŒçº§è®¿é—®ç›®å½•,ä¸ç±»ä¸Šçš„ä½¿ç”¨@ ReqquestMappingæ ‡ä¸»çš„çº§ç›®å½•èµ·ç»„æˆè®¿é—®è™šæ‹Ÿè·¯å¾„</li><li>return åè·Ÿçš„è·¯å¾„ï¼šä¸åŠ â€/â€œï¼Œåˆ™ä»ç›¸å¯¹è·¯å¾„æŸ¥è¯¢ï¼Œå¦åˆ™ä»webè·¯å¾„ä¸‹æŸ¥è¯¢ã€‚</li></ul><h4 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h4><ul><li>valueï¼šç”¨äºæŒ‡å®šè¯·æ±‚çš„URLã€‚å®ƒå’Œpathå±æ€§çš„ä½œç”¨æ˜¯ä¸€æ ·çš„</li><li>methodï¼šç”¨äºæŒ‡å®šè¯·æ±‚çš„æ–¹å¼</li><li>paramsï¼šç”¨äºæŒ‡å®šé™åˆ¶è¯·æ±‚å‚æ•°çš„æ¡ä»¶ã€‚å®ƒæ”¯æŒç®€å•çš„è¡¨è¾¾å¼ã€‚è¦æ±‚è¯·æ±‚å‚æ•°çš„keyå’Œvaueå¿…é¡»å’Œé…ç½®çš„ä¸€æ¨¡ä¸€æ ·</li></ul><h4 id="MVCå‘½åç©ºé—´å¼•å…¥"><a href="#MVCå‘½åç©ºé—´å¼•å…¥" class="headerlink" title="MVCå‘½åç©ºé—´å¼•å…¥"></a>MVCå‘½åç©ºé—´å¼•å…¥</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å‘½åç©ºé—´ --&gt;</span></span><br><span class="line">xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;</span><br><span class="line"><span class="comment">&lt;!-- çº¦æŸåœ°å€ --&gt;</span></span><br><span class="line">http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; http://www.springframework.org/schema/mvc  http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt;</span><br></pre></td></tr></table></figure><h4 id="ç»„ä»¶æ‰«æ"><a href="#ç»„ä»¶æ‰«æ" class="headerlink" title="ç»„ä»¶æ‰«æ"></a>ç»„ä»¶æ‰«æ</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.myspring.controller&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h3 id="XMLé…ç½®"><a href="#XMLé…ç½®" class="headerlink" title="XMLé…ç½®"></a>XMLé…ç½®</h3><h4 id="returné‡å®šä¹‰ä¸è¯·æ±‚è½¬å‘"><a href="#returné‡å®šä¹‰ä¸è¯·æ±‚è½¬å‘" class="headerlink" title="returné‡å®šä¹‰ä¸è¯·æ±‚è½¬å‘"></a>returné‡å®šä¹‰ä¸è¯·æ±‚è½¬å‘</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="string">&quot;forward:/success.jsp&quot;</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;redirect:/success.jsp&quot;</span>;</span><br></pre></td></tr></table></figure><h4 id="å†…éƒ¨èµ„æºï¼ˆè§†å›¾ï¼‰è§£æå™¨"><a href="#å†…éƒ¨èµ„æºï¼ˆè§†å›¾ï¼‰è§£æå™¨" class="headerlink" title="å†…éƒ¨èµ„æºï¼ˆè§†å›¾ï¼‰è§£æå™¨"></a>å†…éƒ¨èµ„æºï¼ˆè§†å›¾ï¼‰è§£æå™¨</h4><ol><li><p>åœ¨spring-mvc.xmlä¸­é…ç½®å¦‚ä¸‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å†…éƒ¨èµ„æºè§£æå™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;viewResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®å‰ç¼€ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/jsp/&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®åç¼€ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">2. ç¼–å†™controller</span><br><span class="line"></span><br><span class="line">   ```java</span><br><span class="line">   // return &quot;/jsp/success.jsp&quot;;</span><br><span class="line">   return &quot;success&quot; //æ•ˆæœä¸ä¸Šè¿°ç›¸åŒ</span><br></pre></td></tr></table></figure></li></ol><h2 id="SpringMVCæ•°æ®å“åº”"><a href="#SpringMVCæ•°æ®å“åº”" class="headerlink" title="SpringMVCæ•°æ®å“åº”"></a>SpringMVCæ•°æ®å“åº”</h2><h3 id="é¡µé¢è·³è½¬"><a href="#é¡µé¢è·³è½¬" class="headerlink" title="é¡µé¢è·³è½¬"></a>é¡µé¢è·³è½¬</h3><h4 id="è¿”å›å­—ç¬¦ä¸²"><a href="#è¿”å›å­—ç¬¦ä¸²" class="headerlink" title="è¿”å›å­—ç¬¦ä¸²"></a>è¿”å›å­—ç¬¦ä¸²</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="string">&quot;/jsp/success.jsp&quot;</span>;</span><br></pre></td></tr></table></figure><h4 id="è¿”å›ModelAndviewå¯¹è±¡"><a href="#è¿”å›ModelAndviewå¯¹è±¡" class="headerlink" title="è¿”å›ModelAndviewå¯¹è±¡"></a>è¿”å›ModelAndviewå¯¹è±¡</h4><p>åœ¨controllerä¸­ç¼–å†™å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¬¬ä¸€ç§</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/myController1&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">save2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">    <span class="comment">// è®¾ç½®è§†å›¾</span></span><br><span class="line">    modelAndView.setViewName(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">    <span class="comment">// è®¾ç½®æ¨¡å‹</span></span><br><span class="line">    modelAndView.addObject(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;qqq&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç¬¬äºŒç§</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/myController2&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">save3</span><span class="params">(ModelAndView modelAndView)</span> </span>&#123;</span><br><span class="line">    modelAndView.setViewName(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">    modelAndView.addObject(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;qqq&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç¬¬ä¸‰ç§</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/myController3&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">save4</span><span class="params">(Model model)</span> </span>&#123;</span><br><span class="line">    model.setAttribute(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;qqq&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç¬¬å››ç§</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/myController4&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">save4</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">    request.setAttribute(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;qqq&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å›å†™æ•°æ®"><a href="#å›å†™æ•°æ®" class="headerlink" title="å›å†™æ•°æ®"></a>å›å†™æ•°æ®</h3><h4 id="è¿”å›å­—ç¬¦ä¸²ï¼ˆ-ResponseBodyï¼‰"><a href="#è¿”å›å­—ç¬¦ä¸²ï¼ˆ-ResponseBodyï¼‰" class="headerlink" title="è¿”å›å­—ç¬¦ä¸²ï¼ˆ@ResponseBodyï¼‰"></a>è¿”å›å­—ç¬¦ä¸²ï¼ˆ@ResponseBodyï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¬¬ä¸€ç§</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/myController1&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save1</span><span class="params">(HttpServletResponse resp)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    resp.getWriter().print(<span class="string">&quot;hello!!!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç¬¬äºŒç§,ä½¿ç”¨ResponseBodyï¼Œç”¨äºåŒºåˆ†é¡µé¢è·³è½¬</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/myController2&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">save2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello!!!&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è¿”å›JSONæ ¼å¼å­—ç¬¦ä¸²"><a href="#è¿”å›JSONæ ¼å¼å­—ç¬¦ä¸²" class="headerlink" title="è¿”å›JSONæ ¼å¼å­—ç¬¦ä¸²"></a>è¿”å›JSONæ ¼å¼å­—ç¬¦ä¸²</h4><ol><li><p>æ·»åŠ ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.11.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.11.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-annotations<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.11.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>è½¬æ¢ä¸ºJSON</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/myController&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">save</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">// è·å¾—bean</span></span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setName(<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">    user.setAge(<span class="number">18</span>);</span><br><span class="line">    <span class="comment">// è½¬æ¢ä¸ºJSON</span></span><br><span class="line">    String userJson = <span class="keyword">new</span> ObjectMapper().writeValueAsString(user);</span><br><span class="line">    <span class="keyword">return</span> userJson;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="è¿”å›Springè‡ªåŠ¨è½¬æ¢Bean-gt-JSON"><a href="#è¿”å›Springè‡ªåŠ¨è½¬æ¢Bean-gt-JSON" class="headerlink" title="è¿”å›Springè‡ªåŠ¨è½¬æ¢Bean-&gt;JSON"></a>è¿”å›Springè‡ªåŠ¨è½¬æ¢Bean-&gt;JSON</h4><ol><li><p>é…ç½®spring-mvc.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¤„ç†å™¨æ˜ å°„å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;messageConverters&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span>   </span><br></pre></td></tr></table></figure><p>æˆ–è€…ä½¿ç”¨mvcæ³¨è§£é©±åŠ¨å¦‚ä¸‹é…ç½®ï¼š</p>   <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;</span><br><span class="line"></span><br><span class="line">http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- mvcæ³¨è§£é©±åŠ¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™controller</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¬¬äºŒç§,ä½¿ç”¨ResponseBodyï¼Œç”¨äºåŒºåˆ†é¡µé¢è·³è½¬</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/myController&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">save</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setName(<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">    user.setAge(<span class="number">18</span>);</span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="SpringMVCè¯·æ±‚"><a href="#SpringMVCè¯·æ±‚" class="headerlink" title="SpringMVCè¯·æ±‚"></a>SpringMVCè¯·æ±‚</h2><h3 id="è·å–è¯·æ±‚å‚æ•°"><a href="#è·å–è¯·æ±‚å‚æ•°" class="headerlink" title="è·å–è¯·æ±‚å‚æ•°"></a>è·å–è¯·æ±‚å‚æ•°</h3><h4 id="è·å–åŸºæœ¬ç±»å‹å‚æ•°"><a href="#è·å–åŸºæœ¬ç±»å‹å‚æ•°" class="headerlink" title="è·å–åŸºæœ¬ç±»å‹å‚æ•°"></a>è·å–åŸºæœ¬ç±»å‹å‚æ•°</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/myController&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(String username, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨å½¢å‚æ¥æ”¶æ•°æ®ï¼Œæ³¨æ„æ­¤å¤„å‚æ•°åä¸è¡¨å•ä¸­inputçš„nameå€¼å¯¹åº”</span></span><br><span class="line">    System.out.println(username);</span><br><span class="line">    System.out.println(age);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è·å–Beanç±»å‹å‚æ•°"><a href="#è·å–Beanç±»å‹å‚æ•°" class="headerlink" title="è·å–Beanç±»å‹å‚æ•°"></a>è·å–Beanç±»å‹å‚æ•°</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/myController&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å®é™…ä¸Šæ˜¯ä½¿ç”¨äº†Beanå¯¹è±¡é‡Œçš„setæ–¹æ³•ï¼Œæ‰€ä»¥è¦è®©å‚æ•°çš„åå­—ä¸setæ–¹æ³•åå¯¹åº”ï¼Œå¦åˆ™æ¥æ”¶ä¸åˆ°</span></span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è·å–æ•°æ®ç±»å‹å‚æ•°"><a href="#è·å–æ•°æ®ç±»å‹å‚æ•°" class="headerlink" title="è·å–æ•°æ®ç±»å‹å‚æ•°"></a>è·å–æ•°æ®ç±»å‹å‚æ•°</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/myController&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(String[] strs)</span> </span>&#123;</span><br><span class="line">    System.out.println(Arrays.toString(strs));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è·å–é›†åˆç±»å‹å‚æ•°"><a href="#è·å–é›†åˆç±»å‹å‚æ•°" class="headerlink" title="è·å–é›†åˆç±»å‹å‚æ•°"></a>è·å–é›†åˆç±»å‹å‚æ•°</h4><ol><li><p>å‰ç«¯ä¼ è¾“æ•°æ®</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/js/jquery-1.7.2.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">var</span> userList = <span class="keyword">new</span> Array();</span><br><span class="line">    userList.push(&#123;name: <span class="string">&quot;å¼ ä¸‰&quot;</span>, age: <span class="number">10</span>&#125;);</span><br><span class="line">    userList.push(&#123;name: <span class="string">&quot;æå››&quot;</span>, age: <span class="number">20</span>&#125;);</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        type: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">        url: <span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/test/myController&quot;</span>,</span><br><span class="line">        data: JSON.stringify(userList),</span><br><span class="line">        contentType: <span class="string">&quot;application/json;charset=utf-8&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li><li><p>controllerè·å¾—æ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/myController&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(<span class="meta">@RequestBody</span> List&lt;User&gt; userList)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ³¨æ„ @RequestBody List&lt;User&gt; userList</span></span><br><span class="line">    System.out.println(userList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="é™æ€èµ„æºè®¿é—®æƒé™å¼€æ”¾"><a href="#é™æ€èµ„æºè®¿é—®æƒé™å¼€æ”¾" class="headerlink" title="é™æ€èµ„æºè®¿é—®æƒé™å¼€æ”¾"></a>é™æ€èµ„æºè®¿é—®æƒé™å¼€æ”¾</h3><p>spring-mvc.xmlä¸­é…ç½®å¦‚ä¸‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼€æ”¾èµ„æºè®¿é—®ï¼Œè®¾ç½®å¯è®¿é—®åœ°å€ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/js/**&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/js/&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è¯¥æ ‡ç­¾è¡¨ç¤ºå½“springæ‰¾ä¸åˆ°æ—¶äº¤ç”±åŸå§‹å®¹å™¨(tomcat)å¯»æ‰¾ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å…¨å±€ç¼–ç è¿‡æ»¤ï¼ˆé˜²æ­¢ä¸­æ–‡ä¹±ç ï¼‰"><a href="#å…¨å±€ç¼–ç è¿‡æ»¤ï¼ˆé˜²æ­¢ä¸­æ–‡ä¹±ç ï¼‰" class="headerlink" title="å…¨å±€ç¼–ç è¿‡æ»¤ï¼ˆé˜²æ­¢ä¸­æ–‡ä¹±ç ï¼‰"></a>å…¨å±€ç¼–ç è¿‡æ»¤ï¼ˆé˜²æ­¢ä¸­æ–‡ä¹±ç ï¼‰</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å…¨å±€ç¼–ç è¿‡æ»¤ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å‚æ•°ç»‘å®šæ³¨è§£-RequestParam"><a href="#å‚æ•°ç»‘å®šæ³¨è§£-RequestParam" class="headerlink" title="å‚æ•°ç»‘å®šæ³¨è§£@RequestParam"></a>å‚æ•°ç»‘å®šæ³¨è§£@RequestParam</h3><ul><li>value: ä¸è¯·æ±‚å‚æ•°åç§°</li><li>required: æ­¤åœ¨æŒ‡å®šçš„è¯·æ±‚å‚æ•°æ˜¯å¦å¿…é¡»åŒ…æ‹¬,é»˜è®¤æ˜¯true,æäº¤æ—¶å¦‚æœæ²¡æœ‰æ­¤å‚æ•°åˆ™æŠ¥é”™</li><li>defaultvalue: å½“æ²¡æœ‰æŒ‡å®šè¯·æ±‚å‚æ•°æ—¶,åˆ™ä½¿ç”¨æŒ‡å®šçš„é»˜è®¤å€¼èµ‹å€¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/myController&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(<span class="meta">@RequestParam(value=&quot;name&quot;, required=falseï¼Œdefaultvalue=&quot;000&quot;)</span> String username)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å°†è·å¾—çš„å‚æ•°nameæ˜ å°„ä¸ºæ‰€éœ€è¦çš„username</span></span><br><span class="line">    System.out.println(username);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è·å¾—Restfilé£æ ¼å‚æ•°"><a href="#è·å¾—Restfilé£æ ¼å‚æ•°" class="headerlink" title="è·å¾—Restfilé£æ ¼å‚æ•°"></a>è·å¾—Restfilé£æ ¼å‚æ•°</h3><blockquote><p>Restfulæ˜¯ä¸€ç§è½¯ä»¶æ¶æ„é£æ ¼ã€è®¾è®¡é£æ ¼,è€Œä¸æ˜¯æ ‡å‡†,åªæ˜¯æä¾›äº†ä¸€ç»„è®¾è®¡åŸåˆ™å’Œçº¦æŸæ¡ä»¶ã€‚ä¸»è¦ç”¨äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨äº¤äº’ç±»çš„è½¯ä»¶,åŸºäºè¿™ä¸ªé£æ ¼è®¾è®¡çš„è½¯ä»¶å¯ä»¥æ›´ç®€æ´,æ›´æœ‰å±‚æ¬¡,æ›´æ˜“äºå®ç°ç¼“å­˜æœºåˆ¶ç­‰ã€‚</p><p>Restfulé£æ ¼çš„è¯·æ±‚æ˜¯ä½¿ç”¨â€œâ€ur+è¯·æ±‚æ–¹å¼â€è¡¨ç¤ºæ¬¡è¯·æ±‚ç›®çš„çš„,HTPåè®®é‡Œé¢å››ä¸ªè¡¨ç¤ºæ“ä½œæ–¹å¼çš„åŠ¨è¯å¦‚ä¸‹ï¼š</p><ul><li>GET: ç”¨äºè·å–èµ„æº</li><li>POST: ç”¨äºæ–°å»ºèµ„æº</li><li>PUT: ç”¨äºæ›´æ–°èµ„æº</li><li>DELETE: ç”¨äºåˆ é™¤èµ„æº</li></ul><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210715195834413.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210715195834413.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210715195834413" style="zoom: 67%;" /></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/myController/&#123;name&#125;&quot;)</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨å ä½ç¬¦&#123;&#125;</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(<span class="meta">@PathVariable(&quot;name&quot;)</span> String username)</span> </span>&#123;</span><br><span class="line">    System.out.println(username);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨"><a href="#è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨" class="headerlink" title="è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨"></a>è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨</h3><p><a href="https://www.bilibili.com/video/BV1WZ4y1P7Bp?p=71&spm_id_from=pageDriver">é»‘é©¬ç¨‹åºå‘˜æœ€å…¨SSMæ¡†æ¶æ•™ç¨‹|Spring+SpringMVC+MyBatiså…¨è¦†ç›–_SSMæ•´åˆ_å“”å“©å“”å“©_bilibili</a></p><h3 id="è·å¾—è¯·æ±‚å¤´-RequestHeader"><a href="#è·å¾—è¯·æ±‚å¤´-RequestHeader" class="headerlink" title="è·å¾—è¯·æ±‚å¤´@RequestHeader"></a>è·å¾—è¯·æ±‚å¤´@RequestHeader</h3><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210715203646312.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210715203646312.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210715203646312"></p><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210715204001905.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210715204001905.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210715204001905"></p><h3 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h3><ol><li><p>å¯¼å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">dependency&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨spring-mvc.xmlä¸­é…ç½®æ–‡ä»¶ä¸Šä¼ è§£æå™¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¸Šä¼ æ–‡ä»¶çš„ç¼–ç ç±»å‹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¸Šä¼ æ–‡ä»¶æ€»å¤§å° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxUploadSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;5242800&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¸Šä¼ å•ä¸ªæ–‡ä»¶çš„å¤§å° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxUploadSizePerFile&quot;</span> <span class="attr">value</span>=<span class="string">&quot;5242800&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™controller</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/myController&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(MultipartFile uploadedFile)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    uploadedFile.transferTo(<span class="keyword">new</span> File(<span class="string">&quot;C:\\Users\\å¢èŸ\\Desktop\\&quot;</span> + uploadedFile.getOriginalFilename()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/myController&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(MultipartFile[] files)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (MultipartFile file : files) &#123;</span><br><span class="line">        file.transferTo(<span class="keyword">new</span> File(<span class="string">&quot;C:\\Users\\å¢èŸ\\Desktop\\&quot;</span> + file.getOriginalFilename()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">## SpringMVCæ‹¦æˆªå™¨interceptor</span><br><span class="line"></span><br><span class="line">&gt; Spring Mvcçš„æ‹¦æˆªå™¨ç±»ä¼¼äº Servletå¼€å‘ä¸­çš„è¿‡æ»¤å™¨ Filter,ç”¨äºå¯¹å¤„ç†å™¨è¿›è¡Œé¢„å¤„ç†å’Œåå¤„ç†ã€‚</span><br><span class="line">&gt;</span><br><span class="line">&gt; å°†æ‹¦æˆªå™¨æŒ‰ä¸€å®šçš„é¡ºåºè”ç»“æˆæ¡é“¾,è¿™æ¡é“¾ç§°ä¸ºæ‹¦æˆªå™¨é“¾( interceptor Chain)ã€‚åœ¨è®¿é—®è¢«æ‹¦æˆªçš„æ–¹æ³•æˆ–å­—æ®µæ—¶,æ‹¦æˆªå™¨é“¾ä¸­çš„æ‹¦æˆªå™¨å°±ä¼šæŒ‰å…¶ä¹‹å‰å®šä¹‰çš„é¡ºåºè¢«è°ƒç”¨ã€‚æ‹¦æˆªå™¨ä¹Ÿæ˜¯AOPæ€æƒ³çš„å…·ä½“å®ç°ã€‚</span><br><span class="line"></span><br><span class="line">### å¼€å‘æ­¥éª¤</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> ç¼–å†™interceptor</span><br><span class="line"></span><br><span class="line">   ```java</span><br><span class="line">   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line">       <span class="comment">// åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œ</span></span><br><span class="line">       <span class="meta">@Override</span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">           System.out.println(<span class="string">&quot;preHandle&quot;</span>);</span><br><span class="line">           String param = request.getParameter(<span class="string">&quot;param&quot;</span>);</span><br><span class="line">           <span class="keyword">if</span> (<span class="string">&quot;yes&quot;</span>.equals(param)) &#123;</span><br><span class="line">               <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               request.getRequestDispatcher(<span class="string">&quot;/index.jsp&quot;</span>).forward(request, response);</span><br><span class="line">               <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   </span><br><span class="line">       <span class="comment">// åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹åï¼Œè¯•å›¾è¿”å›ä¹‹å‰æ‰§è¡Œ</span></span><br><span class="line">       <span class="meta">@Override</span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">           System.out.println(<span class="string">&quot;postHandle&quot;</span>);</span><br><span class="line">           <span class="comment">// å¯ä»¥å¯¹modelè¿›è¡Œä¿®æ”¹</span></span><br><span class="line">           modelAndView.addObject(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;newName&quot;</span>);</span><br><span class="line">       &#125;</span><br><span class="line">   </span><br><span class="line">       <span class="comment">// åœ¨æµç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åæ‰§è¡Œ</span></span><br><span class="line">       <span class="meta">@Override</span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">           System.out.println(<span class="string">&quot;afterCompletion&quot;</span>);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨spring-mvc.xmlä¸­é…ç½®interceptor</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯¹åº”æ‰§è¡Œé¡ºåº --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¯¹å“ªäº›èµ„æºæ‰§è¡Œæ‹¦æˆªæ“ä½œ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¯¹åº”interceptor --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.myspring.interceptor.MyInterceptor&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¯¹å“ªäº›èµ„æºæ‰§è¡Œæ‹¦æˆªæ“ä½œ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¯¹åº”interceptor --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.myspring.interceptor.MyInterceptor2&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="æ–¹æ³•è¯´æ˜"><a href="#æ–¹æ³•è¯´æ˜" class="headerlink" title="æ–¹æ³•è¯´æ˜"></a>æ–¹æ³•è¯´æ˜</h3><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210716162523538.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210716162523538.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210716162523538"></p><h2 id="SpringMVCå¼‚å¸¸å¤„ç†"><a href="#SpringMVCå¼‚å¸¸å¤„ç†" class="headerlink" title="SpringMVCå¼‚å¸¸å¤„ç†"></a>SpringMVCå¼‚å¸¸å¤„ç†</h2><h3 id="ç®€å•å¼‚å¸¸å¤„ç†å™¨"><a href="#ç®€å•å¼‚å¸¸å¤„ç†å™¨" class="headerlink" title="ç®€å•å¼‚å¸¸å¤„ç†å™¨"></a>ç®€å•å¼‚å¸¸å¤„ç†å™¨</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.handler.SimpleMappingExceptionResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é»˜è®¤é”™è¯¯è§†å›¾ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultErrorView&quot;</span> <span class="attr">value</span>=<span class="string">&quot;error1&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;exceptionMappings&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- key:å¼‚å¸¸ç±»å‹ value:é”™è¯¯è§†å›¾ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;java.lang.ClassCastException&quot;</span> <span class="attr">value</span>=<span class="string">&quot;error2&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;java.io.IOException&quot;</span> <span class="attr">value</span>=<span class="string">&quot;error3&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†å™¨"><a href="#è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†å™¨" class="headerlink" title="è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†å™¨"></a>è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†å™¨</h3><p> <a href="https://www.bilibili.com/video/BV1WZ4y1P7Bp?p=119&spm_id_from=pageDriver">é»‘é©¬ç¨‹åºå‘˜æœ€å…¨SSMæ¡†æ¶æ•™ç¨‹|Spring+SpringMVC+MyBatiså…¨è¦†ç›–_SSMæ•´åˆ_å“”å“©å“”å“©_bilibili</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">listener</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ssm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹  </tag>
            
            <tag> ssm </tag>
            
            <tag> javaEE </tag>
            
            <tag> SpringMVC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€å­¦ä¹ ç¬”è®°ã€‘Spring</title>
      <link href="/2021/07/13/xue-xi-bi-ji-spring/"/>
      <url>/2021/07/13/xue-xi-bi-ji-spring/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯Spring"><a href="#ä»€ä¹ˆæ˜¯Spring" class="headerlink" title="ä»€ä¹ˆæ˜¯Spring"></a>ä»€ä¹ˆæ˜¯Spring</h2><h3 id="Springç”¨æ¥å¹²ä»€ä¹ˆ"><a href="#Springç”¨æ¥å¹²ä»€ä¹ˆ" class="headerlink" title="Springç”¨æ¥å¹²ä»€ä¹ˆ"></a>Springç”¨æ¥å¹²ä»€ä¹ˆ</h3><blockquote><p>Springæ˜¯ä¸€ä¸ªæ”¯æŒå¿«é€Ÿå¼€å‘Java EEåº”ç”¨ç¨‹åºçš„æ¡†æ¶ã€‚å®ƒæä¾›äº†ä¸€ç³»åˆ—åº•å±‚å®¹å™¨å’ŒåŸºç¡€è®¾æ–½ï¼Œå¹¶å¯ä»¥å’Œå¤§é‡å¸¸ç”¨çš„å¼€æºæ¡†æ¶æ— ç¼é›†æˆã€‚</p><p>Springæ˜¯åˆ†å±‚çš„ Java SE/EEåº”ç”¨ full-stackè½»é‡çº§å¼€æºæ¡†æ¶,ä»¥loC(Inverse of Control:åè½¬æ§åˆ¶)å’ŒAop(Aspect Oriented Programming:é¢å‘åˆ‡é¢ç¼–ç¨‹)ä¸ºå†…æ ¸ã€‚</p><p>æä¾›äº†å±•ç°å±‚ Spring MVCå’ŒæŒä¹…å±‚ Spring JDBCTemplateä»¥åŠä¸šåŠ¡å±‚äº‹åŠ¡ç®¡ç†ç­‰ä¼—å¤šçš„ä¼ä¸šçº§åº”ç”¨æŠ€æœ¯ï¼Œè¿˜èƒ½æ•´åˆå¼€æºä¸–ç•Œä¼—å¤šè‘—åçš„ç¬¬ä¸‰æ–¹æ¡†æ¶å’Œç±»åº“,é€æ¸æˆä¸ºä½¿ç”¨æœ€å¤šçš„ Java EEä¼ä¸šåº”ç”¨å¼€æºæ¡†æ¶ã€‚</p></blockquote><h3 id="Springå‘å±•å†ç¨‹"><a href="#Springå‘å±•å†ç¨‹" class="headerlink" title="Springå‘å±•å†ç¨‹"></a>Springå‘å±•å†ç¨‹</h3><blockquote><p>1997å¹´,BMæå‡ºäº†EBçš„æ€æƒ³<br>1998å¹´,SUNåˆ¶å®šå¼€å‘æ ‡å‡†è§„èŒƒEä¸¿B1.0<br>1999å¹´,EB1.1å‘å¸ƒ<br>2001å¹´,EB2.0å‘å¸ƒ<br>2003å¹´,EB2.1å‘å¸ƒ<br>2006å¹´,EB3.0å‘å¸ƒ</p></blockquote><h3 id="Springä¹‹çˆ¶"><a href="#Springä¹‹çˆ¶" class="headerlink" title="Springä¹‹çˆ¶"></a>Springä¹‹çˆ¶</h3><blockquote><p>Rod Johnson( Springä¹‹çˆ¶)</p><p>ã€ŠExpert One-to-One J2EE Design and development(2002)ã€‹<br>é˜è¿°äº†J2EEä½¿ç”¨EBå¼€å‘è®¾è®¡çš„ä¼˜ç‚¹åŠè§£å†³æ–¹æ¡ˆ<br>ã€ŠExpert One-to-One J2EE Development without EJB(2004)ã€‹<br>é˜è¿°äº†2Eå¼€å‘ä¸ä½¿ç”¨EBçš„è§£å†³æ–¹å¼( Springç»´å½¢)</p></blockquote><h3 id="Springçš„ä¼˜åŠ¿"><a href="#Springçš„ä¼˜åŠ¿" class="headerlink" title="Springçš„ä¼˜åŠ¿"></a>Springçš„ä¼˜åŠ¿</h3><ol><li>æ–¹ä¾¿è§£è€¦,ç®€åŒ–å¼€å‘<ul><li>é€šè¿‡ Springæä¾›çš„loCå®¹å™¨,å¯ä»¥å°†å¯¹è±¡é—´çš„ä¾èµ–å…³ç³»äº¤ç”± Springè¿›è¡Œæ§åˆ¶,é¿å…ç¡¬ç¼–ç æ‰€é€ æˆçš„è¿‡åº¦è€¦åˆã€‚</li><li>ç”¨æˆ·ä¹Ÿä¸å¿…å†ä¸ºå•ä¾‹æ¨¡å¼ç±»ã€å±æ€§æ–‡ä»¶è§£æç­‰è¿™äº›å¾ˆåº•å±‚çš„éœ€æ±‚ç¼–å†™ä»£ç ,å¯ä»¥æ›´ä¸“æ³¨äºä¸Šå±‚çš„åº”ç”¨ã€‚</li></ul></li><li>AOPç¼–ç¨‹çš„æ”¯æŒ<ul><li>é€šè¿‡ Springçš„AOPåŠŸèƒ½,æ–¹ä¾¿è¿›è¡Œé¢å‘åˆ‡é¢ç¼–ç¨‹,è®¸å¤šä¸å®¹æ˜“ç”¨ä¼ ç»ŸOOPå®ç°çš„åŠŸèƒ½å¯ä»¥é€šè¿‡AOPè½»æ¾å®ç°ã€‚</li></ul></li><li>å£°æ˜å¼äº‹åŠ¡çš„æ”¯æŒ<ul><li>å¯ä»¥å°†æˆ‘ä»¬ä»å•è°ƒçƒ¦é—·çš„äº‹åŠ¡ç®¡ç†ä»£ç ä¸­è§£è„±å‡ºæ¥,é€šè¿‡å£°æ˜å¼æ–¹å¼çµæ´»çš„è¿›è¡Œäº‹åŠ¡ç®¡ç†,æé«˜å‘æ•ˆç‡å’Œè´¨é‡ã€‚</li></ul></li><li>æ–¹ä¾¿ç¨‹åºçš„æµ‹è¯•<ul><li>å¯ä»¥ç”¨éå®¹å™¨ä¾èµ–çš„ç¼–ç¨‹æ–¹å¼è¿›è¡Œå‡ ä¹æ‰€æœ‰çš„æµ‹è¯•å·¥ä½œ,æµ‹è¯•ä¸å†æ˜¯æ˜‚è´µçš„æ“ä½œ,è€Œæ˜¯éšæ‰‹å¯åšçš„äº‹æƒ…ã€‚</li></ul></li><li>æ–¹ä¾¿é›†æˆå„ç§ä¼˜ç§€æ¡†æ¶<ul><li>Springå¯¹å„ç§ä¼˜ç§€æ¡†æ¶( Strutsã€ Hibernateã€ Hessianã€Quartzç­‰)çš„æ”¯æŒã€‚</li></ul></li><li>é™ä½ JavaEE APçš„ä½¿ç”¨éš¾åº¦<ul><li>Springå¯¹ JavaEE API(å¦‚JDBCã€ JavaMailã€è¿œç¨‹è°ƒç”¨ç­‰)è¿›è¡Œäº†è–„è–„çš„å°è£…å±‚,ä½¿è¿™äº›APlçš„ä½¿ç”¨éš¾åº¦å¤§ä¸ºé™ä½ã€‚</li></ul></li></ol><h3 id="Springä½“ç³»ç»“æ„"><a href="#Springä½“ç³»ç»“æ„" class="headerlink" title="Springä½“ç³»ç»“æ„"></a>Springä½“ç³»ç»“æ„</h3><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210713213335534.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210713213335534.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210713213335534"></p><h2 id="Springå¿«é€Ÿå¼€å‘æ­¥éª¤"><a href="#Springå¿«é€Ÿå¼€å‘æ­¥éª¤" class="headerlink" title="Springå¿«é€Ÿå¼€å‘æ­¥éª¤"></a>Springå¿«é€Ÿå¼€å‘æ­¥éª¤</h2><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210713213718215.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210713213718215.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210713213718215"></p><ol><li><p>å¯¼å…¥mavenä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºSpring confé…ç½®æ–‡ä»¶ï¼ˆé€šå¸¸å‘½åä¸ºapplicationContextï¼‰</p></li><li><p>é…ç½®å¦‚ä¸‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.myspring.dao.impl.UserDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ApplicationContext app = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        UserDao userDao = (UserDao) app.getBean(<span class="string">&quot;userDao&quot;</span>);</span><br><span class="line">        userDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="Springé…ç½®æ–‡ä»¶"><a href="#Springé…ç½®æ–‡ä»¶" class="headerlink" title="Springé…ç½®æ–‡ä»¶"></a>Springé…ç½®æ–‡ä»¶</h2><h3 id="Beanæ ‡ç­¾"><a href="#Beanæ ‡ç­¾" class="headerlink" title="Beanæ ‡ç­¾"></a>Beanæ ‡ç­¾</h3><blockquote><p>ç”¨äºé…ç½®å¯¹è±¡äº¤ç”± Springæ¥åˆ›å»ºã€‚<br>é»˜è®¤æƒ…å†µä¸‹å®ƒè°ƒç”¨çš„æ˜¯ç±»ä¸­çš„**æ— å‚æ„é€ å‡½æ•°,**å¦‚æœæ²¡æœ‰æ— å‚æ„é€ å‡½æ•°åˆ™ä¸èƒ½åˆ›å»ºæˆåŠŸã€‚</p></blockquote><h4 id="åŸºæœ¬å±æ€§"><a href="#åŸºæœ¬å±æ€§" class="headerlink" title="åŸºæœ¬å±æ€§"></a>åŸºæœ¬å±æ€§</h4><ul><li><p>id: Beanå®ä¾‹åœ¨ Springå®¹å™¨ä¸­çš„å”¯ä¸€æ ‡è¯†</p></li><li><p>class: Beançš„å…¨é™å®šåç§°</p></li><li><p>scopeï¼šæŒ‡å¯¹è±¡çš„ä½œç”¨èŒƒå›´ï¼Œå–å€¼å¦‚ä¸‹</p><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210714123446604.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210714123446604.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210714123446604"></p></li></ul><h3 id="singletonã€prototypeä¸‹beanå¯¹è±¡çš„ä¸åŒåˆ›å»ºæ—¶é—´"><a href="#singletonã€prototypeä¸‹beanå¯¹è±¡çš„ä¸åŒåˆ›å»ºæ—¶é—´" class="headerlink" title="singletonã€prototypeä¸‹beanå¯¹è±¡çš„ä¸åŒåˆ›å»ºæ—¶é—´"></a>singletonã€prototypeä¸‹beanå¯¹è±¡çš„ä¸åŒåˆ›å»ºæ—¶é—´</h3><p><a href="https://www.bilibili.com/video/BV1WZ4y1P7Bp?p=8&spm_id_from=pageDriver">singletonã€prototypeä¸‹beanå¯¹è±¡çš„ä¸åŒåˆ›å»ºæ—¶é—´</a></p><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210714124755908.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210714124755908.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210714124755908"></p><h3 id="Beanå®ä¾‹åŒ–ä¸‰ç§æ–¹æ³•"><a href="#Beanå®ä¾‹åŒ–ä¸‰ç§æ–¹æ³•" class="headerlink" title="Beanå®ä¾‹åŒ–ä¸‰ç§æ–¹æ³•"></a>Beanå®ä¾‹åŒ–ä¸‰ç§æ–¹æ³•</h3><ul><li><p>æ— å‚æ„é€ æ–¹æ³•å®ä¾‹åŒ–</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºå®¹å™¨</span></span><br><span class="line">ApplicationContext app = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line"><span class="comment">// ä»å®¹å™¨ä¸­è·å¾—å¯¹è±¡</span></span><br><span class="line">UserDao userDao = (UserDao) app.getBean(<span class="string">&quot;userDao&quot;</span>);</span><br></pre></td></tr></table></figure></li><li><p>å·¥å‚é™æ€æ–¹æ³•å®ä¾‹åŒ–</p></li><li><p>å·¥å‚å®ä¾‹æ–¹æ³•å®ä¾‹åŒ–</p></li><li><p><a href="https://www.bilibili.com/video/BV1WZ4y1P7Bp?p=10&spm_id_from=pageDriver">æ¼”ç¤ºè§†é¢‘</a></p></li></ul><h3 id="Beançš„ä¾èµ–æ³¨å…¥"><a href="#Beançš„ä¾èµ–æ³¨å…¥" class="headerlink" title="Beançš„ä¾èµ–æ³¨å…¥"></a>Beançš„ä¾èµ–æ³¨å…¥</h3><blockquote><p>ä¾èµ–æ³¨å…¥( Dependency Injection)ï¼šå®ƒæ˜¯ Springæ¡†æ¶æ ¸å¿ƒ|OCçš„å…·ä½“å®ç°<br>åœ¨ç¼–å†™ç¨‹åºæ—¶,é€šè¿‡æ§åˆ¶åè½¬,æŠŠå¯¹è±¡çš„åˆ›å¥å»ºäº¤ç»™äº† Spring,ä½†æ˜¯ä»£ç ä¸­ä¸å¯èƒ½å‡ºç°æ²¡æœ‰ä¾èµ–çš„æƒ…å†µã€‚<br>OCè§£è€¦åªæ˜¯é™ä½ä»–ä»¬çš„ä¾èµ–å…³ç³»,ä½†ä¸ä¼šæ¶ˆé™¤ã€‚ä¾‹å¦‚:ä¸šåŠ¡å±‚ä»ä¼šè°ƒç”¨æŒä¹…å±‚çš„æ–¹æ³•ã€‚<br>é‚£è¿™ç§ä¸šåŠ¡å±‚å’ŒæŒä¹…å±‚çš„ä¾èµ–å…³ç³»,åœ¨ä½¿ç”¨ Springä¹‹å,å°±è®© Springæ¥ç»´æŠ¤äº†<br>ç®€å•çš„è¯´,å°±æ˜¯åç­‰æ¡†æ¶æŠŠæŒä¹…å±‚å¯¹è±¡ä¼ å…¥ä¸šåŠ¡å±‚,è€Œä¸ç”¨æˆ‘ä»¬è‡ªå·±å»è·å–ã€‚</p></blockquote><h4 id="setæ–¹æ³•ï¼ˆpropertyæ ‡ç­¾ï¼‰"><a href="#setæ–¹æ³•ï¼ˆpropertyæ ‡ç­¾ï¼‰" class="headerlink" title="setæ–¹æ³•ï¼ˆpropertyæ ‡ç­¾ï¼‰"></a>setæ–¹æ³•ï¼ˆpropertyæ ‡ç­¾ï¼‰</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç¬¬ä¸€ç§ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.myspring.service.impl.UserServiceImpl&quot;</span> &gt;</span></span><br><span class="line"><span class="comment">&lt;!-- nameå±æ€§å€¼å¯¹åº”setæ–¹æ³•å --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ç¬¬äºŒç§ --&gt;</span></span><br><span class="line">xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.myspring.service.impl.UserServiceImpl&quot;</span> <span class="attr">p:userDao-ref</span>=<span class="string">&quot;userDao&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UserServiceImplä¸­ä¾èµ–æ³¨å…¥ï¼Œè·å¾—userDaoå¯¹è±¡</span></span><br><span class="line"><span class="keyword">private</span> UserDao userDao;</span><br><span class="line"><span class="comment">// setæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserDao</span><span class="params">(UserDao userDao)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.userDao = userDao;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ„é€ ï¼ˆæœ‰å‚ï¼‰æ–¹æ³•ï¼ˆconstructor-argæ ‡ç­¾ï¼‰"><a href="#æ„é€ ï¼ˆæœ‰å‚ï¼‰æ–¹æ³•ï¼ˆconstructor-argæ ‡ç­¾ï¼‰" class="headerlink" title="æ„é€ ï¼ˆæœ‰å‚ï¼‰æ–¹æ³•ï¼ˆconstructor-argæ ‡ç­¾ï¼‰"></a>æ„é€ ï¼ˆæœ‰å‚ï¼‰æ–¹æ³•ï¼ˆconstructor-argæ ‡ç­¾ï¼‰</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.myspring.service.impl.UserServiceImpl&quot;</span> &gt;</span></span><br><span class="line"><span class="comment">&lt;!-- nameå±æ€§å€¼å¯¹åº”userServiceImplå†…UserDaoçš„å±æ€§å --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¾èµ–æ³¨å…¥ï¼Œè·å¾—userDaoå¯¹è±¡</span></span><br><span class="line"><span class="keyword">private</span> UserDao userDao;</span><br><span class="line"><span class="comment">// æ„é€ æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">UserServiceImpl</span><span class="params">(UserDao userDao)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.userDao = userDao;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ³¨å…¥æ•°æ®çš„æ•°æ®ç±»å‹"><a href="#æ³¨å…¥æ•°æ®çš„æ•°æ®ç±»å‹" class="headerlink" title="æ³¨å…¥æ•°æ®çš„æ•°æ®ç±»å‹"></a>æ³¨å…¥æ•°æ®çš„æ•°æ®ç±»å‹</h4><ul><li>æ™®é€šæ•°æ®ç±»å‹</li><li>å¼•ç”¨æ•°æ®ç±»å‹</li><li>é›†åˆæ•°æ®ç±»å‹</li><li><a href="https://www.bilibili.com/video/BV1WZ4y1P7Bp?p=16&spm_id_from=pageDriver">æ¼”ç¤ºè§†é¢‘</a></li></ul><h3 id="åˆ†æ¨¡å—å¼€å‘ï¼ˆimportæ ‡ç­¾ï¼‰"><a href="#åˆ†æ¨¡å—å¼€å‘ï¼ˆimportæ ‡ç­¾ï¼‰" class="headerlink" title="åˆ†æ¨¡å—å¼€å‘ï¼ˆimportæ ‡ç­¾ï¼‰"></a>åˆ†æ¨¡å—å¼€å‘ï¼ˆimportæ ‡ç­¾ï¼‰</h3><blockquote><p>å®é™…å¼€å‘ä¸­, Springçš„é…ç½®å†…å®¹éå¸¸å¤š,è¿™å°±å¯¼è‡´ Springé…ç½®å¾ˆç¹æ‚ä¸”ä½“ç§¯å¾ˆå¤§,æ‰€ä»¥,å¯ä»¥å°†éƒ¨åˆ†é…ç½®æ‹†è§£åˆ°å…¶ä»–é…ç½®æ–‡ä»¶ä¸­,è€Œåœ¨ Springä¸»é…ç½®æ–‡ä»¶é€šè¿‡imporæ ‡ç­¾è¿›è¡ŒåŠ è½½ã€‚</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;applicationContext-user.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">import</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Springç›¸å…³API"><a href="#Springç›¸å…³API" class="headerlink" title="Springç›¸å…³API"></a>Springç›¸å…³API</h2><h3 id="ApplicationContext"><a href="#ApplicationContext" class="headerlink" title="ApplicationContext"></a>ApplicationContext</h3><blockquote><p>application Contextï¼šæ¥å£ç±»å‹,ä»£è¡¨åº”ç”¨ä¸Šä¸‹æ–‡,å¯ä»¥é€šè¿‡å…¶å®ä¾‹è·å¾— Springå®¹å™¨ä¸­çš„Beanå¯¹è±¡</p></blockquote><h4 id="ä¸‰ç§å®ç°ç±»"><a href="#ä¸‰ç§å®ç°ç±»" class="headerlink" title="ä¸‰ç§å®ç°ç±»"></a>ä¸‰ç§å®ç°ç±»</h4><ul><li><strong>ClassPathXmlApplicationContext</strong><br><strong>å®ƒæ˜¯ä»ç±»çš„æ ¹è·¯å¾„ä¸‹åŠ è½½é…ç½®æ–‡ä»¶æ¨èä½¿ç”¨è¿™ç§</strong></li><li>FileSystemXmlApplicationContext<br>å®ƒæ˜¯ä»ç£ç›˜è·¯å¾„ä¸ŠåŠ è½½é…ç½®æ–‡ä»¶,é…ç½®æ–‡ä»¶å¯ä»¥åœ¨ç£ç›˜çš„ä»»æ„ä½ç½®ã€‚</li><li><strong>AnnotationConfigApplicationContext</strong><br><strong>å½“ä½¿ç”¨æ³¨è§£é…ç½®å®¹å™¨å¯¹è±¡æ—¶,éœ€è¦ä½¿ç”¨æ­¤ç±»æ¥åˆ›å»º springå®¹å™¨ã€‚å®ƒç”¨æ¥è¯»å–æ³¨è§£ã€‚</strong></li></ul><h4 id="getBean-æ–¹æ³•"><a href="#getBean-æ–¹æ³•" class="headerlink" title="getBean()æ–¹æ³•"></a>getBean()æ–¹æ³•</h4><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210714143634260.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210714143634260.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210714143634260"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UserService userService1 = (UserService) app.getBean(<span class="string">&quot;userService&quot;</span>);</span><br><span class="line">UserService userService2 = app.getBean(UserService.class);</span><br></pre></td></tr></table></figure><h2 id="Springé…ç½®æ•°æ®æº"><a href="#Springé…ç½®æ•°æ®æº" class="headerlink" title="Springé…ç½®æ•°æ®æº"></a>Springé…ç½®æ•°æ®æº</h2><h3 id="æ•°æ®æºï¼ˆè¿æ¥æ± ï¼‰çš„ä½œç”¨"><a href="#æ•°æ®æºï¼ˆè¿æ¥æ± ï¼‰çš„ä½œç”¨" class="headerlink" title="æ•°æ®æºï¼ˆè¿æ¥æ± ï¼‰çš„ä½œç”¨"></a>æ•°æ®æºï¼ˆè¿æ¥æ± ï¼‰çš„ä½œç”¨</h3><blockquote><ul><li>æ•°æ®æº(è¿æ¥æ± )æ˜¯æé«˜ç¨‹åºæ€§èƒ½å¦‚å‡ºç°çš„</li><li>äº‹å…ˆå®ä¾‹åŒ–æ•°æ®æº,åˆå§‹åŒ–éƒ¨åˆ†è¿æ¥èµ„æº</li><li>ä½¿ç”¨è¿æ¥èµ„æºæ—¶ä»æ•°æ®æºä¸­è·å–</li><li>ä½¿ç”¨å®Œæ¯•åå°†è¿æ¥èµ„æºå½’è¿˜ç»™æ•°æ®æº</li></ul></blockquote><h3 id="æ‰‹åŠ¨åˆ›å»ºæ•°æ®æºçš„å¼€å‘æ­¥éª¤"><a href="#æ‰‹åŠ¨åˆ›å»ºæ•°æ®æºçš„å¼€å‘æ­¥éª¤" class="headerlink" title="æ‰‹åŠ¨åˆ›å»ºæ•°æ®æºçš„å¼€å‘æ­¥éª¤"></a>æ‰‹åŠ¨åˆ›å»ºæ•°æ®æºçš„å¼€å‘æ­¥éª¤</h3><ol><li><p>å¯¼å…¥Mavenä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.46<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºjdbc.properties</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="meta">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/æ•°æ®åº“å</span></span><br><span class="line"><span class="meta">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">jdbc.password</span>=<span class="string">123456789</span></span><br></pre></td></tr></table></figure></li><li><p>åŠ è½½propertiesé…ç½®æ–‡ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ResourceBundle rb = ResourceBundle.getBundle(<span class="string">&quot;jdbc&quot;</span>);</span><br><span class="line">String driver = rb.getString(<span class="string">&quot;jdbc.driver&quot;</span>);</span><br><span class="line">String url = rb.getString(<span class="string">&quot;jdbc.url&quot;</span>);</span><br><span class="line">String username = rb.getString(<span class="string">&quot;jdbc.username&quot;</span>);</span><br><span class="line">String password = rb.getString(<span class="string">&quot;jdbc.password&quot;</span>);</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºæ•°æ®æº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºc3p0æ•°æ®æº</span></span><br><span class="line">ComboPooledDataSource dataSource = <span class="keyword">new</span> ComboPooledDataSource();</span><br><span class="line">dataSource.setDriverClass(driver);</span><br><span class="line">dataSource.setJdbcUrl(url);</span><br><span class="line">dataSource.setUser(username);</span><br><span class="line">dataSource.setPassword(password);</span><br><span class="line">Connection connection = dataSource.getConnection();</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºDruidæ•°æ®æº</span></span><br><span class="line">DruidDataSource dataSource = <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">dataSource.setDriverClassName(driver);</span><br><span class="line">dataSource.setUrl(url);</span><br><span class="line">dataSource.setUsername(username);</span><br><span class="line">dataSource.setPassword(password);</span><br><span class="line">DruidPooledConnection connection = dataSource.getConnection();</span><br></pre></td></tr></table></figure></li></ol><h3 id="ä½¿ç”¨Springåˆ›å»ºæ•°æ®æºçš„å¼€å‘æ­¥éª¤"><a href="#ä½¿ç”¨Springåˆ›å»ºæ•°æ®æºçš„å¼€å‘æ­¥éª¤" class="headerlink" title="ä½¿ç”¨Springåˆ›å»ºæ•°æ®æºçš„å¼€å‘æ­¥éª¤"></a>ä½¿ç”¨Springåˆ›å»ºæ•°æ®æºçš„å¼€å‘æ­¥éª¤</h3><ol><li><p>å¯¼å…¥ç›¸å…³ä¾èµ–</p></li><li><p>åœ¨applicationContextä¸­é…ç½®æ•°æ®æºbean</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼•å…¥contextå‘½åç©ºé—´å’Œçº¦æŸè·¯å¾„ --&gt;</span></span><br><span class="line">xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åŠ è½½å¤–éƒ¨çš„propertiesæ–‡ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- c3p0 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Driud --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210714153548748.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210714153548748.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210714153548748"></p></li><li><p>åˆ›å»ºæ•°æ®æºå¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext applicationContext = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">DataSource dataSource = applicationContext.getBean(DataSource.class);</span><br><span class="line">Connection connection = dataSource.getConnection();</span><br></pre></td></tr></table></figure></li></ol><h2 id="Springæ³¨è§£å¼€å‘"><a href="#Springæ³¨è§£å¼€å‘" class="headerlink" title="Springæ³¨è§£å¼€å‘"></a>Springæ³¨è§£å¼€å‘</h2><blockquote><p>SpringåŸå§‹æ³¨è§£ä¸»è¦æ˜¯æ›¿ä»£<Bean>çš„é…ç½®</p></blockquote><h3 id="åŸå§‹æ³¨è§£"><a href="#åŸå§‹æ³¨è§£" class="headerlink" title="åŸå§‹æ³¨è§£"></a>åŸå§‹æ³¨è§£</h3><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210714154827196.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210714154827196.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210714154827196"></p><h4 id="ç»„ä»¶æ‰«æ"><a href="#ç»„ä»¶æ‰«æ" class="headerlink" title="ç»„ä»¶æ‰«æ"></a>ç»„ä»¶æ‰«æ</h4><p>ä½¿ç”¨æ³¨è§£è¿›è¡Œå¼€å‘æ—¶,éœ€è¦åœ¨ applicationContext. xmä¸­é…ç½®ç»„ä»¶æ‰«æ,ä½œç”¨æ˜¯æŒ‡å®šå“ªä¸ªåŒ…åŠå…¶å­åŒ…ä¸‹çš„Beanï¼Œéœ€è¦è¿›è¡Œæ‰«æä»¥ä¾¿è¯†åˆ«ä½¿ç”¨æ³¨è§£é…ç½®çš„ç±»ã€å­—æ®µå’Œæ–¹æ³•ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®ç»„ä»¶æ‰«æ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.myspring&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h4 id="Daoç±»"><a href="#Daoç±»" class="headerlink" title="Daoç±»"></a>Daoç±»</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®æ–‡ä»¶  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.myspring.dao.impl.UserDaoImpl&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;prototype&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨è§£é…ç½®ï¼Œå†™åœ¨ç±»åä¹‹ä¸Š</span></span><br><span class="line"><span class="meta">@Component(&quot;userDao&quot;)</span></span><br><span class="line"><span class="comment">// ç¬¬äºŒç§å¯è¯»æ€§æ›´å¼º</span></span><br><span class="line"><span class="meta">@Repository(&quot;userDao&quot;)</span></span><br></pre></td></tr></table></figure><h4 id="Serviceç±»"><a href="#Serviceç±»" class="headerlink" title="Serviceç±»"></a>Serviceç±»</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®æ–‡ä»¶  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.myspring.service.impl.UserServiceImpl&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨è§£é…ç½®ï¼Œå†™åœ¨ç±»åä¹‹ä¸Š</span></span><br><span class="line"><span class="meta">@Component(&quot;userService&quot;)</span></span><br><span class="line"><span class="comment">// ç¬¬äºŒç§å¯è¯»æ€§æ›´å¼º</span></span><br><span class="line"><span class="meta">@Service(&quot;userService&quot;)</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨è§£é…ç½®ï¼Œå†™åœ¨å­—æ®µä¹‹å‰</span></span><br><span class="line"><span class="comment">// Autowiredä»springå®¹å™¨ä¸­æ ¹æ® æ•°æ®ç±»å‹ è¿›è¡ŒåŒ¹é…ï¼Œæ‰€ä»¥åŒä¸€æ•°æ®ç±»å‹åªæœ‰å•ä¸ªbeanå¯ä»¥åªå†™Autowired</span></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="comment">// Qualifierä»springå®¹å™¨ä¸­æ ¹æ® idå€¼ç±»å‹ è¿›è¡ŒåŒ¹é…ï¼Œä½†æ˜¯å¿…é¡»ç»“åˆAutowiredä¸€èµ·ä½¿ç”¨</span></span><br><span class="line"><span class="meta">@Qualifier(&quot;userDao&quot;)</span></span><br><span class="line"><span class="comment">// @Resource(name = &quot;userDao&quot;) ç›¸å½“äºå‰ä¸¤è€…ç»“åˆ</span></span><br><span class="line"><span class="keyword">private</span> UserDao userDao;</span><br><span class="line"><span class="comment">// æ­¤æ—¶ç±»ä¸­å¯ä»¥ä¸å†™setæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserDao</span><span class="params">(UserDao userDao)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.userDao = userDao;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ™®é€šå±æ€§æ³¨å…¥"><a href="#æ™®é€šå±æ€§æ³¨å…¥" class="headerlink" title="æ™®é€šå±æ€§æ³¨å…¥"></a>æ™®é€šå±æ€§æ³¨å…¥</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Value(&quot;$&#123;jdbc.driver&#125;&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String driver;</span><br></pre></td></tr></table></figure><h3 id="æ–°æ³¨è§£"><a href="#æ–°æ³¨è§£" class="headerlink" title="æ–°æ³¨è§£"></a>æ–°æ³¨è§£</h3><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210714193700007.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210714193700007.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210714193700007"></p><p>æ•´åˆåœ¨ä¸€èµ·çš„æ ·å­ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">// æ ‡å¿—è¯¥ç±»æ˜¯Springçš„æ ¸å¿ƒé…ç½®ç±»</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.myspring&quot;)</span> <span class="comment">// é…ç½®ç»„ä»¶æ‰«æ,æ›¿æ¢&lt;context:component-scan base-package=&quot;com.myspring&quot;/&gt;</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;classpath:jdbc.properties&quot;)</span> <span class="comment">//  åŠ è½½å¤–éƒ¨çš„propertiesæ–‡ä»¶,æ›¿æ¢&lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot;/&gt;</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringConfiguration</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.driver&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String driver;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.url&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.password&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(&quot;dataSource&quot;)</span> <span class="comment">// springä¼šå°†å½“å‰æ–¹æ³•çš„è¿”å›å€¼ä»¥æŒ‡å®šåç§°å­˜å‚¨åˆ°springå®¹å™¨å½“ä¸­</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSource <span class="title">getDataSource</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        DruidDataSource dataSource = <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">        dataSource.setDriverClassName(driver);</span><br><span class="line">        dataSource.setUrl(url);</span><br><span class="line">        dataSource.setUsername(username);</span><br><span class="line">        dataSource.setPassword(password);</span><br><span class="line">        <span class="keyword">return</span> dataSource;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ†æ¨¡å—å¦‚ä¸‹ï¼ˆæ¨èï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">// æ ‡å¿—è¯¥ç±»æ˜¯Springçš„æ ¸å¿ƒé…ç½®ç±»</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.myspring&quot;)</span> <span class="comment">// é…ç½®ç»„ä»¶æ‰«æ,æ›¿æ¢&lt;context:component-scan base-package=&quot;com.myspring&quot;/&gt;</span></span><br><span class="line"><span class="meta">@Import(&#123;DataSourceConfiguration.class,&#125;)</span> <span class="comment">//æ‹¬å·å†…å†™æ•°ç»„&#123;xxx.class,xxx.class&#125;,æ›¿æ¢&lt;import resource=&quot;&quot;/&gt;</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PropertySource(&quot;classpath:jdbc.properties&quot;)</span> <span class="comment">//  åŠ è½½å¤–éƒ¨çš„propertiesæ–‡ä»¶,æ›¿æ¢&lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot;/&gt;</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataSourceConfiguration</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.driver&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String driver;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.url&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.password&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(&quot;dataSource&quot;)</span> <span class="comment">// springä¼šå°†å½“å‰æ–¹æ³•çš„è¿”å›å€¼ä»¥æŒ‡å®šåç§°å­˜å‚¨åˆ°springå®¹å™¨å½“ä¸­</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSource <span class="title">getDataSource</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        DruidDataSource dataSource = <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">        dataSource.setDriverClassName(driver);</span><br><span class="line">        dataSource.setUrl(url);</span><br><span class="line">        dataSource.setUsername(username);</span><br><span class="line">        dataSource.setPassword(password);</span><br><span class="line">        <span class="keyword">return</span> dataSource;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Springé›†æˆjunit"><a href="#Springé›†æˆjunit" class="headerlink" title="Springé›†æˆjunit"></a>Springé›†æˆjunit</h2><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210714200557371.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210714200557371.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210714200557371"></p><ol><li><p>æ·»åŠ ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.3.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="comment">// @ContextConfiguration(&quot;classpath:applicationContext.xml&quot;) // éæ³¨è§£æ–¹å¼æ³¨å…¥é…ç½®</span></span><br><span class="line"><span class="meta">@ContextConfiguration(classes = &#123;SpringConfiguration.class&#125;)</span>  <span class="comment">// æ³¨è§£æ–¹å¼æ³¨å…¥é…ç½®</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringJunitTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Resource(name = &quot;userService&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        userService.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="Springé›†æˆwebç¯å¢ƒ"><a href="#Springé›†æˆwebç¯å¢ƒ" class="headerlink" title="Springé›†æˆwebç¯å¢ƒ"></a>Springé›†æˆwebç¯å¢ƒ</h2><blockquote><p>åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡æ˜¯é€šè¿‡ new ClasspathXmlApplication Context( springé…ç½®æ–‡ä»¶)æ–¹å¼è·å–çš„,ä½†æ˜¯æ¯æ¬¡ä»å®¹å™¨ä¸­è·å¾—Beanæ—¶éƒ½è¦ç¼–å†™ new ClasspathXmlApplication Context( springé…ç½®æ–‡ä»¶),è¿™æ ·çš„å¼Šç«¯æ˜¯é…ç½®<br>æ–‡ä»¶åŠ è½½å¤šæ¬¡,åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡åˆ›å»ºå¤šæ¬¡ã€‚</p><p>åœ¨Webé¡¹ç›®ä¸­,å¯ä»¥ä½¿ç”¨ ServletcontextListenerç›‘å¬Webåº”ç”¨çš„å¯åŠ¨,æˆ‘ä»¬å¯ä»¥åœ¨Webåº”ç”¨å¯åŠ¨æ—¶,å°±åŠ è½½ Springçš„é…ç½®æ–‡ä»¶,åˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡ Application Context,åœ¨å°†å…¶å­˜å‚¨åˆ°æœ€å¤§çš„åŸŸ servletContextåŸŸä¸­,è¿™æ ·å°±å¯ä»¥åœ¨ä»»æ„ä½ç½®ä»åŸŸä¸­è·å¾—åº”ç”¨ä¸Šä¸‹æ–‡ Application Contextå¯¹è±¡äº†</p></blockquote><h3 id="æ‰‹åŠ¨ä½¿ç”¨listenerè·å–åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡"><a href="#æ‰‹åŠ¨ä½¿ç”¨listenerè·å–åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡" class="headerlink" title="æ‰‹åŠ¨ä½¿ç”¨listenerè·å–åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡"></a>æ‰‹åŠ¨ä½¿ç”¨listenerè·å–åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡</h3><ol><li><p>åˆ›å»ºlistenerç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ContextLoaderListener</span> <span class="keyword">implements</span> <span class="title">ServletContextListener</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextInitialized</span><span class="params">(ServletContextEvent servletContextEvent)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ApplicationContext app = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;); //ä½¿ç”¨éæ³¨è§£æ—¶ç”¨è¯¥æ–¹æ³•åˆ›å»º</span></span><br><span class="line">        ApplicationContext app = <span class="keyword">new</span> AnnotationConfigApplicationContext(SpringConfiguration.class); <span class="comment">// ä½¿ç”¨æ³¨è§£æ—¶ç”¨è¯¥æ–¹æ³•åˆ›å»º</span></span><br><span class="line">        <span class="comment">// å°†Springçš„åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡å­˜å‚¨åˆ°ServletContextåŸŸå¯¹è±¡ä¸­</span></span><br><span class="line">        servletContextEvent.getServletContext().setAttribute(<span class="string">&quot;app&quot;</span>, app);</span><br><span class="line">        System.out.println(<span class="string">&quot;springå®¹å™¨åˆ›å»ºå®Œæ¯•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextDestroyed</span><span class="params">(ServletContextEvent servletContextEvent)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨web.xmlä¸­é…ç½®listener</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>com.myspring.listener.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>è·å–servletContextåŸŸå¯¹è±¡ä¸­çš„åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext app = (ApplicationContext) <span class="keyword">this</span>.getServletContext().getAttribute(<span class="string">&quot;app&quot;</span>);</span><br></pre></td></tr></table></figure></li></ol><h3 id="ä½¿ç”¨Springè·å–åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡"><a href="#ä½¿ç”¨Springè·å–åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡" class="headerlink" title="ä½¿ç”¨Springè·å–åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡"></a>ä½¿ç”¨Springè·å–åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡</h3><ol><li><p>å¯¼å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>é…ç½®web.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è®¾ç½®å…¨å±€å‚æ•° --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®ç›‘å¬å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>è·å–åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WebApplicationContext app = WebApplicationContextUtils.getWebApplicationContext(req.getServletContext());</span><br></pre></td></tr></table></figure></li></ol><h2 id="JdbcTemplate"><a href="#JdbcTemplate" class="headerlink" title="JdbcTemplate"></a>JdbcTemplate</h2><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><blockquote><p>å®ƒæ˜¯ springæ¡†æ¶ä¸­æä¾›çš„ä¸ªå¯¹è±¡,æ˜¯å¯¹åŸå§‹ç¹ççš„ dbc APIå¯¹è±¡çš„ç®€å•å°è£…ã€‚ springæ¡†æ¶ä¸ºæˆ‘ä»¬æä¾›äº†å¾ˆå¤šçš„æ“ä½œæ¨¡æ¿ç±»ã€‚ä¾‹å¦‚:æ“ä½œå…³ç³»å‹æ•°æ®çš„ dbcTemplateå’Œ bernate Template,æ“ä½œnosqæ•°æ®åº“çš„ RedisTemplate,æ“<br>ä½œæ¶ˆæ¯é˜Ÿåˆ—çš„ UmsTemplateç­‰ç­‰ã€‚</p></blockquote><h3 id="æ‰‹åŠ¨å¼€å‘æ­¥éª¤"><a href="#æ‰‹åŠ¨å¼€å‘æ­¥éª¤" class="headerlink" title="æ‰‹åŠ¨å¼€å‘æ­¥éª¤"></a>æ‰‹åŠ¨å¼€å‘æ­¥éª¤</h3><ol><li><p>æ·»åŠ ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºæ•°æ®åº“è¡¨å’ŒjavaBean</p></li><li><p>åˆ›å»ºjdbcTemplateå¯¹è±¡ã€æ‰§è¡Œæ•°æ®åº“æ“ä½œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcTemplateTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">// æµ‹è¯•dbcTemplateå¼€å‘æ­¥éª¤</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºDruidæ•°æ®æº</span></span><br><span class="line">        DruidDataSource dataSource = <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">        dataSource.setDriverClassName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        dataSource.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/test&quot;</span>);</span><br><span class="line">        dataSource.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        dataSource.setPassword(<span class="string">&quot;123456789&quot;</span>);</span><br><span class="line">        <span class="comment">// åˆ›å»ºjdbcTemplateå¯¹è±¡</span></span><br><span class="line">        JdbcTemplate jdbcTemplate = <span class="keyword">new</span> JdbcTemplate(dataSource);</span><br><span class="line">        <span class="comment">// æ•°æ®åº“æ“ä½œ</span></span><br><span class="line">        jdbcTemplate.update(<span class="string">&quot;insert into test1 values(?,?)&quot;</span>, <span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="number">18</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="Springä½¿ç”¨JdbcTemplateå¼€å‘æ­¥éª¤"><a href="#Springä½¿ç”¨JdbcTemplateå¼€å‘æ­¥éª¤" class="headerlink" title="Springä½¿ç”¨JdbcTemplateå¼€å‘æ­¥éª¤"></a>Springä½¿ç”¨JdbcTemplateå¼€å‘æ­¥éª¤</h3><ol><li><p>æ·»åŠ ä¾èµ–</p></li><li><p>ç¼–å†™jdbc.propertiesæ–‡ä»¶</p></li><li><p>ç¼–å†™spring-configæ–‡ä»¶applicationContext.xmlï¼Œæ·»åŠ æ•°æ®æºå¯¹è±¡ï¼ŒjdbcTemplateå¯¹è±¡</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼•å…¥contextå‘½åç©ºé—´å’Œçº¦æŸè·¯å¾„ --&gt;</span></span><br><span class="line">xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åŠ è½½å¤–éƒ¨çš„propertiesæ–‡ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Druid DataSource --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Spring JdbcTemplate --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å¾—applicationContext</span></span><br><span class="line">ApplicationContext app = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line"><span class="comment">// ä»å®¹å™¨ä¸­è·å¾—jdbcTemplateå¯¹è±¡</span></span><br><span class="line">JdbcTemplate jdbcTemplate = app.getBean(JdbcTemplate.class);</span><br><span class="line"><span class="comment">// æ•°æ®åº“æ“ä½œ</span></span><br><span class="line">jdbcTemplate.update(<span class="string">&quot;insert into test1 values(?,?)&quot;</span>, <span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="number">18</span>);</span><br></pre></td></tr></table></figure></li></ol><h3 id="å¸¸ç”¨æ“ä½œ"><a href="#å¸¸ç”¨æ“ä½œ" class="headerlink" title="å¸¸ç”¨æ“ä½œ"></a>å¸¸ç”¨æ“ä½œ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbcTemplate.update(<span class="string">&quot;update test1 set age=? where name =?&quot;</span>, <span class="number">10</span>, <span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">List&lt;User&gt; userList = jdbcTemplate.query(<span class="string">&quot;select * from test1&quot;</span>, <span class="keyword">new</span> BeanPropertyRowMapper&lt;&gt;(User.class));</span><br><span class="line">User user = jdbcTemplate.queryForObject(<span class="string">&quot;select * from test1 where age=?&quot;</span>, <span class="keyword">new</span> BeanPropertyRowMapper&lt;&gt;(User.class), <span class="number">18</span>);</span><br><span class="line">Long count = jdbcTemplate.queryForObject(<span class="string">&quot;select count(*) from test1&quot;</span>, Long.class);</span><br></pre></td></tr></table></figure><h2 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h2><h3 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><blockquote><p>AOPä¸º Aspect Oriented Programmingçš„ç¼©å†™,æ„æ€ä¸ºé¢å‘åˆ‡é¢ç¼–ç¨‹,æ˜¯é€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†ç°ç¨‹åºåŠŸèƒ½çš„åŒç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯ã€‚</p><p>AOPæ˜¯OOPçš„å»¶ç»­,æ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ä¸€ä¸ªçƒ­ç‚¹,ä¹Ÿæ˜¯ Springæ¡†æ¶ä¸­çš„ä¸ªé‡è¦å†…å®¹,æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ç§è¡ç”ŸèŒƒå‹ã€‚åˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚</p></blockquote><h4 id="ä½œç”¨ä¸ä¼˜åŠ¿"><a href="#ä½œç”¨ä¸ä¼˜åŠ¿" class="headerlink" title="ä½œç”¨ä¸ä¼˜åŠ¿"></a>ä½œç”¨ä¸ä¼˜åŠ¿</h4><p><a href="https://www.bilibili.com/video/BV1WZ4y1P7Bp?p=122&spm_id_from=pageDriver">é»‘é©¬ç¨‹åºå‘˜æœ€å…¨SSMæ¡†æ¶æ•™ç¨‹|Spring+SpringMVC+MyBatiså…¨è¦†ç›–_SSMæ•´åˆ_å“”å“©å“”å“©_bilibili</a></p><h4 id="JDKåŠ¨æ€ä»£ç†ã€cglibåŠ¨æ€ä»£ç†"><a href="#JDKåŠ¨æ€ä»£ç†ã€cglibåŠ¨æ€ä»£ç†" class="headerlink" title="JDKåŠ¨æ€ä»£ç†ã€cglibåŠ¨æ€ä»£ç†"></a>JDKåŠ¨æ€ä»£ç†ã€cglibåŠ¨æ€ä»£ç†</h4><p><a href="https://www.bilibili.com/video/BV1WZ4y1P7Bp?p=124&spm_id_from=pageDriver">é»‘é©¬ç¨‹åºå‘˜æœ€å…¨SSMæ¡†æ¶æ•™ç¨‹|Spring+SpringMVC+MyBatiså…¨è¦†ç›–_SSMæ•´åˆ_å“”å“©å“”å“©_bilibili</a></p><h4 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h4><ul><li>Target(ç›®æ ‡å¯¹è±¡):ä»£ç†çš„ç›®æ ‡å¯¹è±¡ã€‚</li><li>Proxy(ä»£ç†):â€”ä¸ªç±»è¢«AOPç»‡å…¥å¢å¼ºå,å°±äº§ç”Ÿä¸€ä¸ªç»“æœä»£ç†ç±»ã€‚</li><li>Joinpoint(è¿æ¥ç‚¹):æ‰€è°“è¿æ¥ç‚¹æ˜¯æŒ‡é‚£äº›è¢«æ‹¦æˆªåˆ°çš„ç‚¹ã€‚åœ¨ springä¸­è¿™äº›ç‚¹æŒ‡çš„æ˜¯æ–¹æ³•,å› ä¸º springåªæ”¯æŒæ–¹æ³•ç±»å‹çš„è¿æ¥ç‚¹ã€‚</li><li>Pointcut(åˆ‡å…¥ç‚¹):æ‰€è°“åˆ‡å…¥ç‚¹æ˜¯æŒ‡æˆ‘ä»¬è¦å¯¹å“ªäº› Joinpointè¿¸è¡Œæ‹¦æˆªçš„å®šä¹‰ã€‚</li><li>Advice(é€šçŸ¥/å¢å¼º):æ‰€è°“é€šçŸ¥æ˜¯æŒ‡æ‹¦æˆªåˆ° Joinpointä¹‹åæ‰€è¦åšçš„äº‹æƒ…å°±æ˜¯é€šçŸ¥ã€‚</li><li>Aspect(åˆ‡é¢):æ˜¯åˆ‡å…¥ç‚¹å’Œé€šçŸ¥(å¼•ä»‹ä¸ª)çš„ç»“åˆã€‚</li><li>eaving(ç»‡å…¥):æ˜¯æŒ‡æŠŠå¢å¼ºåº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡æ¥åˆ›å»ºæ–°çš„ä»£ç†å¯¹è±¡çš„è¿‡ç¨‹ã€‚springé‡†ç”¨åŠ¨æ€ä»£ç†ç»‡å…¥,è€ŒAspecté‡‡ç”¨ç¼–è¯‘æœŸç»‡å…¥å’Œç±»è£…è½½æœŸç»‡å…¥ã€‚</li></ul><h3 id="åŸºäºXMLå¼€å‘AOP"><a href="#åŸºäºXMLå¼€å‘AOP" class="headerlink" title="åŸºäºXMLå¼€å‘AOP"></a>åŸºäºXMLå¼€å‘AOP</h3><h4 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h4><ol><li><p>å¯¼å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºç›®æ ‡æ¥å£å’Œç›®æ ‡ç±»</p><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210719181630532.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210719181630532.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210719181630532"></p></li><li><p>åˆ›å»ºåˆ‡é¢ç±»ï¼ˆå«å¢å¼ºæ–¹æ³•ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAspect</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å‰ç½®å¢å¼ºã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">around</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å‰ç½®å¢å¼ºã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">        Object proceed = pjp.proceed();</span><br><span class="line">        System.out.println(<span class="string">&quot;åç½®å¢å¼ºã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> proceed;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;</span><br><span class="line">http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ç›®æ ‡å¯¹è±¡ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;target&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.myspring.aop.Target&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- åˆ‡é¢å¯¹è±¡ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myAspect&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.myspring.aop.MyAspect&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®ç»‡å…¥ï¼Œå³å“ªäº›æ–¹æ³•éœ€è¦å“ªäº›å¢å¼º(å‰ç½®åç½®å¢å¼ºç­‰) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å£°æ˜åˆ‡é¢ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;myAspect&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åˆ‡ç‚¹+é€šçŸ¥(å¢å¼º) --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;before&quot;</span> <span class="attr">pointcut</span>=<span class="string">&quot;execution(* com.myspring.aop.*.*(..))&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:before</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">method</span>=<span class="string">&quot;around&quot;</span> <span class="attr">pointcut</span>=<span class="string">&quot;execution(* com.myspring.aop.*.*(..))&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;classpath:applicationContext.xml&quot;)</span> <span class="comment">// éæ³¨è§£æ–¹å¼æ³¨å…¥é…ç½®</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringJunitTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> TargetInterface target;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        target.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="åˆ‡ç‚¹è¡¨è¾¾å¼"><a href="#åˆ‡ç‚¹è¡¨è¾¾å¼" class="headerlink" title="åˆ‡ç‚¹è¡¨è¾¾å¼"></a>åˆ‡ç‚¹è¡¨è¾¾å¼</h4><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210719184702337.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210719184702337.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210719184702337"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å£°æ˜åˆ‡é¢ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;myAspect&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åˆ‡ç‚¹è¡¨è¾¾å¼çš„æŠ½å– --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;myPointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.myspring.aop.*.*(..))&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åˆ‡ç‚¹+é€šçŸ¥(å¢å¼º) --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;before&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;myPointcut&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">method</span>=<span class="string">&quot;around&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;myPointcut&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="é€šçŸ¥ç±»å‹"><a href="#é€šçŸ¥ç±»å‹" class="headerlink" title="é€šçŸ¥ç±»å‹"></a>é€šçŸ¥ç±»å‹</h4><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210719184903397.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210719184903397.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210719184903397"></p><h3 id="åŸºäºæ³¨è§£å¼€å‘AOP"><a href="#åŸºäºæ³¨è§£å¼€å‘AOP" class="headerlink" title="åŸºäºæ³¨è§£å¼€å‘AOP"></a>åŸºäºæ³¨è§£å¼€å‘AOP</h3><ol><li><p>ç›®æ ‡ç±»ã€åˆ‡é¢ç±»</p></li><li><p>é…ç½®ç›®æ ‡ç±»ã€åˆ‡é¢ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;target&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Target</span> <span class="keyword">implements</span> <span class="title">TargetInterface</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;myAspect&quot;)</span></span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">//æ ‡æ³¨å½“å‰æ˜¯ä¸€ä¸ªåˆ‡é¢ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAspect</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Before(&quot;execution(* com.myspring.aop.*.*(..))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å‰ç½®å¢å¼ºã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ³¨è§£å¼€å‘ç»„ä»¶æ‰«æ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.myspring.aop&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- aopè‡ªåŠ¨ä»£ç† --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>/&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="åˆ‡ç‚¹è¡¨è¾¾å¼æŠ½å–"><a href="#åˆ‡ç‚¹è¡¨è¾¾å¼æŠ½å–" class="headerlink" title="åˆ‡ç‚¹è¡¨è¾¾å¼æŠ½å–"></a>åˆ‡ç‚¹è¡¨è¾¾å¼æŠ½å–</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;myAspect&quot;)</span></span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">//æ ‡æ³¨å½“å‰æ˜¯ä¸€ä¸ªåˆ‡é¢ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAspect</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Before(&quot;pointCut()&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å‰ç½®å¢å¼ºã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰åˆ‡ç‚¹è¡¨è¾¾å¼</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.myspring.aop.*.*(..))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pointCut</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äº‹åŠ¡æ§åˆ¶"><a href="#äº‹åŠ¡æ§åˆ¶" class="headerlink" title="äº‹åŠ¡æ§åˆ¶"></a>äº‹åŠ¡æ§åˆ¶</h2><p><a href="https://www.bilibili.com/video/BV1WZ4y1P7Bp?p=136">é»‘é©¬ç¨‹åºå‘˜æœ€å…¨SSMæ¡†æ¶æ•™ç¨‹|Spring+SpringMVC+MyBatiså…¨è¦†ç›–_SSMæ•´åˆ_å“”å“©å“”å“©_bilibili</a></p>]]></content>
      
      
      <categories>
          
          <category> ssm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹  </tag>
            
            <tag> ssm </tag>
            
            <tag> javaEE </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€é›†è®­ã€‘Servlet</title>
      <link href="/2021/07/11/ji-xun-servlet/"/>
      <url>/2021/07/11/ji-xun-servlet/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯Servletï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯Servletï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯Servletï¼Ÿ"></a>ä»€ä¹ˆæ˜¯Servletï¼Ÿ</h2><blockquote><p>Servlet æ˜¯è¿è¡Œåœ¨ Web æœåŠ¡å™¨æˆ–åº”ç”¨æœåŠ¡å™¨ä¸Šçš„<strong>javaç¨‹åº</strong>ï¼Œæ˜¯Java EEè§„èŒƒä¹‹ä¸€ï¼ˆä¸€ç§æ¥å£ï¼‰ã€‚</p><p>å®ƒæ˜¯ä½œä¸ºæ¥è‡ª Web æµè§ˆå™¨æˆ–å…¶ä»– HTTP å®¢æˆ·ç«¯çš„è¯·æ±‚å’Œ HTTP æœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“æˆ–åº”ç”¨ç¨‹åºä¹‹é—´çš„ä¸­é—´å±‚ï¼Œå³<strong>æ¥æ”¶å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„è¯·æ±‚å¹¶ä¸”å“åº”æ•°æ®ç»™å®¢æˆ·ç«¯</strong>ã€‚</p><p>ä½¿ç”¨ Servletï¼Œæ‚¨å¯ä»¥æ”¶é›†æ¥è‡ªç½‘é¡µè¡¨å•çš„ç”¨æˆ·è¾“å…¥ï¼Œå‘ˆç°æ¥è‡ªæ•°æ®åº“æˆ–è€…å…¶ä»–æºçš„è®°å½•ï¼Œè¿˜å¯ä»¥åŠ¨æ€åˆ›å»ºç½‘é¡µã€‚</p><p><img src="https://www.runoob.com/wp-content/uploads/2014/07/servlet-arch.jpg" class="lazyload" data-srcset="https://www.runoob.com/wp-content/uploads/2014/07/servlet-arch.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="Servlet æ¶æ„"></p></blockquote><h2 id="ğŸ’¡é…ç½®Servlet"><a href="#ğŸ’¡é…ç½®Servlet" class="headerlink" title="ğŸ’¡é…ç½®Servlet"></a>ğŸ’¡é…ç½®Servlet</h2><ul><li><p>åˆ›å»ºä¸€ä¸ªJavaç±»å¹¶å®ç°Servletæ¥å£ï¼ˆä¸€èˆ¬é€šè¿‡ç»§æ‰¿HTTPServletç±»å»å®ç°servletï¼‰</p></li><li><p>é‡å†™æ–¹æ³•ï¼Œå®ç°é€»è¾‘æ“ä½œ</p></li><li><p>åœ¨web.xmlä¸­é…ç½®è¿™ä¸ªservletçš„è®¿é—®åœ°å€</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç»™tomcaté…ç½®servletç›¸å…³ä¿¡æ¯ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å†™æ˜servletçš„åå­—ï¼ˆä¸€èˆ¬ä½¿ç”¨ç±»åå³å¯ï¼‰ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>MyServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å†™æ˜servletçš„å…¨ç±»å --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>servlet.MyServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ç»™servleté…ç½®è®¿é—®åœ°å€ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å†™æ˜éœ€è¦é…ç½®è®¿é—®åœ°å€çš„servlet --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>MyServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å†™æ˜ä¸ºè¯¥servleté…ç½®çš„è®¿é—®åœ°å€ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/myServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>&lt;url-pattern&gt;/myServlet&lt;/url-pattern&gt;</code>æ ‡ç­¾ä¸­ <code>/</code> çš„ä½œç”¨ï¼šç›¸å½“äºæ‹¼æ¥åˆ° <code>http://ip:port/å·¥ç¨‹è·¯å¾„</code>åï¼Œå³<code>http://ip:port/å·¥ç¨‹è·¯å¾„/myServlet</code></p></li></ul><h2 id="HTTPåè®®"><a href="#HTTPåè®®" class="headerlink" title="HTTPåè®®"></a>HTTPåè®®</h2><h3 id="ä»€ä¹ˆæ˜¯HTTPåè®®"><a href="#ä»€ä¹ˆæ˜¯HTTPåè®®" class="headerlink" title="ä»€ä¹ˆæ˜¯HTTPåè®®"></a>ä»€ä¹ˆæ˜¯HTTPåè®®</h3><blockquote><p>HTTPåè®®ï¼ˆHyperText Transfer Protocolï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰æ˜¯å› ç‰¹ç½‘ä¸Šåº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ä¸€ç§ç½‘ç»œä¼ è¾“åè®®ï¼Œæ‰€æœ‰çš„WWWæ–‡ä»¶éƒ½å¿…é¡»éµå®ˆè¿™ä¸ªæ ‡å‡†ï¼Œå³å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´é€šä¿¡ã€ä¼ è¾“æ•°æ®éœ€è¦éµå®ˆçš„è§„åˆ™ã€‚</p><p>HTTPæ˜¯ä¸€ä¸ªåŸºäºTCP/IPé€šä¿¡åè®®æ¥ä¼ é€’æ•°æ®ï¼ˆHTML æ–‡ä»¶, å›¾ç‰‡æ–‡ä»¶, æŸ¥è¯¢ç»“æœç­‰ï¼‰ã€‚</p></blockquote><h3 id="è¯·æ±‚ä¸å“åº”"><a href="#è¯·æ±‚ä¸å“åº”" class="headerlink" title="è¯·æ±‚ä¸å“åº”"></a>è¯·æ±‚ä¸å“åº”</h3><ul><li>å®¢æˆ·ç«¯ç»™æœåŠ¡å™¨å‘é€æ•°æ®ä¸ºè¯·æ±‚ï¼Œè¯·æ±‚åˆ†ä¸ºGETã€POSTè¯·æ±‚</li><li>æœåŠ¡å™¨ç»™å®¢æˆ·ç«¯å›ä¼ æ•°æ®ä¸ºå“åº”</li></ul><h3 id="ğŸ’¡HTTPåè®®å†…å®¹"><a href="#ğŸ’¡HTTPåè®®å†…å®¹" class="headerlink" title="ğŸ’¡HTTPåè®®å†…å®¹"></a>ğŸ’¡HTTPåè®®å†…å®¹</h3><blockquote><p>è¯·æ±‚/å“åº”è¡Œ</p><p>è¯·æ±‚/å“åº”å¤´ï¼š<br>    å±æ€§åï¼šå±æ€§å€¼</p><p>è¯·æ±‚/å“åº”ä½“ï¼š</p></blockquote><p>é‡è¦ï¼Œè‡ªè¡Œé˜…è¯»å­¦ä¹ </p><h3 id="å¸¸è§å“åº”ç "><a href="#å¸¸è§å“åº”ç " class="headerlink" title="å¸¸è§å“åº”ç "></a>å¸¸è§å“åº”ç </h3><ul><li>200ï¼šè¡¨ç¤ºè¯·æ±‚æˆåŠŸ</li><li>302ï¼šè¡¨ç¤ºè¯·æ±‚é‡å®šå‘</li><li>404ï¼šè¡¨ç¤ºæœåŠ¡å™¨æ‰¾ä¸åˆ°è¯¥è¯·æ±‚åœ°å€ï¼ˆåœ°å€æœ‰é”™ï¼‰</li><li>500ï¼šè¡¨ç¤ºæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼ˆä»£ç æœ‰é”™ï¼‰</li></ul><h2 id="ğŸ’¡è¡¨å•å¤„ç†ã€å¸¸ç”¨API"><a href="#ğŸ’¡è¡¨å•å¤„ç†ã€å¸¸ç”¨API" class="headerlink" title="ğŸ’¡è¡¨å•å¤„ç†ã€å¸¸ç”¨API"></a>ğŸ’¡è¡¨å•å¤„ç†ã€å¸¸ç”¨API</h2><table><thead><tr><th>requestå¯¹è±¡å¸¸ç”¨æ–¹æ³•</th><th>æ–¹æ³•ä»‹ç»</th></tr></thead><tbody><tr><td>getParameter(String name)</td><td>è¿”å›nameæŒ‡å®šå‚æ•°çš„å‚æ•°å€¼</td></tr><tr><td>getParameterValues(String name)</td><td>è¿”å›åŒ…å«å‚æ•°nameçš„æ‰€æœ‰å€¼çš„æ•°ç»„</td></tr><tr><td>setAttribute(String,Object)</td><td>å­˜å‚¨æ­¤è¯·æ±‚ä¸­çš„å±æ€§</td></tr><tr><td>getAttribute(String name)</td><td>è¿”å›æŒ‡å®šå±æ€§çš„å±æ€§å€¼</td></tr><tr><td>getContextPath()</td><td>è¿”å›å½“å‰WEBé¡¹ç›®ç›¸å¯¹è·¯å¾„</td></tr><tr><td>getMethod()</td><td>è·å–è¯·æ±‚ç±»å‹</td></tr><tr><td>getSession()</td><td>è·å–Sessionå¯¹è±¡</td></tr><tr><td>getCookies()</td><td>è·å–æ‰€æœ‰Cookie,è¿”å›ä¸€ä¸ªCookieæ•°ç»„</td></tr></tbody></table><table><thead><tr><th>requestå¯¹è±¡å¸¸ç”¨æ–¹æ³•</th><th>æ–¹æ³•ä»‹ç»</th></tr></thead><tbody><tr><td>setHeader()</td><td>è®¾ç½®æ¶ˆæ¯å¤´</td></tr><tr><td>setStatus()</td><td>è®¾ç½®çŠ¶æ€ç </td></tr><tr><td>addCookie()</td><td>æ·»åŠ Cookie</td></tr><tr><td>getWriter()</td><td>è·å–é€šå‘æµè§ˆå™¨çš„å­—ç¬¦æµ</td></tr></tbody></table><h3 id="è·å–-å›ä¼ æ•°æ®"><a href="#è·å–-å›ä¼ æ•°æ®" class="headerlink" title="è·å–/å›ä¼ æ•°æ®"></a>è·å–/å›ä¼ æ•°æ®</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/jsp_war_exploded/myServlet&quot;</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span>&gt;</span></span><br><span class="line">    ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    å…´è¶£çˆ±å¥½ï¼š</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç”»ç”»&quot;</span>&gt;</span>ç”»ç”»</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æ‰“ç¯®çƒ&quot;</span>&gt;</span>æ‰“ç¯®çƒ</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æ•²ä»£ç &quot;</span>&gt;</span>æ•²ä»£ç </span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String username = req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">String password = req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">String[] hobby = req.getParameterValues(<span class="string">&quot;hobby&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;ç”¨æˆ·åï¼š&quot;</span>+username+<span class="string">&quot;,å¯†ç ï¼š&quot;</span>+password);</span><br><span class="line">System.out.println(Arrays.toString(hobby));</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">resp.getWriter().println(<span class="string">&quot;&lt;div&gt;è¿™æ˜¯ä¸€ä¸ªdiv&lt;/div&gt;&quot;</span>);</span><br></pre></td></tr></table></figure><p><code>http://localhost:8080/jsp_war_exploded/myServlet?username=111&amp;password=222</code>ä½¿ç”¨?ä¼ é€’å‚æ•°</p><h3 id="è¯·æ±‚è½¬å‘ä¸é‡å®šå‘"><a href="#è¯·æ±‚è½¬å‘ä¸é‡å®šå‘" class="headerlink" title="è¯·æ±‚è½¬å‘ä¸é‡å®šå‘"></a>è¯·æ±‚è½¬å‘ä¸é‡å®šå‘</h3><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210712161839745.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210712161839745.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210712161839745"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String username = req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">req.setAttribute(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;MyServletå¤„ç†çš„ä¿¡æ¯:&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;MyServletä¸­çš„requestè·å¾—çš„æ•°æ®&quot;</span>+username);</span><br><span class="line">req.getRequestDispatcher(<span class="string">&quot;/myServlet2&quot;</span>).forward(req, resp);</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String username = req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;MyServlet2ä¸­çš„requestè·å¾—çš„æ•°æ®:&quot;</span>+username);</span><br><span class="line">System.out.println(<span class="string">&quot;MyServlet2ä¸­æ˜¾ç¤ºä¹‹å‰å¤„ç†å¹¶ä¿å­˜çš„æ•°æ®:&quot;</span>+req.getAttribute(<span class="string">&quot;key&quot;</span>));</span><br></pre></td></tr></table></figure><p>è¯·æ±‚è½¬å‘çš„ç‰¹ç‚¹ï¼š</p><ol><li>æµè§ˆå™¨åœ°å€æ æ²¡æœ‰å˜åŒ–</li><li>ä¸€æ¬¡è¯·æ±‚</li><li>å…±äº«requestä¸­çš„æ•°æ®</li><li>å¯ä»¥è½¬å‘åˆ°WEB-INFç›®å½•ä¸‹ï¼ˆå·¥ç¨‹è·¯å¾„ä¸‹ï¼‰</li></ol><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210712185234093.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210712185234093.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210712185234093"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">resp.sendRedirect(req.getContextPath()+<span class="string">&quot;/myServlet2&quot;</span>);</span><br><span class="line"><span class="comment">// req.getContextPath()è·å¾—å½“å‰WEBé¡¹ç›®ç›¸å¯¹è·¯å¾„</span></span><br><span class="line">resp.sendRedirect(<span class="string">&quot;http://www.baidu.com&quot;</span>);</span><br><span class="line"><span class="comment">// è®¿é—®å¤–éƒ¨èµ„æºå¿…å†™http</span></span><br></pre></td></tr></table></figure><p>é‡å®šå‘çš„ç‰¹ç‚¹ï¼š</p><ol><li>æµè§ˆå™¨åœ°å€æ å‘ç”Ÿå˜åŒ–</li><li>ä¸¤æ¬¡è¯·æ±‚</li><li>ä¸å…±äº«requestä¸­çš„æ•°æ®</li><li>ä¸èƒ½è®¿é—®WEB-INFç›®å½•ä¸‹èµ„æº</li><li>å¯ä»¥è®¿é—®å·¥ç¨‹å¤–çš„èµ„æº</li></ol><h2 id="ğŸ’¡Filterè¿‡æ»¤å™¨"><a href="#ğŸ’¡Filterè¿‡æ»¤å™¨" class="headerlink" title="ğŸ’¡Filterè¿‡æ»¤å™¨"></a>ğŸ’¡Filterè¿‡æ»¤å™¨</h2><p>è‡ªè¡Œå­¦ä¹ </p><h2 id="ä¸­æ–‡ä¹±ç é—®é¢˜"><a href="#ä¸­æ–‡ä¹±ç é—®é¢˜" class="headerlink" title="ä¸­æ–‡ä¹±ç é—®é¢˜"></a>ä¸­æ–‡ä¹±ç é—®é¢˜</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">req.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">resp.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="ç›¸å…³é˜…è¯»ææ–™"><a href="#ç›¸å…³é˜…è¯»ææ–™" class="headerlink" title="ç›¸å…³é˜…è¯»ææ–™"></a>ç›¸å…³é˜…è¯»ææ–™</h2><ul><li><a href="https://www.liaoxuefeng.com/wiki/1252599548343744/1255945497738400">Webå¼€å‘ - å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™ (liaoxuefeng.com)</a></li><li><a href="https://www.bilibili.com/video/BV1Y7411K7zz?from=search&seid=11129268525882330054">å°šç¡…è°·æœ€æ–°ç‰ˆJavaWebå…¨å¥—æ•™ç¨‹,java webé›¶åŸºç¡€å…¥é—¨å®Œæ•´ç‰ˆ_å“”å“©å“”å“©_bilibili</a></li></ul><h2 id="ä½œä¸š"><a href="#ä½œä¸š" class="headerlink" title="ä½œä¸š"></a>ä½œä¸š</h2><ul><li><p>ç†Ÿæ‚‰servletã€jspå¹¶å®ç°ä¸€äº›åŠŸèƒ½ï¼Œå¹¶å†™ä¸€ç¯‡åšæ–‡ã€‚</p></li><li><p>åšæ–‡å†…å®¹è¦æ±‚ï¼ˆ<strong>å¿…é¡»è¦æ±‚</strong>ï¼‰ï¼š</p><p><strong>å†™ä¸€ç¯‡åšæ–‡è®°å½•ä½ ä½¿ç”¨servletã€jspå®ç°åŠŸèƒ½æ—¶é‡åˆ°äº†å“ªäº›å›°éš¾ã€ä¸ç†è§£ã€ä¸çŸ¥é“è¯¥å¦‚ä½•å®ç°çš„åœ°æ–¹ï¼Œä»¥åŠå†™ä¸Šè§£å†³çš„è¿‡ç¨‹ä¸ç»“æœï¼ˆæœªè§£å†³çš„ä¹Ÿå¯ä»¥å†™ä¸Šæœ‰å“ªäº›ç–‘æƒ‘ï¼‰ï¼Œæˆ–è€…å­¦ä¹ ç¬”è®°ç­‰ç­‰çš†å¯ã€‚</strong></p></li><li><p>åŠŸèƒ½å®ä¾‹ï¼ˆ<strong>ä»…å‚è€ƒï¼Œä¸æ˜¯æœ€ä½/æœ€é«˜æ ‡å‡†</strong>ï¼‰ï¼š</p><ol><li>å«æœ‰ç™»é™†/æ³¨å†Œé¡µé¢ã€å…¶ä»–é¡µé¢ã€‚</li><li>ç™»å½•åŠŸèƒ½ï¼šæ‰‹åŠ¨è¾“å…¥ä¿¡æ¯ï¼Œç¬¦åˆå·²å­˜åœ¨çš„ç”¨æˆ·ä¿¡æ¯åˆ™æˆåŠŸç™»å½•ã€‚</li><li>æ³¨å†ŒåŠŸèƒ½ï¼šæ‰‹åŠ¨è¾“å…¥ä¿¡æ¯ï¼Œä¸èƒ½é‡å¤æ³¨å†Œå·²å­˜åœ¨çš„ç”¨æˆ·åï¼Œå¦åˆ™æ³¨å†Œå¤±è´¥ã€‚</li><li>ç”¨æˆ·å±•ç¤ºï¼šåœ¨é¡µé¢ä¸Šå±•ç¤ºæ‰€æœ‰å·²ç»æ³¨å†Œçš„ç”¨æˆ·çš„ä¿¡æ¯ã€‚</li><li>ç™»é™†è¿‡æ»¤ï¼šå…¶ä»–é¡µé¢ï¼Œåªæœ‰ç™»é™†æˆåŠŸåæ‰å¯è®¿é—®ï¼Œå¦åˆ™è·³è½¬è‡³ç™»é™†é¡µé¢ã€‚</li><li>å…¶ä»–é¡µé¢ï¼šåˆ©ç”¨å¾ªç¯æ§åˆ¶è¯­å¥æˆ–å…¶ä»–å·¥å…·åŠŸèƒ½è¾“å‡ºç”±åå°ä¼ é€’è€Œæ¥çš„æ•°æ®ã€‚</li><li>ç­‰ç­‰</li></ol></li><li><p>æäº¤å†…å®¹ä¸æ—¶é—´ï¼š</p><ul><li><p>æäº¤å†…å®¹ï¼šç¨‹åºæºç +åšæ–‡é“¾æ¥</p></li><li><p>æäº¤æ—¶é—´ï¼š7.27æ—¥æ™šé›¶ç‚¹å‰ï¼Œå°†å‹ç¼©åŒ…å‘½åä¸º<strong>ç­çº§+å§“å+å­¦å·</strong>å‘é€è‡³<a href="mailto:&#x37;&#x30;&#x37;&#56;&#50;&#51;&#x38;&#x31;&#x34;&#x40;&#113;&#113;&#46;&#x63;&#111;&#x6d;">&#x37;&#x30;&#x37;&#56;&#50;&#51;&#x38;&#x31;&#x34;&#x40;&#113;&#113;&#46;&#x63;&#111;&#x6d;</a></p></li></ul></li><li><p><strong>å¯èƒ½æ—¶é—´å¤ªçŸ­æ— æ³•å®ç°å¤ªå¤šåŠŸèƒ½ï¼Œæ²¡æœ‰å…³ç³»ï¼Œç¨‹åºæºç é™„ä¸Šè‡ªå·±å®ç°äº†çš„ä¸œè¥¿å°±è¡Œï¼Œæ²¡æœ‰å®ç°å®Œæ•´ä¹Ÿæ²¡å…³ç³»ï¼Œå®ç°äº†æ›´å¤šåŠŸèƒ½ä¹ŸæŒºå¥½ï¼Œè¿™ä¸ªä½œä¸šæ‰“åˆ†ä¸»è¦çœ‹ä½ çš„åšæ–‡é‡Œé¢å†™çš„è®°å½•å†…å®¹ï¼Œç¨‹åºä¸»è¦æ˜¯ç”¨æ¥ç»ƒä¹ ä»¥ç†Ÿæ‚‰servletå’Œjspçš„ï¼Œæ¯•ç«Ÿå¤§ä½œä¸šä¼šç”¨åˆ°ã€‚</strong></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaWeb </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é›†è®­ </tag>
            
            <tag> JavaWeb </tag>
            
            <tag> Servlet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€é›†è®­ã€‘jsp</title>
      <link href="/2021/07/11/ji-xun-jsp/"/>
      <url>/2021/07/11/ji-xun-jsp/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯JSP"><a href="#ä»€ä¹ˆæ˜¯JSP" class="headerlink" title="ä»€ä¹ˆæ˜¯JSP"></a>ä»€ä¹ˆæ˜¯JSP</h2><blockquote><ul><li>JSP ä¸ PHPã€ASPã€ASP.NET ç­‰è¯­è¨€ç±»ä¼¼ï¼Œ<strong>è¿è¡Œåœ¨æœåŠ¡ç«¯</strong>çš„è¯­è¨€ã€‚</li><li>JSPå…¨ç§°Java Server Pagesï¼Œæ˜¯å»ºç«‹åœ¨JAVAåŸºç¡€ä¸Šçš„ä¸€ç§ç½‘ç»œç¼–ç¨‹è¯­è¨€ï¼Œ<strong>JSPæ˜¯ä¸€ç§Java servletï¼ˆJSPåœ¨æ‰§è¡Œå‰é¦–å…ˆè¢«ç¼–è¯‘æˆä¸€ä¸ªServletï¼‰</strong>ï¼Œä¸»è¦ç”¨äºå®ç°Java webåº”ç”¨ç¨‹åºçš„ç”¨æˆ·ç•Œé¢éƒ¨åˆ†ã€‚</li><li>ç½‘é¡µå¼€å‘è€…ä»¬é€šè¿‡ç»“åˆHTMLä»£ç ã€XHTMLä»£ç ã€XMLå…ƒç´ ä»¥åŠåµŒå…¥JSPæ“ä½œå’Œå‘½ä»¤æ¥ç¼–å†™JSPã€‚</li></ul></blockquote><h2 id="jsp-lt-gt-java-servlet"><a href="#jsp-lt-gt-java-servlet" class="headerlink" title="jsp &lt;-&gt; java(servlet)"></a>jsp &lt;-&gt; java(servlet)</h2><p><code>C:\Users\å¢èŸ\AppData\Local\JetBrains\IntelliJIdea2021.1\tomcat\20e10a3d-4da9-4eee-b7fa-327b2feb3d84\work\Catalina\localhost\jsp_war_exploded\org\apache\jsp</code></p><p>ç±»ä¼¼äºä¸Šè¿°æ–‡ä»¶ç›®å½•ï¼ˆtomcatä¸‹çš„webappç›®å½•ä¸‹å­˜æ”¾å·¥ç¨‹é¡¹ç›®ï¼Œåªä¸è¿‡ç°åœ¨tomcatåœ¨ideaé‡Œç”¨ï¼‰å³æ‰¾åˆ°ç”Ÿæˆçš„javaæ–‡ä»¶ã€‚</p><p>å¯è§JSPæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªServletï¼Œåªä¸è¿‡æ— éœ€é…ç½®æ˜ å°„è·¯å¾„ï¼ŒWeb Serverä¼šæ ¹æ®è·¯å¾„æŸ¥æ‰¾å¯¹åº”çš„<code>.jsp</code>æ–‡ä»¶ï¼Œå¦‚æœæ‰¾åˆ°äº†ï¼Œå°±è‡ªåŠ¨ç¼–è¯‘æˆServletå†æ‰§è¡Œã€‚</p><h2 id="JSPè¯­æ³•"><a href="#JSPè¯­æ³•" class="headerlink" title="JSPè¯­æ³•"></a>JSPè¯­æ³•</h2><h3 id="JSPæ³¨é‡Š"><a href="#JSPæ³¨é‡Š" class="headerlink" title="JSPæ³¨é‡Š"></a>JSPæ³¨é‡Š</h3><table><thead><tr><th align="left"><strong>è¯­æ³•</strong></th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">&lt;%â€“ æ³¨é‡Š â€“%&gt;</td><td align="left">JSPæ³¨é‡Šï¼Œæ³¨é‡Šå†…å®¹ä¸ä¼šè¢«å‘é€è‡³æµè§ˆå™¨ç”šè‡³ä¸ä¼šè¢«ç¼–è¯‘</td></tr><tr><td align="left"><!-- æ³¨é‡Š --></td><td align="left">HTMLæ³¨é‡Šï¼Œé€šè¿‡æµè§ˆå™¨æŸ¥çœ‹ç½‘é¡µæºä»£ç æ—¶å¯ä»¥çœ‹è§æ³¨é‡Šå†…å®¹</td></tr></tbody></table><h3 id="ğŸ’¡è„šæœ¬ï¼ˆåœ¨JSPä¸­ç¼–å†™Javaä»£ç ï¼‰"><a href="#ğŸ’¡è„šæœ¬ï¼ˆåœ¨JSPä¸­ç¼–å†™Javaä»£ç ï¼‰" class="headerlink" title="ğŸ’¡è„šæœ¬ï¼ˆåœ¨JSPä¸­ç¼–å†™Javaä»£ç ï¼‰"></a>ğŸ’¡è„šæœ¬ï¼ˆåœ¨JSPä¸­ç¼–å†™Javaä»£ç ï¼‰</h3><p>å…ˆ<strong>å¯¼å…¥jsp-api.jarå’Œservlet-api.jar</strong>ï¼ˆtomcatè‡ªå¸¦ï¼Œä½†æ˜¯IDEå¹¶æ— æç¤ºä¼šæŠ¥çº¢ï¼‰</p><table><thead><tr><th align="left"><strong>è¯­æ³•</strong></th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">&lt;%  ä»£ç ç‰‡æ®µ  %&gt;</td><td align="left">ä¸€èˆ¬å®šä¹‰å˜é‡å’Œç¼–å†™è¯­å¥ã€‚</td></tr><tr><td align="left">&lt;%!  å£°æ˜ä»£ç   %&gt;</td><td align="left">å¯ä»¥å£°æ˜å¸¸é‡ï¼Œç¼–å†™æ–¹æ³•ï¼Œç¼–å†™ç±»</td></tr><tr><td align="left">&lt;%=  è¡¨è¾¾å¼  %&gt;</td><td align="left"><strong>è¡¨è¾¾å¼è¢«è½¬åŒ–æˆStringï¼Œç„¶åæ’å…¥åˆ°è¡¨è¾¾å¼å‡ºç°çš„åœ°æ–¹</strong></td></tr></tbody></table><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;%!</span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMath</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> a,b;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">MyMath</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.a = a;</span><br><span class="line">            <span class="keyword">this</span>.b = b;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">int</span> <span class="title">doMath</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> a+b;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">out.println(<span class="string">&quot;æ‰“å°è¯­å¥&quot;</span>);</span><br><span class="line">    MyMath myMath = <span class="keyword">new</span> MyMath(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> num = myMath.doMath();</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;h1&gt; å’Œä¸º&lt;%= num %&gt; &lt;/h1&gt;</span><br><span class="line">&lt;div&gt; &lt;%= <span class="string">&quot;&lt;h2&gt;è¿™æ˜¯ä¸€ä¸ªæ ‡ç­¾&lt;/h2&gt;&quot;</span> %&gt; &lt;/div&gt;</span><br></pre></td></tr></table></figure><p>å¯¹äºæµç¨‹æ§åˆ¶è¯­å¥çš„ç¼–å†™å¯èƒ½ç¨å¾®ç¹ç</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">int</span> day = <span class="number">1</span> %&gt;</span><br><span class="line">&lt;% <span class="keyword">if</span> (day == <span class="number">1</span> || day == <span class="number">7</span>) &#123; %&gt;</span><br><span class="line">&lt;p&gt;ä»Šå¤©æ˜¯å‘¨æœ«&lt;/p&gt;</span><br><span class="line">&lt;% &#125; <span class="keyword">else</span> &#123; %&gt;</span><br><span class="line">&lt;p&gt;ä»Šå¤©ä¸æ˜¯å‘¨æœ«&lt;/p&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br><span class="line">    </span><br><span class="line">&lt;%<span class="keyword">for</span> ( <span class="keyword">int</span> fontSize = <span class="number">1</span>; fontSize &lt;= <span class="number">3</span>; fontSize++)&#123; %&gt;</span><br><span class="line">   &lt;font color=<span class="string">&quot;green&quot;</span> size=<span class="string">&quot;&lt;%= fontSize %&gt;&quot;</span>&gt;</span><br><span class="line">    èœé¸Ÿæ•™ç¨‹</span><br><span class="line">   &lt;/font&gt;&lt;br /&gt;</span><br><span class="line">&lt;%&#125;%&gt;</span><br></pre></td></tr></table></figure><p>å½“ç„¶ä¹Ÿå¯ä»¥ç”¨outå¯¹è±¡è¾“å‡º</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">    <span class="keyword">int</span> fontSize;</span><br><span class="line">    <span class="keyword">for</span> ( fontSize = <span class="number">10</span>; fontSize &lt;= <span class="number">13</span>; fontSize++) &#123;</span><br><span class="line">        out.write(<span class="string">&quot;&lt;div&gt;&quot;</span>);</span><br><span class="line">        out.write(fontSize+<span class="string">&quot;&quot;</span>);</span><br><span class="line">        out.write(<span class="string">&quot;&lt;/div&gt;&lt;br&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure><h3 id="JSPæŒ‡ä»¤"><a href="#JSPæŒ‡ä»¤" class="headerlink" title="JSPæŒ‡ä»¤"></a>JSPæŒ‡ä»¤</h3><p>JSPæŒ‡ä»¤ç”¨æ¥è®¾ç½®ä¸æ•´ä¸ªJSPé¡µé¢ç›¸å…³çš„å±æ€§ã€‚</p><table><thead><tr><th align="left"><strong>JSPæŒ‡ä»¤</strong></th><th align="left"><strong>æè¿°</strong></th></tr></thead><tbody><tr><td align="left">&lt;%@ page     å±æ€§å=â€å±æ€§å€¼â€ %&gt;</td><td align="left">å®šä¹‰é¡µé¢çš„ä¾èµ–å±æ€§ï¼Œå¯¼åŒ…</td></tr><tr><td align="left">&lt;%@ include å±æ€§å=â€å±æ€§å€¼â€ %&gt;</td><td align="left">åŒ…å«å…¶ä»–æ–‡ä»¶ï¼ˆé™æ€åŒ…å«ï¼‰</td></tr><tr><td align="left">&lt;%@ taglib    å±æ€§å=â€å±æ€§å€¼â€ %&gt;</td><td align="left">å¼•å…¥æ ‡ç­¾åº“çš„å®šä¹‰ï¼Œå¯ä»¥æ˜¯è‡ªå®šä¹‰æ ‡ç­¾</td></tr></tbody></table><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot; &quot;</span> %&gt;</span><br><span class="line">&lt;%@ include file=<span class="string">&quot; &quot;</span>%&gt;</span><br></pre></td></tr></table></figure><h3 id="JSPè¡Œä¸º"><a href="#JSPè¡Œä¸º" class="headerlink" title="JSPè¡Œä¸º"></a>JSPè¡Œä¸º</h3><p>è‡ªè¡Œå­¦ä¹ </p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:è¡Œä¸ºå å±æ€§å=<span class="string">&quot;å±æ€§å€¼&quot;</span> /&gt;</span><br></pre></td></tr></table></figure><h3 id="ä¸­æ–‡ç¼–ç é—®é¢˜"><a href="#ä¸­æ–‡ç¼–ç é—®é¢˜" class="headerlink" title="ä¸­æ–‡ç¼–ç é—®é¢˜"></a>ä¸­æ–‡ç¼–ç é—®é¢˜</h3><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span> pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br></pre></td></tr></table></figure><h2 id="ğŸ’¡JSPä¹å¤§å†…ç½®å¯¹è±¡ä¸å››å¤§ä½œç”¨åŸŸ"><a href="#ğŸ’¡JSPä¹å¤§å†…ç½®å¯¹è±¡ä¸å››å¤§ä½œç”¨åŸŸ" class="headerlink" title="ğŸ’¡JSPä¹å¤§å†…ç½®å¯¹è±¡ä¸å››å¤§ä½œç”¨åŸŸ"></a>ğŸ’¡JSPä¹å¤§å†…ç½®å¯¹è±¡ä¸å››å¤§ä½œç”¨åŸŸ</h2><h3 id="å››å¤§åŸŸå¯¹è±¡"><a href="#å››å¤§åŸŸå¯¹è±¡" class="headerlink" title="å››å¤§åŸŸå¯¹è±¡"></a>å››å¤§åŸŸå¯¹è±¡</h3><table><thead><tr><th>å¯¹è±¡</th><th>ä½œç”¨åŸŸ</th><th>å˜åŒ–æ“ä½œ</th></tr></thead><tbody><tr><td>pageContext</td><td>å½“å‰é¡µé¢æœ‰æ•ˆï¼Œå½“å½“å‰é¡µé¢å…³é—­æˆ–è½¬åˆ°å…¶ä»–é¡µé¢æ—¶ï¼Œpageå¯¹è±¡å°†åœ¨å“åº”å›é¦ˆç»™å®¢æˆ·ç«¯åé‡Šæ”¾ã€‚</td><td>è·³è½¬é¡µé¢</td></tr><tr><td>request</td><td>å½“æ¬¡è¯·æ±‚æœ‰æ•ˆï¼Œå¯ä»¥è·¨è¶Šforward()ä¸é‡å®šå‘è·³è½¬å‰åçš„ä¸¤é¡µï¼Œå¯ä»¥é€šè¿‡setAttribute()æ–¹æ³•å®ç°é¡µé¢ä¸­çš„ä¿¡æ¯ä¼ é€’ã€‚</td><td>ä¸¤æ¬¡è¯·æ±‚</td></tr><tr><td>session</td><td>å½“å‰ä¼šè¯æœ‰æ•ˆï¼ŒæŒ‡ä»ç”¨æˆ·æ‰“å¼€æµè§ˆå™¨å¼€å§‹ï¼Œåˆ°ç”¨æˆ·å…³é—­æµè§ˆå™¨è¿™ä¸­é—´çš„è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹å¯èƒ½åŒ…å«å¤šä¸ªè¯·æ±‚å“åº”</td><td>å…³é—­æµè§ˆå™¨</td></tr><tr><td>application</td><td>æ‰€æœ‰åº”ç”¨ç¨‹åºä¸­æœ‰æ•ˆï¼Œæ•´ä¸ªåº”ç”¨æ˜¯æŒ‡ä»åº”ç”¨å¯åŠ¨ï¼Œåˆ°åº”ç”¨ç»“æŸã€‚æˆ‘ä»¬æ²¡æœ‰è¯´â€œä»æœåŠ¡å™¨å¯åŠ¨ï¼Œåˆ°æœåŠ¡å™¨å…³é—­â€æ˜¯å› ä¸ºä¸€ä¸ªæœåŠ¡å™¨å¯èƒ½éƒ¨ç½²å¤šä¸ªåº”ç”¨ï¼Œå½“ç„¶ä½ å…³é—­äº†æœåŠ¡å™¨ï¼Œå°±ä¼šæŠŠä¸Šé¢æ‰€æœ‰çš„åº”ç”¨éƒ½å…³é—­äº†ã€‚</td><td>å…³é—­æœåŠ¡å™¨</td></tr></tbody></table><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">pageContext.setAttribute(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;pageContext&quot;</span>);</span><br><span class="line">request.setAttribute(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;request&quot;</span>);</span><br><span class="line">session.setAttribute(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;session&quot;</span>);</span><br><span class="line">application.setAttribute(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;application&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">pageContextçš„å€¼ï¼š&lt;%=pageContext.getAttribute(<span class="string">&quot;key&quot;</span>) %&gt;&lt;br&gt;</span><br><span class="line">requestçš„å€¼ï¼š&lt;%=request.getAttribute(<span class="string">&quot;key&quot;</span>) %&gt;&lt;br&gt;</span><br><span class="line">sessionçš„å€¼ï¼š&lt;%=session.getAttribute(<span class="string">&quot;key&quot;</span>) %&gt;&lt;br&gt;</span><br><span class="line">applicationçš„å€¼ï¼š&lt;%=application.getAttribute(<span class="string">&quot;key&quot;</span>) %&gt;&lt;br&gt;</span><br></pre></td></tr></table></figure><h3 id="ä¹å¤§å†…ç½®å¯¹è±¡"><a href="#ä¹å¤§å†…ç½®å¯¹è±¡" class="headerlink" title="ä¹å¤§å†…ç½®å¯¹è±¡"></a>ä¹å¤§å†…ç½®å¯¹è±¡</h3><p>åœ¨ç”Ÿæˆçš„javaæ–‡ä»¶ä¸­å¯ä»¥æ‰¾åˆ°</p><p><img src="https://gitee.com/ReRia/images/raw/master/img/image-20210712103659945.png" class="lazyload" data-srcset="https://gitee.com/ReRia/images/raw/master/img/image-20210712103659945.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210712103659945"></p><table><thead><tr><th align="left"><strong>å¯¹è±¡</strong></th><th align="left"><strong>æè¿°</strong></th><th>ä½œç”¨åŸŸ</th></tr></thead><tbody><tr><td align="left"><strong>request</strong></td><td align="left">javax.servlet.http.HttpServletRequest ç±»çš„å®ä¾‹</td><td>request</td></tr><tr><td align="left"><strong>response</strong></td><td align="left">javax.servlet.http.HttpServletResponseç±»çš„å®ä¾‹</td><td>pageContext</td></tr><tr><td align="left"><strong>out</strong></td><td align="left">javax.servlet.jsp.JspWriter ç±»çš„å®ä¾‹ï¼Œç”¨æ¥åœ¨responseå¯¹è±¡ä¸­å†™å…¥å†…å®¹ã€‚</td><td>pageContext</td></tr><tr><td align="left"><strong>session</strong></td><td align="left">javax.servlet.http.HttpSession ç±»çš„å®ä¾‹</td><td>session</td></tr><tr><td align="left">application</td><td align="left">javax.servlet.ServletContext ç±»çš„å®ä¾‹ã€‚ä¸åº”ç”¨ä¸Šä¸‹æ–‡æœ‰å…³</td><td>application</td></tr><tr><td align="left">config</td><td align="left">javax.servlet.ServletConfig ç±»çš„å®ä¾‹ã€‚è¿™ä¸ªå¯¹è±¡å…è®¸å¼€å‘è€…è®¿é—®Servletæˆ–è€…JSPå¼•æ“çš„åˆå§‹åŒ–å‚æ•°ï¼Œæ¯”å¦‚æ–‡ä»¶è·¯å¾„ç­‰ã€‚</td><td>pageContext</td></tr><tr><td align="left">pageContext</td><td align="left">javax.servlet.jsp.PageContext ç±»çš„å®ä¾‹ï¼Œæä¾›å¯¹JSPé¡µé¢æ‰€æœ‰å¯¹è±¡ä»¥åŠå‘½åç©ºé—´çš„è®¿é—®</td><td>pageContext</td></tr><tr><td align="left">page</td><td align="left">æŒ‡å‘å½“å‰JSPå¯¹è±¡</td><td>pageContext</td></tr><tr><td align="left">exception</td><td align="left">exception ç±»çš„å¯¹è±¡ï¼Œä»£è¡¨å‘ç”Ÿé”™è¯¯çš„ JSP é¡µé¢ä¸­å¯¹åº”çš„å¼‚å¸¸å¯¹è±¡ï¼Œ&lt;%@ page â€¦â€¦ isErrorPage=â€trueâ€ %&gt;</td><td>pageContext</td></tr></tbody></table><h2 id="ELè¡¨è¾¾å¼ä¸JSTLæ ‡å‡†æ ‡ç­¾åº“"><a href="#ELè¡¨è¾¾å¼ä¸JSTLæ ‡å‡†æ ‡ç­¾åº“" class="headerlink" title="ELè¡¨è¾¾å¼ä¸JSTLæ ‡å‡†æ ‡ç­¾åº“"></a>ELè¡¨è¾¾å¼ä¸JSTLæ ‡å‡†æ ‡ç­¾åº“</h2><p>è‡ªè¡Œå­¦ä¹ </p><h2 id="ğŸ’¡MVCæ¡†æ¶"><a href="#ğŸ’¡MVCæ¡†æ¶" class="headerlink" title="ğŸ’¡MVCæ¡†æ¶"></a>ğŸ’¡MVCæ¡†æ¶</h2><p>MVCæ˜¯ä¸‰ä¸ªå•è¯çš„é¦–å­—æ¯ç¼©å†™ï¼Œå®ƒä»¬æ˜¯Modelï¼ˆæ¨¡å‹ï¼‰ã€Viewï¼ˆè§†å›¾ï¼‰å’ŒControllerï¼ˆæ§åˆ¶ï¼‰ã€‚</p><ul><li>Modelï¼ˆæ¨¡å‹ï¼‰ï¼šå¦‚ä¸€ä¸ªå­˜å–æ•°æ®çš„å¯¹è±¡æˆ– JavaBean</li><li>Viewï¼ˆè§†å›¾ï¼‰ï¼šå¦‚jspåŠ¨æ€é¡µé¢</li><li>Controllerï¼ˆæ§åˆ¶å™¨ï¼‰ï¼šæ§åˆ¶æ•°æ®æµå‘æ¨¡å‹å¯¹è±¡ï¼Œå¹¶åœ¨æ•°æ®å˜åŒ–æ—¶æ›´æ–°è§†å›¾ï¼Œä½¿è§†å›¾ä¸æ¨¡å‹åˆ†ç¦»å¼€ï¼Œå¦‚servlet</li></ul><p>MVCé‡è¦ç‰¹ç‚¹å°±æ˜¯ä¸¤ç§åˆ†ç¦»ï¼š</p><ol><li>è§†å›¾å’Œæ•°æ®æ¨¡å‹çš„åˆ†ç¦»ï¼šä½¿ç”¨ä¸åŒçš„è§†å›¾å¯¹ç›¸åŒçš„æ•°æ®è¿›è¡Œå±•ç¤ºï¼›åˆ†ç¦»å¯è§†å’Œä¸å¯è§†çš„ç»„ä»¶ï¼Œèƒ½å¤Ÿå¯¹æ¨¡å‹è¿›è¡Œç‹¬ç«‹æµ‹è¯•ã€‚å› ä¸ºåˆ†ç¦»äº†å¯è§†ç»„ä»¶å‡å°‘äº†å¤–éƒ¨ï¼ˆæ•°æ®åº“ä¹Ÿæ˜¯ä¸€ç§å¤–éƒ¨ç»„ä»¶ï¼‰ä¾èµ–åˆ©äºæµ‹è¯•ã€‚</li><li>è§†å›¾å’Œè¡¨ç°é€»è¾‘(Controller)çš„åˆ†ç¦»ï¼šControlleræ˜¯ä¸€ä¸ªè¡¨ç°é€»è¾‘çš„ç»„ä»¶ï¼Œå¹¶éä¸€ä¸ªä¸šåŠ¡é€»è¾‘ç»„ä»¶ã€‚MVCå¯ä»¥ä½œä¸ºè¡¨ç°æ¨¡å¼ä¹Ÿå¯ä»¥ä½œä¸ºå»ºæ„æ¨¡å¼ï¼Œæ„å‘³è¿™Controllerä¹Ÿå¯ä»¥æ˜¯ä¸šåŠ¡é€»è¾‘ã€‚åˆ†ç¦»é€»è¾‘å’Œå…·ä½“å±•ç¤ºï¼Œèƒ½å¤Ÿå¯¹é€»è¾‘è¿›è¡Œç‹¬ç«‹æµ‹è¯•ã€‚</li></ol><p>MVCä¼˜ç¼ºç‚¹ï¼š </p><ul><li>ä¼˜ç‚¹ï¼šä½è€¦åˆã€é‡ç”¨æ€§é«˜ã€ç”Ÿå‘½å‘¨æœŸæˆæœ¬ä½ã€éƒ¨ç½²å¿«ã€å¯ç»´æŠ¤æ€§é«˜</li><li>ç¼ºç‚¹ï¼šæ²¡æœ‰æ˜ç¡®çš„å®šä¹‰ã€ä¸é€‚åˆå°ã€ä¸­å‹åº”ç”¨ç¨‹åºã€å¢åŠ ç³»ç»Ÿç»“æ„å’Œå®ç°çš„å¤æ‚æ€§ã€è§†å›¾å¯¹æ¨¡å‹æ•°æ®çš„ä½æ•ˆç‡è®¿é—®</li></ul><h2 id="ä½œä¸š"><a href="#ä½œä¸š" class="headerlink" title="ä½œä¸š"></a>ä½œä¸š</h2><p>åœ¨ä¸Šä¸€ä¸ªæ–‡æ¡£ä¸­å·²ç»å£°æ˜ï¼Œè¿™ä¸¤èŠ‚è¯¾åªè¦äº¤ä¸€ä¸ªä½œä¸šå°±è¡Œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> JavaWeb </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é›†è®­ </tag>
            
            <tag> JavaWeb </tag>
            
            <tag> jsp </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
